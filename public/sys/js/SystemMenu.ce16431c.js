(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SystemMenu"],{1498:function(e,t,n){"use strict";var a=n("49fd"),o=n.n(a);o.a},"49fd":function(e,t,n){},"5aee":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-body"},[n("el-input",{staticStyle:{position:"relative"},attrs:{clearable:"",placeholder:"请输入图标名称"},on:{clear:e.filterIcons},nativeOn:{input:function(t){return e.filterIcons(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[n("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),n("div",{staticClass:"icon-list"},e._l(e.iconList,(function(t,a){return n("div",{key:a,on:{click:function(n){return e.selectedIcon(t)}}},[n("svg-icon",{staticStyle:{height:"30px",width:"16px"},attrs:{"icon-class":t}}),n("span",[e._v(e._s(t))])],1)})),0)],1)},o=[],r=(n("6762"),n("2fdb"),n("7f7f"),n("4917"),n("ac6a"),n("51ff")),i=function(e){return e.keys()},l=/\.\/(.*)\.svg/,s=i(r).map((function(e){return e.match(l)[1]})),c=s,u={name:"IconSelect",data:function(){return{name:"",iconList:c}},methods:{filterIcons:function(){var e=this;this.iconList=c,this.name&&(this.iconList=this.iconList.filter((function(t){return t.includes(e.name)})))},selectedIcon:function(e){this.$emit("selected",e),document.body.click()},reset:function(){this.name="",this.iconList=c}}},d=u,p=(n("1498"),n("2877")),m=Object(p["a"])(d,a,o,!1,null,"2eaaa5c8",null);t["a"]=m.exports},f2e9:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return s}));var a=n("97af");function o(e,t){return Object(a["a"])({url:"/sys/".concat(e,"Menu/list"),method:"post",data:t})}function r(e,t){return Object(a["a"])({url:"/sys/".concat(e,"Menu/edit"),method:"post",data:t})}function i(e,t){return Object(a["a"])({url:"/sys/".concat(e,"Menu/add"),method:"post",data:t})}function l(e,t){return Object(a["a"])({url:"/sys/".concat(e,"Menu/delete"),method:"post",data:t})}function s(e,t){return Object(a["a"])({url:"/sys/".concat(e,"Menu/list"),method:"post",data:t})}},f794:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabs,(function(e){return n("el-tab-pane",{key:e.path,attrs:{label:e.name,name:e.path}},[n("menu-item",{key:e.path,attrs:{path:e.path}})],1)})),1)},o=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",["mes"===e.path||"sys"===e.path?n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.path+":menu:add"],expression:"[`${path}:menu:add`]"}],attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")]):n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),n("el-row",[n("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData,"default-expand-all":"","row-key":"id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[n("el-table-column",{attrs:{prop:"name",label:"菜单标题"}}),n("el-table-column",{attrs:{prop:"icon",label:"图标",align:"center",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("svg-icon",{attrs:{"icon-class":e.row.icon?e.row.icon:""}})]}}])}),n("el-table-column",{attrs:{prop:"ident",label:"唯一标识",align:"center"}}),n("el-table-column",{attrs:{prop:"resoureType",label:"资源类型",align:"center"}}),n("el-table-column",{attrs:{prop:"permission",label:"权限标识",align:"center"}}),n("el-table-column",{attrs:{prop:"isShow",label:"可见",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isShow?n("span",[e._v("是")]):n("span",[e._v("否")])]}}])}),n("el-table-column",{attrs:{prop:"cache",label:"外链",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isFrame?n("span",[e._v("是")]):n("span",[e._v("否")])]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"140px;",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return["sys"===e.path||"mes"===e.path?[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.path+":menu:edit"],expression:"[`${path}:menu:edit`]"}],attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(n){return e.handleUpdate(t.row)}}}),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.path+":menu:delete"],expression:"[`${path}:menu:delete`]"}],attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.row)}}})]:[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(n){return e.handleUpdate(t.row)}}}),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.row)}}})]]}}])})],1)],1),n("el-dialog",{attrs:{title:"add"===e.dialogType?"新增菜单":"修改菜单","close-on-click-modal":!1,width:"580px","append-to-body":"","lock-scroll":!1,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"form",attrs:{inline:!0,model:e.form,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"菜单类型",prop:"resoureType"}},[n("el-radio-group",{staticStyle:{width:"350px"},model:{value:e.form.resoureType,callback:function(t){e.$set(e.form,"resoureType",t)},expression:"form.resoureType"}},[n("el-radio-button",{attrs:{label:"module"}},[e._v("模块")]),n("el-radio-button",{attrs:{label:"url"}},[e._v("页面")]),n("el-radio-button",{attrs:{label:"btn"}},[e._v("按钮")])],1)],1),"btn"!==e.form.resoureType?[n("el-form-item",{attrs:{label:"菜单图标",prop:"icon"}},[n("el-popover",{attrs:{placement:"bottom-start",width:"450",trigger:"click"},on:{show:function(t){return e.$refs["iconSelect"].reset()}}},[n("IconSelect",{ref:"iconSelect",on:{selected:e.selected}}),n("el-input",{staticStyle:{width:"450px"},attrs:{slot:"reference",placeholder:"点击选择图标",readonly:""},slot:"reference",model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}},[e.form.icon?n("svg-icon",{staticClass:"el-input__icon",staticStyle:{height:"32px",width:"16px"},attrs:{slot:"prefix","icon-class":e.form.icon},slot:"prefix"}):n("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"prefix"},slot:"prefix"})],1)],1)],1),n("el-form-item",{attrs:{label:"菜单标题",prop:"name"}},[n("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"菜单标题"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"唯一标识",prop:"ident"}},[n("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"唯一标识"},model:{value:e.form.ident,callback:function(t){e.$set(e.form,"ident",t)},expression:"form.ident"}})],1),n("el-form-item",{attrs:{label:"外链菜单",prop:"isFrame"}},[n("el-radio-group",{model:{value:e.form.isFrame,callback:function(t){e.$set(e.form,"isFrame",t)},expression:"form.isFrame"}},[n("el-radio-button",{attrs:{label:!0}},[e._v("是")]),n("el-radio-button",{attrs:{label:!1}},[e._v("否")])],1)],1),"url"===e.form.resoureType?n("el-form-item",{attrs:{label:"菜单缓存",prop:"tabCache"}},[n("el-radio-group",{model:{value:e.form.tabCache,callback:function(t){e.$set(e.form,"tabCache",t)},expression:"form.tabCache"}},[n("el-radio-button",{attrs:{label:!0}},[e._v("是")]),n("el-radio-button",{attrs:{label:!1}},[e._v("否")])],1)],1):e._e(),n("el-form-item",{attrs:{label:"菜单显示",prop:"isShow"}},[n("el-radio-group",{model:{value:e.form.isShow,callback:function(t){e.$set(e.form,"isShow",t)},expression:"form.isShow"}},[n("el-radio-button",{attrs:{label:!0}},[e._v("是")]),n("el-radio-button",{attrs:{label:!1}},[e._v("否")])],1)],1),n("el-form-item",{attrs:{label:"路由地址",prop:"href"}},[n("el-input",{attrs:{placeholder:"路由地址"},model:{value:e.form.href,callback:function(t){e.$set(e.form,"href",t)},expression:"form.href"}})],1),n("el-form-item",{attrs:{label:"菜单排序",prop:"sort"}},[n("el-input-number",{staticStyle:{width:"178px"},attrs:{min:0,max:999,"controls-position":"right"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",e._n(t))},expression:"form.sort"}})],1)]:[n("el-form-item",{attrs:{label:"按钮名称",prop:"name"}},[n("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"按钮名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"权限标识",prop:"permission"}},[n("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"权限标识"},model:{value:e.form.permission,callback:function(t){e.$set(e.form,"permission",t)},expression:"form.permission"}})],1)],"add"===e.dialogType?n("el-form-item",{attrs:{label:"上级类目",prop:"parentId"}},[n("treeselect",{staticStyle:{width:"450px"},attrs:{options:e.selectPlace,"load-options":e.loadMenus,placeholder:"选择上级类目"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1):e._e()],2),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.dialogComfirm}},[e._v("确 定")]),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],l=(n("8e6e"),n("ac6a"),n("456d"),n("a481"),n("a8db")),s=n("bd86"),c=n("2f62"),u=n("ca17"),d=n.n(u),p=(n("542c"),n("5aee")),m=n("f2e9");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={resoureType:"module",name:"",icon:"",ident:"",href:"",isShow:!0,tabCache:!0,isFrame:!1,sort:999,parentId:0,permission:null},v={name:"SystemMenuItem",components:{IconSelect:p["a"],Treeselect:d.a},props:{path:{required:!0,type:String}},data:function(){return{tableData:[],selectPlace:[{id:0,label:"顶级项目",children:null}],dialogVisible:!1,dialogType:"add",form:b,rules:{}}},computed:h({},Object(c["b"])({addRoutes:"addRoutes"})),mounted:function(){this.init()},methods:{init:function(){var e=this;Object(m["c"])(this.path,{}).then((function(t){var n=t.code,a=t.data;n||(e.tableData=a)}))},handleAdd:function(){this.form=Object.assign({},h({},b)),this.dialogType="add",this.dialogVisible=!0},handleUpdate:function(e){this.form=Object.assign({},h({},e)),this.dialogType="updata",this.dialogVisible=!0},dialogComfirm:function(){var e=this;if("add"===this.dialogType)Object(m["a"])(this.path,h({},this.form)).then((function(t){var n=t.code;n||(e.$message({message:"新增成功",type:"success"}),e.init(),e.dialogVisible=!1)}));else{var t=this.form,n=(t.children,Object(l["a"])(t,["children"]));Object(m["e"])(this.path,h({},n)).then((function(t){var n=t.code;n||(e.$message({message:"修改成功",type:"success"}),e.dialogVisible=!1,e.init())}))}},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"btn-custom-cancel",type:"warning",lockScroll:!1}).then((function(){e.id&&Object(m["b"])(t.path,{id:e.id}).then((function(e){var n=e.code;n||(t.$message({message:"删除成功",type:"success"}),t.init())}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},loadMenus:function(e){var t=e.action,n=e.parentNode,a=e.callback;if(t===u["LOAD_CHILDREN_OPTIONS"]){var o=0===n.id?{}:{id:n.id};Object(m["d"])(this.path,o).then((function(e){if(!e.code){var t=e.data;t=JSON.parse(JSON.stringify(t).replace(/name/g,"label").replace(/children/g,"children")),n.children=t.map((function(e){return e.hasleaf?e.children=null:delete e.children,e}))}setTimeout((function(){a()}),100)}))}},selected:function(e){this.form.icon=e}}},y=v,g=n("2877"),w=Object(g["a"])(y,r,i,!1,null,"f9593d62",null),x=w.exports,_={name:"SystemMenu",components:{MenuItem:x},data:function(){return{activeName:"sys",tabs:[{name:"系统配置",path:"sys"},{name:"WMS",path:"wms"}]}}},k=_,O=Object(g["a"])(k,a,o,!1,null,"98825dd4",null);t["default"]=O.exports}}]);