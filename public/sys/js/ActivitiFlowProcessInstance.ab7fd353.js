(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ActivitiFlowProcessInstance"],{1790:function(e,t,n){"use strict";t["a"]={data:function(){return{pageInfo:{current:1,size:10},pages:1,total:0}},methods:{initPage:function(e){var t=e.total,n=e.pageNum,a=e.pageSize;this.pageInfo.current=n,this.pageInfo.size=a,this.total=t},indexMethod:function(e){var t=this.pageInfo,n=t.current,a=t.size;return e+1+(n-1)*a},resetPage:function(){this.pageInfo={current:1,size:10},this.total=0}}}},"1fec":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"clearfix top-filter"},[n("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""}},[n("el-form-item",{staticClass:"fl",attrs:{prop:"userCode"}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{placeholder:"按用户名搜索"},model:{value:e.query.userCode,callback:function(t){e.$set(e.query,"userCode",t)},expression:"query.userCode"}})],1),n("el-form-item",{staticClass:"fl",attrs:{prop:"formName"}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{placeholder:"按流程名称搜索"},model:{value:e.query.formName,callback:function(t){e.$set(e.query,"formName",t)},expression:"query.formName"}})],1),n("el-button",{staticClass:"filter-item fl",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.init}},[e._v("搜索")]),n("el-button",{staticClass:"filter-item fl",attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")])],1)],1),n("el-row",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[n("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号"}}),e._l(e.formThead,(function(e){return n("el-table-column",{key:e.label,attrs:{label:e.label,prop:e.prop,align:"center"}})})),n("el-table-column",{attrs:{label:"操作",align:"center",width:"220px;",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.handleTrack(t.row)}}},[e._v("跟踪")]),n("el-button",{attrs:{type:t.row.suspensionType},on:{click:function(n){return e.handleOperation(t.row,t.row.suspensionName)}}},[e._v(e._s(t.row.suspensionName))]),n("el-button",{attrs:{type:"danger"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],2)],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}}),n("el-dialog",{attrs:{title:"流程跟踪","close-on-click-modal":!1,width:"850px","append-to-body":"","lock-scroll":!1,visible:e.dialogVisible,"before-close":e.beforeClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-image",{staticStyle:{width:"800px"},attrs:{src:e.url,"preview-src-list":e.srcList}})],1)],1)},r=[],o=(n("8e6e"),n("ac6a"),n("456d"),n("a8db")),i=n("bd86"),s=n("1790"),c=n("333d"),u=n("c6e2");function l(e){return Object(u["a"])({url:"/flow-manager/app/rest/processIns/pageList",method:"post",data:e})}function p(e){return Object(u["a"])({url:"/flow-manager/app/rest/processIns/del",method:"post",data:e})}function f(e){return Object(u["a"])({url:"/flow-manager/app/rest/processIns/saProcessInstanceById",method:"post",data:e})}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={name:"ActivitiFlowProcessInstance",components:{Pagination:c["a"]},mixins:[s["a"]],data:function(){return{title:"实例",loading:!1,query:{userCode:"",formName:""},tableData:[],formThead:[{label:"名称",prop:"formName"},{label:"系统",prop:"systemSn"},{label:"发起人",prop:"starterId"},{label:"发起时间",prop:"startTime"},{label:"待办",prop:"approver"},{label:"结束时间",prop:"endTime"}],dialogVisible:!1,url:"",srcList:[]}},mounted:function(){this.init()},methods:{init:function(){var e=this;return new Promise((function(t,n){e.loading=!0,l(m({},e.query,{page:m({},e.pageInfo)})).then((function(n){var a=n.code,r=n.data;if(!a){var i=r.list,s=Object(o["a"])(r,["list"]);e.initPage(s),e.tableData=i.map((function(e){null===e.endTime&&(e.endTime="未结束");var t={};return t=1===e.suspensionState?{suspensionType:"info",suspensionName:"挂起"}:{suspensionType:"success",suspensionName:"激活"},m({},e,{},t)}))}e.loading=!1,t(n)})).catch((function(t){e.loading=!1,n(t)}))}))},handleOperation:function(e,t){var n=this,a=e.id,r=e.suspensionState;this.$confirm("此操作将".concat(t,"此条").concat(this.title,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"btn-custom-cancel",type:"warning",lockScroll:!1}).then((function(){f({suspensionState:r,id:a}).then((function(e){var a=e.code;a||(n.$message({message:"".concat(t,"成功"),type:"success"}),n.init())}))})).catch((function(){n.$message({type:"info",message:"已取消".concat(t)})}))},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除此条".concat(this.title,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"btn-custom-cancel",type:"warning",lockScroll:!1}).then((function(){p({ids:[e.id]}).then((function(e){var n=e.code;n||(t.$message({message:"删除成功",type:"success"}),t.init())}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleTrack:function(e){var t="".concat("https://192.168.1.7:9005/api/flowable","/flow-manager/app/rest/processIns/image/").concat(e.id);this.url=t,this.srcList=[t],this.dialogVisible=!0},resetForm:function(e){this.$refs[e].resetFields(),this.init()},beforeClose:function(){this.dialogVisible=!1,this.url="",this.srcList=[]}}},b=g,h=n("2877"),y=Object(h["a"])(b,a,r,!1,null,"49b564d0",null);t["default"]=y.exports},"32a6":function(e,t,n){var a=n("241e"),r=n("c3a1");n("ce7e")("keys",(function(){return function(e){return r(a(e))}}))},"333d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{class:"pagination-container "+e.className},[n("el-pagination",{class:e.pagiationClassName,attrs:{background:e.background,"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:e.layout,total:e.total,"hide-on-single-page":e.hideOnSinglePage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],o=(n("c5f6"),n("ed08")),i={name:"PaginationCom",components:{},props:{className:{type:String,default:"clearfix"},total:{required:!0,type:Number,default:10},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[10,20,30,50,100]}},layout:{type:String,default:"total, prev, pager, next, jumper, sizes"},background:{type:Boolean,default:!1},hideOnSinglePage:{type:Boolean,default:!1},autoScroll:{type:Boolean,default:!0}},computed:{pagiationClassName:function(){return"clearfix"===this.className?"fr":""},currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("update:limit",e),this.$emit("pagination"),this.autoScroll&&Object(o["c"])(0)},handleCurrentChange:function(e){this.$emit("pagination"),this.autoScroll&&Object(o["c"])(0)}}},s=i,c=n("2877"),u=Object(c["a"])(s,a,r,!1,null,null,null);t["a"]=u.exports},"5d58":function(e,t,n){e.exports=n("d8d6")},"67bb":function(e,t,n){e.exports=n("f921")},7618:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("5d58"),r=n.n(a),o=n("67bb"),i=n.n(o);function s(e){return s="function"===typeof i.a&&"symbol"===typeof r.a?function(e){return typeof e}:function(e){return e&&"function"===typeof i.a&&e.constructor===i.a&&e!==i.a.prototype?"symbol":typeof e},s(e)}},"8aae":function(e,t,n){n("32a6"),e.exports=n("584a").Object.keys},a4bb:function(e,t,n){e.exports=n("8aae")},a8db:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("e265"),r=n.n(a),o=n("a4bb"),i=n.n(o);function s(e,t){if(null==e)return{};var n,a,r={},o=i()(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}function c(e,t){if(null==e)return{};var n,a,o=s(e,t);if(r.a){var i=r()(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},c6e2:function(e,t,n){"use strict";n("6b54");var a=n("bc3a"),r=n.n(a),o=n("5c96"),i=n("4360"),s=n("5f87"),c={baseURL:"".concat("https://192.168.1.7:9005/api/flowable"),withCredentials:!0,timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}},u=r.a.create(c),l=!1;u.interceptors.request.use((function(e){return i["a"].getters.token&&(e.headers["Authorization"]="".concat(i["a"].getters.token)),e}),(function(e){Promise.reject(e)})),u.interceptors.response.use((function(e){return e&&e.data&&e.data.code&&999===e.data.code&&Object(o["Message"])({message:e.data.msg,type:"error",duration:5e3}),e.data}),(function(e){var t=0;try{t=e.response.status}catch(n){if(-1!==e.toString().indexOf("Error: timeout"))return Object(o["Message"])({message:"网络请求超时",type:"error",duration:5e3}),Promise.reject(e)}return 401===t||403===t?(l||(l=!0,Object(o["Message"])({message:"登录信息已过期或者没有访问权限",type:"error",duration:5e3}),setTimeout((function(){l=!1}),5e3)),i["a"].dispatch("resetToken").then((function(){setTimeout((function(){window.location.href=Object(s["b"])()}),3e3)})),Promise.reject(e)):(Object(o["Message"])({message:e,type:"error",duration:5e3}),Promise.reject(e))})),t["a"]=u},ce7e:function(e,t,n){var a=n("63b6"),r=n("584a"),o=n("294c");e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],i={};i[e]=t(n),a(a.S+a.F*o((function(){n(1)})),"Object",i)}},e265:function(e,t,n){e.exports=n("ed33")},ed08:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c}));n("8615"),n("ac6a"),n("6762"),n("2fdb"),n("c5f6"),n("a481"),n("6b54");var a=n("7618");function r(e,t){if(0===arguments.length)return null;var n,r=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(a["a"])(e)?n=e:("string"===typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"===typeof e&&10===e.toString().length&&(e*=1e3),n=new Date(e));var o={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},i=r.replace(/{(y|m|d|h|i|s|a)+}/g,(function(e,t){var n=o[t];return"a"===t?["日","一","二","三","四","五","六"][n]:(e.length>0&&n<10&&(n="0"+n),n||0)}));return i}function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}Math.easeInOutQuad=function(e,t,n,a){return e/=a/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0,a=s(),r=e-a,c=20,u=0,l=function e(){u+=c;var s=Math.easeInOutQuad(u,a,r,t);o(s),u<t?i(e):n&&"function"===typeof n&&n()};l()}},ed33:function(e,t,n){n("014b"),e.exports=n("584a").Object.getOwnPropertySymbols}}]);