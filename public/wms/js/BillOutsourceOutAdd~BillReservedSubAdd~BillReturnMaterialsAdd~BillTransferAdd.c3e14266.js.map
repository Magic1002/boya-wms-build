{"version":3,"sources":["webpack:///./node_modules/lodash-es/_root.js","webpack:///./node_modules/lodash-es/stubFalse.js","webpack:///./node_modules/core-js/library/modules/es6.object.keys.js","webpack:///./node_modules/qs/lib/stringify.js","webpack:///./node_modules/qs/lib/index.js","webpack:///./node_modules/lodash-es/isBuffer.js","webpack:///./node_modules/lodash-es/_freeGlobal.js","webpack:///./node_modules/@antv/x6-common/es/polyfill/index.js","webpack:///./src/components/AuditWrapper/index.vue?f227","webpack:///./node_modules/core-js/library/fn/object/keys.js","webpack:///./node_modules/qs/lib/parse.js","webpack:///./src/components/AuditWrapper/TaskTimeLine.vue?ffb8","webpack:///./node_modules/@babel/runtime-corejs2/core-js/object/keys.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/objectWithoutProperties.js","webpack:///./node_modules/qs/lib/formats.js","webpack:///./node_modules/lodash-es/_nodeUtil.js","webpack:///./node_modules/core-js/library/modules/_object-sap.js","webpack:///./node_modules/qs/lib/utils.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///./node_modules/lodash-es/_cloneBuffer.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/object/get-own-property-symbols.js","webpack:///./node_modules/core-js/library/fn/object/get-own-property-symbols.js","webpack:///./src/components/AuditWrapper/index.vue?2b26","webpack:///./src/components/AuditWrapper/TaskTimeLine.vue?9f9f","webpack:///src/components/AuditWrapper/TaskTimeLine.vue","webpack:///./src/components/AuditWrapper/TaskTimeLine.vue?e3f8","webpack:///./src/components/AuditWrapper/TaskTimeLine.vue","webpack:///./src/mixins/task.js","webpack:///./node_modules/@antv/x6-common/es/common/disposable.js","webpack:///./node_modules/lodash-es/isObject.js","webpack:///./node_modules/lodash-es/now.js","webpack:///./node_modules/lodash-es/_trimmedEndIndex.js","webpack:///./node_modules/lodash-es/_baseTrim.js","webpack:///./node_modules/lodash-es/_Symbol.js","webpack:///./node_modules/lodash-es/_getRawTag.js","webpack:///./node_modules/lodash-es/_objectToString.js","webpack:///./node_modules/lodash-es/_baseGetTag.js","webpack:///./node_modules/lodash-es/isObjectLike.js","webpack:///./node_modules/lodash-es/isSymbol.js","webpack:///./node_modules/lodash-es/toNumber.js","webpack:///./node_modules/lodash-es/debounce.js","webpack:///./node_modules/lodash-es/throttle.js","webpack:///./node_modules/@antv/x6-common/es/function/function.js","webpack:///./node_modules/@antv/x6-common/es/function/async.js","webpack:///./node_modules/@antv/x6-common/es/event/util.js","webpack:///./node_modules/@antv/x6-common/es/event/events.js","webpack:///./node_modules/lodash-es/_baseHas.js","webpack:///./node_modules/lodash-es/isArray.js","webpack:///./node_modules/lodash-es/_isKey.js","webpack:///./node_modules/lodash-es/isFunction.js","webpack:///./node_modules/lodash-es/_coreJsData.js","webpack:///./node_modules/lodash-es/_isMasked.js","webpack:///./node_modules/lodash-es/_toSource.js","webpack:///./node_modules/lodash-es/_baseIsNative.js","webpack:///./node_modules/lodash-es/_getValue.js","webpack:///./node_modules/lodash-es/_getNative.js","webpack:///./node_modules/lodash-es/_nativeCreate.js","webpack:///./node_modules/lodash-es/_hashClear.js","webpack:///./node_modules/lodash-es/_hashDelete.js","webpack:///./node_modules/lodash-es/_hashGet.js","webpack:///./node_modules/lodash-es/_hashHas.js","webpack:///./node_modules/lodash-es/_hashSet.js","webpack:///./node_modules/lodash-es/_Hash.js","webpack:///./node_modules/lodash-es/_listCacheClear.js","webpack:///./node_modules/lodash-es/eq.js","webpack:///./node_modules/lodash-es/_assocIndexOf.js","webpack:///./node_modules/lodash-es/_listCacheDelete.js","webpack:///./node_modules/lodash-es/_listCacheGet.js","webpack:///./node_modules/lodash-es/_listCacheHas.js","webpack:///./node_modules/lodash-es/_listCacheSet.js","webpack:///./node_modules/lodash-es/_ListCache.js","webpack:///./node_modules/lodash-es/_Map.js","webpack:///./node_modules/lodash-es/_mapCacheClear.js","webpack:///./node_modules/lodash-es/_isKeyable.js","webpack:///./node_modules/lodash-es/_getMapData.js","webpack:///./node_modules/lodash-es/_mapCacheDelete.js","webpack:///./node_modules/lodash-es/_mapCacheGet.js","webpack:///./node_modules/lodash-es/_mapCacheHas.js","webpack:///./node_modules/lodash-es/_mapCacheSet.js","webpack:///./node_modules/lodash-es/_MapCache.js","webpack:///./node_modules/lodash-es/memoize.js","webpack:///./node_modules/lodash-es/_memoizeCapped.js","webpack:///./node_modules/lodash-es/_stringToPath.js","webpack:///./node_modules/lodash-es/_arrayMap.js","webpack:///./node_modules/lodash-es/_baseToString.js","webpack:///./node_modules/lodash-es/toString.js","webpack:///./node_modules/lodash-es/_castPath.js","webpack:///./node_modules/lodash-es/_baseIsArguments.js","webpack:///./node_modules/lodash-es/isArguments.js","webpack:///./node_modules/lodash-es/_isIndex.js","webpack:///./node_modules/lodash-es/isLength.js","webpack:///./node_modules/lodash-es/_toKey.js","webpack:///./node_modules/lodash-es/_hasPath.js","webpack:///./node_modules/lodash-es/has.js","webpack:///./node_modules/lodash-es/_baseGet.js","webpack:///./node_modules/lodash-es/_defineProperty.js","webpack:///./node_modules/lodash-es/_baseAssignValue.js","webpack:///./node_modules/lodash-es/_assignValue.js","webpack:///./node_modules/lodash-es/_baseSet.js","webpack:///./node_modules/lodash-es/_basePickBy.js","webpack:///./node_modules/lodash-es/_baseHasIn.js","webpack:///./node_modules/lodash-es/hasIn.js","webpack:///./node_modules/lodash-es/_basePick.js","webpack:///./node_modules/lodash-es/_arrayPush.js","webpack:///./node_modules/lodash-es/_isFlattenable.js","webpack:///./node_modules/lodash-es/_baseFlatten.js","webpack:///./node_modules/lodash-es/flatten.js","webpack:///./node_modules/lodash-es/_apply.js","webpack:///./node_modules/lodash-es/_overRest.js","webpack:///./node_modules/lodash-es/constant.js","webpack:///./node_modules/lodash-es/identity.js","webpack:///./node_modules/lodash-es/_baseSetToString.js","webpack:///./node_modules/lodash-es/_shortOut.js","webpack:///./node_modules/lodash-es/_setToString.js","webpack:///./node_modules/lodash-es/_flatRest.js","webpack:///./node_modules/lodash-es/pick.js","webpack:///./node_modules/lodash-es/_stackClear.js","webpack:///./node_modules/lodash-es/_stackDelete.js","webpack:///./node_modules/lodash-es/_stackGet.js","webpack:///./node_modules/lodash-es/_stackHas.js","webpack:///./node_modules/lodash-es/_stackSet.js","webpack:///./node_modules/lodash-es/_Stack.js","webpack:///./node_modules/lodash-es/_assignMergeValue.js","webpack:///./node_modules/lodash-es/_createBaseFor.js","webpack:///./node_modules/lodash-es/_baseFor.js","webpack:///./node_modules/lodash-es/_Uint8Array.js","webpack:///./node_modules/lodash-es/_cloneArrayBuffer.js","webpack:///./node_modules/lodash-es/_cloneTypedArray.js","webpack:///./node_modules/lodash-es/_copyArray.js","webpack:///./node_modules/lodash-es/_baseCreate.js","webpack:///./node_modules/lodash-es/_overArg.js","webpack:///./node_modules/lodash-es/_getPrototype.js","webpack:///./node_modules/lodash-es/_isPrototype.js","webpack:///./node_modules/lodash-es/_initCloneObject.js","webpack:///./node_modules/lodash-es/isArrayLike.js","webpack:///./node_modules/lodash-es/isArrayLikeObject.js","webpack:///./node_modules/lodash-es/isPlainObject.js","webpack:///./node_modules/lodash-es/_baseIsTypedArray.js","webpack:///./node_modules/lodash-es/_baseUnary.js","webpack:///./node_modules/lodash-es/isTypedArray.js","webpack:///./node_modules/lodash-es/_safeGet.js","webpack:///./node_modules/lodash-es/_copyObject.js","webpack:///./node_modules/lodash-es/_baseTimes.js","webpack:///./node_modules/lodash-es/_arrayLikeKeys.js","webpack:///./node_modules/lodash-es/_nativeKeysIn.js","webpack:///./node_modules/lodash-es/_baseKeysIn.js","webpack:///./node_modules/lodash-es/keysIn.js","webpack:///./node_modules/lodash-es/toPlainObject.js","webpack:///./node_modules/lodash-es/_baseMergeDeep.js","webpack:///./node_modules/lodash-es/_baseMerge.js","webpack:///./node_modules/lodash-es/_baseRest.js","webpack:///./node_modules/lodash-es/_isIterateeCall.js","webpack:///./node_modules/lodash-es/_createAssigner.js","webpack:///./node_modules/lodash-es/merge.js","webpack:///./node_modules/lodash-es/_setCacheAdd.js","webpack:///./node_modules/lodash-es/_setCacheHas.js","webpack:///./node_modules/lodash-es/_SetCache.js","webpack:///./node_modules/lodash-es/_arraySome.js","webpack:///./node_modules/lodash-es/_cacheHas.js","webpack:///./node_modules/lodash-es/_equalArrays.js","webpack:///./node_modules/lodash-es/_mapToArray.js","webpack:///./node_modules/lodash-es/_setToArray.js","webpack:///./node_modules/lodash-es/_equalByTag.js","webpack:///./node_modules/lodash-es/_baseGetAllKeys.js","webpack:///./node_modules/lodash-es/_arrayFilter.js","webpack:///./node_modules/lodash-es/stubArray.js","webpack:///./node_modules/lodash-es/_getSymbols.js","webpack:///./node_modules/lodash-es/_nativeKeys.js","webpack:///./node_modules/lodash-es/_baseKeys.js","webpack:///./node_modules/lodash-es/keys.js","webpack:///./node_modules/lodash-es/_getAllKeys.js","webpack:///./node_modules/lodash-es/_equalObjects.js","webpack:///./node_modules/lodash-es/_DataView.js","webpack:///./node_modules/lodash-es/_Promise.js","webpack:///./node_modules/lodash-es/_Set.js","webpack:///./node_modules/lodash-es/_WeakMap.js","webpack:///./node_modules/lodash-es/_getTag.js","webpack:///./node_modules/lodash-es/_baseIsEqualDeep.js","webpack:///./node_modules/lodash-es/_baseIsEqual.js","webpack:///./node_modules/lodash-es/isEqual.js","webpack:///./node_modules/lodash-es/isEmpty.js","webpack:///./node_modules/lodash-es/_arrayEach.js","webpack:///./node_modules/lodash-es/_baseAssign.js","webpack:///./node_modules/lodash-es/_baseAssignIn.js","webpack:///./node_modules/lodash-es/_copySymbols.js","webpack:///./node_modules/lodash-es/_getSymbolsIn.js","webpack:///./node_modules/lodash-es/_copySymbolsIn.js","webpack:///./node_modules/lodash-es/_getAllKeysIn.js","webpack:///./node_modules/lodash-es/_initCloneArray.js","webpack:///./node_modules/lodash-es/_cloneDataView.js","webpack:///./node_modules/lodash-es/_cloneRegExp.js","webpack:///./node_modules/lodash-es/_cloneSymbol.js","webpack:///./node_modules/lodash-es/_initCloneByTag.js","webpack:///./node_modules/lodash-es/_baseIsMap.js","webpack:///./node_modules/lodash-es/isMap.js","webpack:///./node_modules/lodash-es/_baseIsSet.js","webpack:///./node_modules/lodash-es/isSet.js","webpack:///./node_modules/lodash-es/_baseClone.js","webpack:///./node_modules/lodash-es/clone.js","webpack:///./node_modules/lodash-es/cloneDeep.js","webpack:///./node_modules/lodash-es/defaults.js","webpack:///./node_modules/lodash-es/_customDefaultsMerge.js","webpack:///./node_modules/lodash-es/mergeWith.js","webpack:///./node_modules/lodash-es/defaultsDeep.js","webpack:///./node_modules/@antv/x6-common/es/object/mixins.js","webpack:///./node_modules/@antv/x6-common/es/object/inherit.js","webpack:///./node_modules/@antv/x6-common/es/object/object.js","webpack:///./node_modules/@antv/x6-common/es/common/basecoat.js","webpack:///./node_modules/lodash-es/_baseFindIndex.js","webpack:///./node_modules/lodash-es/_baseIsNaN.js","webpack:///./node_modules/lodash-es/_strictIndexOf.js","webpack:///./node_modules/lodash-es/_baseIndexOf.js","webpack:///./node_modules/lodash-es/_arrayIncludes.js","webpack:///./node_modules/lodash-es/_arrayIncludesWith.js","webpack:///./node_modules/lodash-es/noop.js","webpack:///./node_modules/lodash-es/_createSet.js","webpack:///./node_modules/lodash-es/_baseUniq.js","webpack:///./node_modules/lodash-es/uniq.js","webpack:///./node_modules/lodash-es/union.js","webpack:///./node_modules/lodash-es/_baseSortedIndexBy.js","webpack:///./node_modules/lodash-es/_baseSortedIndex.js","webpack:///./node_modules/lodash-es/sortedIndex.js","webpack:///./node_modules/lodash-es/_baseIsMatch.js","webpack:///./node_modules/lodash-es/_isStrictComparable.js","webpack:///./node_modules/lodash-es/_getMatchData.js","webpack:///./node_modules/lodash-es/_matchesStrictComparable.js","webpack:///./node_modules/lodash-es/_baseMatches.js","webpack:///./node_modules/lodash-es/get.js","webpack:///./node_modules/lodash-es/_baseMatchesProperty.js","webpack:///./node_modules/lodash-es/_baseProperty.js","webpack:///./node_modules/lodash-es/_basePropertyDeep.js","webpack:///./node_modules/lodash-es/property.js","webpack:///./node_modules/lodash-es/_baseIteratee.js","webpack:///./node_modules/lodash-es/sortedIndexBy.js","webpack:///./node_modules/lodash-es/_baseForOwn.js","webpack:///./node_modules/lodash-es/_createBaseEach.js","webpack:///./node_modules/lodash-es/_baseEach.js","webpack:///./node_modules/lodash-es/_baseMap.js","webpack:///./node_modules/lodash-es/_baseSortBy.js","webpack:///./node_modules/lodash-es/_compareAscending.js","webpack:///./node_modules/lodash-es/_compareMultiple.js","webpack:///./node_modules/lodash-es/_baseOrderBy.js","webpack:///./node_modules/lodash-es/sortBy.js","webpack:///./node_modules/lodash-es/_arrayAggregator.js","webpack:///./node_modules/lodash-es/_baseAggregator.js","webpack:///./node_modules/lodash-es/_createAggregator.js","webpack:///./node_modules/lodash-es/groupBy.js","webpack:///./node_modules/lodash-es/_baseDifference.js","webpack:///./node_modules/lodash-es/difference.js","webpack:///./node_modules/lodash-es/_baseExtremum.js","webpack:///./node_modules/lodash-es/_baseGt.js","webpack:///./node_modules/lodash-es/max.js","webpack:///./node_modules/lodash-es/uniqueId.js","webpack:///./node_modules/lodash-es/_arrayReduce.js","webpack:///./node_modules/lodash-es/_basePropertyOf.js","webpack:///./node_modules/lodash-es/_deburrLetter.js","webpack:///./node_modules/lodash-es/deburr.js","webpack:///./node_modules/lodash-es/_asciiWords.js","webpack:///./node_modules/lodash-es/_hasUnicodeWord.js","webpack:///./node_modules/lodash-es/_unicodeWords.js","webpack:///./node_modules/lodash-es/words.js","webpack:///./node_modules/lodash-es/_createCompounder.js","webpack:///./node_modules/lodash-es/_baseSlice.js","webpack:///./node_modules/lodash-es/_castSlice.js","webpack:///./node_modules/lodash-es/_hasUnicode.js","webpack:///./node_modules/lodash-es/_asciiToArray.js","webpack:///./node_modules/lodash-es/_unicodeToArray.js","webpack:///./node_modules/lodash-es/_stringToArray.js","webpack:///./node_modules/lodash-es/_createCaseFirst.js","webpack:///./node_modules/lodash-es/upperFirst.js","webpack:///./node_modules/lodash-es/startCase.js","webpack:///./node_modules/lodash-es/capitalize.js","webpack:///./node_modules/lodash-es/camelCase.js","webpack:///./node_modules/lodash-es/upperCase.js","webpack:///./node_modules/lodash-es/lowerCase.js","webpack:///./node_modules/lodash-es/lowerFirst.js","webpack:///./node_modules/@antv/x6-common/es/string/format.js","webpack:///./node_modules/@antv/x6-common/es/string/hashcode.js","webpack:///./node_modules/@antv/x6-common/es/string/uuid.js","webpack:///./node_modules/@antv/x6-common/es/string/suggestion.js","webpack:///./node_modules/lodash-es/isNumber.js","webpack:///./node_modules/lodash-es/_baseClamp.js","webpack:///./node_modules/lodash-es/clamp.js","webpack:///./node_modules/@antv/x6-common/es/number/number.js","webpack:///./node_modules/@antv/x6-common/es/platform/index.js","webpack:///./node_modules/@antv/x6-common/es/dom/class.js","webpack:///./node_modules/@antv/x6-common/es/dom/elem.js","webpack:///./node_modules/@antv/x6-common/es/dom/attr.js","webpack:///./node_modules/@antv/x6-common/es/text/annotate.js","webpack:///./node_modules/@antv/x6-common/es/text/sanitize.js","webpack:///./node_modules/@antv/x6-common/es/datauri/index.js","webpack:///./node_modules/@antv/x6-common/es/unit/index.js","webpack:///./node_modules/@antv/x6-common/es/dom/prefix.js","webpack:///./node_modules/@antv/x6-common/es/dom/style.js","webpack:///./node_modules/@antv/x6-common/es/dom/selection.js","webpack:///./node_modules/@antv/x6-common/es/dom/css.js","webpack:///./node_modules/@antv/x6-common/es/dom/data.js","webpack:///./node_modules/@antv/x6-common/es/dom/prop.js","webpack:///./node_modules/@antv/x6-common/es/vector/index.js","webpack:///./node_modules/@antv/x6-common/es/dom/text.js","webpack:///./node_modules/@antv/x6-common/es/dom/path.js","webpack:///./node_modules/@antv/x6-common/es/dom/matrix.js","webpack:///./node_modules/@antv/x6-common/es/dom/transform.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/hook.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/store.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/util.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/special.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/object.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/core.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/main.js","webpack:///./node_modules/@antv/x6-common/es/dom/mousewheel.js","webpack:///./node_modules/@antv/x6-common/es/dom/position.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/sensors/util.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/sensors/object.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/sensors/observer.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/sensors/index.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/index.js","webpack:///./node_modules/@antv/x6-common/es/algorithm/dijkstra.js","webpack:///./node_modules/@antv/x6-common/es/modifier/index.js","webpack:///./node_modules/@antv/x6-common/es/animation/timing.js","webpack:///./node_modules/@antv/x6-common/es/animation/interp.js","webpack:///./node_modules/@antv/x6-common/es/algorithm/priorityqueue.js","webpack:///./node_modules/@antv/x6-common/es/color/index.js","webpack:///./node_modules/@antv/x6-common/es/dictionary/dictionary.js","webpack:///./node_modules/@antv/x6-common/es/css-loader/loader.js","webpack:///./node_modules/@antv/x6-geometry/es/angle.js","webpack:///./node_modules/@antv/x6-geometry/es/util.js","webpack:///./node_modules/@antv/x6-geometry/es/geometry.js","webpack:///./node_modules/@antv/x6-geometry/es/point.js","webpack:///./node_modules/@antv/x6-geometry/es/rectangle.js","webpack:///./node_modules/@antv/x6-geometry/es/line.js","webpack:///./node_modules/@antv/x6-geometry/es/ellipse.js","webpack:///./node_modules/@antv/x6-geometry/es/path/util.js","webpack:///./node_modules/@antv/x6-geometry/es/polyline.js","webpack:///./node_modules/@antv/x6-geometry/es/curve.js","webpack:///./node_modules/@antv/x6-geometry/es/path/segment.js","webpack:///./node_modules/@antv/x6-geometry/es/path/lineto.js","webpack:///./node_modules/@antv/x6-geometry/es/path/close.js","webpack:///./node_modules/@antv/x6-geometry/es/path/moveto.js","webpack:///./node_modules/@antv/x6-geometry/es/path/curveto.js","webpack:///./node_modules/@antv/x6-geometry/es/path/normalize.js","webpack:///./node_modules/@antv/x6-geometry/es/path/path.js","webpack:///./node_modules/@antv/x6/es/registry/registry.js","webpack:///./node_modules/@antv/x6/es/registry/grid/dot.js","webpack:///./node_modules/@antv/x6/es/registry/grid/fixed-dot.js","webpack:///./node_modules/@antv/x6/es/registry/grid/mesh.js","webpack:///./node_modules/@antv/x6/es/registry/grid/double-mesh.js","webpack:///./node_modules/@antv/x6/es/registry/grid/index.js","webpack:///./node_modules/@antv/x6/es/registry/background/flip-x.js","webpack:///./node_modules/@antv/x6/es/registry/background/flip-y.js","webpack:///./node_modules/@antv/x6/es/registry/background/flip-xy.js","webpack:///./node_modules/@antv/x6/es/registry/background/watermark.js","webpack:///./node_modules/@antv/x6/es/registry/background/index.js","webpack:///./node_modules/@antv/x6/es/registry/filter/index.js","webpack:///./node_modules/@antv/x6/es/registry/filter/util.js","webpack:///./node_modules/@antv/x6/es/registry/filter/outline.js","webpack:///./node_modules/@antv/x6/es/registry/filter/highlight.js","webpack:///./node_modules/@antv/x6/es/registry/filter/blur.js","webpack:///./node_modules/@antv/x6/es/registry/filter/drop-shadow.js","webpack:///./node_modules/@antv/x6/es/registry/filter/gray-scale.js","webpack:///./node_modules/@antv/x6/es/registry/filter/sepia.js","webpack:///./node_modules/@antv/x6/es/registry/filter/saturate.js","webpack:///./node_modules/@antv/x6/es/registry/filter/hue-rotate.js","webpack:///./node_modules/@antv/x6/es/registry/filter/invert.js","webpack:///./node_modules/@antv/x6/es/registry/filter/brightness.js","webpack:///./node_modules/@antv/x6/es/registry/filter/contrast.js","webpack:///./node_modules/@antv/x6/es/registry/attr/raw.js","webpack:///./node_modules/@antv/x6/es/registry/attr/ref.js","webpack:///./node_modules/@antv/x6/es/registry/attr/fill.js","webpack:///./node_modules/@antv/x6/es/registry/attr/stroke.js","webpack:///./node_modules/@antv/x6/es/registry/attr/text.js","webpack:///./node_modules/@antv/x6/es/registry/attr/title.js","webpack:///./node_modules/@antv/x6/es/registry/attr/align.js","webpack:///./node_modules/@antv/x6/es/registry/attr/style.js","webpack:///./node_modules/@antv/x6/es/registry/attr/html.js","webpack:///./node_modules/@antv/x6/es/registry/attr/filter.js","webpack:///./node_modules/@antv/x6/es/registry/attr/port.js","webpack:///./node_modules/@antv/x6/es/registry/marker/util.js","webpack:///./node_modules/@antv/x6/es/registry/marker/classic.js","webpack:///./node_modules/@antv/x6/es/registry/marker/diamond.js","webpack:///./node_modules/@antv/x6/es/registry/marker/path.js","webpack:///./node_modules/@antv/x6/es/registry/marker/cross.js","webpack:///./node_modules/@antv/x6/es/registry/marker/async.js","webpack:///./node_modules/@antv/x6/es/registry/marker/circle.js","webpack:///./node_modules/@antv/x6/es/registry/marker/ellipse.js","webpack:///./node_modules/@antv/x6/es/registry/marker/index.js","webpack:///./node_modules/@antv/x6/es/registry/attr/marker.js","webpack:///./node_modules/@antv/x6/es/registry/attr/connection.js","webpack:///./node_modules/@antv/x6/es/registry/attr/index.js","webpack:///./node_modules/@antv/x6/es/config/index.js","webpack:///./node_modules/@antv/x6/es/registry/highlighter/class.js","webpack:///./node_modules/@antv/x6/es/registry/highlighter/opacity.js","webpack:///./node_modules/@antv/x6/es/util/index.js","webpack:///./node_modules/@antv/x6/es/registry/highlighter/stroke.js","webpack:///./node_modules/@antv/x6/es/registry/highlighter/index.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/util.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/absolute.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/ellipse.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/line.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/index.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/util.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/side.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/inout.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/radial.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/index.js","webpack:///./node_modules/@antv/x6/es/view/view.js","webpack:///./node_modules/@antv/x6/es/view/markup.js","webpack:///./node_modules/@antv/x6/es/view/cache.js","webpack:///./node_modules/@antv/x6/es/view/attr.js","webpack:///./node_modules/@antv/x6/es/view/flag.js","webpack:///./node_modules/@antv/x6/es/view/cell.js","webpack:///./node_modules/@antv/x6/es/view/tool.js","webpack:///./node_modules/@antv/x6/es/registry/connection-strategy/noop.js","webpack:///./node_modules/@antv/x6/es/registry/connection-strategy/pin.js","webpack:///./node_modules/@antv/x6/es/registry/connection-strategy/index.js","webpack:///./node_modules/@antv/x6/es/registry/tool/util.js","webpack:///./node_modules/@antv/x6/es/registry/tool/button.js","webpack:///./node_modules/@antv/x6/es/registry/tool/boundary.js","webpack:///./node_modules/@antv/x6/es/registry/tool/vertices.js","webpack:///./node_modules/@antv/x6/es/registry/tool/segments.js","webpack:///./node_modules/@antv/x6/es/registry/tool/anchor.js","webpack:///./node_modules/@antv/x6/es/registry/tool/arrowhead.js","webpack:///./node_modules/@antv/x6/es/registry/tool/editor.js","webpack:///./node_modules/@antv/x6/es/registry/tool/index.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/bbox.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/util.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/orth.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/node-center.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/middle-side.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/index.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/ratio.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/length.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/closest.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/orth.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/index.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/util.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/bbox.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/rect.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/boundary.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/anchor.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/index.js","webpack:///./node_modules/@antv/x6/es/registry/router/normal.js","webpack:///./node_modules/@antv/x6/es/registry/router/oneside.js","webpack:///./node_modules/@antv/x6/es/registry/router/util.js","webpack:///./node_modules/@antv/x6/es/registry/router/orth.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/options.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/sorted-set.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/obstacle-map.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/util.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/router.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/index.js","webpack:///./node_modules/@antv/x6/es/registry/router/metro.js","webpack:///./node_modules/@antv/x6/es/registry/router/er.js","webpack:///./node_modules/@antv/x6/es/registry/router/loop.js","webpack:///./node_modules/@antv/x6/es/registry/router/index.js","webpack:///./node_modules/@antv/x6/es/registry/connector/normal.js","webpack:///./node_modules/@antv/x6/es/registry/connector/loop.js","webpack:///./node_modules/@antv/x6/es/registry/connector/rounded.js","webpack:///./node_modules/@antv/x6/es/registry/connector/smooth.js","webpack:///./node_modules/@antv/x6/es/registry/connector/jumpover.js","webpack:///./node_modules/@antv/x6/es/registry/connector/index.js","webpack:///./node_modules/@antv/x6/es/model/store.js","webpack:///./node_modules/@antv/x6/es/model/animation.js","webpack:///./node_modules/@antv/x6/es/model/cell.js","webpack:///./node_modules/@antv/x6/es/model/registry.js","webpack:///./node_modules/@antv/x6/es/model/port.js","webpack:///./node_modules/@antv/x6/es/model/node.js","webpack:///./node_modules/@antv/x6/es/model/edge.js","webpack:///./node_modules/@antv/x6/es/model/collection.js","webpack:///./node_modules/@antv/x6/es/model/model.js","webpack:///./node_modules/@antv/x6/es/shape/base.js","webpack:///./node_modules/@antv/x6/es/shape/util.js","webpack:///./node_modules/@antv/x6/es/shape/rect.js","webpack:///./node_modules/@antv/x6/es/shape/edge.js","webpack:///./node_modules/@antv/x6/es/shape/ellipse.js","webpack:///./node_modules/@antv/x6/es/shape/poly.js","webpack:///./node_modules/@antv/x6/es/shape/polygon.js","webpack:///./node_modules/@antv/x6/es/shape/polyline.js","webpack:///./node_modules/@antv/x6/es/shape/path.js","webpack:///./node_modules/@antv/x6/es/shape/text-block.js","webpack:///./node_modules/@antv/x6/es/shape/image.js","webpack:///./node_modules/@antv/x6/es/shape/circle.js","webpack:///./node_modules/@antv/x6/es/view/node.js","webpack:///./node_modules/@antv/x6/es/view/edge.js","webpack:///./node_modules/@antv/x6/es/graph/view.js","webpack:///./node_modules/@antv/x6/es/style/raw.js","webpack:///./node_modules/@antv/x6/es/graph/base.js","webpack:///./node_modules/@antv/x6/es/graph/css.js","webpack:///./node_modules/@antv/x6/es/graph/options.js","webpack:///./node_modules/@antv/x6/es/graph/grid.js","webpack:///./node_modules/@antv/x6/es/graph/transform.js","webpack:///./node_modules/@antv/x6/es/graph/background.js","webpack:///./node_modules/@antv/x6/es/graph/panning.js","webpack:///./node_modules/@antv/x6/es/graph/mousewheel.js","webpack:///./node_modules/@antv/x6/es/graph/virtual-render.js","webpack:///./node_modules/@antv/x6/es/renderer/queueJob.js","webpack:///./node_modules/@antv/x6/es/renderer/scheduler.js","webpack:///./node_modules/@antv/x6/es/renderer/renderer.js","webpack:///./node_modules/@antv/x6/es/graph/defs.js","webpack:///./node_modules/@antv/x6/es/graph/coord.js","webpack:///./node_modules/@antv/x6/es/graph/highlight.js","webpack:///./node_modules/@antv/x6/es/graph/size.js","webpack:///./node_modules/@antv/x6/es/graph/graph.js","webpack:///./node_modules/@antv/x6/es/shape/html.js","webpack:///./src/apis/modules/dashboard/task-list.js","webpack:///src/components/AuditWrapper/index.vue","webpack:///./src/components/AuditWrapper/index.vue?b254","webpack:///./src/components/AuditWrapper/index.vue","webpack:///./src/utils/utils.js"],"names":["freeSelf","self","Object","root","Function","stubFalse","toObject","$keys","it","utils","formats","has","prototype","hasOwnProperty","arrayPrefixGenerators","brackets","prefix","comma","indices","key","repeat","isArray","Array","push","pushToArray","arr","valueOrArray","apply","toISO","Date","toISOString","defaults","addQueryPrefix","allowDots","charset","charsetSentinel","delimiter","encode","encoder","encodeValuesOnly","formatter","formatters","serializeDate","date","call","skipNulls","strictNullHandling","stringify","object","generateArrayPrefix","filter","sort","obj","join","isBuffer","keyValue","String","objKeys","values","keys","i","length","normalizeStringifyOptions","opts","undefined","TypeError","format","module","exports","options","arrayFormat","joined","parse","freeExports","nodeType","freeModule","moduleExports","Buffer","nativeIsBuffer","freeGlobal","global","window","NodeList","forEach","item","defineProperty","configurable","enumerable","writable","args","docFrag","document","createDocumentFragment","arg","isNode","Node","appendChild","createTextNode","this","Element","Document","DocumentFragment","allowPrototypes","arrayLimit","decoder","decode","depth","ignoreQueryPrefix","interpretNumericEntities","parameterLimit","parseArrays","plainObjects","str","replace","$0","numberStr","fromCharCode","parseInt","isoSentinel","parseValues","cleanStr","limit","Infinity","parts","split","skipIndex","indexOf","val","part","bracketEqualsPos","pos","slice","combine","parseObject","chain","leaf","concat","create","cleanRoot","charAt","index","isNaN","0","parseKeys","givenKey","child","segment","exec","parent","normalizeParseOptions","Error","isRegExp","tempObj","newObj","merge","compact","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","propertyIsEnumerable","percentTwenties","RFC1738","value","RFC3986","freeProcess","process","nodeUtil","types","require","binding","e","$export","core","fails","KEY","fn","exp","S","F","hexTable","array","toString","toUpperCase","compactQueue","queue","pop","prop","compacted","j","arrayToObject","mergeTarget","targetItem","reduce","acc","assign","strWithoutPlus","unescape","decodeURIComponent","defaultEncoder","string","escape","out","c","charCodeAt","o","refs","constructor","a","b","originalModule","webpackPolyfill","children","get","l","allocUnsafe","cloneBuffer","buffer","isDeep","result","copy","getOwnPropertySymbols","render","_vm","_h","$createElement","_c","_self","staticClass","$route","query","type","attrs","on","searchActiveX","_v","timeLines","_e","style","_t","processInstanceId","dialogVisible","beforeClose","$event","staticStyle","userDialogVisible","userBeforeClose","directives","name","rawName","expression","ref","list","staticRenderFns","_l","taskId","time","_s","userName","taskName","class","typeName","message","props","default","data","component","taskTimeLineMixins","methods","initProcessTimeLine","getProcessTimeLineApi","then","res","code","catch","err","Disposable","_disposed","dispose","methodName","descriptor","raw","proto","__proto__","disposed","DisposableSet","isDisposed","items","Set","clear","add","delete","isObject","from","set","now","reWhitespace","trimmedEndIndex","test","reTrimStart","baseTrim","Symbol","objectProto","nativeObjectToString","symToStringTag","toStringTag","getRawTag","isOwn","tag","unmasked","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","symbolTag","isSymbol","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","toNumber","other","valueOf","isBinary","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeMin","min","debounce","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","thisArg","leadingEdge","setTimeout","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","clearTimeout","flush","debounced","isInvoking","arguments","throttle","ctx","isAsyncLike","isAsync","Promise","toAsyncBoolean","inputs","results","hasAsync","some","deferres","map","resolve","all","memo","every","toDeferredBoolean","ret","handler","context","params","listeners","cache","cb","off","names","n","splice","returned","trigger","baseHas","reIsDeepProp","reIsPlainProp","isKey","asyncTag","funcTag","genTag","proxyTag","isFunction","coreJsData","maskSrcKey","uid","IE_PROTO","isMasked","funcProto","funcToString","toSource","reRegExpChar","reIsHostCtor","reIsNative","RegExp","baseIsNative","pattern","getValue","getNative","nativeCreate","hashClear","__data__","size","hashDelete","HASH_UNDEFINED","hashGet","hashHas","hashSet","Hash","entries","entry","listCacheClear","eq","assocIndexOf","arrayProto","listCacheDelete","lastIndex","listCacheGet","listCacheHas","listCacheSet","ListCache","Map","mapCacheClear","isKeyable","getMapData","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","memoize","resolver","memoized","Cache","MAX_MEMOIZE_SIZE","memoizeCapped","rePropName","reEscapeChar","stringToPath","match","number","quote","subString","arrayMap","iteratee","INFINITY","symbolProto","symbolToString","baseToString","castPath","argsTag","baseIsArguments","isArguments","MAX_SAFE_INTEGER","reIsUint","isIndex","isLength","toKey","hasPath","path","hasFunc","baseGet","baseAssignValue","assignValue","objValue","baseSet","customizer","nested","newValue","basePickBy","paths","predicate","baseHasIn","hasIn","basePick","arrayPush","offset","spreadableSymbol","isConcatSpreadable","isFlattenable","baseFlatten","isStrict","flatten","overRest","start","transform","otherArgs","constant","identity","baseSetToString","HOT_COUNT","HOT_SPAN","nativeNow","shortOut","count","lastCalled","stamp","remaining","setToString","flatRest","pick","stackClear","stackDelete","stackGet","stackHas","LARGE_ARRAY_SIZE","stackSet","pairs","Stack","assignMergeValue","createBaseFor","fromRight","keysFunc","iterable","baseFor","Uint8Array","cloneArrayBuffer","arrayBuffer","byteLength","cloneTypedArray","typedArray","byteOffset","copyArray","objectCreate","baseCreate","overArg","getPrototype","getPrototypeOf","isPrototype","Ctor","initCloneObject","isArrayLike","isArrayLikeObject","objectTag","objectCtorString","isPlainObject","arrayTag","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","baseIsTypedArray","baseUnary","nodeIsTypedArray","isTypedArray","safeGet","copyObject","isNew","baseTimes","arrayLikeKeys","inherited","isArr","isArg","isBuff","isType","skipIndexes","nativeKeysIn","baseKeysIn","isProto","keysIn","toPlainObject","baseMergeDeep","srcIndex","mergeFunc","stack","srcValue","stacked","isCommon","isTyped","baseMerge","baseRest","isIterateeCall","createAssigner","assigner","sources","guard","setCacheAdd","setCacheHas","SetCache","arraySome","cacheHas","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","equalArrays","bitmask","equalFunc","isPartial","arrLength","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","othIndex","mapToArray","setToArray","symbolValueOf","equalByTag","convert","baseGetAllKeys","symbolsFunc","arrayFilter","resIndex","stubArray","nativeGetSymbols","getSymbols","symbol","nativeKeys","baseKeys","getAllKeys","equalObjects","objProps","objLength","othProps","objStacked","skipCtor","objCtor","othCtor","DataView","promiseTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","ctorString","baseIsEqualDeep","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","baseIsEqual","isEqual","isEmpty","arrayEach","baseAssign","baseAssignIn","copySymbols","getSymbolsIn","copySymbolsIn","getAllKeysIn","initCloneArray","input","cloneDataView","dataView","reFlags","cloneRegExp","regexp","cloneSymbol","initCloneByTag","baseIsMap","nodeIsMap","isMap","baseIsSet","nodeIsSet","isSet","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","cloneableTags","baseClone","isFlat","isFull","isFunc","subValue","cloneDeep","propsIndex","propsLength","customDefaultsMerge","mergeWith","defaultsDeep","applyMixins","derivedCtor","baseCtors","baseCtor","getOwnPropertyNames","getOwnPropertyDescriptor","extendStatics","setPrototypeOf","d","p","cls","base","tmp","A","isNativeClass","createClass","className","ensure","defaultValue","getNumber","Number","isFinite","getBoolean","isMaliciousProp","getByPath","shift","setByPath","lastKey","diver","unsetByPath","propertyToRemove","delim","stop","deep","flatObject","flatKey","Basecoat","baseFindIndex","fromIndex","baseIsNaN","strictIndexOf","baseIndexOf","arrayIncludes","arrayIncludesWith","comparator","noop","createSet","baseUniq","includes","outer","computed","seenIndex","uniq","union","arrays","MAX_ARRAY_LENGTH","MAX_ARRAY_INDEX","nativeFloor","floor","baseSortedIndexBy","retHighest","low","high","valIsNaN","valIsNull","valIsSymbol","valIsUndefined","mid","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","setLow","HALF_MAX_ARRAY_LENGTH","baseSortedIndex","sortedIndex","baseIsMatch","matchData","noCustomizer","isStrictComparable","getMatchData","matchesStrictComparable","baseMatches","baseMatchesProperty","baseProperty","basePropertyDeep","baseIteratee","sortedIndexBy","baseForOwn","createBaseEach","eachFunc","collection","baseEach","baseMap","baseSortBy","comparer","compareAscending","valIsDefined","valIsReflexive","compareMultiple","orders","objCriteria","criteria","othCriteria","ordersLength","order","baseOrderBy","iteratees","sortBy","arrayAggregator","setter","accumulator","baseAggregator","createAggregator","initializer","groupBy","baseDifference","valuesLength","valuesIndex","difference","baseExtremum","current","baseGt","idCounter","uniqueId","id","arrayReduce","initAccum","basePropertyOf","deburredLetters","deburrLetter","reLatin","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboRange","rsCombo","reComboMark","deburr","reAsciiWord","asciiWords","reHasUnicodeWord","hasUnicodeWord","rsAstralRange","rsDingbatRange","rsLowerRange","rsMathOpRange","rsNonCharRange","rsPunctuationRange","rsSpaceRange","rsUpperRange","rsVarRange","rsBreakRange","rsApos","rsBreak","rsDigits","rsDingbat","rsLower","rsMisc","rsFitz","rsModifier","rsNonAstral","rsRegional","rsSurrPair","rsUpper","rsZWJ","rsMiscLower","rsMiscUpper","rsOptContrLower","rsOptContrUpper","reOptMod","rsOptVar","rsOptJoin","rsOrdLower","rsOrdUpper","rsSeq","rsEmoji","reUnicodeWord","unicodeWords","words","reApos","createCompounder","callback","baseSlice","end","castSlice","reHasUnicode","hasUnicode","asciiToArray","rsAstral","rsSymbol","reUnicode","unicodeToArray","stringToArray","createCaseFirst","strSymbols","chr","upperFirst","startCase","word","capitalize","toLowerCase","camelCase","upperCase","lowerCase","lowerFirst","cacheStringFunction","hit","kebabCase","s","pascalCase","constantCase","dotCase","pathCase","sentenceCase","titleCase","hashcode","hash","isUnicoded","ii","characterCode","encodeURIComponent","uuid","template","len","r","random","v","getSpellingSuggestion","candidates","getName","maximumLengthDifference","bestCandidate","bestDistance","justCheckExactMatches","nameLowerCase","candidate","candidateName","abs","candidateNameLowerCase","distance","levenshteinWithMax","s1","s2","previous","big","c1","minJ","maxJ","colMin","dist","temp","isNumber","baseClamp","lower","upper","clamp","mod","m","normalizePercentage","num","parseFloat","parseCssNumeric","units","getUnit","matches","unit","normalizeSides","box","left","top","right","bottom","vertical","horizontal","_IS_MAC","_IS_IOS","_IS_WINDOWS","_IS_IE","_IS_IE11","_IS_EDGE","_IS_NETSCAPE","_IS_CHROME_APP","_IS_CHROME","_IS_OPERA","_IS_FIREFOX","_IS_SAFARI","_SUPPORT_TOUCH","_SUPPORT_POINTER","_SUPPORT_PASSIVE","_NO_FOREIGNOBJECT","navigator","ua","userAgent","createElementNS","chrome","app","runtime","PointerEvent","documentElement","div","createElement","addEventListener","Platform","IS_MAC","IS_IOS","IS_WINDOWS","IS_IE","IS_IE11","IS_EDGE","IS_NETSCAPE","IS_CHROME_APP","IS_CHROME","IS_OPERA","IS_FIREFOX","IS_SAFARI","SUPPORT_TOUCH","SUPPORT_POINTER","SUPPORT_PASSIVE","NO_FOREIGNOBJECT","SUPPORT_FOREIGNOBJECT","getHMRStatus","hot","status","isApplyingHMR","TAGNAMES","select","change","submit","reset","error","load","abort","isEventSupported","event","elem","eventName","isSupported","setAttribute","rclass","rnotwhite","fillSpaces","getClass","getAttribute","hasClass","selector","classNames","addClass","classes","oldValue","trim","removeClass","toggleClass","stateVal","metches","ensureId","isSVGGraphicsElement","getScreenCTM","SVGElement","svg","xmlns","xml","xlink","xhtml","svgVersion","tagName","doc","namespaceURI","createSvgElement","createSvgDocument","content","parseXML","async","setAttributeNS","parser","DOMParser","instance","parseFromString","mimeType","getElementsByTagName","node","lowercase","nodeName","previousSibling","querySelectorAll","findOne","querySelector","findParentByClass","terminator","ownerSVGElement","parentNode","contains","bup","compareDocumentPosition","elems","removeChild","empty","firstChild","append","prepend","before","insertBefore","after","nextSibling","appendTo","isElement","x","isHTMLElement","HTMLElement","ownerDocument","matched","CASE_SENSITIVE_ATTR","removeAttribute","qualified","qualifyAttr","ns","hasAttributeNS","local","removeAttributeNS","hasAttribute","setAttributes","attributes","combinedKey","kebablizeAttrs","styleToObject","styleString","styles","section","pair","mergeAttrs","attr","to","so","tt","ss","annotate","t","annotations","opt","curr","prev","batch","jj","annotation","includeAnnotationIndices","JSON","findAnnotationsAtIndex","findAnnotationsBetweenIndexes","shiftAnnotations","text","DataUri","millimeterSize","isDataUrl","url","substr","imageToDataUri","onError","onLoad","FileReader","xhr","reader","onload","evt","dataUri","onerror","readAsDataURL","response","u8a","CHUNK_SZ","subarray","suffix","meta","bytes","base64","btoa","XMLHttpRequest","responseType","open","send","dataUriToBlob","dataUrl","uri","dataType","mime","decodedString","atob","ia","Blob","downloadBlob","blob","fileName","msSaveBlob","URL","createObjectURL","link","href","download","body","click","revokeObjectURL","downloadDataUri","parseViewBox","svgToDataUrl","viewBox","getNumberFromViewBox","getNumberFromMatches","reg","w","width","h","height","decoded","header","supportedUnits","Unit","measure","cssWidth","cssHeight","display","position","rect","getBoundingClientRect","toPx","hyphenPattern","camelize","_","char","prefixes","testStyle","getWithPrefix","prefixedName","getVendorPrefixedName","property","capitalizedName","setPrefixedStyle","vendor","defaultView","opener","getComputedStyle","getPropertyValue","hasScrollbars","container","overflow","clearSelection","selection","getSelection","removeAllRanges","numericProps","animationIterationCount","columnCount","flexGrow","flexShrink","fontWeight","gridArea","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","lineHeight","opacity","orphans","widows","zIndex","isCSSVariable","computeStyle","isVariable","computeStyleInt","getSuffixedValue","css","setProperty","dataset","WeakMap","getData","setData","datas","propMap","contenteditable","for","readonly","maxlength","tabindex","colspan","rowspan","usemap","isVector","importNode","matrix","tx","ty","angle","cx","cy","sx","sy","toNode","SVGSVGElement","defsNode","cloneNode","toNodes","replaceChild","lastChild","childNodes","vels","nodes","found","matcher","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","vel","currentChild","eachChild","y","interval","SVGPathElement","Vector","vector","sample","toPath","createVectors","markup","svgDoc","childNode","canvasContext","getContext","createTextPathNode","textPath","defs","annotateTextLine","lineNode","lineAnnotations","eol","baseSize","tspanNode","maxFontSize","fontMetrics","lastJ","fontSize","annotationAttrs","vTSpan","textContent","annotationClass","emRegex","emToPx","em","numerical","calculateDY","alignment","linesMetrics","baseSizePx","lineMetrics","flMaxFont","rLineHeights","lineHeightPx","iLineHeight","llMaxFont","dy","sanitize","verticalAnchor","textVerticalAnchor","namedVerticalAnchor","iai","defaultLineHeight","autoLineHeight","needEmpty","displayEmpty","strFontSize","containerNode","annotatedY","lines","lastI","lineClassName","line","lineNodeStyle","fillOpacity","strokeOpacity","baseVal","rh","firstLine","measureText","font","splitTextByLength","splitWidth","totalWidth","caches","round","frontText","frontWidth","behindText","behindWidth","breakText","ceil","maxLines","splitText","textWidth","remainText","remainWidth","ellipsis","ellipsisWidth","isLast","front","behind","KAPPA","getNumbericAttribute","NaN","getTotalLength","samples","getPointAtLength","lineToPathData","polygonToPathData","polygon","points","getPointsFromSvgElement","svgPointsToPath","polylineToPathData","polyline","nodePoints","numberOfItems","getItem","circleToPathData","circle","cd","ellipseToPathData","ellipse","rx","ry","cdx","cdy","rectangleToPathData","rectToPathData","topRx","bottomRx","topRy","bottomRy","toPathData","createSlicePathData","innerRadius","outerRadius","startAngle","endAngle","svgArcMax","PI","r0","r1","a0","a1","da","df","c0","cos","s0","sin","transformRegex","transformSeparatorRegex","transformationListRegex","createSVGPoint","createSVGMatrix","mat","createSVGTransform","DOMMatrix","createSVGTransformFromMatrix","transformStringToMatrix","transformationString","transformationMatch","ctm","scaleNonUniform","translate","rotate","skewX","skewY","f","multiply","matrixToTransformString","parseTransformString","translation","rotation","scale","separator","decomposedMatrix","decomposeMatrix","translateX","translateY","scaleX","scaleY","transformations","translateMatch","rotateMatch","scaleMatch","deltaTransformPoint","point","dx","px","py","atan2","sqrt","matrixToScale","matrixToRotation","deg","matrixToTranslation","absolute","transformList","svgTransform","appendItem","transformAttr","newTx","newTy","newTranslate","newAngle","newOrigin","newRotate","newScale","getTransformToElement","targetCTM","nodeCTM","inverse","getTransformToParentElement","matrixList","nodeMatrix","reverse","toLocalPoint","globalPoint","matrixTransform","globalToLocalMatrix","EventHook","register","hook","unregister","Store","events","remove","Util","stopPropagationCallback","stopPropagation","removeEventListener","returnTrue","returnFalse","rNotHTMLWhite","rNamespace","splitType","normalizeType","originType","namespaces","isValidTarget","isValidSelector","seed","ensureHandlerId","getHandlerId","removeHandlerId","setHandlerId","getHandlerQueue","store","bag","handlers","delegateCount","button","disabled","matchedHandlers","matchedSelectors","handleObj","isWindow","adown","isDefaultPrevented","isPropagationStopped","isImmediatePropagationStopped","isSimulated","preventDefault","originalEvent","stopImmediatePropagation","defaultPrevented","currentTarget","relatedTarget","timeStamp","EventObject","addProperty","commonProps","bubbles","cancelable","eventPhase","detail","view","buttons","clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement","pointerId","pointerType","charCode","keyCode","touches","changedTouches","targetTouches","which","altKey","ctrlKey","metaKey","shiftKey","Special","noBubble","returnValue","delegateType","bindType","related","__rest","Core","triggered","handlerData","others","mainHandler","dispatch","guid","namespace","setup","mappedTypes","rns","originHandlerCount","teardown","delegateTarget","preDispatch","handlerQueue","k","rnamespace","hookHandle","handle","postDispatch","eventArgs","onlyHandlers","eventObj","ontype","bubbleType","eventPath","last","win","parentWindow","lastElement","currElement","Event","once","Private","originHandler","onWheelCallback","onWheelGuard","animationFrameId","deltaX","deltaY","onWheel","bind","didWheel","passive","changed","requestAnimationFrame","pageYOffset","pageXOffset","isFixed","offsetValue","offsetParent","parentOffset","delay","timer","createSensor","element","sensor","contentDocument","pointerEvents","listener","destroy","unbind","idx","ResizeObserver","observe","disconnect","ModifierKey","Timing","Interp","SizeSensor","PriorityQueue","defaultComparator","heapify","priority","bubbleUp","oldPriority","comp","bubbleDown","peek","minIndex","Dijkstra","run","adjacencyList","weight","u","scanned","insert","neighbours","alt","updatePriority","color","g","fromString","amount","rgba","lighten","toArray","arg0","arg1","arg2","arg3","hex","rgba2hsla","ignoreAlpha","rgb","makeGrey","toCSS","Color","fromArray","fromHex","hex2rgb","fromRGBA","hue2rgb","m1","m2","h6","fromHSLA","hsla2rgba","startsWith","preset","named","toFixed","randomHex","letters","randomRGBA","invert","bw","pound","rgb2hex","bits","mask","bgr","pad","amt","lum","darken","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Dictionary","iterator","modifiers","or","and","equals","modifiers1","modifiers2","or1","or2","and1","and2","equal","a2","isMatch","strict","linear","quad","cubic","inout","t2","t3","exponential","pow","bounce","q","decorators","easeInSine","easeOutSine","easeInOutSine","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","t1","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInExpo","easeOutExpo","easeInOutExpo","scaledTime","scaledTime1","easeInCirc","easeOutCirc","easeInOutCirc","easeInBack","magnitude","easeOutBack","easeInOutBack","scaledTime2","easeInElastic","asin","easeOutElastic","easeInOutElastic","easeOutBounce","easeInBounce","easeInOutBounce","ma","mb","pb","aa","bb","precision","ca","ra","rd","ga","gd","ba","bd","cssModules","cssModule","find","loadTimes","styleElement","head","clean","findIndex","Angle","GeometryUtil","toDeg","rad","normalize","toRad","over360","isInteger","mmin","mmax","snapToGrid","gridSize","containsPoint","squaredLength","p1","p2","Geometry","toJSON","super","degree","center","origin","squaredDistance","theta","zero","angleBetween","update","toPolar","clone","lat1","lat2","lon1","lon2","dLon","brng","bearings","move","gx","gy","Point","isPoint","isPointLike","isPointData","fromPolar","org","equalPoints","x1","x2","y1","y2","rotateEx","topLeft","topRight","bottomRight","bottomLeft","topCenter","bottomCenter","corner","rightMiddle","leftMiddle","topLine","rightLine","bottomLine","leftLine","st","ct","minX","minY","maxX","maxY","getCenter","getOrigin","getTopRight","p3","getBottomRight","p4","getBottomLeft","ox","oy","sx1","sx2","sx3","sx4","sy1","sy2","sy3","sy4","getMaxScaleToFit","w1","h1","w2","h2","rectLines","dedupeArr","intersectsWithLine","sides","connector","intersection","isIntersectWithRect","myOrigin","myCorner","rOrigin","rCorner","xx","yy","newx","newy","newwidth","newheight","originX","originY","cornerX","cornerY","distLeft","distRight","distTop","distBottom","closest","side","getNearestSideToPoint","adhereToRect","Rectangle","isRectangle","isRectangleLike","fromEllipse","fromSize","fromPositionAndSize","total","isDifferentiable","eRef","sRef","bearing","pointAt","closestPointNormalizedLength","tangentAt","product","dot","normalized","ratio","lerp","fromStart","rate","dividerPoint","pointAtLength","cross","shape","pt1Dir","pt2Dir","det","deltaPt","alpha","beta","determinant","closestPoint","tangentStart","tangentLine","dx1","dy1","dx2","dy2","ccw","serialize","Line","isLine","normalizedDistance","intersections","dir","diff","mDir","mDiff","ta","tb","bbox","getNearestPointToPoint","mSquared","aSquared","bSquared","x0","y0","refPointDelta","q1","q3","fromRect","Ellipse","isEllipse","regexSupportedData","draw","initialMove","close","exclude","rounded","arcSize","p0","wp","pt","nx1","ny1","next","nx2","ny2","drawPoints","pts","arcToCurves","r2","largeArcFlag","sweepFlag","cty","cpsi","spsi","rxd","ryd","rxdd","rydd","r1x","r2y","lamda","sds","seif","txd","tyd","dr","sse","seg","segr","cpsir1","cpsir2","spsir1","spsir2","mc","ms","x3","y3","drawArc","startX","startY","xAxisRotation","stopX","stopY","cpLength","closestPointLength","minSqrDistance","lineLength","cpNormalizedLength","cp","sqrDistance","tangentAtLength","startIndex","intersectionCount","endIndex","xDifference","rayEnd","ray","int","lastPoint","lastValidLine","threshold","currentIndex","firstIndex","middleIndex","firstPoint","middlePoint","chord","closestPointDistance","startPoint","sortedRecords","record1","record2","unshift","insidePoints","hullRecords","getKey","record","currentRecord","currentPoint","correctTurnFound","lastHullRecord","lastHullPoint","secondLastHullRecord","secondLastHullPoint","crossProduct","THRESHOLD","lowestHullIndex","indexOfLowestHullIndexRecord","currentHullIndex","hullPointRecordsReordered","newFirstChunk","newSecondChunk","hullPoints","Polyline","isPolyline","svgString","coords","controlPoint1","controlPoint2","PRECISION","tvalues","bounds","b2ac","sqrtb2ac","mt","jlen","X","Y","pointAtT","closestPointT","getOptions","lengthAtT","getPrecision","subdivisions","getDivisions","precisionRatio","investigatedSubdivision","investigatedSubdivisionStartT","investigatedSubdivisionEndT","distFromStart","distFromEnd","chordLength","minSumDist","piece","division","startDist","endDist","sumDist","endpointDistance","startPrecisionRatio","endPrecisionRatio","hasRequiredPrecision","hasMiniStartDistance","hasMiniEndDistance","hasMiniDistance","divided","divide","startDist1","endDist1","sumDist1","startDist2","endDist2","sumDist2","tangentAtT","toPolyline","divideAtT","tAt","tAtLength","dividerPoints","getSkeletonPoints","startControl1","startControlPoint1","startControl2","startControlPoint2","divider","dividerControl1","dividerControlPoint1","dividerControl2","dividerControlPoint2","control1","control2","midpoint1","midpoint2","midpoint3","subControl1","subControl2","divideLine","previousLength","iteration","divisions","subCurve","skeletonPoints","getSubdivisions","baselinePointDistFromStart","baselinePointDistFromEnd","newBaselinePointDistFromStart","newBaselinePointDistFromEnd","baseline1Length","baseline2Length","toPoints","Curve","isCurve","getFirstControlPoints","rhs","getCurveControlPoints","knots","firstControlPoints","secondControlPoints","throughPoints","controlPoints","curves","isVisible","isSegment","isSubpathStart","endPoint","previousSegment","divideAt","closestPointTangent","divideAtLength","LineTo","segments","subpathStartSegment","Close","MoveTo","arg4","arg5","curve","c2","q2c","ax","ay","v13","v23","a2c","recursive","v120","xy","f1","f2","rx2","ry2","f2old","x2old","y2old","hx","hy","m3","m4","newres","pathData","spaces","segmentReg","commandParamReg","paramsCount","z","segmetns","cmd","command","pathString","pathArray","mx","my","bx","by","qx","qy","processPath","pcom","nx","ny","T","Q","fixArc","pp","pi","commands","prevCommand","seglen","normalizePathData","CurveTo","previousObj","appendSegment","createSegment","endX","endY","curveTo","sub","segmentBBox","lastSegment","currentSegment","nextSegment","prepareSegment","fixIndex","removedSegment","updateSubpathStartSegment","replacedSegment","updateSubpathStart","segmentIndexAt","getSegment","segmentIndexAtLength","segmentSubdivisions","lastVisibleIndex","minSquaredDistance","segmentClosestPointT","segmentClosestPoint","segmentIndex","polylines","toPolylines","numIntersections","pathLength","lastVisibleSegment","numSegments","tValue","dividedSegmentIndex","lastValidSegment","lastValidSegmentIndex","pathCopy","replaceSegment","divisionStartIndex","divisionMidIndex","divisionEndIndex","removeSegment","movetoEnd","insertSegment","secondPathSegmentIndexConversion","originalSegment","convertedSegment","firstPath","secondPath","intersect","isValid","getSegmentSubdivisions","partialPoints","otherSegments","Path","isPath","commandRe","argRe","force","exist","onDuplicated","entity","onConflict","suggestion","getSpellingSuggestionForName","prefixed","Registry","thickness","fill","fixedDot","mesh","stroke","doubleMesh","factor","patterns","Grid","presets","registry","flipX","img","canvas","drawImage","flipY","flipXY","setTransform","watermark","radians","stepX","stepY","getString","outline","margin","highlight","blur","stdDeviation","dropShadow","grayScale","sepia","saturate","hueRotate","amount2","brightness","contrast","Background","Filter","xlinkHref","xlinkShow","xlinkRole","xlinkType","xlinkArcrole","xlinkTitle","xlinkActuate","xmlSpace","xmlBase","xmlLang","preserveAspectRatio","requiredExtension","requiredFeatures","systemLanguage","externalResourcesRequired","positionWrapper","refDx","refDy","refWidth","setWrapper","refHeight","refRx","refRy","refRInscribed","attrName","widthFn","heightFn","refBBox","refRCircumscribed","percentage","isPercentage","diagonalLength","rValue","refCx","refCy","refDResetOffset","dWrapper","resetOffset","refDKeepOffset","refPointsResetOffset","pointsWrapper","refPointsKeepOffset","refR","refD","refPoints","refX2","refY2","refWidth2","refHeight2","axis","dimension","delta","refOrigin","attrValue","shapeWrapper","shapeConstructor","cacheName","cachedShape","shapeBBox","shapeOrigin","fitScale","pathConstructor","qualify","graph","defineGradient","cell","isEdge","edgeView","sourcePoint","targetPoint","gradientUnits","textWrap","json","textHash","pathNode","info","wrappedText","txt","fontFamily","isTextInUse","title","titleElem","titleNode","xAlign","offsetWrapper","yAlign","html","innerHTML","defineFilter","port","offset1","offset2","block","_a","createClassicMarker","classic","full","localAttrs","moveTo","lineTo","diamond","flip","opened","fliped","radius","circlePlus","radiusX","radiusy","Marker","sourceMarker","marker","createMarker","targetMarker","vertexMarker","manual","def","onNotFound","normalizeAttr","defineMarker","strokeWidth","refX","isEdgeView","connection","_b","_d","stubs","getConnectionLength","getConnection","sourceParts","targetParts","getConnectionPathData","atConnectionLengthKeepGradient","atConnectionWrapper","atConnectionLengthIgnoreGradient","atConnectionRatioKeepGradient","atConnectionRatioIgnoreGradient","atConnectionLength","atConnectionRatio","method","zeroVector","tangent","vectorAngle","Attr","isValidDefinition","Config","prefixCls","autoInsertCSS","useCSSSelector","defaultClassName","cellView","magnet","magnetEl","svgDocument","transformPoint","transformLine","transformPolyline","transformRectangle","corner1","corner2","corner3","corner4","withoutTransformations","getBBox","clientLeft","clientTop","clientWidth","clientHeight","outputBBox","getBoundingOffsetRect","childBBox","offsetLeft","offsetTop","offsetWidth","offsetHeight","toGeometryShape","translateAndAutoOrient","reference","translateToOrigin","setTranslate","rotateAroundOrigin","setRotate","translateFromOrigin","finalPosition","setMatrix","findShapeNode","nextElementSibling","firstElementChild","getBBoxV2","normalizeMarker","defaultOptions","padding","getHighlighterId","hasCache","magnetVel","magnetBBox","isEdgeElement","highlightMatrix","paddingMatrix","removeHandler","removeHighlighter","model","setCache","normalizePoint","toResult","rawArgs","Highlighter","check","highlighter","unhighlight","portsPositionArgs","elemBBox","groupPositionArgs","stepAngle","step","ellipseLayout","ellipseSpread","stepFn","getTopCenter","compensateRotate","tangentTheta","getCorner","lineLayout","getTopLeft","PortLayout","portPosition","outside","outsideLayout","outsideOriented","inside","insideLayout","insideOriented","autoOrient","bboxAngles","getBBoxAngles","textAnchor","orientAngle","tl","bl","br","tr","radial","radialLayout","radialOriented","portCenterOffset","PortLabelLayout","cid","views","flag","removeEventListeners","onRemove","unmount","classList","rootElem","selectors","prevSelector","nth","getSelector","undelegateEvents","splitter","getEventHandler","delegateEvent","getEventNamespace","addEventListeners","fromPoint","elementFromPoint","setEventData","propagationStopped","getEventData","eventData","currentData","normalizeEvent","View","isSvgElement","validSelector","isCSSSelector","normalizedEvent","touchEvt","getView","counter","elemCache","pathCache","boundingRect","Markup","isJSONMarkup","isStringMarkup","parseJSONMarkup","fragment","groups","defines","define","groupSelector","nodeGroups","groupName","createContainer","renderMarkup","parseLabelStringMarkup","getPortContainerMarkup","getPortMarkup","getPortLabelMarkup","getEdgeMarkup","cursor","strokeLinecap","getForeignObjectMarkup","bare","background","getAttrDefinition","normal","specials","definition","getDefinition","normalName","setDefine","offsetDefine","positionDefine","allProcessedAttrs","roProcessedAttrs","cellAttrs","rootNode","selectorCache","unique","selectedLength","sortIndex","reduceRight","processedAttrs","rawAttrs","nodeAttrs","setAttrs","positionAttrs","offsetAttrs","nodeTransform","nodePosition","positioned","ts","offseted","nodeBoundingRect","getBoundingRectOfElement","nodeBBox","nodesAttrs","findAttrs","nodesAllAttrs","specialItems","each","processed","processAttrs","nodeAllAttrs","refSelector","refNode","processedAttributes","bboxCache","rotatableMatrix","unrotatedRefBBox","isRefNodeRotatable","rotatableNode","rootBBox","mergeProcessedAttrs","updateRelativeAttrs","FlagManager","actions","bootstrap","flags","labels","label","getFlag","hasChanged","mergeActions","arr1","arr2","getDefaults","documentEvents","ensureOptions","setContainer","ensureContainer","init","removeTools","rootSelector","getConstructor","prefixClassName","getContainerTagName","delegateEvents","getContainerAttrs","getContainerStyle","setStyle","getContainerClassName","getBootstrapFlag","hasAction","removeAction","action","additionalRemovedActions","removedFlags","onAttrsChange","getChangedFlag","updated","dirty","toolId","renderer","requestViewUpdate","feature","interacting","getMatrix","getShape","getBoundingRect","getMatrixOfElement","rm","getRootRotatedMatrix","tm","getRootTranslatedMatrix","useCellGeometry","getAngle","getBBoxOfElement","coord","localToGraphRect","getPosition","findByAttr","partial","prepareHighlight","notify","edge","isNodeView","portId","findAttr","terminal","hasPort","findPortElem","tools","config","can","isToolsView","mount","hide","show","getTools","addTools","getEventArgs","cachedModelForMouseEvent","startBatch","stopBatch","getEventTarget","findViewByElem","onMouseLeave","onMouseEnter","CellView","Flag","isCellView","confirmUpdate","ctor","svgContainer","htmlContainer","normalizedTools","ToolItem","isToolItem","tool","isSVGElement","focusedTool","blurredTool","focus","hasSVG","hasHTML","decorator","ToolsView","visible","toolsView","onRender","focusOpacity","getClassName","toPercentage","pin","relative","strategy","pinEdgeTerminal","pinNodeTerminal","getUnrotatedBBoxOfElement","anchor","totalLength","pinRelative","pinAbsolute","getAnchor","terminalView","terminalMagnet","getViewBBox","quick","ConnectionStrategy","updatePosition","getEdgeMatrix","getNodeMatrix","getTangentAtRatio","getTangentAtLength","onClick","btn","Button","mousedown","touchstart","Remove","ui","moveAndExpand","Boundary","handles","getVertices","addable","updatePath","resetHandles","renderHandles","vertices","updateHandles","stopHandleListening","vertex","createHandle","processHandle","startHandleListening","onHandleChange","onHandleChanging","onHandleChanged","onHandleRemove","sourceAnchor","targetAnchor","getMouseEventArgs","notifyMouseDown","snapVertex","setVertexAt","notifyMouseMove","vertexAdded","removeRedundancies","verticesRemoved","removeRedundantLinearVertices","notifyMouseUp","checkMouseleave","onChanged","snapRadius","neighbors","getNeighborPoints","removable","removeVertexAt","matchModifiers","allowAddVertex","getVertexIndex","insertVertex","onMouseDown","Vertices","Handle","dblclick","delegateDocumentEvents","mousemove","touchmove","mouseup","touchend","touchcancel","emit","undelegateDocumentEvents","pathClassName","nextVertex","renderHandle","updateHandle","removeProp","anchorFn","snapHandle","sourceView","sourceBBox","changeSourceAnchor","deleteSourceAnchor","shiftHandleIndexes","sourceAnchorPosition","sourceMagnet","resetAnchor","sourceAnchorDef","targetView","targetBBox","changeTargetAnchor","deleteTargetAnchor","targetAnchorPosition","targetMagnet","targetAnchorDef","setVertices","segmentLine","Segments","getClosestPoint","toggleArea","getTerminalView","updateAnchor","updateArea","anchorNode","getTerminalAnchor","customAnchor","anchorAttrs","customAnchorAttrs","defaultAnchorAttrs","areaNode","area","terminalCell","getTerminalMagnet","areaPadding","inflate","restrictArea","rewrite","terminalType","clientToLocalPoint","snapFn","snap","pointAtConnection","rotatedCoords","Anchor","toolView","isSource","refIndex","getVertexAt","SourceAnchor","TargetAnchor","getPointAtRatio","prepareArrowheadDragging","onMouseMove","onMouseUp","Arrowhead","SourceArrowhead","TargetArrowhead","labelIndex","dblClick","onCellDblClick","editor","contentEditable","updateNodeEditorTransform","updateEdgeEditorTransform","backgroundColor","getCellText","innerText","setCellText","minWidth","localToGraph","parentElement","isEdgeLabel","labelAddable","clientToLocal","removeElement","updateEditor","autoFocus","selectText","range","createRange","selectNodeContents","addRange","getText","setText","newLabel","appendLabel","removeLabelAt","CellEditor","NodeEditor","EdgeEditor","NodeTool","boundary","inherit","EdgeTool","createBBoxAnchor","refView","refPoint","fixedAt","getPointAtEdge","orthogonal","orth","nodeCenter","endType","getConnectionPoint","middleSide","getLeftMiddle","getRightMiddle","getBottomCenter","direction","midSide","NodeAnchor","OFFSET","getConnectionSubdivisions","vLine","hLine","vIntersections","hIntersections","fallbackAt","parallel","getStrokeWidth","EdgeAnchor","stroked","bboxRaw","lineRaw","setLength","localShape","getShapeOfElement","magnetMatrix","translateMatrix","rotateMatrix","targetMatrix","localMatrix","localLine","localRef","getDataOfElement","insideout","localBBox","pathOptions","extrapolate","sticky","intersectsWithLineFromCenterToPoint","cpOffset","alignLine","coordinate","alignOffset","align","ConnectionPoint","oneSide","dim","getPointBBox","getPaddingBox","getSourceBBox","getTargetBBox","getSourceAnchor","getTargetAnchor","route","isOrthogonal","getBearing","intersectsWithRect","insideNode","nodeToNode","nodeToVertex","isOrthogonalLoop","vertexToNode","vertexToVertex","opposites","N","E","W","freeJoin","getBBoxSize","d1","d2","opposite","fromBBox","toBBox","freePoints","freeBearingPoints","fromBorder","toBorder","startRoute","endRoute","reversed","maxLoopCount","maxDirectionChange","perpendicular","excludeTerminals","excludeNodes","excludeShapes","startDirections","endDirections","directionMap","cost","45","90","fallbackRouter","draggingRouter","resolveOptions","paddingBox","directions","point1","point2","OPEN","CLOSE","mapGridSize","excludedTerminals","getCell","excludedAncestors","getSourceCellId","getAncestors","getTargetCellId","getNodes","excludedTerminal","excludedShape","excludedNode","excludedAncestor","rects","getSourceEndpoint","getTargetEndpoint","getDirectionAngle","directionCount","grid","quadrant","angleTheta","fixAngleEnd","normalizedAngle","diffX","diffY","gridStepsX","gridStepsY","distanceX","distanceY","getDirectionChange","angle1","angle2","getGridOffsets","gridOffsetX","gridOffsetY","getGrid","getGridDimension","roundedDiff","remainder","correction","snapGrid","getCost","anchors","manhattanDistance","getRectPoints","directionList","centerVector","rectPoints","ending","intersectionLine","farthestIntersectionDistance","farthestIntersection","reconstructRoute","parents","tailPoint","prevDiff","currentKey","leadPoint","fromDiff","findRoute","sourceEndpoint","targetEndpoint","startPoints","endPoints","isAccessible","openSet","costs","previousRouteDirectionAngle","previousDirectionAngle","isPathBeginning","directionChange","numDirections","endPointsKeys","sameStartEndPoints","loopsRemaining","currentParent","currentCost","isStartPoint","isRouteBeginning","skipEndCheck","directionAngle","neighborPoint","neighborKey","isClose","isEndPoint","endDirectionAngle","endDirectionChange","neighborCost","neighborPenalty","penalties","costFromStart","isOpen","fallbackRoute","first","second","optionsRaw","build","oldVertices","newVertices","partialRoute","isEndingAtPoint","dragFrom","dragTo","getGridSize","manhattan","diagonalCost","l1","l2","intersectionPoint","directionFrom","metro","linkView","er","offsetRaw","sourceX","targetX","sourceDelta","targetDelta","sourceY","targetY","rollup","center1","center2","loop","halfHeight","validate","angles","line1","line2","intersects1","intersects2","intersects","Router","routePoints","fix","middle","f13","f23","prevDistance","nextDistance","startMove","endMove","roundedStart","roundedEnd","smooth","controlPointX","controlPointY","CLOSE_PROXIMITY_PADDING","F13","F23","setupUpdating","updateList","_jumpOverUpdateList","createLines","findLineIntersections","crossCheckLines","crossCheckLine","getDistence","createJumps","jumpSize","skippedPoints","lastLine","jumpStart","jumpEnd","nextPoint","endDistance","startDistance","jumpLine","jumppedLines","buildPath","jumpType","xAxisRotate","centerLine","halfLine","xOffset","yOffset","nextLine","buildRoundedSegment","jumpover","ignoreConnectors","allLinks","getEdges","thisIndex","defaultConnector","connecting","edges","getConnector","linkViews","findViewByCell","thisLines","linkLines","jumpingLines","lineIntersections","Connector","__decorate","desc","Reflect","decorate","pending","changing","mutate","unset","silent","changes","pendingOptions","subset","pathArrayLength","propertyPath","propertyValue","propertyPathArray","nextKey","isArrayIndex","merged","old","ids","targetValue","startValue","getPropByPath","localOptions","timing","getTiming","interpolate","getInterp","interp","startTime","iterate","getTime","elaspe","progress","duration","currentValue","setPropByPath","getArgs","complete","finish","cancelAnimationFrame","commonArgs","jumpedToEnd","stopArgs","Animation","ShareRegistry","propHooks","attrHooks","metadata","preprocess","animation","postprocess","_model","ignoreIdCheck","applyPropHooks","getProp","removeByPath","_children","_parent","removePropByPath","setProp","getPrevious","getZIndex","removeZIndex","setZIndex","cells","getMaxZIndex","getDescendants","breadthFirst","batchUpdate","getMinZIndex","getMarkup","removeMarkup","setMarkup","getAttrs","removeAttrs","overwrite","hooks","getAttrHooks","prefixAttrPath","getAttrByPath","removeAttrByPath","setAttrByPath","setVisible","removeData","getParent","getChildren","parentId","getParentId","childrenIds","ancestors","ancestor","isChildOf","descendant","isDescendantOf","isAncestorOf","getCommonAncestor","getChildIndex","setParent","setChildren","addTo","isCell","addChild","addCell","insertChild","oldParent","getChildCount","incomings","getIncomingEdges","outgoings","getOutgoingEdges","updateParent","removeChildAt","getChildAt","unembed","removeCell","toolItems","setTools","normalizeTools","nameOrIndex","cellType","defaultAttrs","finalAttrs","defaultAttr","subName","finalProps","keepId","deepClone","execute","removeFromParent","Cell","getCellsBBox","cloneCells","cloneMap","sourceId","targetId","setSource","getSource","setTarget","getTarget","embeds","edgeRegistry","nodeRegistry","setEdgeRegistry","setNodeRegistry","ports","group","getPortsByGroup","getGroup","groupPosition","groupPositionName","layoutFn","portsArgs","groupArgs","layouts","portLayout","portSize","portAttrs","labelSize","labelLayout","getPortLabelLayout","parseGroup","parsePort","getLabel","getPortPosition","createPosition","setDefault","setDefaults","getPortLabelPosition","initPorts","getSize","setSize","resize","currentSize","fixedPoint","imageFixedPoint","atan","setPosition","scaledBBox","currentPosition","parentPosition","translateBy","restrict","translatedPosition","transition","currentAngle","getTerminal","getPort","getPortsPosition","portCenter","fit","setPortContainerMarkup","getDefaultPortContainerMarkup","setPortMarkup","getDefaultPortMarkup","setPortLabelMarkup","getDefaultPortLabelMarkup","getPorts","getPortIndex","getPortsLayoutByGroup","layout","prefixPortPath","getPortProp","removePortProp","setPortProp","removePortAt","portsForRemoval","currentPorts","remainingPorts","updatePortData","processRemovedPort","currentItemsMap","removed","getConnectedEdges","incoming","getTargetPortId","outgoing","getSourcePortId","errors","generatePortId","validatePorts","added","prevPort","curPort","constructorName","sourceCell","sourcePort","targetCell","targetPort","isValidId","onLabelsChanged","onVertexsChanged","setTerminal","getTerminalPoint","getTerminalCell","cellId","getTerminalNode","visited","getRouter","removeRouter","setRouter","removeConnector","setConnector","defaultLabel","getLabels","setLabels","parseLabel","insertLabel","parseStringLabel","label1","label2","vertice","getDefaultMarkup","applyToPoints","worker","getPolyline","getSourcePoint","getTargetPoint","newParent","getSourceCell","getTargetCell","prevParent","embed","getSourceNode","getTargetNode","getFragmentAncestor","Edge","equalTerminals","b1","refY","formated","localIndex","entities","sortable","sortAttr","existing","isSameStore","dryrun","removeCells","unreference","at","notifyCellEvent","batches","addings","sortOnChangeZ","onCellAdded","onCellRemoved","onReset","onEdgeTerminalChanged","disconnectEdges","disconnectConnectedEdges","removeConnectedEdges","terminalId","prepareCell","getCells","v1","v2","createNode","updateCell","createEdge","addCells","maxPosition","newId","newCell","sourceCellId","targetCellId","getCellsFromCache","cellIds","indirect","collect","isOutgoing","descendants","embedsCache","collectSub","enclosed","isOrigin","nodeId","isBoundary","getBoundaryNodes","hasLoop","cell1","cell2","successors","search","matchDistance","predecessors","subgraph","getSubGraph","containsRect","getNodesInArea","getNodesFromPoint","breadthFirstSearch","depthFirstSearch","getNeighbors","neighbor","directed","hasParent","resizeCells","fromJSON","parseJSON","resetCells","Model","isModel","addNode","addEdge","setLabel","removeLabel","Base","bodyAttr","labelAttr","getImageUrlHook","imageUrl","imageWidth","imageHeight","image","createShape","strokeLinejoin","wrap","getPoints","setPoints","removePoints","pointsToString","Poly","bg","textAlign","boxSizing","alignItems","justifyContent","foreignObject","wrapValue","wrapAttrs","portsCache","removePorts","cleanPortsCache","handleAction","renderPorts","renderTools","updateTools","partialAttrs","cleanCache","updateAttrs","renderJSONMarkup","updateTransform","getTranslationString","rot","getRotationString","portRoot","portContentElement","portSelectors","portContentSelectors","cached","portElement","references","parsedPorts","getParsedPorts","portsGropsByZ","autoZIndexKey","getPortElement","appendPorts","updatePorts","createPortElement","renderResult","portClass","portLabelElement","portLabelSelectors","existLabel","existPortLabel","onPortRendered","labelContainer","labelSelectors","contentContainer","contentSelectors","getParsedGroups","groupList","updatePortGroup","metrics","metric","applyPortTransform","initialAngle","portMarkup","portLabelMarkup","getPortEventArgs","notifyPortEvent","onDblClick","onContextMenu","startNodeDragging","dragMagnet","dragNode","stopMagnetDragging","stopNodeDragging","onMagnetClick","onMouseOver","onMouseOut","updateClassName","onMouseWheel","getMouseMovedCount","clickThreshold","startMagnetDragging","onCustomEvent","localPoint","embedding","findParent","getNodesUnderNode","frontOnly","zIndexMap","maxZIndex","newCandidateView","prevCandidateView","candidateEmbedView","validateEmbeding","findView","childView","parentView","clearEmbedding","candidateParent","candidateView","previousParent","validateMagnet","magnetThreshold","startConnectting","delegateDragEvents","createEdgeFromMagnet","isNewEdge","fallbackAction","getDefaultEdge","getEdgeTerminal","autoScrollGraph","getPlugin","isSelectionMovable","selectedCells","getSelectedCells","translating","getGraphArea","getDelegatedView","notifyUnhandledMouseDown","moving","getRestrictArea","notifyNodeMove","posX","posY","enabled","prepareEmbedding","processEmbedding","finalizeEmbedding","scroller","autoScroll","NodeView","POINT_ROUNDING","sourceDef","targetDef","updateTerminalProperties","onLabelsChange","renderLabels","labelCache","onEdgeLabelRendered","normalizeLabelMarkup","parseLabelMarkup","labelNode","getDefaultLabel","updateLabels","customizeLabels","shouldRerenderLabels","updateLabelPositions","previousLabels","labelMarkup","hasChildNodes","canLabelMove","updateConnection","rawCount","simplify","simplifiedPoints","simplifiedCount","isFragmentDescendantOf","translateConnectionPoints","findAnchors","findRoutePoints","connectionPoints","findConnectionPoints","markerPoints","findMarkerPoints","findPath","firstVertex","lastVertex","findAnchorsOrdered","firstType","secondType","secondPoint","firstAnchor","secondAnchor","firstTerminal","secondTerminal","firstView","secondView","firstMagnet","secondMagnet","firstRef","secondRef","sourceEdgeAnchor","targetEdgeAnchor","edgeAnchor","defaultRouter","router","sourceTerminal","targetTerminal","firstRoutePoint","lastRoutePoint","sourcePointRef","sourceLine","connectionPointDef","connectionPoint","sourceConnectionPoint","targetConnectionPointDef","targetConnectionPoint","targetPointRef","targetLine","getLineWidth","sourceMarkerPoint","targetMarkerPoint","sourceStrokeWidth","targetStrokeWidth","defaultPosition","normalizeLabelPosition","labelPosition","getLabelTransformationMatrix","viewKey","updateTerminalMagnet","getCellById","endView","propName","getMagnetFromEdgeTerminal","getLabelAt","labelPositionArgs","defaultLabelPositionArgs","isOffsetAbsolute","absoluteOffset","isDistanceRelative","absoluteDistance","isDistanceAbsoluteReverse","reverseDistance","labelPoint","labelOffset","labelDistance","pointOffset","labelOffsetDiff","labelAngle","offsetCoord","isKeepGradient","keepGradient","isEnsureLegibility","ensureLegibility","pathOpt","vertexLength","getClosestPointLength","currentVertex","currentLength","startEdgeDragging","dragLabel","dragArrowhead","dragEdge","stopLabelDragging","stopArrowheadDragging","stopEdgeDragging","startLabelDragging","initialMagnet","initialTerminal","getValidateConnectionArgs","createValidateConnectionArgs","beforeArrowheadDragging","toFront","highlightAvailableMagnets","unhighlightAvailableMagnets","candidateTerminal","allowLoop","allowNode","allowEdge","allowPort","allowMulti","validateConnection","valid","doValidate","connectedEdges","allowBlank","allowConnectToBlank","validateEdge","currentMagnet","currentView","findMagnet","findViewsInArea","nodeOnly","edgeViews","findEdgeViewsFromPoint","prevView","closestView","prevMagnet","closestMagnet","minDistance","currentTerminal","previousCell","previousPort","previousView","previousPoint","currentCell","currentPort","previousMagnet","marked","magnets","availableMagnets","snapArrowhead","arrowheadDragging","snapArrowheadEnd","arrowheadDragged","finishEmbedding","notifyConnectionEvent","fallbackConnection","afterArrowheadDragging","positionAngle","getLabelPositionAngle","getLabelPositionArgs","getDefaultLabelPositionArgs","positionArgs","mergeLabelPositionArgs","originLabel","getLabelPosition","setLabelAt","EdgeView","viewport","primer","stage","overlay","restore","snapshoot","guarded","preventDefaultDblClick","preventDefaultContextMenu","isPreventDefaultContextMenu","mouseMovedCount","startPosition","preventDefaultMouseDown","preventDefaultBlankAction","moveThreshold","ev","relatedView","wheelDelta","magnetElem","magnetValue","handleMagnetEvent","onMagnetMouseDown","onMagnetDblClick","onMagnetContextMenu","onLabelMouseDown","GraphView","cloned","contextmenu","mouseover","mouseout","mouseenter","mouseleave","mousewheel","DOMMouseScroll","Options","panning","defaultGrid","booleas","scaling","eventTypes","zoomAtMousePosition","highlighting","nodeAvailable","magnetAvailable","edgeLabelMovable","virtual","startListening","backgroundImage","resolveGrid","getInstance","settings","patternUnits","patternElem","XMLSerializer","serializeToString","stopListening","viewportTransformString","viewportMatrix","getCTM","getComputedSize","clampScale","getTranslation","getScale","clientSize","scaleGrid","maxScale","minScale","gridWidth","gridHeight","paddings","border","contentArea","getContentArea","allowNewOrigin","minHeight","maxWidth","maxHeight","sizeChanged","originChanged","scaleContentToFitImpl","contentBBox","contentLocalOrigin","getContentBBox","graphToLocal","minScaleX","maxScaleX","minScaleY","maxScaleY","fittingBox","viewportArea","computedSize","currentTranslate","currentScale","newSX","newSY","newOX","newOY","getAllCellsBBox","centerPoint","zoomToRect","positionCell","positionPoint","positionRect","backgroundSize","backgroundPosition","HTMLImageElement","optionsCache","backgroundRepeat","quality","HTMLCanvasElement","toDataURL","src","updateBackgroundImage","updateBackgroundOptions","updateBackgroundColor","drawBackgroundImage","widgetOptions","preparePanning","onRightMouseDown","mousewheelHandle","MouseWheelHandle","allowMouseWheel","enable","disable","allowRubberband","allowPanning","startPanning","pannable","pan","stopPanning","graphArea","cumulatedFactor","startPos","targetScale","MIN_SAFE_INTEGER","hasScroller","clientToGraph","zoom","JOB_PRIORITY","resetRenderArea","setRenderArea","renderArea","JobQueue","isFlushing","isFlushPending","scheduleId","frameInterval","initialTime","job","PRIOR","findInsertionIndex","scheduleJob","flushJobsSync","cancelScheduleJob","getCurrentTime","queueFlush","ins","requestIdleCallback","flushJobs","timeout","cancelIdleCallback","hasPerformanceNow","performance","willRemoveViews","renderViews","onModelReseted","onCellZIndexChanged","onCellVisibleChanged","clearJobs","removeZPivots","resetViews","removeViews","viewItem","FLAG_INSERT","Update","toggleVisible","priorAction","queueJob","renderViewInArea","effectedEdges","getEffectedEdges","flushWaitingViews","state","ViewState","MOUNTED","createCellView","CREATED","getRenderPriority","isUpdatable","updateView","WAITING","RenderEdge","removeView","queueFlushSync","FLAG_REMOVE","insertView","pivot","addZPivot","zPivots","pivots","createComment","neighborZ","currentZ","layer","neighborPivot","createViewHook","isViewMounted","flagLabels","RenderNode","Scheduler","FLAG_RENDER","schedule","getElementById","filterId","isDefined","filterUnits","stops","markerUnits","markerOrient","markerId","pathMarker","orient","getClientOffset","scrollX","scrollY","getClientMatrix","localToGraphPoint","getPageOffset","localRect","graphPoint","clientPoint","pagePoint","graphToLocalPoint","graphRect","clientRect","pageOffset","graphToLocalRect","highlights","onCellHighlight","onCellUnhighlight","resolved","resolveHighlighter","graphOptions","highlighterDef","getScroller","autoResize","getContainer","getSensorTarget","installedPlugins","virtualRender","getRoots","getLeafs","isRoot","isLeaf","isNeighbor","getSuccessors","isSuccessor","getPredecessors","isPredecessor","cloneSubGraph","getShortestPath","updateCellId","findViewsFromPoint","getZoom","zoomToFit","getRotation","fitToContent","scaleContentToFit","centerContent","centerCell","positionContent","pageToLocalRect","pageToLocalPoint","localToPageRect","localToPagePoint","clientToLocalRect","localToClientRect","localToClientPoint","clientToGraphRect","clientToGraphPoint","gradient","setGridSize","onGraph","drawBackground","clearBackground","enableVirtualRender","disableVirtualRender","isMouseWheelEnabled","disableMouseWheel","enableMouseWheel","isPannable","enablePanning","disablePanning","plugin","pluginName","plugins","postPlugins","aboutToChangePlugins","getPlugins","pluginIns","isEnabled","clearCells","Graph","Renderer","MouseWheel","DefsManager","GridManager","CoordManager","TransformManager","HighlightManager","BackgroundManager","isGraph","registerNode","registerEdge","registerView","registerAttr","registerGrid","registerFilter","registerNodeTool","registerEdgeTool","registerBackground","registerHighlighter","registerPortLayout","registerPortLabelLayout","registerMarker","registerRouter","registerConnector","registerAnchor","registerEdgeAnchor","registerConnectionPoint","unregisterNode","unregisterEdge","unregisterView","unregisterAttr","unregisterGrid","unregisterFilter","unregisterNodeTool","unregisterEdgeTool","unregisterBackground","unregisterHighlighter","unregisterPortLayout","unregisterPortLabelLayout","unregisterMarker","unregisterRouter","unregisterConnector","unregisterAnchor","unregisterEdgeAnchor","unregisterConnectionPoint","HTML","shapeMaps","effect","renderHTMLComponent","foContent","fo","getFlowData","request","components","TaskTimeLine","mixins","isAudit","Boolean","extraInfo","srcList","loading","flowData","mounted","createGraph","beforeDestroy","substring","active","history","ename1","_this","getUsersByRoleList","companyName","company","officeName","office","getUserList","promiseWrapper","success","requestWrapper","req","downloadFile","elink"],"mappings":"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","file":"js/BillOutsourceOutAdd~BillReservedSubAdd~BillReturnMaterialsAdd~BillTransferAdd.c3e14266.js","sourcesContent":["import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) { // eslint-disable-line func-name-matching\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) { // eslint-disable-line func-name-matching\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) { // eslint-disable-line func-name-matching\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    formatter: formats.formatters[formats['default']],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) { // eslint-disable-line func-name-matching\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar stringify = function stringify( // eslint-disable-line func-name-matching\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly,\n    charset\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = obj.join(',');\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean' || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset);\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (isArray(obj)) {\n            pushToArray(values, stringify(\n                obj[key],\n                typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix,\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly,\n                charset\n            ));\n        } else {\n            pushToArray(values, stringify(\n                obj[key],\n                prefix + (allowDots ? '.' + key : '[' + key + ']'),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly,\n                charset\n            ));\n        }\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.encoder !== null && opts.encoder !== undefined && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if (opts && 'indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('✓')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","// compatible with NodeList.prototype.forEach() before chrome 51\n// https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach\nif (typeof window === 'object' &&\n    window.NodeList &&\n    !NodeList.prototype.forEach) {\n    NodeList.prototype.forEach = Array.prototype.forEach;\n}\n// compatible with ParentNode.append() before chrome 54\n// https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/append()/append().md\n;\n(function (arr) {\n    arr.forEach((item) => {\n        if (Object.prototype.hasOwnProperty.call(item, 'append')) {\n            return;\n        }\n        Object.defineProperty(item, 'append', {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n            value(...args) {\n                const docFrag = document.createDocumentFragment();\n                args.forEach((arg) => {\n                    const isNode = arg instanceof Node;\n                    docFrag.appendChild(isNode ? arg : document.createTextNode(String(arg)));\n                });\n                this.appendChild(docFrag);\n            },\n        });\n    });\n})([Element.prototype, Document.prototype, DocumentFragment.prototype]);\n//# sourceMappingURL=index.js.map","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=27a0e592&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=27a0e592&lang=scss&scoped=true&\"","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\n// This is what browsers will submit when the ✓ character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the ✓ character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('✓')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset);\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset);\n            val = options.decoder(part.slice(pos + 1), defaults.decoder, charset);\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (val && options.comma && val.indexOf(',') > -1) {\n            val = val.split(',');\n        }\n\n        if (has.call(obj, key)) {\n            obj[key] = utils.combine(obj[key], val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options) {\n    var leaf = val;\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (!options.parseArrays && cleanRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while ((segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new Error('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    return {\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        depth: typeof opts.depth === 'number' ? opts.depth : defaults.depth,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options);\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskTimeLine.vue?vue&type=style&index=0&id=34a1463c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskTimeLine.vue?vue&type=style&index=0&id=34a1463c&lang=scss&scoped=true&\"","module.exports = require(\"core-js/library/fn/object/keys\");","import _Object$keys from \"../../core-js/object/keys\";\nexport default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n\n  var sourceKeys = _Object$keys(source);\n\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import _Object$getOwnPropertySymbols from \"../../core-js/object/get-own-property-symbols\";\nimport objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (_Object$getOwnPropertySymbols) {\n    var sourceSymbolKeys = _Object$getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nmodule.exports = {\n    'default': 'RFC3986',\n    formatters: {\n        RFC1738: function (value) {\n            return replace.call(value, percentTwenties, '+');\n        },\n        RFC3986: function (value) {\n            return value;\n        }\n    },\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = typeof str === 'string' ? str : String(str);\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    merge: merge\n};\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","module.exports = require(\"core-js/library/fn/object/get-own-property-symbols\");","require('../../modules/es6.symbol');\nmodule.exports = require('../../modules/_core').Object.getOwnPropertySymbols;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container audit-wrapper\"},[(_vm.$route.query.type === 'edit' || _vm.$route.query.type === 'audit' || _vm.$route.query.type === 'auditHistory' )?_c('div',{staticClass:\"fl time-line\"},[_c('div',{staticClass:\"active-img\"},[_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-view\"},on:{\"click\":_vm.searchActiveX}},[_vm._v(\"查看当前流程\")])],1),_c('task-time-line',{staticClass:\"time-line\",attrs:{\"time-lines\":_vm.timeLines}})],1):_vm._e(),_c('div',{staticClass:\"fr\",style:({ 'width': _vm.$route.query.type ? 'calc(100% - 200px)' : '100%' })},[_vm._t(\"default\")],2),_c('el-dialog',{key:_vm.$route.query.processInstanceId,staticClass:\"flow-dialog\",attrs:{\"title\":\"流程跟踪图\",\"close-on-click-modal\":false,\"width\":\"1200px\",\"append-to-body\":\"\",\"lock-scroll\":false,\"visible\":_vm.dialogVisible,\"before-close\":_vm.beforeClose,\"top\":\"0\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticStyle:{\"max-height\":\"90vh\",\"overflow\":\"auto\"}},[_c('div',{attrs:{\"id\":\"container\"}})])]),_c('el-dialog',{attrs:{\"title\":\"查看人员\",\"close-on-click-modal\":false,\"width\":\"900px\",\"append-to-body\":\"\",\"lock-scroll\":false,\"visible\":_vm.userDialogVisible,\"before-close\":_vm.userBeforeClose},on:{\"update:visible\":function($event){_vm.userDialogVisible=$event}}},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"table\",staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"mini\",\"data\":_vm.list,\"border\":\"\",\"stripe\":\"\",\"row-key\":\"id\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"type\":\"index\",\"label\":\"序号\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"登录名\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"no\",\"label\":\"工号\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"nickName\",\"label\":\"姓名\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"companyName\",\"label\":\"归属公司\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"officeName\",\"label\":\"归属部门\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"mobile\",\"label\":\"手机\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"phone\",\"label\":\"电话\",\"align\":\"center\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-timeline',_vm._l((_vm.timeLines),function(item){return _c('el-timeline-item',{key:item.taskId,attrs:{\"timestamp\":item.time,\"placement\":\"top\"}},[_c('el-card',{staticClass:\"info\"},[_c('p',[_c('span',{staticClass:\"blue\"},[_vm._v(\" \"+_vm._s(item.userName)+\" \")]),_vm._v(\" 在 \"),_c('span',{staticClass:\"warning\"},[_vm._v(_vm._s(item.taskName ? item.taskName : '编辑'))]),_vm._v(\" 节点进行了 \"),_c('span',{class:item.type !== 'BH' ? 'green': 'red'},[_vm._v(_vm._s(item.typeName))]),_vm._v(\" 操作\")]),_c('p',{staticClass:\"message\"},[_vm._v(\"意见： \"+_vm._s(item.message))])])],1)}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-timeline>\r\n    <el-timeline-item v-for=\"item in timeLines\" :key=\"item.taskId\" :timestamp=\"item.time\" placement=\"top\">\r\n      <el-card class=\"info\">\r\n        <p><span class=\"blue\"> {{ item.userName }} </span> 在 <span class=\"warning\">{{ item.taskName ? item.taskName : '编辑' }}</span> 节点进行了 <span :class=\"item.type !== 'BH' ? 'green': 'red'\">{{ item.typeName }}</span> 操作</p>\r\n        <p class=\"message\">意见： {{ item.message }}</p>\r\n      </el-card>\r\n    </el-timeline-item>\r\n  </el-timeline>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TaskTimeLine',\r\n  props: {\r\n    timeLines: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {}\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n.info {\r\n  span{\r\n    font-weight: 600;\r\n  }\r\n  .blue {\r\n    color: $light-blue;\r\n  }\r\n  .green {\r\n    color: $green;\r\n  }\r\n  .warning {\r\n    color: $warning;\r\n  }\r\n  .red {\r\n    color: $red;\r\n  }\r\n  .message{\r\n    margin-top: 10px;\r\n    font-size: 12px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskTimeLine.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskTimeLine.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaskTimeLine.vue?vue&type=template&id=34a1463c&scoped=true&\"\nimport script from \"./TaskTimeLine.vue?vue&type=script&lang=js&\"\nexport * from \"./TaskTimeLine.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TaskTimeLine.vue?vue&type=style&index=0&id=34a1463c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34a1463c\",\n  null\n  \n)\n\nexport default component.exports","import { getProcessTimeLineApi } from '@/apis/modules/common'\r\n\r\n// 审批任务时间轴数据\r\nexport const taskTimeLineMixins = {\r\n  data() {\r\n    return {\r\n      timeLines: []\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取时间轴\r\n    initProcessTimeLine() {\r\n      console.log(this.$route.query)\r\n      const processInstanceId = this.$route.query.processInstanceId\r\n      if (!processInstanceId) return\r\n      getProcessTimeLineApi({\r\n        processInstanceId\r\n      }).then(res => {\r\n        const { code, data } = res\r\n        if (!code) {\r\n          this.timeLines = data\r\n        }\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    }\r\n  }\r\n}\r\n","/* eslint-disable no-underscore-dangle */\nexport class Disposable {\n    get disposed() {\n        return this._disposed === true;\n    }\n    dispose() {\n        this._disposed = true;\n    }\n}\n(function (Disposable) {\n    function dispose() {\n        return (target, methodName, descriptor) => {\n            const raw = descriptor.value;\n            const proto = target.__proto__; // eslint-disable-line\n            descriptor.value = function (...args) {\n                if (this.disposed) {\n                    return;\n                }\n                raw.call(this, ...args);\n                proto.dispose.call(this);\n            };\n        };\n    }\n    Disposable.dispose = dispose;\n})(Disposable || (Disposable = {}));\n/**\n * A disposable object which delegates to a callback function.\n */\nexport class DisposableDelegate {\n    /**\n     * Construct a new disposable delegate.\n     *\n     * @param callback - The callback function to invoke on dispose.\n     */\n    constructor(callback) {\n        this.callback = callback;\n    }\n    /**\n     * Test whether the delegate has been disposed.\n     */\n    get disposed() {\n        return !this.callback;\n    }\n    /**\n     * Dispose of the delegate and invoke the callback function.\n     */\n    dispose() {\n        if (!this.callback) {\n            return;\n        }\n        const callback = this.callback;\n        this.callback = null;\n        callback();\n    }\n}\n/**\n * An object which manages a collection of disposable items.\n */\nexport class DisposableSet {\n    constructor() {\n        this.isDisposed = false; // eslint-disable-line:variable-name\n        this.items = new Set();\n    }\n    /**\n     * Test whether the set has been disposed.\n     */\n    get disposed() {\n        return this.isDisposed;\n    }\n    /**\n     * Dispose of the set and the items it contains.\n     *\n     * #### Notes\n     * Items are disposed in the order they are added to the set.\n     */\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this.items.forEach((item) => {\n            item.dispose();\n        });\n        this.items.clear();\n    }\n    /**\n     * Test whether the set contains a specific item.\n     *\n     * @param item - The item of interest.\n     *\n     * @returns `true` if the set contains the item, `false` otherwise.\n     */\n    contains(item) {\n        return this.items.has(item);\n    }\n    /**\n     * Add a disposable item to the set.\n     *\n     * @param item - The item to add to the set.\n     *\n     * #### Notes\n     * If the item is already contained in the set, this is a no-op.\n     */\n    add(item) {\n        this.items.add(item);\n    }\n    /**\n     * Remove a disposable item from the set.\n     *\n     * @param item - The item to remove from the set.\n     *\n     * #### Notes\n     * If the item is not contained in the set, this is a no-op.\n     */\n    remove(item) {\n        this.items.delete(item);\n    }\n    /**\n     * Remove all items from the set.\n     */\n    clear() {\n        this.items.clear();\n    }\n}\n(function (DisposableSet) {\n    /**\n     * Create a disposable set from an iterable of items.\n     *\n     * @param items - The iterable or array-like object of interest.\n     *\n     * @returns A new disposable initialized with the given items.\n     */\n    function from(items) {\n        const set = new DisposableSet();\n        items.forEach((item) => {\n            set.add(item);\n        });\n        return set;\n    }\n    DisposableSet.from = from;\n})(DisposableSet || (DisposableSet = {}));\n//# sourceMappingURL=disposable.js.map","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","export { debounce, throttle } from 'lodash-es';\nexport function apply(fn, ctx, args) {\n    if (args) {\n        switch (args.length) {\n            case 0:\n                return fn.call(ctx);\n            case 1:\n                return fn.call(ctx, args[0]);\n            case 2:\n                return fn.call(ctx, args[0], args[1]);\n            case 3:\n                return fn.call(ctx, args[0], args[1], args[2]);\n            case 4:\n                return fn.call(ctx, args[0], args[1], args[2], args[3]);\n            case 5:\n                return fn.call(ctx, args[0], args[1], args[2], args[3], args[4]);\n            case 6:\n                return fn.call(ctx, args[0], args[1], args[2], args[3], args[4], args[5]);\n            default:\n                return fn.apply(ctx, args);\n        }\n    }\n    return fn.call(ctx);\n}\nexport function call(fn, ctx, ...args) {\n    return apply(fn, ctx, args);\n}\n//# sourceMappingURL=function.js.map","export function isAsyncLike(obj) {\n    return typeof obj === 'object' && obj.then && typeof obj.then === 'function';\n}\nexport function isAsync(obj) {\n    return obj != null && (obj instanceof Promise || isAsyncLike(obj));\n}\nexport function toAsyncBoolean(...inputs) {\n    const results = [];\n    inputs.forEach((arg) => {\n        if (Array.isArray(arg)) {\n            results.push(...arg);\n        }\n        else {\n            results.push(arg);\n        }\n    });\n    const hasAsync = results.some((res) => isAsync(res));\n    if (hasAsync) {\n        const deferres = results.map((res) => isAsync(res) ? res : Promise.resolve(res !== false));\n        return Promise.all(deferres).then((arr) => arr.reduce((memo, item) => item !== false && memo, true));\n    }\n    return results.every((res) => res !== false);\n}\nexport function toDeferredBoolean(...inputs) {\n    const ret = toAsyncBoolean(inputs);\n    return typeof ret === 'boolean' ? Promise.resolve(ret) : ret;\n}\n//# sourceMappingURL=async.js.map","import { FunctionExt } from '../function';\nexport function call(list, args) {\n    const results = [];\n    for (let i = 0; i < list.length; i += 2) {\n        const handler = list[i];\n        const context = list[i + 1];\n        const params = Array.isArray(args) ? args : [args];\n        const ret = FunctionExt.apply(handler, context, params);\n        results.push(ret);\n    }\n    return FunctionExt.toAsyncBoolean(results);\n}\n//# sourceMappingURL=util.js.map","import { call } from './util';\nimport { FunctionExt } from '../function';\nexport class Events {\n    constructor() {\n        this.listeners = {};\n    }\n    on(name, handler, context) {\n        if (handler == null) {\n            return this;\n        }\n        if (!this.listeners[name]) {\n            this.listeners[name] = [];\n        }\n        const cache = this.listeners[name];\n        cache.push(handler, context);\n        return this;\n    }\n    once(name, handler, context) {\n        const cb = (...args) => {\n            this.off(name, cb);\n            return call([handler, context], args);\n        };\n        return this.on(name, cb, this);\n    }\n    off(name, handler, context) {\n        // remove all events.\n        if (!(name || handler || context)) {\n            this.listeners = {};\n            return this;\n        }\n        const listeners = this.listeners;\n        const names = name ? [name] : Object.keys(listeners);\n        names.forEach((n) => {\n            const cache = listeners[n];\n            if (!cache) {\n                return;\n            }\n            // remove all events with specified name.\n            if (!(handler || context)) {\n                delete listeners[n];\n                return;\n            }\n            for (let i = cache.length - 2; i >= 0; i -= 2) {\n                if (!((handler && cache[i] !== handler) ||\n                    (context && cache[i + 1] !== context))) {\n                    cache.splice(i, 2);\n                }\n            }\n        });\n        return this;\n    }\n    trigger(name, ...args) {\n        let returned = true;\n        if (name !== '*') {\n            const list = this.listeners[name];\n            if (list != null) {\n                returned = call([...list], args);\n            }\n        }\n        const list = this.listeners['*'];\n        if (list != null) {\n            return FunctionExt.toAsyncBoolean([\n                returned,\n                call([...list], [name, ...args]),\n            ]);\n        }\n        return returned;\n    }\n    emit(name, ...args) {\n        return this.trigger(name, ...args);\n    }\n}\n//# sourceMappingURL=events.js.map","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nexport default baseHas;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nexport default isKey;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import MapCache from './_MapCache.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nexport default memoize;\n","import memoize from './memoize.js';\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nexport default memoizeCapped;\n","import memoizeCapped from './_memoizeCapped.js';\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nexport default stringToPath;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import isArray from './isArray.js';\nimport isKey from './_isKey.js';\nimport stringToPath from './_stringToPath.js';\nimport toString from './toString.js';\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nexport default castPath;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default toKey;\n","import castPath from './_castPath.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isIndex from './_isIndex.js';\nimport isLength from './isLength.js';\nimport toKey from './_toKey.js';\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nexport default hasPath;\n","import baseHas from './_baseHas.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nexport default has;\n","import castPath from './_castPath.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nexport default baseGet;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport castPath from './_castPath.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nexport default baseSet;\n","import baseGet from './_baseGet.js';\nimport baseSet from './_baseSet.js';\nimport castPath from './_castPath.js';\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nexport default basePickBy;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nexport default baseHasIn;\n","import baseHasIn from './_baseHasIn.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nexport default hasIn;\n","import basePickBy from './_basePickBy.js';\nimport hasIn from './hasIn.js';\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nexport default basePick;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import Symbol from './_Symbol.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nexport default isFlattenable;\n","import arrayPush from './_arrayPush.js';\nimport isFlattenable from './_isFlattenable.js';\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nexport default baseFlatten;\n","import baseFlatten from './_baseFlatten.js';\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nexport default flatten;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import flatten from './flatten.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nexport default flatRest;\n","import basePick from './_basePick.js';\nimport flatRest from './_flatRest.js';\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nexport default pick;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n","import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n","import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n","import baseKeys from './_baseKeys.js';\nimport getTag from './_getTag.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLike from './isArrayLike.js';\nimport isBuffer from './isBuffer.js';\nimport isPrototype from './_isPrototype.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport default isEmpty;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nexport default clone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","import baseRest from './_baseRest.js';\nimport eq from './eq.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport keysIn from './keysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nexport default defaults;\n","import baseMerge from './_baseMerge.js';\nimport isObject from './isObject.js';\n\n/**\n * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n * objects into destination objects that are passed thru.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to merge.\n * @param {Object} object The parent object of `objValue`.\n * @param {Object} source The parent object of `srcValue`.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n  if (isObject(objValue) && isObject(srcValue)) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, objValue);\n    baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n    stack['delete'](srcValue);\n  }\n  return objValue;\n}\n\nexport default customDefaultsMerge;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nexport default mergeWith;\n","import apply from './_apply.js';\nimport baseRest from './_baseRest.js';\nimport customDefaultsMerge from './_customDefaultsMerge.js';\nimport mergeWith from './mergeWith.js';\n\n/**\n * This method is like `_.defaults` except that it recursively assigns\n * default properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaults\n * @example\n *\n * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n * // => { 'a': { 'b': 2, 'c': 3 } }\n */\nvar defaultsDeep = baseRest(function(args) {\n  args.push(undefined, customDefaultsMerge);\n  return apply(mergeWith, undefined, args);\n});\n\nexport default defaultsDeep;\n","/**\n * @see https://www.typescriptlang.org/docs/handbook/mixins.html\n */\nexport function applyMixins(derivedCtor, ...baseCtors) {\n    baseCtors.forEach((baseCtor) => {\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n            if (name !== 'constructor') {\n                Object.defineProperty(derivedCtor.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name));\n            }\n        });\n    });\n}\n//# sourceMappingURL=mixins.js.map","const extendStatics = Object.setPrototypeOf ||\n    ({ __proto__: [] } instanceof Array &&\n        function (d, b) {\n            d.__proto__ = b; // eslint-disable-line no-proto\n        }) ||\n    function (d, b) {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const p in b) {\n            if (Object.prototype.hasOwnProperty.call(b, p)) {\n                d[p] = b[p];\n            }\n        }\n    };\n/**\n * @see https://github.com/microsoft/TypeScript/blob/5c85febb0ce9d6088cbe9b09cb42f73f9ee8ea05/src/compiler/transformers/es2015.ts#L4309\n */\n// eslint-disable-next-line\nexport function inherit(cls, base) {\n    extendStatics(cls, base);\n    function tmp() {\n        this.constructor = cls;\n    }\n    cls.prototype =\n        base === null\n            ? Object.create(base)\n            : ((tmp.prototype = base.prototype), new tmp());\n}\nclass A {\n}\nconst isNativeClass = /^\\s*class\\s+/.test(`${A}`) || /^\\s*class\\s*\\{/.test(`${class {\n}}`);\n/**\n * Extends class with specified class name.\n */\nexport function createClass(className, base) {\n    let cls;\n    if (isNativeClass) {\n        cls = class extends base {\n        };\n    }\n    else {\n        cls = function () {\n            return base.apply(this, arguments); // eslint-disable-line\n        };\n        inherit(cls, base);\n    }\n    Object.defineProperty(cls, 'name', { value: className });\n    return cls;\n}\n//# sourceMappingURL=inherit.js.map","export { has, pick, merge, isEqual, isEmpty, isObject, isPlainObject, clone, cloneDeep, defaults, defaultsDeep, } from 'lodash-es';\nexport * from './mixins';\nexport * from './inherit';\nexport function ensure(value, defaultValue) {\n    return value != null ? value : defaultValue;\n}\nexport function getValue(obj, key, defaultValue) {\n    const value = obj != null ? obj[key] : null;\n    return defaultValue !== undefined ? ensure(value, defaultValue) : value;\n}\nexport function getNumber(obj, key, defaultValue) {\n    let value = obj != null ? obj[key] : null;\n    if (value == null) {\n        return defaultValue;\n    }\n    value = +value;\n    if (Number.isNaN(value) || !Number.isFinite(value)) {\n        return defaultValue;\n    }\n    return value;\n}\nexport function getBoolean(obj, key, defaultValue) {\n    const value = obj != null ? obj[key] : null;\n    if (value == null) {\n        return defaultValue;\n    }\n    return !!value;\n}\nexport function isMaliciousProp(prop) {\n    return prop === '__proto__';\n}\nexport function getByPath(obj, path, delimiter = '/') {\n    let ret;\n    const keys = Array.isArray(path) ? path : path.split(delimiter);\n    if (keys.length) {\n        ret = obj;\n        while (keys.length) {\n            const key = keys.shift();\n            if (Object(ret) === ret && key && key in ret) {\n                ret = ret[key];\n            }\n            else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\nexport function setByPath(obj, path, value, delimiter = '/') {\n    const keys = Array.isArray(path) ? path : path.split(delimiter);\n    const lastKey = keys.pop();\n    if (lastKey && !isMaliciousProp(lastKey)) {\n        let diver = obj;\n        keys.forEach((key) => {\n            if (!isMaliciousProp(key)) {\n                if (diver[key] == null) {\n                    diver[key] = {};\n                }\n                diver = diver[key];\n            }\n        });\n        diver[lastKey] = value;\n    }\n    return obj;\n}\nexport function unsetByPath(obj, path, delimiter = '/') {\n    const keys = Array.isArray(path) ? path.slice() : path.split(delimiter);\n    const propertyToRemove = keys.pop();\n    if (propertyToRemove) {\n        if (keys.length > 0) {\n            const parent = getByPath(obj, keys);\n            if (parent) {\n                delete parent[propertyToRemove];\n            }\n        }\n        else {\n            delete obj[propertyToRemove];\n        }\n    }\n    return obj;\n}\n// eslint-disable-next-line default-param-last\nexport function flatten(obj, delim = '/', stop) {\n    const ret = {};\n    Object.keys(obj).forEach((key) => {\n        const val = obj[key];\n        let deep = typeof val === 'object' || Array.isArray(val);\n        if (deep && stop && stop(val)) {\n            deep = false;\n        }\n        if (deep) {\n            const flatObject = flatten(val, delim, stop);\n            Object.keys(flatObject).forEach((flatKey) => {\n                ret[key + delim + flatKey] = flatObject[flatKey];\n            });\n        }\n        else {\n            ret[key] = val;\n        }\n    });\n    // eslint-disable-next-line no-restricted-syntax\n    for (const key in obj) {\n        if (!Object.prototype.hasOwnProperty.call(obj, key)) {\n            continue;\n        }\n    }\n    return ret;\n}\n//# sourceMappingURL=object.js.map","import { Events } from '../event';\nimport { ObjectExt } from '../object';\nimport { Disposable } from './disposable';\nexport class Basecoat extends Events {\n}\n(function (Basecoat) {\n    Basecoat.dispose = Disposable.dispose;\n})(Basecoat || (Basecoat = {}));\nObjectExt.applyMixins(Basecoat, Disposable);\n//# sourceMappingURL=basecoat.js.map","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nexport default baseIsNaN;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default strictIndexOf;\n","import baseFindIndex from './_baseFindIndex.js';\nimport baseIsNaN from './_baseIsNaN.js';\nimport strictIndexOf from './_strictIndexOf.js';\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nexport default baseIndexOf;\n","import baseIndexOf from './_baseIndexOf.js';\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nexport default arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arrayIncludesWith;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nexport default noop;\n","import Set from './_Set.js';\nimport noop from './noop.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nexport default createSet;\n","import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport cacheHas from './_cacheHas.js';\nimport createSet from './_createSet.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseUniq;\n","import baseUniq from './_baseUniq.js';\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nexport default uniq;\n","import baseFlatten from './_baseFlatten.js';\nimport baseRest from './_baseRest.js';\nimport baseUniq from './_baseUniq.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Creates an array of unique values, in order, from all given arrays using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.union([2], [1, 2]);\n * // => [2, 1]\n */\nvar union = baseRest(function(arrays) {\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n});\n\nexport default union;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295,\n    MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeFloor = Math.floor,\n    nativeMin = Math.min;\n\n/**\n * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n * which invokes `iteratee` for `value` and each element of `array` to compute\n * their sort ranking. The iteratee is invoked with one argument; (value).\n *\n * @private\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {Function} iteratee The iteratee invoked per element.\n * @param {boolean} [retHighest] Specify returning the highest qualified index.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n */\nfunction baseSortedIndexBy(array, value, iteratee, retHighest) {\n  var low = 0,\n      high = array == null ? 0 : array.length;\n  if (high === 0) {\n    return 0;\n  }\n\n  value = iteratee(value);\n  var valIsNaN = value !== value,\n      valIsNull = value === null,\n      valIsSymbol = isSymbol(value),\n      valIsUndefined = value === undefined;\n\n  while (low < high) {\n    var mid = nativeFloor((low + high) / 2),\n        computed = iteratee(array[mid]),\n        othIsDefined = computed !== undefined,\n        othIsNull = computed === null,\n        othIsReflexive = computed === computed,\n        othIsSymbol = isSymbol(computed);\n\n    if (valIsNaN) {\n      var setLow = retHighest || othIsReflexive;\n    } else if (valIsUndefined) {\n      setLow = othIsReflexive && (retHighest || othIsDefined);\n    } else if (valIsNull) {\n      setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n    } else if (valIsSymbol) {\n      setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n    } else if (othIsNull || othIsSymbol) {\n      setLow = false;\n    } else {\n      setLow = retHighest ? (computed <= value) : (computed < value);\n    }\n    if (setLow) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return nativeMin(high, MAX_ARRAY_INDEX);\n}\n\nexport default baseSortedIndexBy;\n","import baseSortedIndexBy from './_baseSortedIndexBy.js';\nimport identity from './identity.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295,\n    HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n/**\n * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n * performs a binary search of `array` to determine the index at which `value`\n * should be inserted into `array` in order to maintain its sort order.\n *\n * @private\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {boolean} [retHighest] Specify returning the highest qualified index.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n */\nfunction baseSortedIndex(array, value, retHighest) {\n  var low = 0,\n      high = array == null ? low : array.length;\n\n  if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n    while (low < high) {\n      var mid = (low + high) >>> 1,\n          computed = array[mid];\n\n      if (computed !== null && !isSymbol(computed) &&\n          (retHighest ? (computed <= value) : (computed < value))) {\n        low = mid + 1;\n      } else {\n        high = mid;\n      }\n    }\n    return high;\n  }\n  return baseSortedIndexBy(array, value, identity, retHighest);\n}\n\nexport default baseSortedIndex;\n","import baseSortedIndex from './_baseSortedIndex.js';\n\n/**\n * Uses a binary search to determine the lowest index at which `value`\n * should be inserted into `array` in order to maintain its sort order.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n * @example\n *\n * _.sortedIndex([30, 50], 40);\n * // => 1\n */\nfunction sortedIndex(array, value) {\n  return baseSortedIndex(array, value);\n}\n\nexport default sortedIndex;\n","import Stack from './_Stack.js';\nimport baseIsEqual from './_baseIsEqual.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nexport default baseIsMatch;\n","import isObject from './isObject.js';\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nexport default isStrictComparable;\n","import isStrictComparable from './_isStrictComparable.js';\nimport keys from './keys.js';\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nexport default getMatchData;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nexport default matchesStrictComparable;\n","import baseIsMatch from './_baseIsMatch.js';\nimport getMatchData from './_getMatchData.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nexport default baseMatches;\n","import baseGet from './_baseGet.js';\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nexport default get;\n","import baseIsEqual from './_baseIsEqual.js';\nimport get from './get.js';\nimport hasIn from './hasIn.js';\nimport isKey from './_isKey.js';\nimport isStrictComparable from './_isStrictComparable.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\nimport toKey from './_toKey.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nexport default baseMatchesProperty;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default baseProperty;\n","import baseGet from './_baseGet.js';\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nexport default basePropertyDeep;\n","import baseProperty from './_baseProperty.js';\nimport basePropertyDeep from './_basePropertyDeep.js';\nimport isKey from './_isKey.js';\nimport toKey from './_toKey.js';\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nexport default property;\n","import baseMatches from './_baseMatches.js';\nimport baseMatchesProperty from './_baseMatchesProperty.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\nimport property from './property.js';\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nexport default baseIteratee;\n","import baseIteratee from './_baseIteratee.js';\nimport baseSortedIndexBy from './_baseSortedIndexBy.js';\n\n/**\n * This method is like `_.sortedIndex` except that it accepts `iteratee`\n * which is invoked for `value` and each element of `array` to compute their\n * sort ranking. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n * @example\n *\n * var objects = [{ 'x': 4 }, { 'x': 5 }];\n *\n * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n * // => 0\n */\nfunction sortedIndexBy(array, value, iteratee) {\n  return baseSortedIndexBy(array, value, baseIteratee(iteratee, 2));\n}\n\nexport default sortedIndexBy;\n","import baseFor from './_baseFor.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nexport default baseForOwn;\n","import isArrayLike from './isArrayLike.js';\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nexport default createBaseEach;\n","import baseForOwn from './_baseForOwn.js';\nimport createBaseEach from './_createBaseEach.js';\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nexport default baseEach;\n","import baseEach from './_baseEach.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nexport default baseMap;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nexport default baseSortBy;\n","import isSymbol from './isSymbol.js';\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nexport default compareAscending;\n","import compareAscending from './_compareAscending.js';\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nexport default compareMultiple;\n","import arrayMap from './_arrayMap.js';\nimport baseGet from './_baseGet.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseMap from './_baseMap.js';\nimport baseSortBy from './_baseSortBy.js';\nimport baseUnary from './_baseUnary.js';\nimport compareMultiple from './_compareMultiple.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nexport default baseOrderBy;\n","import baseFlatten from './_baseFlatten.js';\nimport baseOrderBy from './_baseOrderBy.js';\nimport baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 30 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nexport default sortBy;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nexport default arrayAggregator;\n","import baseEach from './_baseEach.js';\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nexport default baseAggregator;\n","import arrayAggregator from './_arrayAggregator.js';\nimport baseAggregator from './_baseAggregator.js';\nimport baseIteratee from './_baseIteratee.js';\nimport isArray from './isArray.js';\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nexport default createAggregator;\n","import baseAssignValue from './_baseAssignValue.js';\nimport createAggregator from './_createAggregator.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nexport default groupBy;\n","import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport arrayMap from './_arrayMap.js';\nimport baseUnary from './_baseUnary.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseDifference;\n","import baseDifference from './_baseDifference.js';\nimport baseFlatten from './_baseFlatten.js';\nimport baseRest from './_baseRest.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\nexport default difference;\n","import isSymbol from './isSymbol.js';\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nexport default baseExtremum;\n","/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nexport default baseGt;\n","import baseExtremum from './_baseExtremum.js';\nimport baseGt from './_baseGt.js';\nimport identity from './identity.js';\n\n/**\n * Computes the maximum value of `array`. If `array` is empty or falsey,\n * `undefined` is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * _.max([4, 2, 8, 6]);\n * // => 8\n *\n * _.max([]);\n * // => undefined\n */\nfunction max(array) {\n  return (array && array.length)\n    ? baseExtremum(array, identity, baseGt)\n    : undefined;\n}\n\nexport default max;\n","import toString from './toString.js';\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nexport default uniqueId;\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nexport default arrayReduce;\n","/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default basePropertyOf;\n","import basePropertyOf from './_basePropertyOf.js';\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nvar deburredLetters = {\n  // Latin-1 Supplement block.\n  '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n  '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n  '\\xc7': 'C',  '\\xe7': 'c',\n  '\\xd0': 'D',  '\\xf0': 'd',\n  '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n  '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n  '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n  '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n  '\\xd1': 'N',  '\\xf1': 'n',\n  '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n  '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n  '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n  '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n  '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n  '\\xc6': 'Ae', '\\xe6': 'ae',\n  '\\xde': 'Th', '\\xfe': 'th',\n  '\\xdf': 'ss',\n  // Latin Extended-A block.\n  '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n  '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n  '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n  '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n  '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n  '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n  '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n  '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n  '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n  '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n  '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n  '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n  '\\u0134': 'J',  '\\u0135': 'j',\n  '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n  '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n  '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n  '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n  '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n  '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n  '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n  '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n  '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n  '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n  '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n  '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n  '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n  '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n  '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n  '\\u0174': 'W',  '\\u0175': 'w',\n  '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n  '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n  '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n  '\\u0132': 'IJ', '\\u0133': 'ij',\n  '\\u0152': 'Oe', '\\u0153': 'oe',\n  '\\u0149': \"'n\", '\\u017f': 's'\n};\n\n/**\n * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nvar deburrLetter = basePropertyOf(deburredLetters);\n\nexport default deburrLetter;\n","import deburrLetter from './_deburrLetter.js';\nimport toString from './toString.js';\n\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nvar reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nvar rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;\n\n/** Used to compose unicode capture groups. */\nvar rsCombo = '[' + rsComboRange + ']';\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nvar reComboMark = RegExp(rsCombo, 'g');\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * _.deburr('déjà vu');\n * // => 'deja vu'\n */\nfunction deburr(string) {\n  string = toString(string);\n  return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n}\n\nexport default deburr;\n","/** Used to match words composed of alphanumeric characters. */\nvar reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n/**\n * Splits an ASCII `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction asciiWords(string) {\n  return string.match(reAsciiWord) || [];\n}\n\nexport default asciiWords;\n","/** Used to detect strings that need a more robust regexp to match words. */\nvar reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n/**\n * Checks if `string` contains a word composed of Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a word is found, else `false`.\n */\nfunction hasUnicodeWord(string) {\n  return reHasUnicodeWord.test(string);\n}\n\nexport default hasUnicodeWord;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsDingbatRange = '\\\\u2700-\\\\u27bf',\n    rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n    rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n    rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n    rsPunctuationRange = '\\\\u2000-\\\\u206f',\n    rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n    rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f',\n    rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\",\n    rsBreak = '[' + rsBreakRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsDigits = '\\\\d+',\n    rsDingbat = '[' + rsDingbatRange + ']',\n    rsLower = '[' + rsLowerRange + ']',\n    rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsUpper = '[' + rsUpperRange + ']',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n    rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n    rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n    rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n    reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n    rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq;\n\n/** Used to match complex or compound words. */\nvar reUnicodeWord = RegExp([\n  rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n  rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n  rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n  rsUpper + '+' + rsOptContrUpper,\n  rsOrdUpper,\n  rsOrdLower,\n  rsDigits,\n  rsEmoji\n].join('|'), 'g');\n\n/**\n * Splits a Unicode `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction unicodeWords(string) {\n  return string.match(reUnicodeWord) || [];\n}\n\nexport default unicodeWords;\n","import asciiWords from './_asciiWords.js';\nimport hasUnicodeWord from './_hasUnicodeWord.js';\nimport toString from './toString.js';\nimport unicodeWords from './_unicodeWords.js';\n\n/**\n * Splits `string` into an array of its words.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {RegExp|string} [pattern] The pattern to match words.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the words of `string`.\n * @example\n *\n * _.words('fred, barney, & pebbles');\n * // => ['fred', 'barney', 'pebbles']\n *\n * _.words('fred, barney, & pebbles', /[^, ]+/g);\n * // => ['fred', 'barney', '&', 'pebbles']\n */\nfunction words(string, pattern, guard) {\n  string = toString(string);\n  pattern = guard ? undefined : pattern;\n\n  if (pattern === undefined) {\n    return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n  }\n  return string.match(pattern) || [];\n}\n\nexport default words;\n","import arrayReduce from './_arrayReduce.js';\nimport deburr from './deburr.js';\nimport words from './words.js';\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\";\n\n/** Used to match apostrophes. */\nvar reApos = RegExp(rsApos, 'g');\n\n/**\n * Creates a function like `_.camelCase`.\n *\n * @private\n * @param {Function} callback The function to combine each word.\n * @returns {Function} Returns the new compounder function.\n */\nfunction createCompounder(callback) {\n  return function(string) {\n    return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n  };\n}\n\nexport default createCompounder;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nexport default baseSlice;\n","import baseSlice from './_baseSlice.js';\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nexport default castSlice;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nexport default hasUnicode;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nexport default asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nexport default unicodeToArray;\n","import asciiToArray from './_asciiToArray.js';\nimport hasUnicode from './_hasUnicode.js';\nimport unicodeToArray from './_unicodeToArray.js';\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nexport default stringToArray;\n","import castSlice from './_castSlice.js';\nimport hasUnicode from './_hasUnicode.js';\nimport stringToArray from './_stringToArray.js';\nimport toString from './toString.js';\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nexport default createCaseFirst;\n","import createCaseFirst from './_createCaseFirst.js';\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nexport default upperFirst;\n","import createCompounder from './_createCompounder.js';\nimport upperFirst from './upperFirst.js';\n\n/**\n * Converts `string` to\n * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n *\n * @static\n * @memberOf _\n * @since 3.1.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the start cased string.\n * @example\n *\n * _.startCase('--foo-bar--');\n * // => 'Foo Bar'\n *\n * _.startCase('fooBar');\n * // => 'Foo Bar'\n *\n * _.startCase('__FOO_BAR__');\n * // => 'FOO BAR'\n */\nvar startCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + upperFirst(word);\n});\n\nexport default startCase;\n","import toString from './toString.js';\nimport upperFirst from './upperFirst.js';\n\n/**\n * Converts the first character of `string` to upper case and the remaining\n * to lower case.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to capitalize.\n * @returns {string} Returns the capitalized string.\n * @example\n *\n * _.capitalize('FRED');\n * // => 'Fred'\n */\nfunction capitalize(string) {\n  return upperFirst(toString(string).toLowerCase());\n}\n\nexport default capitalize;\n","import capitalize from './capitalize.js';\nimport createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the camel cased string.\n * @example\n *\n * _.camelCase('Foo Bar');\n * // => 'fooBar'\n *\n * _.camelCase('--foo-bar--');\n * // => 'fooBar'\n *\n * _.camelCase('__FOO_BAR__');\n * // => 'fooBar'\n */\nvar camelCase = createCompounder(function(result, word, index) {\n  word = word.toLowerCase();\n  return result + (index ? capitalize(word) : word);\n});\n\nexport default camelCase;\n","import createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string`, as space separated words, to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the upper cased string.\n * @example\n *\n * _.upperCase('--foo-bar');\n * // => 'FOO BAR'\n *\n * _.upperCase('fooBar');\n * // => 'FOO BAR'\n *\n * _.upperCase('__foo_bar__');\n * // => 'FOO BAR'\n */\nvar upperCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + word.toUpperCase();\n});\n\nexport default upperCase;\n","import createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string`, as space separated words, to lower case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the lower cased string.\n * @example\n *\n * _.lowerCase('--Foo-Bar--');\n * // => 'foo bar'\n *\n * _.lowerCase('fooBar');\n * // => 'foo bar'\n *\n * _.lowerCase('__FOO_BAR__');\n * // => 'foo bar'\n */\nvar lowerCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + word.toLowerCase();\n});\n\nexport default lowerCase;\n","import createCaseFirst from './_createCaseFirst.js';\n\n/**\n * Converts the first character of `string` to lower case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.lowerFirst('Fred');\n * // => 'fred'\n *\n * _.lowerFirst('FRED');\n * // => 'fRED'\n */\nvar lowerFirst = createCaseFirst('toLowerCase');\n\nexport default lowerFirst;\n","import { camelCase, startCase, upperCase, lowerCase, upperFirst, } from 'lodash-es';\nexport { lowerFirst, upperFirst, camelCase } from 'lodash-es';\n// @see: https://medium.com/@robertsavian/javascript-case-converters-using-lodash-4f2f964091cc\nconst cacheStringFunction = (fn) => {\n    const cache = Object.create(null);\n    return ((str) => {\n        const hit = cache[str];\n        return hit || (cache[str] = fn(str));\n    });\n};\nexport const kebabCase = cacheStringFunction((s) => s.replace(/\\B([A-Z])/g, '-$1').toLowerCase());\nexport const pascalCase = cacheStringFunction((s) => startCase(camelCase(s)).replace(/ /g, ''));\nexport const constantCase = cacheStringFunction((s) => upperCase(s).replace(/ /g, '_'));\nexport const dotCase = cacheStringFunction((s) => lowerCase(s).replace(/ /g, '.'));\nexport const pathCase = cacheStringFunction((s) => lowerCase(s).replace(/ /g, '/'));\nexport const sentenceCase = cacheStringFunction((s) => upperFirst(lowerCase(s)));\nexport const titleCase = cacheStringFunction((s) => startCase(camelCase(s)));\n//# sourceMappingURL=format.js.map","/* eslint-disable no-bitwise */\n/**\n * Return a simple hash code from a string.\n * Source from: https://github.com/sindresorhus/fnv1a/blob/master/index.js#L25\n */\nexport function hashcode(str) {\n    let hash = 2166136261;\n    let isUnicoded = false;\n    let string = str;\n    for (let i = 0, ii = string.length; i < ii; i += 1) {\n        let characterCode = string.charCodeAt(i);\n        // Non-ASCII characters trigger the Unicode escape logic\n        if (characterCode > 0x7f && !isUnicoded) {\n            string = unescape(encodeURIComponent(string));\n            characterCode = string.charCodeAt(i);\n            isUnicoded = true;\n        }\n        hash ^= characterCode;\n        hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n    }\n    return hash >>> 0;\n}\n//# sourceMappingURL=hashcode.js.map","/* eslint-disable no-bitwise */\nexport function uuid() {\n    // credit: http://stackoverflow.com/posts/2117523/revisions\n    // return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    //   const r = (Math.random() * 16) | 0\n    //   const v = c === 'x' ? r : (r & 0x3) | 0x8\n    //   return v.toString(16)\n    // })\n    let res = '';\n    const template = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\n    for (let i = 0, len = template.length; i < len; i += 1) {\n        const s = template[i];\n        const r = (Math.random() * 16) | 0;\n        const v = s === 'x' ? r : s === 'y' ? (r & 0x3) | 0x8 : s;\n        res += v.toString(16);\n    }\n    return res;\n}\n//# sourceMappingURL=uuid.js.map","// @see: https://github.com/microsoft/TypeScript/blob/master/src/compiler/checker.ts\n/**\n * Given a name and a list of names that are not equal to the name, return a\n * spelling suggestion if there is one that is close enough. Names less than\n * length 3 only check for case-insensitive equality, not Levenshtein distance.\n *\n * - If there is a candidate that's the same except for case, return that.\n * - If there is a candidate that's within one edit of the name, return that.\n * - Otherwise, return the candidate with the smallest Levenshtein distance,\n *     except for candidates:\n *       * With no name\n *       * Whose length differs from the target name by more than 0.34 of the\n *         length of the name.\n *       * Whose levenshtein distance is more than 0.4 of the length of the\n *         name (0.4 allows 1 substitution/transposition for every 5 characters,\n *         and 1 insertion/deletion at 3 characters)\n */\nexport function getSpellingSuggestion(name, candidates, getName) {\n    const maximumLengthDifference = Math.min(2, Math.floor(name.length * 0.34));\n    // If the best result isn't better than this, don't bother.\n    let bestDistance = Math.floor(name.length * 0.4) + 1;\n    let bestCandidate;\n    let justCheckExactMatches = false;\n    const nameLowerCase = name.toLowerCase();\n    // eslint-disable-next-line\n    for (const candidate of candidates) {\n        const candidateName = getName(candidate);\n        if (candidateName !== undefined &&\n            Math.abs(candidateName.length - nameLowerCase.length) <=\n                maximumLengthDifference) {\n            const candidateNameLowerCase = candidateName.toLowerCase();\n            if (candidateNameLowerCase === nameLowerCase) {\n                if (candidateName === name) {\n                    continue;\n                }\n                return candidate;\n            }\n            if (justCheckExactMatches) {\n                continue;\n            }\n            if (candidateName.length < 3) {\n                // Don't bother, user would have noticed a\n                // 2-character name having an extra character.\n                continue;\n            }\n            // Only care about a result better than the best so far.\n            const distance = levenshteinWithMax(nameLowerCase, candidateNameLowerCase, bestDistance - 1);\n            if (distance === undefined) {\n                continue;\n            }\n            if (distance < 3) {\n                justCheckExactMatches = true;\n                bestCandidate = candidate;\n            }\n            else {\n                // Debug.assert(distance < bestDistance)\n                bestDistance = distance;\n                bestCandidate = candidate;\n            }\n        }\n    }\n    return bestCandidate;\n}\nfunction levenshteinWithMax(s1, s2, max) {\n    let previous = new Array(s2.length + 1); // eslint-disable-line\n    let current = new Array(s2.length + 1); // eslint-disable-line\n    /** Represents any value > max. We don't care about the particular value. */\n    const big = max + 1;\n    for (let i = 0; i <= s2.length; i += 1) {\n        previous[i] = i;\n    }\n    for (let i = 1; i <= s1.length; i += 1) {\n        const c1 = s1.charCodeAt(i - 1);\n        const minJ = i > max ? i - max : 1;\n        const maxJ = s2.length > max + i ? max + i : s2.length;\n        current[0] = i;\n        /** Smallest value of the matrix in the ith column. */\n        let colMin = i;\n        for (let j = 1; j < minJ; j += 1) {\n            current[j] = big;\n        }\n        for (let j = minJ; j <= maxJ; j += 1) {\n            const dist = c1 === s2.charCodeAt(j - 1)\n                ? previous[j - 1]\n                : Math.min(\n                /* delete */ previous[j] + 1, \n                /* insert */ current[j - 1] + 1, \n                /* substitute */ previous[j - 1] + 2);\n            current[j] = dist;\n            colMin = Math.min(colMin, dist);\n        }\n        for (let j = maxJ + 1; j <= s2.length; j += 1) {\n            current[j] = big;\n        }\n        if (colMin > max) {\n            // Give up -- everything in this column is > max\n            // and it can't get better in future columns.\n            return undefined;\n        }\n        const temp = previous;\n        previous = current;\n        current = temp;\n    }\n    const res = previous[s2.length];\n    return res > max ? undefined : res;\n}\n//# sourceMappingURL=suggestion.js.map","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\nexport default isNumber;\n","/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\nexport default baseClamp;\n","import baseClamp from './_baseClamp.js';\nimport toNumber from './toNumber.js';\n\n/**\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Number\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n * @example\n *\n * _.clamp(-10, -5, 5);\n * // => -5\n *\n * _.clamp(10, -5, 5);\n * // => 5\n */\nfunction clamp(number, lower, upper) {\n  if (upper === undefined) {\n    upper = lower;\n    lower = undefined;\n  }\n  if (upper !== undefined) {\n    upper = toNumber(upper);\n    upper = upper === upper ? upper : 0;\n  }\n  if (lower !== undefined) {\n    lower = toNumber(lower);\n    lower = lower === lower ? lower : 0;\n  }\n  return baseClamp(toNumber(number), lower, upper);\n}\n\nexport default clamp;\n","export { isNumber, clamp } from 'lodash-es';\n/**\n * Returns the remainder of division of `n` by `m`. You should use this\n * instead of the built-in operation as the built-in operation does not\n * properly handle negative numbers.\n */\nexport function mod(n, m) {\n    return ((n % m) + m) % m;\n}\nexport function random(lower, upper) {\n    if (upper == null) {\n        upper = lower == null ? 1 : lower; // eslint-disable-line\n        lower = 0; // eslint-disable-line\n    }\n    else if (upper < lower) {\n        const tmp = lower;\n        lower = upper; // eslint-disable-line\n        upper = tmp; // eslint-disable-line\n    }\n    return Math.floor(Math.random() * (upper - lower + 1) + lower);\n}\nexport function isPercentage(val) {\n    return typeof val === 'string' && val.slice(-1) === '%';\n}\nexport function normalizePercentage(num, ref) {\n    if (num == null) {\n        return 0;\n    }\n    let raw;\n    if (typeof num === 'string') {\n        raw = parseFloat(num);\n        if (isPercentage(num)) {\n            raw /= 100;\n            if (Number.isFinite(raw)) {\n                return raw * ref;\n            }\n        }\n    }\n    else {\n        raw = num;\n    }\n    if (!Number.isFinite(raw)) {\n        return 0;\n    }\n    if (raw > 0 && raw < 1) {\n        return raw * ref;\n    }\n    return raw;\n}\nexport function parseCssNumeric(val, units) {\n    function getUnit(regexp) {\n        const matches = new RegExp(`(?:\\\\d+(?:\\\\.\\\\d+)*)(${regexp})$`).exec(val);\n        if (!matches) {\n            return null;\n        }\n        return matches[1];\n    }\n    const number = parseFloat(val);\n    if (Number.isNaN(number)) {\n        return null;\n    }\n    // determine the unit\n    let regexp;\n    if (units == null) {\n        // accept any unit, as well as no unit\n        regexp = '[A-Za-z]*';\n    }\n    else if (Array.isArray(units)) {\n        if (units.length === 0) {\n            return null;\n        }\n        regexp = units.join('|');\n    }\n    else if (typeof units === 'string') {\n        regexp = units;\n    }\n    const unit = getUnit(regexp);\n    if (unit === null) {\n        return null;\n    }\n    return {\n        unit,\n        value: number,\n    };\n}\nexport function normalizeSides(box) {\n    if (typeof box === 'object') {\n        let left = 0;\n        let top = 0;\n        let right = 0;\n        let bottom = 0;\n        if (box.vertical != null && Number.isFinite(box.vertical)) {\n            top = bottom = box.vertical;\n        }\n        if (box.horizontal != null && Number.isFinite(box.horizontal)) {\n            right = left = box.horizontal;\n        }\n        if (box.left != null && Number.isFinite(box.left))\n            left = box.left;\n        if (box.top != null && Number.isFinite(box.top))\n            top = box.top;\n        if (box.right != null && Number.isFinite(box.right))\n            right = box.right;\n        if (box.bottom != null && Number.isFinite(box.bottom))\n            bottom = box.bottom;\n        return { top, right, bottom, left };\n    }\n    let val = 0;\n    if (box != null && Number.isFinite(box)) {\n        val = box;\n    }\n    return { top: val, right: val, bottom: val, left: val };\n}\n//# sourceMappingURL=number.js.map","/* eslint-disable no-underscore-dangle */\nlet _IS_MAC = false;\nlet _IS_IOS = false;\nlet _IS_WINDOWS = false;\nlet _IS_IE = false;\nlet _IS_IE11 = false;\nlet _IS_EDGE = false;\nlet _IS_NETSCAPE = false;\nlet _IS_CHROME_APP = false;\nlet _IS_CHROME = false;\nlet _IS_OPERA = false;\nlet _IS_FIREFOX = false;\nlet _IS_SAFARI = false;\nlet _SUPPORT_TOUCH = false;\nlet _SUPPORT_POINTER = false;\nlet _SUPPORT_PASSIVE = false;\nlet _NO_FOREIGNOBJECT = false;\nif (typeof navigator === 'object') {\n    const ua = navigator.userAgent;\n    _IS_MAC = ua.indexOf('Macintosh') >= 0;\n    _IS_IOS = !!ua.match(/(iPad|iPhone|iPod)/g);\n    _IS_WINDOWS = ua.indexOf('Windows') >= 0;\n    _IS_IE = ua.indexOf('MSIE') >= 0;\n    _IS_IE11 = !!ua.match(/Trident\\/7\\./);\n    _IS_EDGE = !!ua.match(/Edge\\//);\n    _IS_NETSCAPE =\n        ua.indexOf('Mozilla/') >= 0 &&\n            ua.indexOf('MSIE') < 0 &&\n            ua.indexOf('Edge/') < 0;\n    _IS_CHROME = ua.indexOf('Chrome/') >= 0 && ua.indexOf('Edge/') < 0;\n    _IS_OPERA = ua.indexOf('Opera/') >= 0 || ua.indexOf('OPR/') >= 0;\n    _IS_FIREFOX = ua.indexOf('Firefox/') >= 0;\n    _IS_SAFARI =\n        ua.indexOf('AppleWebKit/') >= 0 &&\n            ua.indexOf('Chrome/') < 0 &&\n            ua.indexOf('Edge/') < 0;\n    if (typeof document === 'object') {\n        _NO_FOREIGNOBJECT =\n            !document.createElementNS ||\n                `${document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')}` !== '[object SVGForeignObjectElement]' ||\n                ua.indexOf('Opera/') >= 0;\n    }\n}\nif (typeof window === 'object') {\n    _IS_CHROME_APP =\n        window.chrome != null &&\n            window.chrome.app != null &&\n            window.chrome.app.runtime != null;\n    _SUPPORT_POINTER = window.PointerEvent != null && !_IS_MAC;\n}\nif (typeof document === 'object') {\n    _SUPPORT_TOUCH = 'ontouchstart' in document.documentElement;\n    try {\n        const options = Object.defineProperty({}, 'passive', {\n            get() {\n                _SUPPORT_PASSIVE = true;\n            },\n        });\n        const div = document.createElement('div');\n        if (div.addEventListener) {\n            div.addEventListener('click', () => { }, options);\n        }\n    }\n    catch (err) {\n        // pass\n    }\n}\nexport var Platform;\n(function (Platform) {\n    Platform.IS_MAC = _IS_MAC;\n    Platform.IS_IOS = _IS_IOS;\n    Platform.IS_WINDOWS = _IS_WINDOWS;\n    Platform.IS_IE = _IS_IE;\n    Platform.IS_IE11 = _IS_IE11;\n    Platform.IS_EDGE = _IS_EDGE;\n    /**\n     * A flag indicating whether the browser is Netscape (including Firefox).\n     */\n    Platform.IS_NETSCAPE = _IS_NETSCAPE;\n    /**\n     * A flag indicating whether the the this is running inside a Chrome App.\n     */\n    Platform.IS_CHROME_APP = _IS_CHROME_APP;\n    Platform.IS_CHROME = _IS_CHROME;\n    Platform.IS_OPERA = _IS_OPERA;\n    Platform.IS_FIREFOX = _IS_FIREFOX;\n    Platform.IS_SAFARI = _IS_SAFARI;\n    /**\n     * A flag indicating whether this device supports touchstart/-move/-end\n     * events (Apple iOS, Android, Chromebook and Chrome Browser on touch-enabled\n     * devices).\n     */\n    Platform.SUPPORT_TOUCH = _SUPPORT_TOUCH;\n    /**\n     * A flag indicating whether this device supports Microsoft pointer events.\n     */\n    Platform.SUPPORT_POINTER = _SUPPORT_POINTER;\n    Platform.SUPPORT_PASSIVE = _SUPPORT_PASSIVE;\n    /**\n     * A flag indicating whether foreignObject support is not available. This\n     * is the case for Opera, older SVG-based browsers and all versions of IE.\n     */\n    Platform.NO_FOREIGNOBJECT = _NO_FOREIGNOBJECT;\n    Platform.SUPPORT_FOREIGNOBJECT = !Platform.NO_FOREIGNOBJECT;\n})(Platform || (Platform = {}));\n(function (Platform) {\n    function getHMRStatus() {\n        const mod = window.module;\n        if (mod != null && mod.hot != null && mod.hot.status != null) {\n            return mod.hot.status();\n        }\n        return 'unkonwn';\n    }\n    Platform.getHMRStatus = getHMRStatus;\n    function isApplyingHMR() {\n        return getHMRStatus() === 'apply';\n    }\n    Platform.isApplyingHMR = isApplyingHMR;\n    // This function checks if the specified event is supported by the browser.\n    // Source: http://perfectionkills.com/detecting-event-support-without-browser-sniffing/\n    const TAGNAMES = {\n        select: 'input',\n        change: 'input',\n        submit: 'form',\n        reset: 'form',\n        error: 'img',\n        load: 'img',\n        abort: 'img',\n    };\n    function isEventSupported(event) {\n        const elem = document.createElement(TAGNAMES[event] || 'div');\n        const eventName = `on${event}`;\n        let isSupported = eventName in elem;\n        if (!isSupported) {\n            elem.setAttribute(eventName, 'return;');\n            isSupported = typeof elem[eventName] === 'function';\n        }\n        return isSupported;\n    }\n    Platform.isEventSupported = isEventSupported;\n})(Platform || (Platform = {}));\n//# sourceMappingURL=index.js.map","const rclass = /[\\t\\r\\n\\f]/g;\nconst rnotwhite = /\\S+/g;\nconst fillSpaces = (str) => ` ${str} `;\nexport function getClass(elem) {\n    return (elem && elem.getAttribute && elem.getAttribute('class')) || '';\n}\nexport function hasClass(elem, selector) {\n    if (elem == null || selector == null) {\n        return false;\n    }\n    const classNames = fillSpaces(getClass(elem));\n    const className = fillSpaces(selector);\n    return elem.nodeType === 1\n        ? classNames.replace(rclass, ' ').includes(className)\n        : false;\n}\nexport function addClass(elem, selector) {\n    if (elem == null || selector == null) {\n        return;\n    }\n    if (typeof selector === 'function') {\n        return addClass(elem, selector(getClass(elem)));\n    }\n    if (typeof selector === 'string' && elem.nodeType === 1) {\n        const classes = selector.match(rnotwhite) || [];\n        const oldValue = fillSpaces(getClass(elem)).replace(rclass, ' ');\n        let newValue = classes.reduce((memo, cls) => {\n            if (memo.indexOf(fillSpaces(cls)) < 0) {\n                return `${memo}${cls} `;\n            }\n            return memo;\n        }, oldValue);\n        newValue = newValue.trim();\n        if (oldValue !== newValue) {\n            elem.setAttribute('class', newValue);\n        }\n    }\n}\nexport function removeClass(elem, selector) {\n    if (elem == null) {\n        return;\n    }\n    if (typeof selector === 'function') {\n        return removeClass(elem, selector(getClass(elem)));\n    }\n    if ((!selector || typeof selector === 'string') && elem.nodeType === 1) {\n        const classes = (selector || '').match(rnotwhite) || [];\n        const oldValue = fillSpaces(getClass(elem)).replace(rclass, ' ');\n        let newValue = classes.reduce((memo, cls) => {\n            const className = fillSpaces(cls);\n            if (memo.indexOf(className) > -1) {\n                return memo.replace(className, ' ');\n            }\n            return memo;\n        }, oldValue);\n        newValue = selector ? newValue.trim() : '';\n        if (oldValue !== newValue) {\n            elem.setAttribute('class', newValue);\n        }\n    }\n}\nexport function toggleClass(elem, selector, stateVal) {\n    if (elem == null || selector == null) {\n        return;\n    }\n    if (stateVal != null && typeof selector === 'string') {\n        stateVal ? addClass(elem, selector) : removeClass(elem, selector);\n        return;\n    }\n    if (typeof selector === 'function') {\n        return toggleClass(elem, selector(getClass(elem), stateVal), stateVal);\n    }\n    if (typeof selector === 'string') {\n        const metches = selector.match(rnotwhite) || [];\n        metches.forEach((cls) => {\n            hasClass(elem, cls) ? removeClass(elem, cls) : addClass(elem, cls);\n        });\n    }\n}\n//# sourceMappingURL=class.js.map","import { hasClass } from './class';\nlet idCounter = 0;\nexport function uniqueId() {\n    idCounter += 1;\n    return `v${idCounter}`;\n}\nexport function ensureId(elem) {\n    if (elem.id == null || elem.id === '') {\n        elem.id = uniqueId();\n    }\n    return elem.id;\n}\n/**\n * Returns true if object is an instance of SVGGraphicsElement.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement\n */\nexport function isSVGGraphicsElement(elem) {\n    if (elem == null) {\n        return false;\n    }\n    return typeof elem.getScreenCTM === 'function' && elem instanceof SVGElement;\n}\nexport const ns = {\n    svg: 'http://www.w3.org/2000/svg',\n    xmlns: 'http://www.w3.org/2000/xmlns/',\n    xml: 'http://www.w3.org/XML/1998/namespace',\n    xlink: 'http://www.w3.org/1999/xlink',\n    xhtml: 'http://www.w3.org/1999/xhtml',\n};\nexport const svgVersion = '1.1';\nexport function createElement(tagName, doc = document) {\n    return doc.createElement(tagName);\n}\nexport function createElementNS(tagName, namespaceURI = ns.xhtml, doc = document) {\n    return doc.createElementNS(namespaceURI, tagName);\n}\nexport function createSvgElement(tagName, doc = document) {\n    return createElementNS(tagName, ns.svg, doc);\n}\nexport function createSvgDocument(content) {\n    if (content) {\n        const xml = `<svg xmlns=\"${ns.svg}\" xmlns:xlink=\"${ns.xlink}\" version=\"${svgVersion}\">${content}</svg>`; // lgtm[js/html-constructed-from-input]\n        const { documentElement } = parseXML(xml, { async: false });\n        return documentElement;\n    }\n    const svg = document.createElementNS(ns.svg, 'svg');\n    svg.setAttributeNS(ns.xmlns, 'xmlns:xlink', ns.xlink);\n    svg.setAttribute('version', svgVersion);\n    return svg;\n}\nexport function parseXML(data, options = {}) {\n    let xml;\n    try {\n        const parser = new DOMParser();\n        if (options.async != null) {\n            const instance = parser;\n            instance.async = options.async;\n        }\n        xml = parser.parseFromString(data, options.mimeType || 'text/xml');\n    }\n    catch (error) {\n        xml = undefined;\n    }\n    if (!xml || xml.getElementsByTagName('parsererror').length) {\n        throw new Error(`Invalid XML: ${data}`);\n    }\n    return xml;\n}\nexport function tagName(node, lowercase = true) {\n    const nodeName = node.nodeName;\n    return lowercase ? nodeName.toLowerCase() : nodeName.toUpperCase();\n}\nexport function index(elem) {\n    let index = 0;\n    let node = elem.previousSibling;\n    while (node) {\n        if (node.nodeType === 1) {\n            index += 1;\n        }\n        node = node.previousSibling;\n    }\n    return index;\n}\nexport function find(elem, selector) {\n    return elem.querySelectorAll(selector);\n}\nexport function findOne(elem, selector) {\n    return elem.querySelector(selector);\n}\nexport function findParentByClass(elem, className, terminator) {\n    const ownerSVGElement = elem.ownerSVGElement;\n    let node = elem.parentNode;\n    while (node && node !== terminator && node !== ownerSVGElement) {\n        if (hasClass(node, className)) {\n            return node;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexport function contains(parent, child) {\n    const bup = child && child.parentNode;\n    return (parent === bup ||\n        !!(bup && bup.nodeType === 1 && parent.compareDocumentPosition(bup) & 16) // eslint-disable-line no-bitwise\n    );\n}\nexport function remove(elem) {\n    if (elem) {\n        const elems = Array.isArray(elem) ? elem : [elem];\n        elems.forEach((item) => {\n            if (item.parentNode) {\n                item.parentNode.removeChild(item);\n            }\n        });\n    }\n}\nexport function empty(elem) {\n    while (elem.firstChild) {\n        elem.removeChild(elem.firstChild);\n    }\n}\nexport function append(elem, elems) {\n    const arr = Array.isArray(elems) ? elems : [elems];\n    arr.forEach((child) => {\n        if (child != null) {\n            elem.appendChild(child);\n        }\n    });\n}\nexport function prepend(elem, elems) {\n    const child = elem.firstChild;\n    return child ? before(child, elems) : append(elem, elems);\n}\nexport function before(elem, elems) {\n    const parent = elem.parentNode;\n    if (parent) {\n        const arr = Array.isArray(elems) ? elems : [elems];\n        arr.forEach((child) => {\n            if (child != null) {\n                parent.insertBefore(child, elem);\n            }\n        });\n    }\n}\nexport function after(elem, elems) {\n    const parent = elem.parentNode;\n    if (parent) {\n        const arr = Array.isArray(elems) ? elems : [elems];\n        arr.forEach((child) => {\n            if (child != null) {\n                parent.insertBefore(child, elem.nextSibling);\n            }\n        });\n    }\n}\nexport function appendTo(elem, target) {\n    if (target != null) {\n        target.appendChild(elem);\n    }\n}\nexport function isElement(x) {\n    return !!x && x.nodeType === 1;\n}\n// Determines whether a node is an HTML node\nexport function isHTMLElement(elem) {\n    try {\n        // Using W3 DOM2 (works for FF, Opera and Chrome)\n        return elem instanceof HTMLElement;\n    }\n    catch (e) {\n        // Browsers not supporting W3 DOM2 don't have HTMLElement and\n        // an exception is thrown and we end up here. Testing some\n        // properties that all elements have (works on IE7)\n        return (typeof elem === 'object' &&\n            elem.nodeType === 1 &&\n            typeof elem.style === 'object' &&\n            typeof elem.ownerDocument === 'object');\n    }\n}\nexport function children(parent, className) {\n    const matched = [];\n    let elem = parent.firstChild;\n    for (; elem; elem = elem.nextSibling) {\n        if (elem.nodeType === 1) {\n            if (!className || hasClass(elem, className)) {\n                matched.push(elem);\n            }\n        }\n    }\n    return matched;\n}\n//# sourceMappingURL=elem.js.map","import { ns } from './elem';\nimport { kebabCase } from '../string/format';\nexport const CASE_SENSITIVE_ATTR = [\n    'viewBox',\n    'attributeName',\n    'attributeType',\n    'repeatCount',\n    'textLength',\n    'lengthAdjust',\n    'gradientUnits',\n];\nexport function getAttribute(elem, name) {\n    return elem.getAttribute(name);\n}\nexport function removeAttribute(elem, name) {\n    const qualified = qualifyAttr(name);\n    if (qualified.ns) {\n        if (elem.hasAttributeNS(qualified.ns, qualified.local)) {\n            elem.removeAttributeNS(qualified.ns, qualified.local);\n        }\n    }\n    else if (elem.hasAttribute(name)) {\n        elem.removeAttribute(name);\n    }\n}\nexport function setAttribute(elem, name, value) {\n    if (value == null) {\n        return removeAttribute(elem, name);\n    }\n    const qualified = qualifyAttr(name);\n    if (qualified.ns && typeof value === 'string') {\n        elem.setAttributeNS(qualified.ns, name, value);\n    }\n    else if (name === 'id') {\n        elem.id = `${value}`;\n    }\n    else {\n        elem.setAttribute(name, `${value}`);\n    }\n}\nexport function setAttributes(elem, attrs) {\n    Object.keys(attrs).forEach((name) => {\n        setAttribute(elem, name, attrs[name]);\n    });\n}\nexport function attr(elem, name, value) {\n    if (name == null) {\n        const attrs = elem.attributes;\n        const ret = {};\n        for (let i = 0; i < attrs.length; i += 1) {\n            ret[attrs[i].name] = attrs[i].value;\n        }\n        return ret;\n    }\n    if (typeof name === 'string' && value === undefined) {\n        return elem.getAttribute(name);\n    }\n    if (typeof name === 'object') {\n        setAttributes(elem, name);\n    }\n    else {\n        setAttribute(elem, name, value);\n    }\n}\nexport function qualifyAttr(name) {\n    if (name.indexOf(':') !== -1) {\n        const combinedKey = name.split(':');\n        return {\n            ns: ns[combinedKey[0]],\n            local: combinedKey[1],\n        };\n    }\n    return {\n        ns: null,\n        local: name,\n    };\n}\nexport function kebablizeAttrs(attrs) {\n    const result = {};\n    Object.keys(attrs).forEach((key) => {\n        const name = CASE_SENSITIVE_ATTR.includes(key) ? key : kebabCase(key);\n        result[name] = attrs[key];\n    });\n    return result;\n}\nexport function styleToObject(styleString) {\n    const ret = {};\n    const styles = styleString.split(';');\n    styles.forEach((item) => {\n        const section = item.trim();\n        if (section) {\n            const pair = section.split('=');\n            if (pair.length) {\n                ret[pair[0].trim()] = pair[1] ? pair[1].trim() : '';\n            }\n        }\n    });\n    return ret;\n}\nexport function mergeAttrs(target, source) {\n    Object.keys(source).forEach((attr) => {\n        if (attr === 'class') {\n            target[attr] = target[attr]\n                ? `${target[attr]} ${source[attr]}`\n                : source[attr];\n        }\n        else if (attr === 'style') {\n            const to = typeof target[attr] === 'object';\n            const so = typeof source[attr] === 'object';\n            let tt;\n            let ss;\n            if (to && so) {\n                tt = target[attr];\n                ss = source[attr];\n            }\n            else if (to) {\n                tt = target[attr];\n                ss = styleToObject(source[attr]);\n            }\n            else if (so) {\n                tt = styleToObject(target[attr]);\n                ss = source[attr];\n            }\n            else {\n                tt = styleToObject(target[attr]);\n                ss = styleToObject(source[attr]);\n            }\n            target[attr] = mergeAttrs(tt, ss);\n        }\n        else {\n            target[attr] = source[attr];\n        }\n    });\n    return target;\n}\n//# sourceMappingURL=attr.js.map","import { ObjectExt } from '../object';\nimport { mergeAttrs } from '../dom/attr';\nexport function annotate(t, annotations, opt = {}) {\n    const offset = opt.offset || 0;\n    const compacted = [];\n    const ret = [];\n    let curr;\n    let prev;\n    let batch = null;\n    for (let i = 0; i < t.length; i += 1) {\n        curr = ret[i] = t[i];\n        for (let j = 0, jj = annotations.length; j < jj; j += 1) {\n            const annotation = annotations[j];\n            const start = annotation.start + offset;\n            const end = annotation.end + offset;\n            if (i >= start && i < end) {\n                if (typeof curr === 'string') {\n                    curr = ret[i] = {\n                        t: t[i],\n                        attrs: annotation.attrs,\n                    };\n                }\n                else {\n                    curr.attrs = mergeAttrs(mergeAttrs({}, curr.attrs), annotation.attrs);\n                }\n                if (opt.includeAnnotationIndices) {\n                    if (curr.annotations == null) {\n                        curr.annotations = [];\n                    }\n                    curr.annotations.push(j);\n                }\n            }\n        }\n        prev = ret[i - 1];\n        if (!prev) {\n            batch = curr;\n        }\n        else if (ObjectExt.isObject(curr) && ObjectExt.isObject(prev)) {\n            batch = batch;\n            // Both previous item and the current one are annotations.\n            // If the attributes didn't change, merge the text.\n            if (JSON.stringify(curr.attrs) === JSON.stringify(prev.attrs)) {\n                batch.t += curr.t;\n            }\n            else {\n                compacted.push(batch);\n                batch = curr;\n            }\n        }\n        else if (ObjectExt.isObject(curr)) {\n            // Previous item was a string, current item is an annotation.\n            batch = batch;\n            compacted.push(batch);\n            batch = curr;\n        }\n        else if (ObjectExt.isObject(prev)) {\n            // Previous item was an annotation, current item is a string.\n            batch = batch;\n            compacted.push(batch);\n            batch = curr;\n        }\n        else {\n            // Both previous and current item are strings.\n            batch = (batch || '') + curr;\n        }\n    }\n    if (batch != null) {\n        compacted.push(batch);\n    }\n    return compacted;\n}\nexport function findAnnotationsAtIndex(annotations, index) {\n    return annotations\n        ? annotations.filter((a) => a.start < index && index <= a.end)\n        : [];\n}\nexport function findAnnotationsBetweenIndexes(annotations, start, end) {\n    return annotations\n        ? annotations.filter((a) => (start >= a.start && start < a.end) ||\n            (end > a.start && end <= a.end) ||\n            (a.start >= start && a.end < end))\n        : [];\n}\nexport function shiftAnnotations(annotations, index, offset) {\n    if (annotations) {\n        annotations.forEach((a) => {\n            if (a.start < index && a.end >= index) {\n                a.end += offset;\n            }\n            else if (a.start >= index) {\n                a.start += offset;\n                a.end += offset;\n            }\n        });\n    }\n    return annotations;\n}\n//# sourceMappingURL=annotate.js.map","/**\n * Replaces all spaces with the Unicode No-break space.\n * ref: http://www.fileformat.info/info/unicode/char/a0/index.htm\n *\n * IE would otherwise collapse all spaces into one. This is useful\n * e.g. in tests when you want to compare the actual DOM text content\n * without having to add the unicode character in the place of all spaces.\n */\nexport function sanitize(text) {\n    return text.replace(/ /g, '\\u00A0');\n}\n//# sourceMappingURL=sanitize.js.map","export var DataUri;\n(function (DataUri) {\n    function isDataUrl(url) {\n        const prefix = 'data:';\n        return url.substr(0, prefix.length) === prefix;\n    }\n    DataUri.isDataUrl = isDataUrl;\n    /**\n     * Converts an image at `url` to base64-encoded data uri.\n     * The mime type of the image is inferred from the `url` file extension.\n     */\n    function imageToDataUri(url, callback) {\n        // No need to convert to data uri if it is already in data uri.\n        if (!url || isDataUrl(url)) {\n            // Keep the async nature of the function.\n            setTimeout(() => callback(null, url));\n            return;\n        }\n        const onError = () => {\n            callback(new Error(`Failed to load image: ${url}`));\n        };\n        const onLoad = window.FileReader\n            ? // chrome, IE10+\n                (xhr) => {\n                    if (xhr.status === 200) {\n                        const reader = new FileReader();\n                        reader.onload = (evt) => {\n                            const dataUri = evt.target.result;\n                            callback(null, dataUri);\n                        };\n                        reader.onerror = onError;\n                        reader.readAsDataURL(xhr.response);\n                    }\n                    else {\n                        onError();\n                    }\n                }\n            : (xhr) => {\n                const toString = (u8a) => {\n                    const CHUNK_SZ = 0x8000;\n                    const c = [];\n                    for (let i = 0; i < u8a.length; i += CHUNK_SZ) {\n                        c.push(String.fromCharCode.apply(null, u8a.subarray(i, i + CHUNK_SZ)));\n                    }\n                    return c.join('');\n                };\n                if (xhr.status === 200) {\n                    let suffix = url.split('.').pop() || 'png';\n                    if (suffix === 'svg') {\n                        suffix = 'svg+xml';\n                    }\n                    const meta = `data:image/${suffix};base64,`;\n                    const bytes = new Uint8Array(xhr.response);\n                    const base64 = meta + btoa(toString(bytes));\n                    callback(null, base64);\n                }\n                else {\n                    onError();\n                }\n            };\n        const xhr = new XMLHttpRequest();\n        xhr.responseType = window.FileReader ? 'blob' : 'arraybuffer';\n        xhr.open('GET', url, true);\n        xhr.addEventListener('error', onError);\n        xhr.addEventListener('load', () => onLoad(xhr));\n        xhr.send();\n    }\n    DataUri.imageToDataUri = imageToDataUri;\n    function dataUriToBlob(dataUrl) {\n        let uri = dataUrl.replace(/\\s/g, '');\n        uri = decodeURIComponent(uri);\n        const index = uri.indexOf(',');\n        const dataType = uri.slice(0, index); // e.g. 'data:image/jpeg;base64'\n        const mime = dataType.split(':')[1].split(';')[0]; // e.g. 'image/jpeg'\n        const data = uri.slice(index + 1);\n        let decodedString;\n        if (dataType.indexOf('base64') >= 0) {\n            // data may be encoded in base64\n            decodedString = atob(data);\n        }\n        else {\n            // convert the decoded string to UTF-8\n            decodedString = unescape(encodeURIComponent(data));\n        }\n        // write the bytes of the string to a typed array\n        const ia = new Uint8Array(decodedString.length);\n        for (let i = 0; i < decodedString.length; i += 1) {\n            ia[i] = decodedString.charCodeAt(i);\n        }\n        return new Blob([ia], { type: mime });\n    }\n    DataUri.dataUriToBlob = dataUriToBlob;\n    function downloadBlob(blob, fileName) {\n        const msSaveBlob = window.navigator.msSaveBlob;\n        if (msSaveBlob) {\n            // requires IE 10+\n            // pulls up a save dialog\n            msSaveBlob(blob, fileName);\n        }\n        else {\n            // other browsers\n            // downloads directly in Chrome and Safari\n            // presents a save/open dialog in Firefox\n            // Firefox bug: `from` field in save dialog always shows `from:blob:`\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1053327\n            const url = window.URL.createObjectURL(blob);\n            const link = document.createElement('a');\n            link.href = url;\n            link.download = fileName;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            // mark the url for garbage collection\n            window.URL.revokeObjectURL(url);\n        }\n    }\n    DataUri.downloadBlob = downloadBlob;\n    function downloadDataUri(dataUrl, fileName) {\n        const blob = dataUriToBlob(dataUrl);\n        downloadBlob(blob, fileName);\n    }\n    DataUri.downloadDataUri = downloadDataUri;\n    function parseViewBox(svg) {\n        const matches = svg.match(/<svg[^>]*viewBox\\s*=\\s*([\"']?)(.+?)\\1[^>]*>/i);\n        if (matches && matches[2]) {\n            return matches[2].replace(/\\s+/, ' ').split(' ');\n        }\n        return null;\n    }\n    function getNumber(str) {\n        const ret = parseFloat(str);\n        return Number.isNaN(ret) ? null : ret;\n    }\n    function svgToDataUrl(svg, options = {}) {\n        let viewBox = null;\n        const getNumberFromViewBox = (index) => {\n            if (viewBox == null) {\n                viewBox = parseViewBox(svg);\n            }\n            if (viewBox != null) {\n                return getNumber(viewBox[index]);\n            }\n            return null;\n        };\n        const getNumberFromMatches = (reg) => {\n            const matches = svg.match(reg);\n            if (matches && matches[2]) {\n                return getNumber(matches[2]);\n            }\n            return null;\n        };\n        let w = options.width;\n        if (w == null) {\n            w = getNumberFromMatches(/<svg[^>]*width\\s*=\\s*([\"']?)(.+?)\\1[^>]*>/i);\n        }\n        if (w == null) {\n            w = getNumberFromViewBox(2);\n        }\n        if (w == null) {\n            throw new Error('Can not parse width from svg string');\n        }\n        let h = options.height;\n        if (h == null) {\n            h = getNumberFromMatches(/<svg[^>]*height\\s*=\\s*([\"']?)(.+?)\\1[^>]*>/i);\n        }\n        if (h == null) {\n            h = getNumberFromViewBox(3);\n        }\n        if (h == null) {\n            throw new Error('Can not parse height from svg string');\n        }\n        const decoded = encodeURIComponent(svg)\n            .replace(/'/g, '%27')\n            .replace(/\"/g, '%22');\n        const header = 'data:image/svg+xml';\n        const dataUrl = `${header},${decoded}`;\n        return dataUrl;\n    }\n    DataUri.svgToDataUrl = svgToDataUrl;\n})(DataUri || (DataUri = {}));\n//# sourceMappingURL=index.js.map","let millimeterSize;\nconst supportedUnits = {\n    px(val) {\n        return val;\n    },\n    mm(val) {\n        return millimeterSize * val;\n    },\n    cm(val) {\n        return millimeterSize * val * 10;\n    },\n    in(val) {\n        return millimeterSize * val * 25.4;\n    },\n    pt(val) {\n        return millimeterSize * ((25.4 * val) / 72);\n    },\n    pc(val) {\n        return millimeterSize * ((25.4 * val) / 6);\n    },\n};\n// eslint-disable-next-line\nexport var Unit;\n(function (Unit) {\n    function measure(cssWidth, cssHeight, unit) {\n        const div = document.createElement('div');\n        const style = div.style;\n        style.display = 'inline-block';\n        style.position = 'absolute';\n        style.left = '-15000px';\n        style.top = '-15000px';\n        style.width = cssWidth + (unit || 'px');\n        style.height = cssHeight + (unit || 'px');\n        document.body.appendChild(div);\n        const rect = div.getBoundingClientRect();\n        const size = {\n            width: rect.width || 0,\n            height: rect.height || 0,\n        };\n        document.body.removeChild(div);\n        return size;\n    }\n    Unit.measure = measure;\n    function toPx(val, unit) {\n        if (millimeterSize == null) {\n            millimeterSize = measure('1', '1', 'mm').width;\n        }\n        const convert = unit ? supportedUnits[unit] : null;\n        if (convert) {\n            return convert(val);\n        }\n        return val;\n    }\n    Unit.toPx = toPx;\n})(Unit || (Unit = {}));\n//# sourceMappingURL=index.js.map","const hyphenPattern = /-(.)/g;\nfunction camelize(str) {\n    return str.replace(hyphenPattern, (_, char) => char.toUpperCase());\n}\nconst memoized = {};\nconst prefixes = ['webkit', 'ms', 'moz', 'o'];\nconst testStyle = document ? document.createElement('div').style : {};\nfunction getWithPrefix(name) {\n    for (let i = 0; i < prefixes.length; i += 1) {\n        const prefixedName = prefixes[i] + name;\n        if (prefixedName in testStyle) {\n            return prefixedName;\n        }\n    }\n    return null;\n}\nexport function getVendorPrefixedName(property) {\n    const name = camelize(property);\n    if (memoized[name] == null) {\n        const capitalizedName = name.charAt(0).toUpperCase() + name.slice(1);\n        memoized[name] = name in testStyle ? name : getWithPrefix(capitalizedName);\n    }\n    return memoized[name];\n}\n//# sourceMappingURL=prefix.js.map","import { getVendorPrefixedName } from './prefix';\nexport function setPrefixedStyle(style, name, value) {\n    const vendor = getVendorPrefixedName(name);\n    if (vendor != null) {\n        style[vendor] = value;\n    }\n    style[name] = value;\n}\nexport function getComputedStyle(elem, name) {\n    // IE9+\n    const computed = elem.ownerDocument &&\n        elem.ownerDocument.defaultView &&\n        elem.ownerDocument.defaultView.opener\n        ? elem.ownerDocument.defaultView.getComputedStyle(elem, null)\n        : window.getComputedStyle(elem, null);\n    if (computed && name) {\n        return computed.getPropertyValue(name) || computed[name];\n    }\n    return computed;\n}\nexport function hasScrollbars(container) {\n    const style = getComputedStyle(container);\n    return (style != null && (style.overflow === 'scroll' || style.overflow === 'auto'));\n}\n//# sourceMappingURL=style.js.map","export const clearSelection = (function () {\n    const doc = document;\n    if (doc.selection) {\n        return function () {\n            doc.selection.empty();\n        };\n    }\n    if (window.getSelection) {\n        return function () {\n            const selection = window.getSelection();\n            if (selection) {\n                if (selection.empty) {\n                    selection.empty();\n                }\n                else if (selection.removeAllRanges) {\n                    selection.removeAllRanges();\n                }\n            }\n        };\n    }\n    return function () { };\n})();\n//# sourceMappingURL=selection.js.map","import { getVendorPrefixedName } from './prefix';\nconst numericProps = {\n    animationIterationCount: true,\n    columnCount: true,\n    flexGrow: true,\n    flexShrink: true,\n    fontWeight: true,\n    gridArea: true,\n    gridColumn: true,\n    gridColumnEnd: true,\n    gridColumnStart: true,\n    gridRow: true,\n    gridRowEnd: true,\n    gridRowStart: true,\n    lineHeight: true,\n    opacity: true,\n    order: true,\n    orphans: true,\n    widows: true,\n    zIndex: true,\n};\nexport function isCSSVariable(prop) {\n    return /^--/.test(prop);\n}\nexport function computeStyle(elem, prop, isVariable) {\n    const style = window.getComputedStyle(elem, null);\n    return isVariable\n        ? style.getPropertyValue(prop) || undefined\n        : style[prop] || elem.style[prop];\n}\nexport function computeStyleInt(elem, prop) {\n    return parseInt(computeStyle(elem, prop), 10) || 0;\n}\nfunction getSuffixedValue(prop, value) {\n    return !numericProps[prop] && typeof value === 'number' ? `${value}px` : value;\n}\nexport function css(elem, prop, value) {\n    if (typeof prop === 'string') {\n        const isVariable = isCSSVariable(prop);\n        if (!isVariable) {\n            prop = getVendorPrefixedName(prop); // eslint-disable-line\n        }\n        if (value === undefined) {\n            return computeStyle(elem, prop, isVariable);\n        }\n        if (!isVariable) {\n            value = getSuffixedValue(prop, value); // eslint-disable-line\n        }\n        const style = elem.style;\n        if (isVariable) {\n            style.setProperty(prop, value);\n        }\n        else {\n            style[prop] = value;\n        }\n        return;\n    }\n    // eslint-disable-next-line\n    for (const key in prop) {\n        css(elem, key, prop[key]);\n    }\n}\n//# sourceMappingURL=css.js.map","import { StringExt } from '../string';\nconst dataset = new WeakMap();\nexport function getData(elem, name) {\n    const key = StringExt.camelCase(name);\n    const cache = dataset.get(elem);\n    if (cache) {\n        return cache[key];\n    }\n}\nexport function setData(elem, name, value) {\n    const key = StringExt.camelCase(name);\n    const cache = dataset.get(elem);\n    if (cache) {\n        cache[key] = value;\n    }\n    else {\n        dataset.set(elem, {\n            [key]: value,\n        });\n    }\n}\nexport function data(elem, name, value) {\n    if (!name) {\n        const datas = {};\n        Object.keys(dataset).forEach((key) => {\n            datas[key] = getData(elem, key);\n        });\n        return datas;\n    }\n    if (typeof name === 'string') {\n        if (value === undefined) {\n            return getData(elem, name);\n        }\n        setData(elem, name, value);\n        return;\n    }\n    // eslint-disable-next-line\n    for (const key in name) {\n        data(elem, key, name[key]);\n    }\n}\n//# sourceMappingURL=data.js.map","const propMap = {\n    /* GENERAL */\n    class: 'className',\n    contenteditable: 'contentEditable',\n    /* LABEL */\n    for: 'htmlFor',\n    /* INPUT */\n    readonly: 'readOnly',\n    maxlength: 'maxLength',\n    tabindex: 'tabIndex',\n    /* TABLE */\n    colspan: 'colSpan',\n    rowspan: 'rowSpan',\n    /* IMAGE */\n    usemap: 'useMap',\n};\nexport function prop(elem, props, value) {\n    if (!props) {\n        return;\n    }\n    if (typeof props === 'string') {\n        props = propMap[props] || props; // eslint-disable-line\n        if (arguments.length < 3) {\n            return elem[props];\n        }\n        ;\n        elem[props] = value;\n        return;\n    }\n    // eslint-disable-next-line\n    for (const key in props) {\n        prop(elem, key, props[key]);\n    }\n}\n//# sourceMappingURL=prop.js.map","import * as Dom from '../dom/main';\nexport class Vector {\n    get [Symbol.toStringTag]() {\n        return Vector.toStringTag;\n    }\n    get type() {\n        return this.node.nodeName;\n    }\n    get id() {\n        return this.node.id;\n    }\n    set id(id) {\n        this.node.id = id;\n    }\n    constructor(elem, attrs, children) {\n        if (!elem) {\n            throw new TypeError('Invalid element to create vector');\n        }\n        let node;\n        if (Vector.isVector(elem)) {\n            node = elem.node;\n        }\n        else if (typeof elem === 'string') {\n            if (elem.toLowerCase() === 'svg') {\n                node = Dom.createSvgDocument();\n            }\n            else if (elem[0] === '<') {\n                const doc = Dom.createSvgDocument(elem);\n                // only import the first child\n                node = document.importNode(doc.firstChild, true);\n            }\n            else {\n                node = document.createElementNS(Dom.ns.svg, elem);\n            }\n        }\n        else {\n            node = elem;\n        }\n        this.node = node;\n        if (attrs) {\n            this.setAttributes(attrs);\n        }\n        if (children) {\n            this.append(children);\n        }\n    }\n    transform(matrix, options) {\n        if (matrix == null) {\n            return Dom.transform(this.node);\n        }\n        Dom.transform(this.node, matrix, options);\n        return this;\n    }\n    translate(tx, ty = 0, options = {}) {\n        if (tx == null) {\n            return Dom.translate(this.node);\n        }\n        Dom.translate(this.node, tx, ty, options);\n        return this;\n    }\n    rotate(angle, cx, cy, options = {}) {\n        if (angle == null) {\n            return Dom.rotate(this.node);\n        }\n        Dom.rotate(this.node, angle, cx, cy, options);\n        return this;\n    }\n    scale(sx, sy) {\n        if (sx == null) {\n            return Dom.scale(this.node);\n        }\n        Dom.scale(this.node, sx, sy);\n        return this;\n    }\n    /**\n     * Returns an SVGMatrix that specifies the transformation necessary\n     * to convert this coordinate system into `target` coordinate system.\n     */\n    getTransformToElement(target) {\n        const ref = Vector.toNode(target);\n        return Dom.getTransformToElement(this.node, ref);\n    }\n    removeAttribute(name) {\n        Dom.removeAttribute(this.node, name);\n        return this;\n    }\n    getAttribute(name) {\n        return Dom.getAttribute(this.node, name);\n    }\n    setAttribute(name, value) {\n        Dom.setAttribute(this.node, name, value);\n        return this;\n    }\n    setAttributes(attrs) {\n        Dom.setAttributes(this.node, attrs);\n        return this;\n    }\n    attr(name, value) {\n        if (name == null) {\n            return Dom.attr(this.node);\n        }\n        if (typeof name === 'string' && value === undefined) {\n            return Dom.attr(this.node, name);\n        }\n        if (typeof name === 'object') {\n            Dom.attr(this.node, name);\n        }\n        else {\n            Dom.attr(this.node, name, value);\n        }\n        return this;\n    }\n    svg() {\n        return this.node instanceof SVGSVGElement\n            ? this\n            : Vector.create(this.node.ownerSVGElement);\n    }\n    defs() {\n        const context = this.svg() || this;\n        const defsNode = context.node.getElementsByTagName('defs')[0];\n        if (defsNode) {\n            return Vector.create(defsNode);\n        }\n        return Vector.create('defs').appendTo(context);\n    }\n    text(content, options = {}) {\n        Dom.text(this.node, content, options);\n        return this;\n    }\n    tagName() {\n        return Dom.tagName(this.node);\n    }\n    clone() {\n        return Vector.create(this.node.cloneNode(true));\n    }\n    remove() {\n        Dom.remove(this.node);\n        return this;\n    }\n    empty() {\n        Dom.empty(this.node);\n        return this;\n    }\n    append(elems) {\n        Dom.append(this.node, Vector.toNodes(elems));\n        return this;\n    }\n    appendTo(target) {\n        Dom.appendTo(this.node, Vector.isVector(target) ? target.node : target);\n        return this;\n    }\n    prepend(elems) {\n        Dom.prepend(this.node, Vector.toNodes(elems));\n        return this;\n    }\n    before(elems) {\n        Dom.before(this.node, Vector.toNodes(elems));\n        return this;\n    }\n    replace(elem) {\n        if (this.node.parentNode) {\n            this.node.parentNode.replaceChild(Vector.toNode(elem), this.node);\n        }\n        return Vector.create(elem);\n    }\n    first() {\n        return this.node.firstChild\n            ? Vector.create(this.node.firstChild)\n            : null;\n    }\n    last() {\n        return this.node.lastChild\n            ? Vector.create(this.node.lastChild)\n            : null;\n    }\n    get(index) {\n        const child = this.node.childNodes[index];\n        return child ? Vector.create(child) : null;\n    }\n    indexOf(elem) {\n        const children = Array.prototype.slice.call(this.node.childNodes);\n        return children.indexOf(Vector.toNode(elem));\n    }\n    find(selector) {\n        const vels = [];\n        const nodes = Dom.find(this.node, selector);\n        if (nodes) {\n            for (let i = 0, ii = nodes.length; i < ii; i += 1) {\n                vels.push(Vector.create(nodes[i]));\n            }\n        }\n        return vels;\n    }\n    findOne(selector) {\n        const found = Dom.findOne(this.node, selector);\n        return found ? Vector.create(found) : null;\n    }\n    findParentByClass(className, terminator) {\n        const node = Dom.findParentByClass(this.node, className, terminator);\n        return node ? Vector.create(node) : null;\n    }\n    matches(selector) {\n        const node = this.node;\n        const matches = this.node.matches;\n        const matcher = node.matches ||\n            node.matchesSelector ||\n            node.msMatchesSelector ||\n            node.mozMatchesSelector ||\n            node.webkitMatchesSelector ||\n            node.oMatchesSelector ||\n            null;\n        return matcher && matcher.call(node, selector);\n    }\n    contains(child) {\n        return Dom.contains(this.node, Vector.isVector(child) ? child.node : child);\n    }\n    wrap(node) {\n        const vel = Vector.create(node);\n        const parentNode = this.node.parentNode;\n        if (parentNode != null) {\n            parentNode.insertBefore(vel.node, this.node);\n        }\n        return vel.append(this);\n    }\n    parent(type) {\n        let parent = this; // eslint-disable-line @typescript-eslint/no-this-alias\n        // check for parent\n        if (parent.node.parentNode == null) {\n            return null;\n        }\n        // get parent element\n        parent = Vector.create(parent.node.parentNode);\n        if (type == null) {\n            return parent;\n        }\n        // loop trough ancestors if type is given\n        do {\n            if (typeof type === 'string' ? parent.matches(type) : parent instanceof type) {\n                return parent;\n            }\n        } while ((parent = Vector.create(parent.node.parentNode)));\n        return parent;\n    }\n    children() {\n        const children = this.node.childNodes;\n        const vels = [];\n        for (let i = 0; i < children.length; i += 1) {\n            const currentChild = children[i];\n            if (currentChild.nodeType === 1) {\n                vels.push(Vector.create(children[i]));\n            }\n        }\n        return vels;\n    }\n    eachChild(fn, deep) {\n        const children = this.children();\n        for (let i = 0, l = children.length; i < l; i += 1) {\n            fn.call(children[i], children[i], i, children);\n            if (deep) {\n                children[i].eachChild(fn, deep);\n            }\n        }\n        return this;\n    }\n    index() {\n        return Dom.index(this.node);\n    }\n    hasClass(className) {\n        return Dom.hasClass(this.node, className);\n    }\n    addClass(className) {\n        Dom.addClass(this.node, className);\n        return this;\n    }\n    removeClass(className) {\n        Dom.removeClass(this.node, className);\n        return this;\n    }\n    toggleClass(className, stateVal) {\n        Dom.toggleClass(this.node, className, stateVal);\n        return this;\n    }\n    toLocalPoint(x, y) {\n        return Dom.toLocalPoint(this.node, x, y);\n    }\n    /**\n     * Samples the underlying SVG element (it currently works only on\n     * paths - where it is most useful anyway). Returns an array of objects\n     * of the form `{ x: Number, y: Number, distance: Number }`. Each of these\n     * objects represent a point on the path. This basically creates a discrete\n     * representation of the path (which is possible a curve). The sampling\n     * interval defines the accuracy of the sampling. In other words, we travel\n     * from the beginning of the path to the end by interval distance (on the\n     * path, not between the resulting points) and collect the discrete points\n     * on the path. This is very useful in many situations. For example, SVG\n     * does not provide a built-in mechanism to find intersections between two\n     * paths. Using sampling, we can just generate bunch of points for each of\n     * the path and find the closest ones from each set.\n     */\n    sample(interval = 1) {\n        if (this.node instanceof SVGPathElement) {\n            return Dom.sample(this.node, interval);\n        }\n        return [];\n    }\n    toPath() {\n        return Vector.create(Dom.toPath(this.node));\n    }\n    toPathData() {\n        return Dom.toPathData(this.node);\n    }\n}\n(function (Vector) {\n    Vector.toStringTag = `X6.${Vector.name}`;\n    function isVector(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Vector) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const vector = instance;\n        if ((tag == null || tag === Vector.toStringTag) &&\n            vector.node instanceof SVGElement &&\n            typeof vector.sample === 'function' &&\n            typeof vector.toPath === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Vector.isVector = isVector;\n    function create(elem, attrs, children) {\n        return new Vector(elem, attrs, children);\n    }\n    Vector.create = create;\n    function createVectors(markup) {\n        if (markup[0] === '<') {\n            const svgDoc = Dom.createSvgDocument(markup);\n            const vels = [];\n            for (let i = 0, ii = svgDoc.childNodes.length; i < ii; i += 1) {\n                const childNode = svgDoc.childNodes[i];\n                vels.push(create(document.importNode(childNode, true)));\n            }\n            return vels;\n        }\n        return [create(markup)];\n    }\n    Vector.createVectors = createVectors;\n    function toNode(elem) {\n        if (isVector(elem)) {\n            return elem.node;\n        }\n        return elem;\n    }\n    Vector.toNode = toNode;\n    function toNodes(elems) {\n        if (Array.isArray(elems)) {\n            return elems.map((elem) => toNode(elem));\n        }\n        return [toNode(elems)];\n    }\n    Vector.toNodes = toNodes;\n})(Vector || (Vector = {}));\n//# sourceMappingURL=index.js.map","/* eslint-disable no-control-regex */\nimport { StringExt } from '../string';\nimport { Text } from '../text';\nimport { attr } from './attr';\nimport { Vector } from '../vector';\nimport { createSvgElement, empty } from './elem';\nconst canvasContext = document.createElement('canvas').getContext('2d');\nfunction createTextPathNode(attrs, elem) {\n    const vel = Vector.create(elem);\n    const textPath = Vector.create('textPath');\n    const d = attrs.d;\n    if (d && attrs['xlink:href'] === undefined) {\n        const path = Vector.create('path').attr('d', d).appendTo(vel.defs());\n        textPath.attr('xlink:href', `#${path.id}`);\n    }\n    if (typeof attrs === 'object') {\n        textPath.attr(attrs);\n    }\n    return textPath.node;\n}\nfunction annotateTextLine(lineNode, lineAnnotations, options) {\n    const eol = options.eol;\n    const baseSize = options.baseSize;\n    const lineHeight = options.lineHeight;\n    let maxFontSize = 0;\n    let tspanNode;\n    const fontMetrics = {};\n    const lastJ = lineAnnotations.length - 1;\n    for (let j = 0; j <= lastJ; j += 1) {\n        let annotation = lineAnnotations[j];\n        let fontSize = null;\n        if (typeof annotation === 'object') {\n            const annotationAttrs = annotation.attrs;\n            const vTSpan = Vector.create('tspan', annotationAttrs);\n            tspanNode = vTSpan.node;\n            let t = annotation.t;\n            if (eol && j === lastJ) {\n                t += eol;\n            }\n            tspanNode.textContent = t;\n            // Per annotation className\n            const annotationClass = annotationAttrs.class;\n            if (annotationClass) {\n                vTSpan.addClass(annotationClass);\n            }\n            // set the list of indices of all the applied annotations\n            // in the `annotations` attribute. This list is a comma\n            // separated list of indices.\n            if (options.includeAnnotationIndices) {\n                vTSpan.attr('annotations', annotation.annotations.join(','));\n            }\n            // Check for max font size\n            fontSize = parseFloat(annotationAttrs['font-size']);\n            if (fontSize === undefined)\n                fontSize = baseSize;\n            if (fontSize && fontSize > maxFontSize)\n                maxFontSize = fontSize;\n        }\n        else {\n            if (eol && j === lastJ) {\n                annotation += eol;\n            }\n            tspanNode = document.createTextNode(annotation || ' ');\n            if (baseSize && baseSize > maxFontSize) {\n                maxFontSize = baseSize;\n            }\n        }\n        lineNode.appendChild(tspanNode);\n    }\n    if (maxFontSize) {\n        fontMetrics.maxFontSize = maxFontSize;\n    }\n    if (lineHeight) {\n        fontMetrics.lineHeight = lineHeight;\n    }\n    else if (maxFontSize) {\n        fontMetrics.lineHeight = maxFontSize * 1.2;\n    }\n    return fontMetrics;\n}\nconst emRegex = /em$/;\nfunction emToPx(em, fontSize) {\n    const numerical = parseFloat(em);\n    if (emRegex.test(em)) {\n        return numerical * fontSize;\n    }\n    return numerical;\n}\nfunction calculateDY(alignment, linesMetrics, baseSizePx, lineHeight) {\n    if (!Array.isArray(linesMetrics)) {\n        return 0;\n    }\n    const n = linesMetrics.length;\n    if (!n)\n        return 0;\n    let lineMetrics = linesMetrics[0];\n    const flMaxFont = emToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n    let rLineHeights = 0;\n    const lineHeightPx = emToPx(lineHeight, baseSizePx);\n    for (let i = 1; i < n; i += 1) {\n        lineMetrics = linesMetrics[i];\n        const iLineHeight = emToPx(lineMetrics.lineHeight, baseSizePx) || lineHeightPx;\n        rLineHeights += iLineHeight;\n    }\n    const llMaxFont = emToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n    let dy;\n    switch (alignment) {\n        case 'middle':\n            dy = flMaxFont / 2 - 0.15 * llMaxFont - rLineHeights / 2;\n            break;\n        case 'bottom':\n            dy = -(0.25 * llMaxFont) - rLineHeights;\n            break;\n        case 'top':\n        default:\n            dy = 0.8 * flMaxFont;\n            break;\n    }\n    return dy;\n}\nexport function text(elem, content, options = {}) {\n    content = Text.sanitize(content); // eslint-disable-line\n    const eol = options.eol;\n    let textPath = options.textPath;\n    const verticalAnchor = options.textVerticalAnchor;\n    const namedVerticalAnchor = verticalAnchor === 'middle' ||\n        verticalAnchor === 'bottom' ||\n        verticalAnchor === 'top';\n    // Horizontal shift applied to all the lines but the first.\n    let x = options.x;\n    if (x === undefined) {\n        x = elem.getAttribute('x') || 0;\n    }\n    // Annotations\n    const iai = options.includeAnnotationIndices;\n    let annotations = options.annotations;\n    if (annotations && !Array.isArray(annotations)) {\n        annotations = [annotations];\n    }\n    // Shift all the <tspan> but first by one line (`1em`)\n    const defaultLineHeight = options.lineHeight;\n    const autoLineHeight = defaultLineHeight === 'auto';\n    const lineHeight = autoLineHeight ? '1.5em' : defaultLineHeight || '1em';\n    let needEmpty = true;\n    const childNodes = elem.childNodes;\n    if (childNodes.length === 1) {\n        const node = childNodes[0];\n        if (node && node.tagName.toUpperCase() === 'TITLE') {\n            needEmpty = false;\n        }\n    }\n    if (needEmpty) {\n        empty(elem);\n    }\n    attr(elem, {\n        // Preserve spaces, do not consecutive spaces to get collapsed to one.\n        'xml:space': 'preserve',\n        // An empty text gets rendered into the DOM in webkit-based browsers.\n        // In order to unify this behaviour across all browsers\n        // we rather hide the text element when it's empty.\n        display: content || options.displayEmpty ? null : 'none',\n    });\n    // Set default font-size if none\n    const strFontSize = attr(elem, 'font-size');\n    let fontSize = parseFloat(strFontSize);\n    if (!fontSize) {\n        fontSize = 16;\n        if ((namedVerticalAnchor || annotations) && !strFontSize) {\n            attr(elem, 'font-size', `${fontSize}`);\n        }\n    }\n    let containerNode;\n    if (textPath) {\n        // Now all the `<tspan>`s will be inside the `<textPath>`.\n        if (typeof textPath === 'string') {\n            textPath = { d: textPath };\n        }\n        containerNode = createTextPathNode(textPath, elem);\n    }\n    else {\n        containerNode = document.createDocumentFragment();\n    }\n    let dy;\n    let offset = 0;\n    let annotatedY;\n    const lines = content.split('\\n');\n    const linesMetrics = [];\n    const lastI = lines.length - 1;\n    for (let i = 0; i <= lastI; i += 1) {\n        dy = lineHeight;\n        let lineClassName = 'v-line';\n        const lineNode = createSvgElement('tspan');\n        let lineMetrics;\n        let line = lines[i];\n        if (line) {\n            if (annotations) {\n                // Find the *compacted* annotations for this line.\n                const lineAnnotations = Text.annotate(line, annotations, {\n                    offset: -offset,\n                    includeAnnotationIndices: iai,\n                });\n                lineMetrics = annotateTextLine(lineNode, lineAnnotations, {\n                    eol: i !== lastI && eol,\n                    baseSize: fontSize,\n                    lineHeight: autoLineHeight ? null : lineHeight,\n                    includeAnnotationIndices: iai,\n                });\n                // Get the line height based on the biggest font size\n                // in the annotations for this line.\n                const iLineHeight = lineMetrics.lineHeight;\n                if (iLineHeight && autoLineHeight && i !== 0) {\n                    dy = iLineHeight;\n                }\n                if (i === 0) {\n                    annotatedY = lineMetrics.maxFontSize * 0.8;\n                }\n            }\n            else {\n                if (eol && i !== lastI) {\n                    line += eol;\n                }\n                lineNode.textContent = line;\n            }\n        }\n        else {\n            // Make sure the textContent is never empty. If it is, add a dummy\n            // character and make it invisible, making the following lines correctly\n            // relatively positioned. `dy=1em` won't work with empty lines otherwise.\n            lineNode.textContent = '-';\n            lineClassName += ' v-empty-line';\n            const lineNodeStyle = lineNode.style;\n            lineNodeStyle.fillOpacity = 0;\n            lineNodeStyle.strokeOpacity = 0;\n            if (annotations) {\n                lineMetrics = {};\n            }\n        }\n        if (lineMetrics) {\n            linesMetrics.push(lineMetrics);\n        }\n        if (i > 0) {\n            lineNode.setAttribute('dy', dy);\n        }\n        // Firefox requires 'x' to be set on the first line\n        if (i > 0 || textPath) {\n            lineNode.setAttribute('x', x);\n        }\n        lineNode.className.baseVal = lineClassName;\n        containerNode.appendChild(lineNode);\n        offset += line.length + 1; // + 1 = newline character.\n    }\n    // Y Alignment calculation\n    if (namedVerticalAnchor) {\n        if (annotations) {\n            dy = calculateDY(verticalAnchor, linesMetrics, fontSize, lineHeight);\n        }\n        else if (verticalAnchor === 'top') {\n            // A shortcut for top alignment. It does not depend on font-size nor line-height\n            dy = '0.8em';\n        }\n        else {\n            let rh; // remaining height\n            if (lastI > 0) {\n                rh = parseFloat(lineHeight) || 1;\n                rh *= lastI;\n                if (!emRegex.test(lineHeight))\n                    rh /= fontSize;\n            }\n            else {\n                // Single-line text\n                rh = 0;\n            }\n            switch (verticalAnchor) {\n                case 'middle':\n                    dy = `${0.3 - rh / 2}em`;\n                    break;\n                case 'bottom':\n                    dy = `${-rh - 0.3}em`;\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n    else if (verticalAnchor === 0) {\n        dy = '0em';\n    }\n    else if (verticalAnchor) {\n        dy = verticalAnchor;\n    }\n    else {\n        // No vertical anchor is defined\n        dy = 0;\n        // Backwards compatibility - we change the `y` attribute instead of `dy`.\n        if (elem.getAttribute('y') == null) {\n            elem.setAttribute('y', `${annotatedY || '0.8em'}`);\n        }\n    }\n    const firstLine = containerNode.firstChild;\n    firstLine.setAttribute('dy', dy);\n    elem.appendChild(containerNode);\n}\nexport function measureText(text, styles = {}) {\n    if (!text) {\n        return { width: 0 };\n    }\n    const font = [];\n    const fontSize = styles['font-size']\n        ? `${parseFloat(styles['font-size'])}px`\n        : '14px';\n    font.push(styles['font-style'] || 'normal');\n    font.push(styles['font-variant'] || 'normal');\n    font.push(styles['font-weight'] || 400);\n    font.push(fontSize);\n    font.push(styles['font-family'] || 'sans-serif');\n    canvasContext.font = font.join(' ');\n    return canvasContext.measureText(text);\n}\nexport function splitTextByLength(text, splitWidth, totalWidth, style = {}) {\n    if (splitWidth >= totalWidth) {\n        return [text, ''];\n    }\n    const length = text.length;\n    const caches = {};\n    let index = Math.round((splitWidth / totalWidth) * length - 1);\n    if (index < 0) {\n        index = 0;\n    }\n    // eslint-disable-next-line\n    while (index >= 0 && index < length) {\n        const frontText = text.slice(0, index);\n        const frontWidth = caches[frontText] || measureText(frontText, style).width;\n        const behindText = text.slice(0, index + 1);\n        const behindWidth = caches[behindText] || measureText(behindText, style).width;\n        caches[frontText] = frontWidth;\n        caches[behindText] = behindWidth;\n        if (frontWidth > splitWidth) {\n            index -= 1;\n        }\n        else if (behindWidth <= splitWidth) {\n            index += 1;\n        }\n        else {\n            break;\n        }\n    }\n    return [text.slice(0, index), text.slice(index)];\n}\nexport function breakText(text, size, styles = {}, options = {}) {\n    const width = size.width;\n    const height = size.height;\n    const eol = options.eol || '\\n';\n    const fontSize = styles.fontSize || 14;\n    const lineHeight = styles.lineHeight\n        ? parseFloat(styles.lineHeight)\n        : Math.ceil(fontSize * 1.4);\n    const maxLines = Math.floor(height / lineHeight);\n    if (text.indexOf(eol) > -1) {\n        const delimiter = StringExt.uuid();\n        const splitText = [];\n        text.split(eol).map((line) => {\n            const part = breakText(line, Object.assign(Object.assign({}, size), { height: Number.MAX_SAFE_INTEGER }), styles, Object.assign(Object.assign({}, options), { eol: delimiter }));\n            if (part) {\n                splitText.push(...part.split(delimiter));\n            }\n        });\n        return splitText.slice(0, maxLines).join(eol);\n    }\n    const { width: textWidth } = measureText(text, styles);\n    if (textWidth < width) {\n        return text;\n    }\n    const lines = [];\n    let remainText = text;\n    let remainWidth = textWidth;\n    let ellipsis = options.ellipsis;\n    let ellipsisWidth = 0;\n    if (ellipsis) {\n        if (typeof ellipsis !== 'string') {\n            ellipsis = '\\u2026';\n        }\n        ellipsisWidth = measureText(ellipsis, styles).width;\n    }\n    for (let i = 0; i < maxLines; i += 1) {\n        if (remainWidth > width) {\n            const isLast = i === maxLines - 1;\n            if (isLast) {\n                const [front] = splitTextByLength(remainText, width - ellipsisWidth, remainWidth, styles);\n                lines.push(ellipsis ? `${front}${ellipsis}` : front);\n            }\n            else {\n                const [front, behind] = splitTextByLength(remainText, width, remainWidth, styles);\n                lines.push(front);\n                remainText = behind;\n                remainWidth = measureText(remainText, styles).width;\n            }\n        }\n        else {\n            lines.push(remainText);\n            break;\n        }\n    }\n    return lines.join(eol);\n}\n//# sourceMappingURL=text.js.map","import { attr } from './attr';\nimport { createSvgElement } from './elem';\nexport const KAPPA = 0.551784;\nfunction getNumbericAttribute(elem, attr, defaultValue = NaN) {\n    const v = elem.getAttribute(attr);\n    if (v == null) {\n        return defaultValue;\n    }\n    const n = parseFloat(v);\n    return Number.isNaN(n) ? defaultValue : n;\n}\nexport function sample(elem, interval = 1) {\n    const length = elem.getTotalLength();\n    const samples = [];\n    let distance = 0;\n    let sample;\n    while (distance < length) {\n        sample = elem.getPointAtLength(distance);\n        samples.push({ distance, x: sample.x, y: sample.y });\n        distance += interval;\n    }\n    return samples;\n}\nexport function lineToPathData(line) {\n    return [\n        'M',\n        getNumbericAttribute(line, 'x1'),\n        getNumbericAttribute(line, 'y1'),\n        'L',\n        getNumbericAttribute(line, 'x2'),\n        getNumbericAttribute(line, 'y2'),\n    ].join(' ');\n}\nexport function polygonToPathData(polygon) {\n    const points = getPointsFromSvgElement(polygon);\n    if (points.length === 0) {\n        return null;\n    }\n    return `${svgPointsToPath(points)} Z`;\n}\nexport function polylineToPathData(polyline) {\n    const points = getPointsFromSvgElement(polyline);\n    if (points.length === 0) {\n        return null;\n    }\n    return svgPointsToPath(points);\n}\nfunction svgPointsToPath(points) {\n    const arr = points.map((p) => `${p.x} ${p.y}`);\n    return `M ${arr.join(' L')}`;\n}\nexport function getPointsFromSvgElement(elem) {\n    const points = [];\n    const nodePoints = elem.points;\n    if (nodePoints) {\n        for (let i = 0, ii = nodePoints.numberOfItems; i < ii; i += 1) {\n            points.push(nodePoints.getItem(i));\n        }\n    }\n    return points;\n}\nexport function circleToPathData(circle) {\n    const cx = getNumbericAttribute(circle, 'cx', 0);\n    const cy = getNumbericAttribute(circle, 'cy', 0);\n    const r = getNumbericAttribute(circle, 'r');\n    const cd = r * KAPPA; // Control distance.\n    return [\n        'M',\n        cx,\n        cy - r,\n        'C',\n        cx + cd,\n        cy - r,\n        cx + r,\n        cy - cd,\n        cx + r,\n        cy,\n        'C',\n        cx + r,\n        cy + cd,\n        cx + cd,\n        cy + r,\n        cx,\n        cy + r,\n        'C',\n        cx - cd,\n        cy + r,\n        cx - r,\n        cy + cd,\n        cx - r,\n        cy,\n        'C',\n        cx - r,\n        cy - cd,\n        cx - cd,\n        cy - r,\n        cx,\n        cy - r,\n        'Z',\n    ].join(' ');\n}\nexport function ellipseToPathData(ellipse) {\n    const cx = getNumbericAttribute(ellipse, 'cx', 0);\n    const cy = getNumbericAttribute(ellipse, 'cy', 0);\n    const rx = getNumbericAttribute(ellipse, 'rx');\n    const ry = getNumbericAttribute(ellipse, 'ry') || rx;\n    const cdx = rx * KAPPA; // Control distance x.\n    const cdy = ry * KAPPA; // Control distance y.\n    const d = [\n        'M',\n        cx,\n        cy - ry,\n        'C',\n        cx + cdx,\n        cy - ry,\n        cx + rx,\n        cy - cdy,\n        cx + rx,\n        cy,\n        'C',\n        cx + rx,\n        cy + cdy,\n        cx + cdx,\n        cy + ry,\n        cx,\n        cy + ry,\n        'C',\n        cx - cdx,\n        cy + ry,\n        cx - rx,\n        cy + cdy,\n        cx - rx,\n        cy,\n        'C',\n        cx - rx,\n        cy - cdy,\n        cx - cdx,\n        cy - ry,\n        cx,\n        cy - ry,\n        'Z',\n    ].join(' ');\n    return d;\n}\nexport function rectangleToPathData(rect) {\n    return rectToPathData({\n        x: getNumbericAttribute(rect, 'x', 0),\n        y: getNumbericAttribute(rect, 'y', 0),\n        width: getNumbericAttribute(rect, 'width', 0),\n        height: getNumbericAttribute(rect, 'height', 0),\n        rx: getNumbericAttribute(rect, 'rx', 0),\n        ry: getNumbericAttribute(rect, 'ry', 0),\n    });\n}\nexport function rectToPathData(r) {\n    let d;\n    const x = r.x;\n    const y = r.y;\n    const width = r.width;\n    const height = r.height;\n    const topRx = Math.min(r.rx || r['top-rx'] || 0, width / 2);\n    const bottomRx = Math.min(r.rx || r['bottom-rx'] || 0, width / 2);\n    const topRy = Math.min(r.ry || r['top-ry'] || 0, height / 2);\n    const bottomRy = Math.min(r.ry || r['bottom-ry'] || 0, height / 2);\n    if (topRx || bottomRx || topRy || bottomRy) {\n        d = [\n            'M',\n            x,\n            y + topRy,\n            'v',\n            height - topRy - bottomRy,\n            'a',\n            bottomRx,\n            bottomRy,\n            0,\n            0,\n            0,\n            bottomRx,\n            bottomRy,\n            'h',\n            width - 2 * bottomRx,\n            'a',\n            bottomRx,\n            bottomRy,\n            0,\n            0,\n            0,\n            bottomRx,\n            -bottomRy,\n            'v',\n            -(height - bottomRy - topRy),\n            'a',\n            topRx,\n            topRy,\n            0,\n            0,\n            0,\n            -topRx,\n            -topRy,\n            'h',\n            -(width - 2 * topRx),\n            'a',\n            topRx,\n            topRy,\n            0,\n            0,\n            0,\n            -topRx,\n            topRy,\n            'Z',\n        ];\n    }\n    else {\n        d = ['M', x, y, 'H', x + width, 'V', y + height, 'H', x, 'V', y, 'Z'];\n    }\n    return d.join(' ');\n}\nexport function toPath(elem) {\n    const path = createSvgElement('path');\n    attr(path, attr(elem));\n    const d = toPathData(elem);\n    if (d) {\n        path.setAttribute('d', d);\n    }\n    return path;\n}\nexport function toPathData(elem) {\n    const tagName = elem.tagName.toLowerCase();\n    switch (tagName) {\n        case 'path':\n            return elem.getAttribute('d');\n        case 'line':\n            return lineToPathData(elem);\n        case 'polygon':\n            return polygonToPathData(elem);\n        case 'polyline':\n            return polylineToPathData(elem);\n        case 'ellipse':\n            return ellipseToPathData(elem);\n        case 'circle':\n            return circleToPathData(elem);\n        case 'rect':\n            return rectangleToPathData(elem);\n        default:\n            break;\n    }\n    throw new Error(`\"${tagName}\" cannot be converted to svg path element.`);\n}\n// Inspired by d3.js https://github.com/mbostock/d3/blob/master/src/svg/arc.js\nexport function createSlicePathData(innerRadius, outerRadius, startAngle, endAngle) {\n    const svgArcMax = 2 * Math.PI - 1e-6;\n    const r0 = innerRadius;\n    const r1 = outerRadius;\n    let a0 = startAngle;\n    let a1 = endAngle;\n    if (a1 < a0) {\n        const tmp = a0;\n        a0 = a1;\n        a1 = tmp;\n    }\n    const da = a1 - a0;\n    const df = da < Math.PI ? '0' : '1';\n    const c0 = Math.cos(a0);\n    const s0 = Math.sin(a0);\n    const c1 = Math.cos(a1);\n    const s1 = Math.sin(a1);\n    return da >= svgArcMax\n        ? r0\n            ? // eslint-disable-next-line\n                `M0,${r1}A${r1},${r1} 0 1,1 0,${-r1}A${r1},${r1} 0 1,1 0,${r1}M0,${r0}A${r0},${r0} 0 1,0 0,${-r0}A${r0},${r0} 0 1,0 0,${r0}Z`\n            : // eslint-disable-next-line\n                `M0,${r1}A${r1},${r1} 0 1,1 0,${-r1}A${r1},${r1} 0 1,1 0,${r1}Z`\n        : r0\n            ? // eslint-disable-next-line\n                `M${r1 * c0},${r1 * s0}A${r1},${r1} 0 ${df},1 ${r1 * c1},${r1 * s1}L${r0 * c1},${r0 * s1}A${r0},${r0} 0 ${df},0 ${r0 * c0},${r0 * s0}Z`\n            : // eslint-disable-next-line\n                `M${r1 * c0},${r1 * s0}A${r1},${r1} 0 ${df},1 ${r1 * c1},${r1 * s1}L0,0` +\n                    `Z`;\n}\n//# sourceMappingURL=path.js.map","import { createSvgElement } from './elem';\nconst svgDocument = createSvgElement('svg');\nconst transformRegex = /(\\w+)\\(([^,)]+),?([^)]+)?\\)/gi;\nconst transformSeparatorRegex = /[ ,]+/;\nconst transformationListRegex = /^(\\w+)\\((.*)\\)/;\n/**\n * Returns a SVG point object initialized with the `x` and `y` coordinates.\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGPoint\n */\nexport function createSVGPoint(x, y) {\n    const p = svgDocument.createSVGPoint();\n    p.x = x;\n    p.y = y;\n    return p;\n}\n/**\n * Returns the SVG transformation matrix initialized with the given matrix.\n *\n * The given matrix is an object of the form:\n * {\n *   a: number\n *   b: number\n *   c: number\n *   d: number\n *   e: number\n *   f: number\n * }\n *\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGMatrix\n */\nexport function createSVGMatrix(matrix) {\n    const mat = svgDocument.createSVGMatrix();\n    if (matrix != null) {\n        const source = matrix;\n        const target = mat;\n        // eslint-disable-next-line\n        for (const key in source) {\n            target[key] = source[key];\n        }\n    }\n    return mat;\n}\n/**\n * Returns a SVG transform object.\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGTransform\n */\nexport function createSVGTransform(matrix) {\n    if (matrix != null) {\n        if (!(matrix instanceof DOMMatrix)) {\n            matrix = createSVGMatrix(matrix); // eslint-disable-line\n        }\n        return svgDocument.createSVGTransformFromMatrix(matrix);\n    }\n    return svgDocument.createSVGTransform();\n}\n/**\n * Returns the SVG transformation matrix built from the `transformString`.\n *\n * E.g. 'translate(10,10) scale(2,2)' will result in matrix:\n * `{ a: 2, b: 0, c: 0, d: 2, e: 10, f: 10}`\n */\nexport function transformStringToMatrix(transform) {\n    let mat = createSVGMatrix();\n    const matches = transform != null && transform.match(transformRegex);\n    if (!matches) {\n        return mat;\n    }\n    for (let i = 0, n = matches.length; i < n; i += 1) {\n        const transformationString = matches[i];\n        const transformationMatch = transformationString.match(transformationListRegex);\n        if (transformationMatch) {\n            let sx;\n            let sy;\n            let tx;\n            let ty;\n            let angle;\n            let ctm = createSVGMatrix();\n            const args = transformationMatch[2].split(transformSeparatorRegex);\n            switch (transformationMatch[1].toLowerCase()) {\n                case 'scale':\n                    sx = parseFloat(args[0]);\n                    sy = args[1] === undefined ? sx : parseFloat(args[1]);\n                    ctm = ctm.scaleNonUniform(sx, sy);\n                    break;\n                case 'translate':\n                    tx = parseFloat(args[0]);\n                    ty = parseFloat(args[1]);\n                    ctm = ctm.translate(tx, ty);\n                    break;\n                case 'rotate':\n                    angle = parseFloat(args[0]);\n                    tx = parseFloat(args[1]) || 0;\n                    ty = parseFloat(args[2]) || 0;\n                    if (tx !== 0 || ty !== 0) {\n                        ctm = ctm.translate(tx, ty).rotate(angle).translate(-tx, -ty);\n                    }\n                    else {\n                        ctm = ctm.rotate(angle);\n                    }\n                    break;\n                case 'skewx':\n                    angle = parseFloat(args[0]);\n                    ctm = ctm.skewX(angle);\n                    break;\n                case 'skewy':\n                    angle = parseFloat(args[0]);\n                    ctm = ctm.skewY(angle);\n                    break;\n                case 'matrix':\n                    ctm.a = parseFloat(args[0]);\n                    ctm.b = parseFloat(args[1]);\n                    ctm.c = parseFloat(args[2]);\n                    ctm.d = parseFloat(args[3]);\n                    ctm.e = parseFloat(args[4]);\n                    ctm.f = parseFloat(args[5]);\n                    break;\n                default:\n                    continue;\n            }\n            mat = mat.multiply(ctm);\n        }\n    }\n    return mat;\n}\nexport function matrixToTransformString(matrix) {\n    const m = matrix || {};\n    const a = m.a != null ? m.a : 1;\n    const b = m.b != null ? m.b : 0;\n    const c = m.c != null ? m.c : 0;\n    const d = m.d != null ? m.d : 1;\n    const e = m.e != null ? m.e : 0;\n    const f = m.f != null ? m.f : 0;\n    return `matrix(${a},${b},${c},${d},${e},${f})`;\n}\nexport function parseTransformString(transform) {\n    let translation;\n    let rotation;\n    let scale;\n    if (transform) {\n        const separator = transformSeparatorRegex;\n        // Allow reading transform string with a single matrix\n        if (transform.trim().indexOf('matrix') >= 0) {\n            const matrix = transformStringToMatrix(transform);\n            const decomposedMatrix = decomposeMatrix(matrix);\n            translation = [decomposedMatrix.translateX, decomposedMatrix.translateY];\n            rotation = [decomposedMatrix.rotation];\n            scale = [decomposedMatrix.scaleX, decomposedMatrix.scaleY];\n            const transformations = [];\n            if (translation[0] !== 0 || translation[1] !== 0) {\n                transformations.push(`translate(${translation.join(',')})`);\n            }\n            if (scale[0] !== 1 || scale[1] !== 1) {\n                transformations.push(`scale(${scale.join(',')})`);\n            }\n            if (rotation[0] !== 0) {\n                transformations.push(`rotate(${rotation[0]})`);\n            }\n            transform = transformations.join(' '); // eslint-disable-line\n        }\n        else {\n            const translateMatch = transform.match(/translate\\((.*?)\\)/);\n            if (translateMatch) {\n                translation = translateMatch[1].split(separator);\n            }\n            const rotateMatch = transform.match(/rotate\\((.*?)\\)/);\n            if (rotateMatch) {\n                rotation = rotateMatch[1].split(separator);\n            }\n            const scaleMatch = transform.match(/scale\\((.*?)\\)/);\n            if (scaleMatch) {\n                scale = scaleMatch[1].split(separator);\n            }\n        }\n    }\n    const sx = scale && scale[0] ? parseFloat(scale[0]) : 1;\n    return {\n        raw: transform || '',\n        translation: {\n            tx: translation && translation[0]\n                ? parseInt(translation[0], 10)\n                : 0,\n            ty: translation && translation[1]\n                ? parseInt(translation[1], 10)\n                : 0,\n        },\n        rotation: {\n            angle: rotation && rotation[0] ? parseInt(rotation[0], 10) : 0,\n            cx: rotation && rotation[1]\n                ? parseInt(rotation[1], 10)\n                : undefined,\n            cy: rotation && rotation[2]\n                ? parseInt(rotation[2], 10)\n                : undefined,\n        },\n        scale: {\n            sx,\n            sy: scale && scale[1] ? parseFloat(scale[1]) : sx,\n        },\n    };\n}\nfunction deltaTransformPoint(matrix, point) {\n    const dx = point.x * matrix.a + point.y * matrix.c + 0;\n    const dy = point.x * matrix.b + point.y * matrix.d + 0;\n    return { x: dx, y: dy };\n}\n/**\n * Decomposes the SVG transformation matrix into separate transformations.\n *\n * Returns an object of the form:\n * {\n *   translateX: number\n *   translateY: number\n *   scaleX: number\n *   scaleY: number\n *   skewX: number\n *   skewY: number\n *   rotation: number\n * }\n *\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGMatrix\n */\nexport function decomposeMatrix(matrix) {\n    // @see https://gist.github.com/2052247\n    const px = deltaTransformPoint(matrix, { x: 0, y: 1 });\n    const py = deltaTransformPoint(matrix, { x: 1, y: 0 });\n    const skewX = (180 / Math.PI) * Math.atan2(px.y, px.x) - 90;\n    const skewY = (180 / Math.PI) * Math.atan2(py.y, py.x);\n    return {\n        skewX,\n        skewY,\n        translateX: matrix.e,\n        translateY: matrix.f,\n        scaleX: Math.sqrt(matrix.a * matrix.a + matrix.b * matrix.b),\n        scaleY: Math.sqrt(matrix.c * matrix.c + matrix.d * matrix.d),\n        rotation: skewX,\n    };\n}\nexport function matrixToScale(matrix) {\n    let a;\n    let b;\n    let c;\n    let d;\n    if (matrix) {\n        a = matrix.a == null ? 1 : matrix.a;\n        d = matrix.d == null ? 1 : matrix.d;\n        b = matrix.b;\n        c = matrix.c;\n    }\n    else {\n        a = d = 1;\n    }\n    return {\n        sx: b ? Math.sqrt(a * a + b * b) : a,\n        sy: c ? Math.sqrt(c * c + d * d) : d,\n    };\n}\nexport function matrixToRotation(matrix) {\n    let p = { x: 0, y: 1 };\n    if (matrix) {\n        p = deltaTransformPoint(matrix, p);\n    }\n    const deg = (((180 * Math.atan2(p.y, p.x)) / Math.PI) % 360) - 90;\n    const angle = (deg % 360) + (deg < 0 ? 360 : 0);\n    return {\n        angle,\n    };\n}\nexport function matrixToTranslation(matrix) {\n    return {\n        tx: (matrix && matrix.e) || 0,\n        ty: (matrix && matrix.f) || 0,\n    };\n}\n//# sourceMappingURL=matrix.js.map","import { attr } from './attr';\nimport { isSVGGraphicsElement } from './elem';\nimport { createSVGTransform, parseTransformString, transformStringToMatrix, matrixToTransformString, createSVGMatrix, } from './matrix';\nexport function transform(elem, matrix, options = {}) {\n    if (matrix == null) {\n        return transformStringToMatrix(attr(elem, 'transform'));\n    }\n    if (options.absolute) {\n        elem.setAttribute('transform', matrixToTransformString(matrix));\n        return;\n    }\n    const transformList = elem.transform;\n    const svgTransform = createSVGTransform(matrix);\n    transformList.baseVal.appendItem(svgTransform);\n}\nexport function translate(elem, tx, ty = 0, options = {}) {\n    let transformAttr = attr(elem, 'transform');\n    const transform = parseTransformString(transformAttr);\n    if (tx == null) {\n        return transform.translation;\n    }\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/translate\\([^)]*\\)/g, '').trim();\n    const newTx = options.absolute ? tx : transform.translation.tx + tx;\n    const newTy = options.absolute ? ty : transform.translation.ty + ty;\n    const newTranslate = `translate(${newTx},${newTy})`;\n    // Note that `translate()` is always the first transformation. This is\n    // usually the desired case.\n    elem.setAttribute('transform', `${newTranslate} ${transformAttr}`.trim());\n}\nexport function rotate(elem, angle, cx, cy, options = {}) {\n    let transformAttr = attr(elem, 'transform');\n    const transform = parseTransformString(transformAttr);\n    if (angle == null) {\n        return transform.rotation;\n    }\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/rotate\\([^)]*\\)/g, '').trim();\n    angle %= 360; // eslint-disable-line\n    const newAngle = options.absolute ? angle : transform.rotation.angle + angle;\n    const newOrigin = cx != null && cy != null ? `,${cx},${cy}` : '';\n    const newRotate = `rotate(${newAngle}${newOrigin})`;\n    elem.setAttribute('transform', `${transformAttr} ${newRotate}`.trim());\n}\nexport function scale(elem, sx, sy) {\n    let transformAttr = attr(elem, 'transform');\n    const transform = parseTransformString(transformAttr);\n    if (sx == null) {\n        return transform.scale;\n    }\n    sy = sy == null ? sx : sy; // eslint-disable-line\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/scale\\([^)]*\\)/g, '').trim();\n    const newScale = `scale(${sx},${sy})`;\n    elem.setAttribute('transform', `${transformAttr} ${newScale}`.trim());\n}\n/**\n * Returns an DOMMatrix that specifies the transformation necessary\n * to convert `elem` coordinate system into `target` coordinate system.\n */\nexport function getTransformToElement(elem, target) {\n    if (isSVGGraphicsElement(target) && isSVGGraphicsElement(elem)) {\n        const targetCTM = target.getScreenCTM();\n        const nodeCTM = elem.getScreenCTM();\n        if (targetCTM && nodeCTM) {\n            return targetCTM.inverse().multiply(nodeCTM);\n        }\n    }\n    // Could not get actual transformation matrix\n    return createSVGMatrix();\n}\n/**\n * Returns an DOMMatrix that specifies the transformation necessary\n * to convert `elem` coordinate system into `target` coordinate system.\n * Unlike getTransformToElement, elem is child of target,Because of the reduction in DOM API calls,\n * there is a significant performance improvement.\n */\nexport function getTransformToParentElement(elem, target) {\n    let matrix = createSVGMatrix();\n    if (isSVGGraphicsElement(target) && isSVGGraphicsElement(elem)) {\n        let node = elem;\n        const matrixList = [];\n        while (node && node !== target) {\n            const transform = node.getAttribute('transform') || null;\n            const nodeMatrix = transformStringToMatrix(transform);\n            matrixList.push(nodeMatrix);\n            node = node.parentNode;\n        }\n        matrixList.reverse().forEach((m) => {\n            matrix = matrix.multiply(m);\n        });\n    }\n    return matrix;\n}\n/**\n * Converts a global point with coordinates `x` and `y` into the\n * coordinate space of the element.\n */\nexport function toLocalPoint(elem, x, y) {\n    const svg = elem instanceof SVGSVGElement\n        ? elem\n        : elem.ownerSVGElement;\n    const p = svg.createSVGPoint();\n    p.x = x;\n    p.y = y;\n    try {\n        const ctm = svg.getScreenCTM();\n        const globalPoint = p.matrixTransform(ctm.inverse());\n        const globalToLocalMatrix = getTransformToElement(elem, svg).inverse();\n        return globalPoint.matrixTransform(globalToLocalMatrix);\n    }\n    catch (e) {\n        return p;\n    }\n}\n//# sourceMappingURL=transform.js.map","export var EventHook;\n(function (EventHook) {\n    const cache = {};\n    function get(type) {\n        return cache[type] || {};\n    }\n    EventHook.get = get;\n    function register(type, hook) {\n        cache[type] = hook;\n    }\n    EventHook.register = register;\n    function unregister(type) {\n        delete cache[type];\n    }\n    EventHook.unregister = unregister;\n})(EventHook || (EventHook = {}));\n//# sourceMappingURL=hook.js.map","export var Store;\n(function (Store) {\n    const cache = new WeakMap();\n    function ensure(target) {\n        if (!cache.has(target)) {\n            cache.set(target, { events: Object.create(null) });\n        }\n        return cache.get(target);\n    }\n    Store.ensure = ensure;\n    function get(target) {\n        return cache.get(target);\n    }\n    Store.get = get;\n    function remove(target) {\n        return cache.delete(target);\n    }\n    Store.remove = remove;\n})(Store || (Store = {}));\n//# sourceMappingURL=store.js.map","import { Store } from './store';\nexport var Util;\n(function (Util) {\n    Util.returnTrue = () => true;\n    Util.returnFalse = () => false;\n    function stopPropagationCallback(e) {\n        e.stopPropagation();\n    }\n    Util.stopPropagationCallback = stopPropagationCallback;\n    function addEventListener(elem, type, handler) {\n        if (elem.addEventListener != null) {\n            elem.addEventListener(type, handler);\n        }\n    }\n    Util.addEventListener = addEventListener;\n    function removeEventListener(elem, type, handler) {\n        if (elem.removeEventListener != null) {\n            elem.removeEventListener(type, handler);\n        }\n    }\n    Util.removeEventListener = removeEventListener;\n})(Util || (Util = {}));\n(function (Util) {\n    const rNotHTMLWhite = /[^\\x20\\t\\r\\n\\f]+/g;\n    const rNamespace = /^([^.]*)(?:\\.(.+)|)/;\n    function splitType(types) {\n        return (types || '').match(rNotHTMLWhite) || [''];\n    }\n    Util.splitType = splitType;\n    function normalizeType(type) {\n        const parts = rNamespace.exec(type) || [];\n        return {\n            originType: parts[1] ? parts[1].trim() : parts[1],\n            namespaces: parts[2]\n                ? parts[2]\n                    .split('.')\n                    .map((ns) => ns.trim())\n                    .sort()\n                : [],\n        };\n    }\n    Util.normalizeType = normalizeType;\n    function isValidTarget(target) {\n        // Accepts only:\n        //  - Node\n        //    - Node.ELEMENT_NODE\n        //    - Node.DOCUMENT_NODE\n        //  - Object\n        //    - Any\n        return target.nodeType === 1 || target.nodeType === 9 || !+target.nodeType;\n    }\n    Util.isValidTarget = isValidTarget;\n    function isValidSelector(elem, selector) {\n        if (selector) {\n            const node = elem;\n            return node.querySelector != null && node.querySelector(selector) != null;\n        }\n        return true;\n    }\n    Util.isValidSelector = isValidSelector;\n})(Util || (Util = {}));\n(function (Util) {\n    let seed = 0;\n    const cache = new WeakMap();\n    function ensureHandlerId(handler) {\n        if (!cache.has(handler)) {\n            cache.set(handler, seed);\n            seed += 1;\n        }\n        return cache.get(handler);\n    }\n    Util.ensureHandlerId = ensureHandlerId;\n    function getHandlerId(handler) {\n        return cache.get(handler);\n    }\n    Util.getHandlerId = getHandlerId;\n    function removeHandlerId(handler) {\n        return cache.delete(handler);\n    }\n    Util.removeHandlerId = removeHandlerId;\n    function setHandlerId(handler, id) {\n        return cache.set(handler, id);\n    }\n    Util.setHandlerId = setHandlerId;\n})(Util || (Util = {}));\n(function (Util) {\n    function getHandlerQueue(elem, event) {\n        const queue = [];\n        const store = Store.get(elem);\n        const bag = store && store.events && store.events[event.type];\n        const handlers = (bag && bag.handlers) || [];\n        const delegateCount = bag ? bag.delegateCount : 0;\n        if (delegateCount > 0 &&\n            // Support: Firefox <=42 - 66+\n            // Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n            // https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n            // Support: IE 11+\n            // ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n            !(event.type === 'click' &&\n                typeof event.button === 'number' &&\n                event.button >= 1)) {\n            for (let curr = event.target; curr !== elem; curr = curr.parentNode || elem) {\n                // Don't check non-elements\n                // Don't process clicks on disabled elements\n                if (curr.nodeType === 1 &&\n                    !(event.type === 'click' && curr.disabled === true)) {\n                    const matchedHandlers = [];\n                    const matchedSelectors = {};\n                    for (let i = 0; i < delegateCount; i += 1) {\n                        const handleObj = handlers[i];\n                        const selector = handleObj.selector;\n                        if (selector != null && matchedSelectors[selector] == null) {\n                            const node = elem;\n                            const nodes = [];\n                            node.querySelectorAll(selector).forEach((child) => {\n                                nodes.push(child);\n                            });\n                            matchedSelectors[selector] = nodes.includes(curr);\n                        }\n                        if (matchedSelectors[selector]) {\n                            matchedHandlers.push(handleObj);\n                        }\n                    }\n                    if (matchedHandlers.length) {\n                        queue.push({ elem: curr, handlers: matchedHandlers });\n                    }\n                }\n            }\n        }\n        // Add the remaining (directly-bound) handlers\n        if (delegateCount < handlers.length) {\n            queue.push({ elem, handlers: handlers.slice(delegateCount) });\n        }\n        return queue;\n    }\n    Util.getHandlerQueue = getHandlerQueue;\n})(Util || (Util = {}));\n(function (Util) {\n    function isWindow(obj) {\n        return obj != null && obj === obj.window;\n    }\n    Util.isWindow = isWindow;\n})(Util || (Util = {}));\n(function (Util) {\n    function contains(a, b) {\n        const adown = a.nodeType === 9 ? a.documentElement : a;\n        const bup = b && b.parentNode;\n        return (a === bup ||\n            !!(bup &&\n                bup.nodeType === 1 &&\n                // Support: IE 9 - 11+\n                // IE doesn't have `contains` on SVG.\n                (adown.contains\n                    ? adown.contains(bup)\n                    : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16)));\n    }\n    Util.contains = contains;\n})(Util || (Util = {}));\n//# sourceMappingURL=util.js.map","import { EventHook } from './hook';\nimport { Util } from './util';\n// Prevent triggered image.load events from bubbling to window.load\nexport var Special;\n(function (Special) {\n    EventHook.register('load', {\n        noBubble: true,\n    });\n})(Special || (Special = {}));\n// Support: Chrome <=73+\n// Chrome doesn't alert on `event.preventDefault()`\n// as the standard mandates.\n(function (Special) {\n    EventHook.register('beforeunload', {\n        postDispatch(elem, event) {\n            if (event.result !== undefined && event.originalEvent) {\n                event.originalEvent.returnValue = event.result;\n            }\n        },\n    });\n})(Special || (Special = {}));\n// For mouseenter/leave call the handler if related is outside the target.\n// NB: No relatedTarget if the mouse left/entered the browser window\n(function (Special) {\n    EventHook.register('mouseenter', {\n        delegateType: 'mouseover',\n        bindType: 'mouseover',\n        handle(target, event) {\n            let ret;\n            const related = event.relatedTarget;\n            const handleObj = event.handleObj;\n            if (!related || (related !== target && !Util.contains(target, related))) {\n                event.type = handleObj.originType;\n                ret = handleObj.handler.call(target, event);\n                event.type = 'mouseover';\n            }\n            return ret;\n        },\n    });\n    EventHook.register('mouseleave', {\n        delegateType: 'mouseout',\n        bindType: 'mouseout',\n        handle(target, event) {\n            let ret;\n            const related = event.relatedTarget;\n            const handleObj = event.handleObj;\n            if (!related || (related !== target && !Util.contains(target, related))) {\n                event.type = handleObj.originType;\n                ret = handleObj.handler.call(target, event);\n                event.type = 'mouseout';\n            }\n            return ret;\n        },\n    });\n})(Special || (Special = {}));\n//# sourceMappingURL=special.js.map","import { Util } from './util';\nexport class EventObject {\n    constructor(e, props) {\n        this.isDefaultPrevented = Util.returnFalse;\n        this.isPropagationStopped = Util.returnFalse;\n        this.isImmediatePropagationStopped = Util.returnFalse;\n        this.isSimulated = false;\n        this.preventDefault = () => {\n            const e = this.originalEvent;\n            this.isDefaultPrevented = Util.returnTrue;\n            if (e && !this.isSimulated) {\n                e.preventDefault();\n            }\n        };\n        this.stopPropagation = () => {\n            const e = this.originalEvent;\n            this.isPropagationStopped = Util.returnTrue;\n            if (e && !this.isSimulated) {\n                e.stopPropagation();\n            }\n        };\n        this.stopImmediatePropagation = () => {\n            const e = this.originalEvent;\n            this.isImmediatePropagationStopped = Util.returnTrue;\n            if (e && !this.isSimulated) {\n                e.stopImmediatePropagation();\n            }\n            this.stopPropagation();\n        };\n        if (typeof e === 'string') {\n            this.type = e;\n        }\n        else if (e.type) {\n            this.originalEvent = e;\n            this.type = e.type;\n            // Events bubbling up the document may have been marked as prevented\n            // by a handler lower down the tree; reflect the correct value.\n            this.isDefaultPrevented = e.defaultPrevented\n                ? Util.returnTrue\n                : Util.returnFalse;\n            // Create target properties\n            this.target = e.target;\n            this.currentTarget = e.currentTarget;\n            this.relatedTarget = e.relatedTarget;\n            this.timeStamp = e.timeStamp;\n        }\n        // Put explicitly provided properties onto the event object\n        if (props) {\n            Object.assign(this, props);\n        }\n        // Create a timestamp if incoming event doesn't have one\n        if (!this.timeStamp) {\n            this.timeStamp = Date.now();\n        }\n    }\n}\n(function (EventObject) {\n    function create(originalEvent) {\n        return originalEvent instanceof EventObject\n            ? originalEvent\n            : new EventObject(originalEvent);\n    }\n    EventObject.create = create;\n})(EventObject || (EventObject = {}));\n(function (EventObject) {\n    function addProperty(name, hook) {\n        Object.defineProperty(EventObject.prototype, name, {\n            enumerable: true,\n            configurable: true,\n            get: typeof hook === 'function'\n                ? // eslint-disable-next-line\n                    function () {\n                        if (this.originalEvent) {\n                            return hook(this.originalEvent);\n                        }\n                    }\n                : // eslint-disable-next-line\n                    function () {\n                        if (this.originalEvent) {\n                            return this.originalEvent[name];\n                        }\n                    },\n            set(value) {\n                Object.defineProperty(this, name, {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value,\n                });\n            },\n        });\n    }\n    EventObject.addProperty = addProperty;\n})(EventObject || (EventObject = {}));\n(function (EventObject) {\n    // Common event props including KeyEvent and MouseEvent specific props.\n    const commonProps = {\n        bubbles: true,\n        cancelable: true,\n        eventPhase: true,\n        detail: true,\n        view: true,\n        button: true,\n        buttons: true,\n        clientX: true,\n        clientY: true,\n        offsetX: true,\n        offsetY: true,\n        pageX: true,\n        pageY: true,\n        screenX: true,\n        screenY: true,\n        toElement: true,\n        pointerId: true,\n        pointerType: true,\n        char: true,\n        code: true,\n        charCode: true,\n        key: true,\n        keyCode: true,\n        touches: true,\n        changedTouches: true,\n        targetTouches: true,\n        which: true,\n        altKey: true,\n        ctrlKey: true,\n        metaKey: true,\n        shiftKey: true,\n    };\n    Object.keys(commonProps).forEach((name) => EventObject.addProperty(name, commonProps[name]));\n})(EventObject || (EventObject = {}));\n//# sourceMappingURL=object.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Util } from './util';\nimport { EventHook } from './hook';\nimport { Store } from './store';\nimport { EventObject } from './object';\nimport './special';\nexport var Core;\n(function (Core) {\n    let triggered;\n    function on(elem, types, handler, data, selector) {\n        if (!Util.isValidTarget(elem)) {\n            return;\n        }\n        // Caller can pass in an object of custom data in lieu of the handler\n        let handlerData;\n        if (typeof handler !== 'function') {\n            const { handler: h, selector: s } = handler, others = __rest(handler, [\"handler\", \"selector\"]);\n            handler = h; // eslint-disable-line\n            selector = s; // eslint-disable-line\n            handlerData = others;\n        }\n        // Ensure that invalid selectors throw exceptions at attach time\n        // if (!Util.isValidSelector(elem, selector)) {\n        //   throw new Error('Delegate event with invalid selector.')\n        // }\n        const store = Store.ensure(elem);\n        // Ensure the main handle\n        let mainHandler = store.handler;\n        if (mainHandler == null) {\n            mainHandler = store.handler = function (e, ...args) {\n                return triggered !== e.type ? dispatch(elem, e, ...args) : undefined;\n            };\n        }\n        // Make sure that the handler has a unique ID, used to find/remove it later\n        const guid = Util.ensureHandlerId(handler);\n        // Handle multiple events separated by a space\n        Util.splitType(types).forEach((item) => {\n            const { originType, namespaces } = Util.normalizeType(item);\n            // There *must* be a type, no attaching namespace-only handlers\n            if (!originType) {\n                return;\n            }\n            let type = originType;\n            let hook = EventHook.get(type);\n            // If selector defined, determine special event type, otherwise given type\n            type = (selector ? hook.delegateType : hook.bindType) || type;\n            // Update hook based on newly reset type\n            hook = EventHook.get(type);\n            // handleObj is passed to all event handlers\n            const handleObj = Object.assign({ type,\n                originType,\n                data,\n                selector,\n                guid, handler: handler, namespace: namespaces.join('.') }, handlerData);\n            // Init the event handler queue if we're the first\n            const events = store.events;\n            let bag = events[type];\n            if (!bag) {\n                bag = events[type] = { handlers: [], delegateCount: 0 };\n                // Only use addEventListener if the `hook.steup` returns false\n                if (!hook.setup ||\n                    hook.setup(elem, data, namespaces, mainHandler) === false) {\n                    Util.addEventListener(elem, type, mainHandler);\n                }\n            }\n            if (hook.add) {\n                Util.removeHandlerId(handleObj.handler);\n                hook.add(elem, handleObj);\n                Util.setHandlerId(handleObj.handler, guid);\n            }\n            // Add to the element's handler list, delegates in front\n            if (selector) {\n                bag.handlers.splice(bag.delegateCount, 0, handleObj);\n                bag.delegateCount += 1;\n            }\n            else {\n                bag.handlers.push(handleObj);\n            }\n        });\n    }\n    Core.on = on;\n    function off(elem, types, handler, selector, mappedTypes) {\n        const store = Store.get(elem);\n        if (!store) {\n            return;\n        }\n        const events = store.events;\n        if (!events) {\n            return;\n        }\n        // Once for each type.namespace in types; type may be omitted\n        Util.splitType(types).forEach((item) => {\n            const { originType, namespaces } = Util.normalizeType(item);\n            // Unbind all events (on this namespace, if provided) for the element\n            if (!originType) {\n                Object.keys(events).forEach((key) => {\n                    off(elem, key + item, handler, selector, true);\n                });\n                return;\n            }\n            let type = originType;\n            const hook = EventHook.get(type);\n            type = (selector ? hook.delegateType : hook.bindType) || type;\n            const bag = events[type] || {};\n            const rns = namespaces.length > 0\n                ? new RegExp(`(^|\\\\.)${namespaces.join('\\\\.(?:.*\\\\.|)')}(\\\\.|$)`)\n                : null;\n            // Remove matching events\n            const originHandlerCount = bag.handlers.length;\n            for (let i = bag.handlers.length - 1; i >= 0; i -= 1) {\n                const handleObj = bag.handlers[i];\n                if ((mappedTypes || originType === handleObj.originType) &&\n                    (!handler || Util.getHandlerId(handler) === handleObj.guid) &&\n                    (rns == null ||\n                        (handleObj.namespace && rns.test(handleObj.namespace))) &&\n                    (selector == null ||\n                        selector === handleObj.selector ||\n                        (selector === '**' && handleObj.selector))) {\n                    bag.handlers.splice(i, 1);\n                    if (handleObj.selector) {\n                        bag.delegateCount -= 1;\n                    }\n                    if (hook.remove) {\n                        hook.remove(elem, handleObj);\n                    }\n                }\n            }\n            if (originHandlerCount && bag.handlers.length === 0) {\n                if (!hook.teardown ||\n                    hook.teardown(elem, namespaces, store.handler) === false) {\n                    Util.removeEventListener(elem, type, store.handler);\n                }\n                delete events[type];\n            }\n        });\n        // Remove data and the expando if it's no longer used\n        if (Object.keys(events).length === 0) {\n            Store.remove(elem);\n        }\n    }\n    Core.off = off;\n    function dispatch(elem, evt, ...args) {\n        const event = EventObject.create(evt);\n        event.delegateTarget = elem;\n        const hook = EventHook.get(event.type);\n        if (hook.preDispatch && hook.preDispatch(elem, event) === false) {\n            return;\n        }\n        const handlerQueue = Util.getHandlerQueue(elem, event);\n        // Run delegates first; they may want to stop propagation beneath us\n        for (let i = 0, l = handlerQueue.length; i < l && !event.isPropagationStopped(); i += 1) {\n            const matched = handlerQueue[i];\n            event.currentTarget = matched.elem;\n            for (let j = 0, k = matched.handlers.length; j < k && !event.isImmediatePropagationStopped(); j += 1) {\n                const handleObj = matched.handlers[j];\n                // If event is namespaced, then each handler is only invoked if it is\n                // specially universal or its namespaces are a superset of the event's.\n                if (event.rnamespace == null ||\n                    (handleObj.namespace && event.rnamespace.test(handleObj.namespace))) {\n                    event.handleObj = handleObj;\n                    event.data = handleObj.data;\n                    const hookHandle = EventHook.get(handleObj.originType).handle;\n                    const result = hookHandle\n                        ? hookHandle(matched.elem, event, ...args)\n                        : handleObj.handler.call(matched.elem, event, ...args);\n                    if (result !== undefined) {\n                        event.result = result;\n                        if (result === false) {\n                            event.preventDefault();\n                            event.stopPropagation();\n                        }\n                    }\n                }\n            }\n        }\n        // Call the postDispatch hook for the mapped type\n        if (hook.postDispatch) {\n            hook.postDispatch(elem, event);\n        }\n        return event.result;\n    }\n    Core.dispatch = dispatch;\n    function trigger(event, eventArgs, elem, onlyHandlers) {\n        let eventObj = event;\n        let type = typeof event === 'string' ? event : event.type;\n        let namespaces = typeof event === 'string' || eventObj.namespace == null\n            ? []\n            : eventObj.namespace.split('.');\n        const node = elem;\n        // Don't do events on text and comment nodes\n        if (node.nodeType === 3 || node.nodeType === 8) {\n            return;\n        }\n        if (type.indexOf('.') > -1) {\n            // Namespaced trigger; create a regexp to match event type in handle()\n            namespaces = type.split('.');\n            type = namespaces.shift();\n            namespaces.sort();\n        }\n        const ontype = type.indexOf(':') < 0 && `on${type}`;\n        // Caller can pass in a EventObject, Object, or just an event type string\n        eventObj =\n            event instanceof EventObject\n                ? event\n                : new EventObject(type, typeof event === 'object' ? event : null);\n        eventObj.namespace = namespaces.join('.');\n        eventObj.rnamespace = eventObj.namespace\n            ? new RegExp(`(^|\\\\.)${namespaces.join('\\\\.(?:.*\\\\.|)')}(\\\\.|$)`)\n            : null;\n        // Clean up the event in case it is being reused\n        eventObj.result = undefined;\n        if (!eventObj.target) {\n            eventObj.target = node;\n        }\n        const args = [eventObj];\n        if (Array.isArray(eventArgs)) {\n            args.push(...eventArgs);\n        }\n        else {\n            args.push(eventArgs);\n        }\n        const hook = EventHook.get(type);\n        if (!onlyHandlers &&\n            hook.trigger &&\n            hook.trigger(node, eventObj, eventArgs) === false) {\n            return;\n        }\n        let bubbleType;\n        // Determine event propagation path in advance, per W3C events spec.\n        // Bubble up to document, then to window; watch for a global ownerDocument\n        const eventPath = [node];\n        if (!onlyHandlers && !hook.noBubble && !Util.isWindow(node)) {\n            bubbleType = hook.delegateType || type;\n            let last = node;\n            let curr = node.parentNode;\n            while (curr != null) {\n                eventPath.push(curr);\n                last = curr;\n                curr = curr.parentNode;\n            }\n            // Only add window if we got to document\n            const doc = node.ownerDocument || document;\n            if (last === doc) {\n                const win = last.defaultView || last.parentWindow || window;\n                eventPath.push(win);\n            }\n        }\n        let lastElement = node;\n        // Fire handlers on the event path\n        for (let i = 0, l = eventPath.length; i < l && !eventObj.isPropagationStopped(); i += 1) {\n            const currElement = eventPath[i];\n            lastElement = currElement;\n            eventObj.type = i > 1 ? bubbleType : hook.bindType || type;\n            // Custom handler\n            const store = Store.get(currElement);\n            if (store) {\n                if (store.events[eventObj.type] && store.handler) {\n                    store.handler.call(currElement, ...args);\n                }\n            }\n            // Native handler\n            const handle = (ontype && currElement[ontype]) || null;\n            if (handle && Util.isValidTarget(currElement)) {\n                eventObj.result = handle.call(currElement, ...args);\n                if (eventObj.result === false) {\n                    eventObj.preventDefault();\n                }\n            }\n        }\n        eventObj.type = type;\n        // If nobody prevented the default action, do it now\n        if (!onlyHandlers && !eventObj.isDefaultPrevented()) {\n            const preventDefault = hook.preventDefault;\n            if ((preventDefault == null ||\n                preventDefault(eventPath.pop(), eventObj, eventArgs) === false) &&\n                Util.isValidTarget(node)) {\n                // Call a native DOM method on the target with the same name as the\n                // event. Don't do default actions on window.\n                if (ontype &&\n                    typeof node[type] === 'function' &&\n                    !Util.isWindow(node)) {\n                    // Don't re-trigger an onFOO event when we call its FOO() method\n                    const tmp = node[ontype];\n                    if (tmp) {\n                        node[ontype] = null;\n                    }\n                    // Prevent re-triggering of the same event, since we already bubbled it above\n                    triggered = type;\n                    if (eventObj.isPropagationStopped()) {\n                        lastElement.addEventListener(type, Util.stopPropagationCallback);\n                    }\n                    node[type]();\n                    if (eventObj.isPropagationStopped()) {\n                        lastElement.removeEventListener(type, Util.stopPropagationCallback);\n                    }\n                    triggered = undefined;\n                    if (tmp) {\n                        node[ontype] = tmp;\n                    }\n                }\n            }\n        }\n        return eventObj.result;\n    }\n    Core.trigger = trigger;\n})(Core || (Core = {}));\n//# sourceMappingURL=core.js.map","/* eslint-disable no-param-reassign */\nimport { Core } from './core';\nimport { Util } from './util';\nexport var Event;\n(function (Event) {\n    function on(elem, events, selector, data, handler) {\n        Private.on(elem, events, selector, data, handler);\n        return elem;\n    }\n    Event.on = on;\n    function once(elem, events, selector, data, handler) {\n        Private.on(elem, events, selector, data, handler, true);\n        return elem;\n    }\n    Event.once = once;\n    function off(elem, events, selector, handler) {\n        Private.off(elem, events, selector, handler);\n        return elem;\n    }\n    Event.off = off;\n    function trigger(elem, event, args, \n    /**\n     * When onlyHandlers is `true`\n     * - Will not call `.event()` on the element it is triggered on. This means\n     *   `.trigger('submit', [], true)` on a form will not call `.submit()` on\n     *   the form.\n     * - Events will not bubble up the DOM hierarchy; if they are not handled\n     *   by the target element directly, they do nothing.\n     */\n    onlyHandlers) {\n        Core.trigger(event, args, elem, onlyHandlers);\n        return elem;\n    }\n    Event.trigger = trigger;\n})(Event || (Event = {}));\nvar Private;\n(function (Private) {\n    function on(elem, types, selector, data, fn, once) {\n        // Types can be a map of types/handlers\n        if (typeof types === 'object') {\n            // ( types-Object, selector, data )\n            if (typeof selector !== 'string') {\n                // ( types-Object, data )\n                data = data || selector;\n                selector = undefined;\n            }\n            Object.keys(types).forEach((type) => on(elem, type, selector, data, types[type], once));\n            return;\n        }\n        if (data == null && fn == null) {\n            // ( types, fn )\n            fn = selector;\n            data = selector = undefined;\n        }\n        else if (fn == null) {\n            if (typeof selector === 'string') {\n                // ( types, selector, fn )\n                fn = data;\n                data = undefined;\n            }\n            else {\n                // ( types, data, fn )\n                fn = data;\n                data = selector;\n                selector = undefined;\n            }\n        }\n        if (fn === false) {\n            fn = Util.returnFalse;\n        }\n        else if (!fn) {\n            return;\n        }\n        if (once) {\n            const originHandler = fn;\n            fn = function (event, ...args) {\n                // Can use an empty set, since event contains the info\n                Private.off(elem, event);\n                return originHandler.call(this, event, ...args);\n            };\n            // Use same guid so caller can remove using origFn\n            Util.setHandlerId(fn, Util.ensureHandlerId(originHandler));\n        }\n        Core.on(elem, types, fn, data, selector);\n    }\n    Private.on = on;\n    function off(elem, events, selector, fn) {\n        const evt = events;\n        if (evt && evt.preventDefault != null && evt.handleObj != null) {\n            const obj = evt.handleObj;\n            off(evt.delegateTarget, obj.namespace ? `${obj.originType}.${obj.namespace}` : obj.originType, obj.selector, obj.handler);\n            return;\n        }\n        if (typeof events === 'object') {\n            // ( types-object [, selector] )\n            const types = events;\n            Object.keys(types).forEach((type) => off(elem, type, selector, types[type]));\n            return;\n        }\n        if (selector === false || typeof selector === 'function') {\n            // ( types [, fn] )\n            fn = selector;\n            selector = undefined;\n        }\n        if (fn === false) {\n            fn = Util.returnFalse;\n        }\n        Core.off(elem, events, fn, selector);\n    }\n    Private.off = off;\n})(Private || (Private = {}));\n//# sourceMappingURL=main.js.map","import { Platform } from '../platform';\nexport class MouseWheelHandle {\n    constructor(target, onWheelCallback, onWheelGuard) {\n        this.animationFrameId = 0;\n        this.deltaX = 0;\n        this.deltaY = 0;\n        this.eventName = Platform.isEventSupported('wheel')\n            ? 'wheel'\n            : 'mousewheel';\n        this.target = target;\n        this.onWheelCallback = onWheelCallback;\n        this.onWheelGuard = onWheelGuard;\n        this.onWheel = this.onWheel.bind(this);\n        this.didWheel = this.didWheel.bind(this);\n    }\n    enable() {\n        this.target.addEventListener(this.eventName, this.onWheel, {\n            passive: false,\n        });\n    }\n    disable() {\n        this.target.removeEventListener(this.eventName, this.onWheel);\n    }\n    onWheel(e) {\n        if (this.onWheelGuard != null && !this.onWheelGuard(e)) {\n            return;\n        }\n        this.deltaX += e.deltaX;\n        this.deltaY += e.deltaY;\n        e.preventDefault();\n        let changed;\n        if (this.deltaX !== 0 || this.deltaY !== 0) {\n            e.stopPropagation();\n            changed = true;\n        }\n        if (changed === true && this.animationFrameId === 0) {\n            this.animationFrameId = requestAnimationFrame(() => {\n                this.didWheel(e);\n            });\n        }\n    }\n    didWheel(e) {\n        this.animationFrameId = 0;\n        this.onWheelCallback(e, this.deltaX, this.deltaY);\n        this.deltaX = 0;\n        this.deltaY = 0;\n    }\n}\n//# sourceMappingURL=mousewheel.js.map","import { computeStyle, computeStyleInt } from './css';\nimport { isElement } from './elem';\nexport function offset(elem) {\n    const rect = elem.getBoundingClientRect();\n    const win = elem.ownerDocument.defaultView;\n    return {\n        top: rect.top + win.pageYOffset,\n        left: rect.left + win.pageXOffset,\n    };\n}\nexport function width(elem) {\n    const rect = elem.getBoundingClientRect();\n    return rect.width;\n}\nexport function height(elem) {\n    const rect = elem.getBoundingClientRect();\n    return rect.height;\n}\nexport function position(elem) {\n    const isFixed = computeStyle(elem, 'position') === 'fixed';\n    let offsetValue;\n    if (isFixed) {\n        const rect = elem.getBoundingClientRect();\n        offsetValue = { left: rect.left, top: rect.top };\n    }\n    else {\n        offsetValue = offset(elem);\n    }\n    if (!isFixed) {\n        const doc = elem.ownerDocument;\n        let offsetParent = elem.offsetParent || doc.documentElement;\n        while ((offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            computeStyle(offsetParent, 'position') === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent !== elem && isElement(offsetParent)) {\n            const parentOffset = offset(offsetParent);\n            offsetValue.top -=\n                parentOffset.top + computeStyleInt(offsetParent, 'borderTopWidth');\n            offsetValue.left -=\n                parentOffset.left + computeStyleInt(offsetParent, 'borderLeftWidth');\n        }\n    }\n    return {\n        top: offsetValue.top - computeStyleInt(elem, 'marginTop'),\n        left: offsetValue.left - computeStyleInt(elem, 'marginLeft'),\n    };\n}\n//# sourceMappingURL=position.js.map","export function debounce(fn, delay = 60) {\n    let timer = null;\n    return (...args) => {\n        if (timer) {\n            clearTimeout(timer);\n        }\n        timer = window.setTimeout(() => {\n            fn.apply(this, args);\n        }, delay);\n    };\n}\n//# sourceMappingURL=util.js.map","import { debounce } from './util';\nexport function createSensor(element) {\n    let sensor = null;\n    let listeners = [];\n    const create = () => {\n        if (getComputedStyle(element).position === 'static') {\n            const style = element.style;\n            style.position = 'relative';\n        }\n        const obj = document.createElement('object');\n        obj.onload = () => {\n            obj.contentDocument.defaultView.addEventListener('resize', trigger);\n            trigger();\n        };\n        obj.style.display = 'block';\n        obj.style.position = 'absolute';\n        obj.style.top = '0';\n        obj.style.left = '0';\n        obj.style.height = '100%';\n        obj.style.width = '100%';\n        obj.style.overflow = 'hidden';\n        obj.style.pointerEvents = 'none';\n        obj.style.zIndex = '-1';\n        obj.style.opacity = '0';\n        obj.setAttribute('tabindex', '-1');\n        obj.type = 'text/html';\n        element.appendChild(obj);\n        // for ie, should set data attribute delay, or will be white screen\n        obj.data = 'about:blank';\n        return obj;\n    };\n    const trigger = debounce(() => {\n        listeners.forEach((listener) => listener(element));\n    });\n    const bind = (listener) => {\n        if (!sensor) {\n            sensor = create();\n        }\n        if (listeners.indexOf(listener) === -1) {\n            listeners.push(listener);\n        }\n    };\n    const destroy = () => {\n        if (sensor && sensor.parentNode) {\n            if (sensor.contentDocument) {\n                sensor.contentDocument.defaultView.removeEventListener('resize', trigger);\n            }\n            sensor.parentNode.removeChild(sensor);\n            sensor = null;\n            listeners = [];\n        }\n    };\n    const unbind = (listener) => {\n        const idx = listeners.indexOf(listener);\n        if (idx !== -1) {\n            listeners.splice(idx, 1);\n        }\n        // no listener, and sensor is exist then destroy the sensor\n        if (listeners.length === 0 && sensor) {\n            destroy();\n        }\n    };\n    return {\n        element,\n        bind,\n        destroy,\n        unbind,\n    };\n}\n//# sourceMappingURL=object.js.map","import { debounce } from './util';\nexport function createSensor(element) {\n    let sensor = null;\n    let listeners = [];\n    const trigger = debounce(() => {\n        listeners.forEach((listener) => {\n            listener(element);\n        });\n    });\n    const create = () => {\n        const s = new ResizeObserver(trigger);\n        s.observe(element);\n        trigger();\n        return s;\n    };\n    const bind = (listener) => {\n        if (!sensor) {\n            sensor = create();\n        }\n        if (listeners.indexOf(listener) === -1) {\n            listeners.push(listener);\n        }\n    };\n    const destroy = () => {\n        if (sensor) {\n            sensor.disconnect();\n            listeners = [];\n            sensor = null;\n        }\n    };\n    const unbind = (listener) => {\n        const idx = listeners.indexOf(listener);\n        if (idx !== -1) {\n            listeners.splice(idx, 1);\n        }\n        // no listener, and sensor is exist then destroy the sensor\n        if (listeners.length === 0 && sensor) {\n            destroy();\n        }\n    };\n    return {\n        element,\n        bind,\n        destroy,\n        unbind,\n    };\n}\n//# sourceMappingURL=observer.js.map","import { createSensor as createObjectSensor } from './object';\nimport { createSensor as createResizeObserverSensor } from './observer';\nexport const createSensor = typeof ResizeObserver !== 'undefined'\n    ? createResizeObserverSensor\n    : createObjectSensor;\n//# sourceMappingURL=index.js.map","import { createSensor } from './sensors';\nexport var SizeSensor;\n(function (SizeSensor) {\n    const cache = new WeakMap();\n    function get(element) {\n        let sensor = cache.get(element);\n        if (sensor) {\n            return sensor;\n        }\n        sensor = createSensor(element);\n        cache.set(element, sensor);\n        return sensor;\n    }\n    function remove(sensor) {\n        sensor.destroy();\n        cache.delete(sensor.element);\n    }\n    SizeSensor.bind = (element, cb) => {\n        const sensor = get(element);\n        sensor.bind(cb);\n        return () => sensor.unbind(cb);\n    };\n    SizeSensor.clear = (element) => {\n        const sensor = get(element);\n        remove(sensor);\n    };\n})(SizeSensor || (SizeSensor = {}));\n//# sourceMappingURL=index.js.map","import { PriorityQueue } from './priorityqueue';\nexport var Dijkstra;\n(function (Dijkstra) {\n    function run(adjacencyList, source, weight = (u, v) => 1) {\n        const dist = {};\n        const previous = {};\n        const scanned = {};\n        const queue = new PriorityQueue();\n        dist[source] = 0;\n        Object.keys(adjacencyList).forEach((v) => {\n            if (v !== source) {\n                dist[v] = Infinity;\n            }\n            queue.insert(dist[v], v, v);\n        });\n        while (!queue.isEmpty()) {\n            const u = queue.remove();\n            scanned[u] = true;\n            const neighbours = adjacencyList[u] || [];\n            for (let i = 0; i < neighbours.length; i += 1) {\n                const v = neighbours[i];\n                if (!scanned[v]) {\n                    const alt = dist[u] + weight(u, v);\n                    if (alt < dist[v]) {\n                        dist[v] = alt;\n                        previous[v] = u;\n                        queue.updatePriority(v, alt);\n                    }\n                }\n            }\n        }\n        return previous;\n    }\n    Dijkstra.run = run;\n})(Dijkstra || (Dijkstra = {}));\n//# sourceMappingURL=dijkstra.js.map","// eslint-disable-next-line\nexport var ModifierKey;\n(function (ModifierKey) {\n    function parse(modifiers) {\n        const or = [];\n        const and = [];\n        if (Array.isArray(modifiers)) {\n            or.push(...modifiers);\n        }\n        else {\n            modifiers.split('|').forEach((item) => {\n                if (item.indexOf('&') === -1) {\n                    or.push(item);\n                }\n                else {\n                    and.push(...item.split('&'));\n                }\n            });\n        }\n        return { or, and };\n    }\n    ModifierKey.parse = parse;\n    function equals(modifiers1, modifiers2) {\n        if (modifiers1 != null && modifiers2 != null) {\n            const m1 = parse(modifiers1);\n            const m2 = parse(modifiers2);\n            const or1 = m1.or.sort();\n            const or2 = m2.or.sort();\n            const and1 = m1.and.sort();\n            const and2 = m2.and.sort();\n            const equal = (a1, a2) => {\n                return (a1.length === a2.length &&\n                    (a1.length === 0 || a1.every((a, i) => a === a2[i])));\n            };\n            return equal(or1, or2) && equal(and1, and2);\n        }\n        if (modifiers1 == null && modifiers2 == null) {\n            return true;\n        }\n        return false;\n    }\n    ModifierKey.equals = equals;\n    function isMatch(e, modifiers, strict) {\n        if (modifiers == null ||\n            (Array.isArray(modifiers) && modifiers.length === 0)) {\n            return strict\n                ? e.altKey !== true &&\n                    e.ctrlKey !== true &&\n                    e.metaKey !== true &&\n                    e.shiftKey !== true\n                : true;\n        }\n        const { or, and } = parse(modifiers);\n        const match = (key) => {\n            const name = `${key.toLowerCase()}Key`;\n            return e[name] === true;\n        };\n        return or.some((key) => match(key)) && and.every((key) => match(key));\n    }\n    ModifierKey.isMatch = isMatch;\n})(ModifierKey || (ModifierKey = {}));\n//# sourceMappingURL=index.js.map","export var Timing;\n(function (Timing) {\n    Timing.linear = (t) => t;\n    Timing.quad = (t) => t * t;\n    Timing.cubic = (t) => t * t * t;\n    Timing.inout = (t) => {\n        if (t <= 0) {\n            return 0;\n        }\n        if (t >= 1) {\n            return 1;\n        }\n        const t2 = t * t;\n        const t3 = t2 * t;\n        return 4 * (t < 0.5 ? t3 : 3 * (t - t2) + t3 - 0.75);\n    };\n    Timing.exponential = (t) => {\n        return Math.pow(2, 10 * (t - 1)); // eslint-disable-line\n    };\n    Timing.bounce = ((t) => {\n        // eslint-disable-next-line\n        for (let a = 0, b = 1; 1; a += b, b /= 2) {\n            if (t >= (7 - 4 * a) / 11) {\n                const q = (11 - 6 * a - 11 * t) / 4;\n                return -q * q + b * b;\n            }\n        }\n    });\n})(Timing || (Timing = {}));\n(function (Timing) {\n    Timing.decorators = {\n        reverse(f) {\n            return (t) => 1 - f(1 - t);\n        },\n        reflect(f) {\n            return (t) => 0.5 * (t < 0.5 ? f(2 * t) : 2 - f(2 - 2 * t));\n        },\n        clamp(f, n = 0, x = 1) {\n            return (t) => {\n                const r = f(t);\n                return r < n ? n : r > x ? x : r;\n            };\n        },\n        back(s = 1.70158) {\n            return (t) => t * t * ((s + 1) * t - s);\n        },\n        elastic(x = 1.5) {\n            return (t) => Math.pow(2, 10 * (t - 1)) * Math.cos(((20 * Math.PI * x) / 3) * t); // eslint-disable-line\n        },\n    };\n})(Timing || (Timing = {}));\n(function (Timing) {\n    // Slight acceleration from zero to full speed\n    function easeInSine(t) {\n        return -1 * Math.cos(t * (Math.PI / 2)) + 1;\n    }\n    Timing.easeInSine = easeInSine;\n    // Slight deceleration at the end\n    function easeOutSine(t) {\n        return Math.sin(t * (Math.PI / 2));\n    }\n    Timing.easeOutSine = easeOutSine;\n    // Slight acceleration at beginning and slight deceleration at end\n    function easeInOutSine(t) {\n        return -0.5 * (Math.cos(Math.PI * t) - 1);\n    }\n    Timing.easeInOutSine = easeInOutSine;\n    // Accelerating from zero velocity\n    function easeInQuad(t) {\n        return t * t;\n    }\n    Timing.easeInQuad = easeInQuad;\n    // Decelerating to zero velocity\n    function easeOutQuad(t) {\n        return t * (2 - t);\n    }\n    Timing.easeOutQuad = easeOutQuad;\n    // Acceleration until halfway, then deceleration\n    function easeInOutQuad(t) {\n        return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    }\n    Timing.easeInOutQuad = easeInOutQuad;\n    // Accelerating from zero velocity\n    function easeInCubic(t) {\n        return t * t * t;\n    }\n    Timing.easeInCubic = easeInCubic;\n    // Decelerating to zero velocity\n    function easeOutCubic(t) {\n        const t1 = t - 1;\n        return t1 * t1 * t1 + 1;\n    }\n    Timing.easeOutCubic = easeOutCubic;\n    // Acceleration until halfway, then deceleration\n    function easeInOutCubic(t) {\n        return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n    }\n    Timing.easeInOutCubic = easeInOutCubic;\n    // Accelerating from zero velocity\n    function easeInQuart(t) {\n        return t * t * t * t;\n    }\n    Timing.easeInQuart = easeInQuart;\n    // Decelerating to zero velocity\n    function easeOutQuart(t) {\n        const t1 = t - 1;\n        return 1 - t1 * t1 * t1 * t1;\n    }\n    Timing.easeOutQuart = easeOutQuart;\n    // Acceleration until halfway, then deceleration\n    function easeInOutQuart(t) {\n        const t1 = t - 1;\n        return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * t1 * t1 * t1 * t1;\n    }\n    Timing.easeInOutQuart = easeInOutQuart;\n    // Accelerating from zero velocity\n    function easeInQuint(t) {\n        return t * t * t * t * t;\n    }\n    Timing.easeInQuint = easeInQuint;\n    // Decelerating to zero velocity\n    function easeOutQuint(t) {\n        const t1 = t - 1;\n        return 1 + t1 * t1 * t1 * t1 * t1;\n    }\n    Timing.easeOutQuint = easeOutQuint;\n    // Acceleration until halfway, then deceleration\n    function easeInOutQuint(t) {\n        const t1 = t - 1;\n        return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * t1 * t1 * t1 * t1 * t1;\n    }\n    Timing.easeInOutQuint = easeInOutQuint;\n    // Accelerate exponentially until finish\n    function easeInExpo(t) {\n        if (t === 0) {\n            return 0;\n        }\n        return Math.pow(2, 10 * (t - 1)); // eslint-disable-line\n    }\n    Timing.easeInExpo = easeInExpo;\n    // Initial exponential acceleration slowing to stop\n    function easeOutExpo(t) {\n        if (t === 1) {\n            return 1;\n        }\n        return -Math.pow(2, -10 * t) + 1; // eslint-disable-line\n    }\n    Timing.easeOutExpo = easeOutExpo;\n    // Exponential acceleration and deceleration\n    function easeInOutExpo(t) {\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 1;\n        if (scaledTime < 1) {\n            return 0.5 * Math.pow(2, 10 * scaledTime1); // eslint-disable-line\n        }\n        return 0.5 * (-Math.pow(2, -10 * scaledTime1) + 2); // eslint-disable-line\n    }\n    Timing.easeInOutExpo = easeInOutExpo;\n    // Increasing velocity until stop\n    function easeInCirc(t) {\n        const scaledTime = t / 1;\n        return -1 * (Math.sqrt(1 - scaledTime * t) - 1);\n    }\n    Timing.easeInCirc = easeInCirc;\n    // Start fast, decreasing velocity until stop\n    function easeOutCirc(t) {\n        const t1 = t - 1;\n        return Math.sqrt(1 - t1 * t1);\n    }\n    Timing.easeOutCirc = easeOutCirc;\n    // Fast increase in velocity, fast decrease in velocity\n    function easeInOutCirc(t) {\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 2;\n        if (scaledTime < 1) {\n            return -0.5 * (Math.sqrt(1 - scaledTime * scaledTime) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - scaledTime1 * scaledTime1) + 1);\n    }\n    Timing.easeInOutCirc = easeInOutCirc;\n    // Slow movement backwards then fast snap to finish\n    function easeInBack(t, magnitude = 1.70158) {\n        return t * t * ((magnitude + 1) * t - magnitude);\n    }\n    Timing.easeInBack = easeInBack;\n    // Fast snap to backwards point then slow resolve to finish\n    function easeOutBack(t, magnitude = 1.70158) {\n        const scaledTime = t / 1 - 1;\n        return (scaledTime * scaledTime * ((magnitude + 1) * scaledTime + magnitude) + 1);\n    }\n    Timing.easeOutBack = easeOutBack;\n    // Slow movement backwards, fast snap to past finish, slow resolve to finish\n    function easeInOutBack(t, magnitude = 1.70158) {\n        const scaledTime = t * 2;\n        const scaledTime2 = scaledTime - 2;\n        const s = magnitude * 1.525;\n        if (scaledTime < 1) {\n            return 0.5 * scaledTime * scaledTime * ((s + 1) * scaledTime - s);\n        }\n        return 0.5 * (scaledTime2 * scaledTime2 * ((s + 1) * scaledTime2 + s) + 2);\n    }\n    Timing.easeInOutBack = easeInOutBack;\n    // Bounces slowly then quickly to finish\n    function easeInElastic(t, magnitude = 0.7) {\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const scaledTime = t / 1;\n        const scaledTime1 = scaledTime - 1;\n        const p = 1 - magnitude;\n        const s = (p / (2 * Math.PI)) * Math.asin(1);\n        return -(Math.pow(2, 10 * scaledTime1) * // eslint-disable-line\n            Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p));\n    }\n    Timing.easeInElastic = easeInElastic;\n    // Fast acceleration, bounces to zero\n    function easeOutElastic(t, magnitude = 0.7) {\n        const p = 1 - magnitude;\n        const scaledTime = t * 2;\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const s = (p / (2 * Math.PI)) * Math.asin(1);\n        return (Math.pow(2, -10 * scaledTime) * // eslint-disable-line\n            Math.sin(((scaledTime - s) * (2 * Math.PI)) / p) +\n            1);\n    }\n    Timing.easeOutElastic = easeOutElastic;\n    // Slow start and end, two bounces sandwich a fast motion\n    function easeInOutElastic(t, magnitude = 0.65) {\n        const p = 1 - magnitude;\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 1;\n        const s = (p / (2 * Math.PI)) * Math.asin(1);\n        if (scaledTime < 1) {\n            return (-0.5 *\n                (Math.pow(2, 10 * scaledTime1) * // eslint-disable-line\n                    Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p)));\n        }\n        return (Math.pow(2, -10 * scaledTime1) * // eslint-disable-line\n            Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p) *\n            0.5 +\n            1);\n    }\n    Timing.easeInOutElastic = easeInOutElastic;\n    // Bounce to completion\n    function easeOutBounce(t) {\n        const scaledTime = t / 1;\n        if (scaledTime < 1 / 2.75) {\n            return 7.5625 * scaledTime * scaledTime;\n        }\n        if (scaledTime < 2 / 2.75) {\n            const scaledTime2 = scaledTime - 1.5 / 2.75;\n            return 7.5625 * scaledTime2 * scaledTime2 + 0.75;\n        }\n        if (scaledTime < 2.5 / 2.75) {\n            const scaledTime2 = scaledTime - 2.25 / 2.75;\n            return 7.5625 * scaledTime2 * scaledTime2 + 0.9375;\n        }\n        {\n            const scaledTime2 = scaledTime - 2.625 / 2.75;\n            return 7.5625 * scaledTime2 * scaledTime2 + 0.984375;\n        }\n    }\n    Timing.easeOutBounce = easeOutBounce;\n    // Bounce increasing in velocity until completion\n    function easeInBounce(t) {\n        return 1 - easeOutBounce(1 - t);\n    }\n    Timing.easeInBounce = easeInBounce;\n    // Bounce in and bounce out\n    function easeInOutBounce(t) {\n        if (t < 0.5) {\n            return easeInBounce(t * 2) * 0.5;\n        }\n        return easeOutBounce(t * 2 - 1) * 0.5 + 0.5;\n    }\n    Timing.easeInOutBounce = easeInOutBounce;\n})(Timing || (Timing = {}));\n//# sourceMappingURL=timing.js.map","export var Interp;\n(function (Interp) {\n    Interp.number = (a, b) => {\n        const d = b - a;\n        return (t) => {\n            return a + d * t;\n        };\n    };\n    Interp.object = (a, b) => {\n        const keys = Object.keys(a);\n        return (t) => {\n            const ret = {};\n            for (let i = keys.length - 1; i !== -1; i -= 1) {\n                const key = keys[i];\n                ret[key] = a[key] + (b[key] - a[key]) * t;\n            }\n            return ret;\n        };\n    };\n    Interp.unit = (a, b) => {\n        const reg = /(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/;\n        const ma = reg.exec(a);\n        const mb = reg.exec(b);\n        const pb = mb ? mb[1] : '';\n        const aa = ma ? +ma[1] : 0;\n        const bb = mb ? +mb[1] : 0;\n        const index = pb.indexOf('.');\n        const precision = index > 0 ? pb[1].length - index - 1 : 0;\n        const d = bb - aa;\n        const u = ma ? ma[2] : '';\n        return (t) => {\n            return (aa + d * t).toFixed(precision) + u;\n        };\n    };\n    Interp.color = (a, b) => {\n        const ca = parseInt(a.slice(1), 16);\n        const cb = parseInt(b.slice(1), 16);\n        const ra = ca & 0x0000ff;\n        const rd = (cb & 0x0000ff) - ra;\n        const ga = ca & 0x00ff00;\n        const gd = (cb & 0x00ff00) - ga;\n        const ba = ca & 0xff0000;\n        const bd = (cb & 0xff0000) - ba;\n        return (t) => {\n            const r = (ra + rd * t) & 0x000000ff;\n            const g = (ga + gd * t) & 0x0000ff00;\n            const b = (ba + bd * t) & 0x00ff0000;\n            return `#${((1 << 24) | r | g | b).toString(16).slice(1)}`;\n        };\n    };\n})(Interp || (Interp = {}));\n//# sourceMappingURL=interp.js.map","/**\n * An implementation of the Priority Queue abstract data type.\n *\n * @see: http://en.wikipedia.org/wiki/Priority_queue\n *\n * It is like a normal stack or queue, but where each item has assigned a\n * priority (a number). Items with higher priority are served before items\n * with lower priority. This implementation uses binary heap as an internal\n * representation of the queue. The time complexity of all the methods is as\n * follows:\n *\n * - create: `O(n)`\n * - insert: `O(log n)`\n * - remove: `O(log n)`\n * - peek: `O(1)`\n * - isEmpty: `O(1)`\n * - peekPriority: `O(1)`\n */\nexport class PriorityQueue {\n    constructor(options = {}) {\n        this.comparator = options.comparator || PriorityQueue.defaultComparator;\n        this.index = {};\n        this.data = options.data || [];\n        this.heapify();\n    }\n    /**\n     * Returns `true` if the priority queue is empty, `false` otherwise.\n     */\n    isEmpty() {\n        return this.data.length === 0;\n    }\n    /**\n     * Inserts a value with priority to the queue. Optionally pass a unique\n     * id of this item. Passing unique IDs for each item you insert allows\n     * you to use the `updatePriority()` operation.\n     * @param priority\n     * @param value\n     * @param id\n     */\n    insert(priority, value, id) {\n        const item = { priority, value };\n        const index = this.data.length;\n        if (id) {\n            item.id = id;\n            this.index[id] = index;\n        }\n        this.data.push(item);\n        this.bubbleUp(index);\n        return this;\n    }\n    /**\n     * Returns the value of an item with the highest priority.\n     */\n    peek() {\n        return this.data[0] ? this.data[0].value : null;\n    }\n    /**\n     * Returns the highest priority in the queue.\n     */\n    peekPriority() {\n        return this.data[0] ? this.data[0].priority : null;\n    }\n    updatePriority(id, priority) {\n        const index = this.index[id];\n        if (typeof index === 'undefined') {\n            throw new Error(`Node with id '${id}' was not found in the heap.`);\n        }\n        const data = this.data;\n        const oldPriority = data[index].priority;\n        const comp = this.comparator(priority, oldPriority);\n        if (comp < 0) {\n            data[index].priority = priority;\n            this.bubbleUp(index);\n        }\n        else if (comp > 0) {\n            data[index].priority = priority;\n            this.bubbleDown(index);\n        }\n    }\n    /**\n     * Removes the item with the highest priority from the queue\n     *\n     * @returns The value of the removed item.\n     */\n    remove() {\n        const data = this.data;\n        const peek = data[0];\n        const last = data.pop();\n        if (peek.id) {\n            delete this.index[peek.id];\n        }\n        if (data.length > 0) {\n            data[0] = last;\n            if (last.id) {\n                this.index[last.id] = 0;\n            }\n            this.bubbleDown(0);\n        }\n        return peek ? peek.value : null;\n    }\n    heapify() {\n        for (let i = 0; i < this.data.length; i += 1) {\n            this.bubbleUp(i);\n        }\n    }\n    bubbleUp(index) {\n        const data = this.data;\n        let tmp;\n        let parent;\n        let current = index;\n        while (current > 0) {\n            parent = (current - 1) >>> 1;\n            if (this.comparator(data[current].priority, data[parent].priority) < 0) {\n                tmp = data[parent];\n                data[parent] = data[current];\n                let id = data[current].id;\n                if (id != null) {\n                    this.index[id] = parent;\n                }\n                data[current] = tmp;\n                id = data[current].id;\n                if (id != null) {\n                    this.index[id] = current;\n                }\n                current = parent;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    bubbleDown(index) {\n        const data = this.data;\n        const last = data.length - 1;\n        let current = index;\n        // eslint-disable-next-line\n        while (true) {\n            const left = (current << 1) + 1;\n            const right = left + 1;\n            let minIndex = current;\n            if (left <= last &&\n                this.comparator(data[left].priority, data[minIndex].priority) < 0) {\n                minIndex = left;\n            }\n            if (right <= last &&\n                this.comparator(data[right].priority, data[minIndex].priority) < 0) {\n                minIndex = right;\n            }\n            if (minIndex !== current) {\n                const tmp = data[minIndex];\n                data[minIndex] = data[current];\n                let id = data[current].id;\n                if (id != null) {\n                    this.index[id] = minIndex;\n                }\n                data[current] = tmp;\n                id = data[current].id;\n                if (id != null) {\n                    this.index[id] = current;\n                }\n                current = minIndex;\n            }\n            else {\n                break;\n            }\n        }\n    }\n}\n(function (PriorityQueue) {\n    PriorityQueue.defaultComparator = (a, b) => a - b;\n})(PriorityQueue || (PriorityQueue = {}));\n//# sourceMappingURL=priorityqueue.js.map","/* eslint-disable no-constructor-return */\nimport { NumberExt } from '../number';\nexport class Color {\n    constructor(color, g, b, a) {\n        if (color == null) {\n            return this.set(255, 255, 255, 1);\n        }\n        if (typeof color === 'number') {\n            return this.set(color, g, b, a);\n        }\n        if (typeof color === 'string') {\n            return Color.fromString(color) || this;\n        }\n        if (Array.isArray(color)) {\n            return this.set(color);\n        }\n        this.set(color.r, color.g, color.b, color.a == null ? 1 : color.a);\n    }\n    blend(start, end, weight) {\n        this.set(start.r + (end.r - start.r) * weight, start.g + (end.g - start.g) * weight, start.b + (end.b - start.b) * weight, start.a + (end.a - start.a) * weight);\n    }\n    lighten(amount) {\n        const rgba = Color.lighten(this.toArray(), amount);\n        this.r = rgba[0];\n        this.g = rgba[1];\n        this.b = rgba[2];\n        this.a = rgba[3];\n    }\n    darken(amount) {\n        this.lighten(-amount);\n    }\n    set(arg0, arg1, arg2, arg3) {\n        const r = Array.isArray(arg0) ? arg0[0] : arg0;\n        const g = Array.isArray(arg0) ? arg0[1] : arg1;\n        const b = Array.isArray(arg0) ? arg0[2] : arg2;\n        const a = Array.isArray(arg0) ? arg0[3] : arg3;\n        this.r = Math.round(NumberExt.clamp(r, 0, 255));\n        this.g = Math.round(NumberExt.clamp(g, 0, 255));\n        this.b = Math.round(NumberExt.clamp(b, 0, 255));\n        this.a = a == null ? 1 : NumberExt.clamp(a, 0, 1);\n        return this;\n    }\n    toHex() {\n        const hex = ['r', 'g', 'b'].map((key) => {\n            const str = this[key].toString(16);\n            return str.length < 2 ? `0${str}` : str;\n        });\n        return `#${hex.join('')}`;\n    }\n    toRGBA() {\n        return this.toArray();\n    }\n    toHSLA() {\n        return Color.rgba2hsla(this.r, this.g, this.b, this.a);\n    }\n    toCSS(ignoreAlpha) {\n        const rgb = `${this.r},${this.g},${this.b},`;\n        return ignoreAlpha ? `rgb(${rgb})` : `rgba(${rgb},${this.a})`;\n    }\n    toGrey() {\n        return Color.makeGrey(Math.round((this.r + this.g + this.b) / 3), this.a);\n    }\n    toArray() {\n        return [this.r, this.g, this.b, this.a];\n    }\n    toString() {\n        return this.toCSS();\n    }\n}\n(function (Color) {\n    function fromArray(arr) {\n        return new Color(arr);\n    }\n    Color.fromArray = fromArray;\n    function fromHex(color) {\n        return new Color([...hex2rgb(color), 1]);\n    }\n    Color.fromHex = fromHex;\n    function fromRGBA(color) {\n        const matches = color.toLowerCase().match(/^rgba?\\(([\\s.,0-9]+)\\)/);\n        if (matches) {\n            const arr = matches[1].split(/\\s*,\\s*/).map((v) => parseInt(v, 10));\n            return new Color(arr);\n        }\n        return null;\n    }\n    Color.fromRGBA = fromRGBA;\n    function hue2rgb(m1, m2, h) {\n        if (h < 0) {\n            ++h; // eslint-disable-line\n        }\n        if (h > 1) {\n            --h; // eslint-disable-line\n        }\n        const h6 = 6 * h;\n        if (h6 < 1) {\n            return m1 + (m2 - m1) * h6;\n        }\n        if (2 * h < 1) {\n            return m2;\n        }\n        if (3 * h < 2) {\n            return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n        }\n        return m1;\n    }\n    function fromHSLA(color) {\n        const matches = color.toLowerCase().match(/^hsla?\\(([\\s.,0-9]+)\\)/);\n        if (matches) {\n            const arr = matches[2].split(/\\s*,\\s*/);\n            const h = (((parseFloat(arr[0]) % 360) + 360) % 360) / 360;\n            const s = parseFloat(arr[1]) / 100;\n            const l = parseFloat(arr[2]) / 100;\n            const a = arr[3] == null ? 1 : parseInt(arr[3], 10);\n            return new Color(hsla2rgba(h, s, l, a));\n        }\n        return null;\n    }\n    Color.fromHSLA = fromHSLA;\n    function fromString(color) {\n        if (color.startsWith('#')) {\n            return fromHex(color);\n        }\n        if (color.startsWith('rgb')) {\n            return fromRGBA(color);\n        }\n        const preset = Color.named[color];\n        if (preset) {\n            return fromHex(preset);\n        }\n        return fromHSLA(color);\n    }\n    Color.fromString = fromString;\n    function makeGrey(g, a) {\n        return Color.fromArray([g, g, g, a]);\n    }\n    Color.makeGrey = makeGrey;\n    function rgba2hsla(arg0, arg1, arg2, arg3) {\n        const r = Array.isArray(arg0) ? arg0[0] : arg0;\n        const g = Array.isArray(arg0) ? arg0[1] : arg1;\n        const b = Array.isArray(arg0) ? arg0[2] : arg2;\n        const a = Array.isArray(arg0) ? arg0[3] : arg3;\n        const max = Math.max(r, g, b);\n        const min = Math.min(r, g, b);\n        const l = (max + min) / 2;\n        let h = 0;\n        let s = 0;\n        if (min !== max) {\n            const d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch (max) {\n                case r:\n                    h = (g - b) / d + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    h = (b - r) / d + 2;\n                    break;\n                case b:\n                    h = (r - g) / d + 4;\n                    break;\n                default:\n                    break;\n            }\n            h /= 6;\n        }\n        return [h, s, l, a == null ? 1 : a];\n    }\n    Color.rgba2hsla = rgba2hsla;\n    function hsla2rgba(arg0, arg1, arg2, arg3) {\n        const h = Array.isArray(arg0) ? arg0[0] : arg0;\n        const s = Array.isArray(arg0) ? arg0[1] : arg1;\n        const l = Array.isArray(arg0) ? arg0[2] : arg2;\n        const a = Array.isArray(arg0) ? arg0[3] : arg3;\n        const m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n        const m1 = 2 * l - m2;\n        return [\n            hue2rgb(m1, m2, h + 1 / 3) * 256,\n            hue2rgb(m1, m2, h) * 256,\n            hue2rgb(m1, m2, h - 1 / 3) * 256,\n            a == null ? 1 : a,\n        ];\n    }\n    Color.hsla2rgba = hsla2rgba;\n    function random(ignoreAlpha) {\n        return new Color(Math.round(Math.random() * 256), Math.round(Math.random() * 256), Math.round(Math.random() * 256), ignoreAlpha ? undefined : parseFloat(Math.random().toFixed(2)));\n    }\n    Color.random = random;\n    function randomHex() {\n        const letters = '0123456789ABCDEF';\n        let color = '#';\n        for (let i = 0; i < 6; i += 1) {\n            color += letters[Math.floor(Math.random() * 16)];\n        }\n        return color;\n    }\n    Color.randomHex = randomHex;\n    function randomRGBA(ignoreAlpha) {\n        return random(ignoreAlpha).toString();\n    }\n    Color.randomRGBA = randomRGBA;\n    function invert(color, bw) {\n        if (typeof color === 'string') {\n            const pound = color[0] === '#';\n            const [r, g, b] = hex2rgb(color);\n            if (bw) {\n                // http://stackoverflow.com/a/3943023/112731\n                return r * 0.299 + g * 0.587 + b * 0.114 > 186 ? '#000000' : '#ffffff';\n            }\n            return `${pound ? '#' : ''}${rgb2hex(255 - r, 255 - g, 255 - b)}`;\n        }\n        const r = color[0];\n        const g = color[1];\n        const b = color[2];\n        const a = color[3];\n        if (bw) {\n            return r * 0.299 + g * 0.587 + b * 0.114 > 186\n                ? [0, 0, 0, a]\n                : [255, 255, 255, a];\n        }\n        return [255 - r, 255 - g, 255 - b, a];\n    }\n    Color.invert = invert;\n    function hex2rgb(hex) {\n        const color = hex.indexOf('#') === 0 ? hex : `#${hex}`;\n        let val = Number(`0x${color.substr(1)}`);\n        if (!(color.length === 4 || color.length === 7) || Number.isNaN(val)) {\n            throw new Error('Invalid hex color.');\n        }\n        const bits = color.length === 4 ? 4 : 8;\n        const mask = (1 << bits) - 1;\n        const bgr = ['b', 'g', 'r'].map(() => {\n            const c = val & mask;\n            val >>= bits;\n            return bits === 4 ? 17 * c : c;\n        });\n        return [bgr[2], bgr[1], bgr[0]];\n    }\n    function rgb2hex(r, g, b) {\n        const pad = (hex) => (hex.length < 2 ? `0${hex}` : hex);\n        return `${pad(r.toString(16))}${pad(g.toString(16))}${pad(b.toString(16))}`;\n    }\n    function lighten(color, amt) {\n        return lum(color, amt);\n    }\n    Color.lighten = lighten;\n    function darken(color, amt) {\n        return lum(color, -amt);\n    }\n    Color.darken = darken;\n    function lum(color, amt) {\n        if (typeof color === 'string') {\n            const pound = color[0] === '#';\n            const num = parseInt(pound ? color.substr(1) : color, 16);\n            const r = NumberExt.clamp((num >> 16) + amt, 0, 255);\n            const g = NumberExt.clamp(((num >> 8) & 0x00ff) + amt, 0, 255);\n            const b = NumberExt.clamp((num & 0x0000ff) + amt, 0, 255);\n            return `${pound ? '#' : ''}${(b | (g << 8) | (r << 16)).toString(16)}`;\n        }\n        const hex = rgb2hex(color[0], color[1], color[2]);\n        const arr = hex2rgb(lum(hex, amt));\n        return [arr[0], arr[1], arr[2], color[3]];\n    }\n})(Color || (Color = {}));\n(function (Color) {\n    Color.named = {\n        aliceblue: '#f0f8ff',\n        antiquewhite: '#faebd7',\n        aqua: '#00ffff',\n        aquamarine: '#7fffd4',\n        azure: '#f0ffff',\n        beige: '#f5f5dc',\n        bisque: '#ffe4c4',\n        black: '#000000',\n        blanchedalmond: '#ffebcd',\n        blue: '#0000ff',\n        blueviolet: '#8a2be2',\n        brown: '#a52a2a',\n        burlywood: '#deb887',\n        burntsienna: '#ea7e5d',\n        cadetblue: '#5f9ea0',\n        chartreuse: '#7fff00',\n        chocolate: '#d2691e',\n        coral: '#ff7f50',\n        cornflowerblue: '#6495ed',\n        cornsilk: '#fff8dc',\n        crimson: '#dc143c',\n        cyan: '#00ffff',\n        darkblue: '#00008b',\n        darkcyan: '#008b8b',\n        darkgoldenrod: '#b8860b',\n        darkgray: '#a9a9a9',\n        darkgreen: '#006400',\n        darkgrey: '#a9a9a9',\n        darkkhaki: '#bdb76b',\n        darkmagenta: '#8b008b',\n        darkolivegreen: '#556b2f',\n        darkorange: '#ff8c00',\n        darkorchid: '#9932cc',\n        darkred: '#8b0000',\n        darksalmon: '#e9967a',\n        darkseagreen: '#8fbc8f',\n        darkslateblue: '#483d8b',\n        darkslategray: '#2f4f4f',\n        darkslategrey: '#2f4f4f',\n        darkturquoise: '#00ced1',\n        darkviolet: '#9400d3',\n        deeppink: '#ff1493',\n        deepskyblue: '#00bfff',\n        dimgray: '#696969',\n        dimgrey: '#696969',\n        dodgerblue: '#1e90ff',\n        firebrick: '#b22222',\n        floralwhite: '#fffaf0',\n        forestgreen: '#228b22',\n        fuchsia: '#ff00ff',\n        gainsboro: '#dcdcdc',\n        ghostwhite: '#f8f8ff',\n        gold: '#ffd700',\n        goldenrod: '#daa520',\n        gray: '#808080',\n        green: '#008000',\n        greenyellow: '#adff2f',\n        grey: '#808080',\n        honeydew: '#f0fff0',\n        hotpink: '#ff69b4',\n        indianred: '#cd5c5c',\n        indigo: '#4b0082',\n        ivory: '#fffff0',\n        khaki: '#f0e68c',\n        lavender: '#e6e6fa',\n        lavenderblush: '#fff0f5',\n        lawngreen: '#7cfc00',\n        lemonchiffon: '#fffacd',\n        lightblue: '#add8e6',\n        lightcoral: '#f08080',\n        lightcyan: '#e0ffff',\n        lightgoldenrodyellow: '#fafad2',\n        lightgray: '#d3d3d3',\n        lightgreen: '#90ee90',\n        lightgrey: '#d3d3d3',\n        lightpink: '#ffb6c1',\n        lightsalmon: '#ffa07a',\n        lightseagreen: '#20b2aa',\n        lightskyblue: '#87cefa',\n        lightslategray: '#778899',\n        lightslategrey: '#778899',\n        lightsteelblue: '#b0c4de',\n        lightyellow: '#ffffe0',\n        lime: '#00ff00',\n        limegreen: '#32cd32',\n        linen: '#faf0e6',\n        magenta: '#ff00ff',\n        maroon: '#800000',\n        mediumaquamarine: '#66cdaa',\n        mediumblue: '#0000cd',\n        mediumorchid: '#ba55d3',\n        mediumpurple: '#9370db',\n        mediumseagreen: '#3cb371',\n        mediumslateblue: '#7b68ee',\n        mediumspringgreen: '#00fa9a',\n        mediumturquoise: '#48d1cc',\n        mediumvioletred: '#c71585',\n        midnightblue: '#191970',\n        mintcream: '#f5fffa',\n        mistyrose: '#ffe4e1',\n        moccasin: '#ffe4b5',\n        navajowhite: '#ffdead',\n        navy: '#000080',\n        oldlace: '#fdf5e6',\n        olive: '#808000',\n        olivedrab: '#6b8e23',\n        orange: '#ffa500',\n        orangered: '#ff4500',\n        orchid: '#da70d6',\n        palegoldenrod: '#eee8aa',\n        palegreen: '#98fb98',\n        paleturquoise: '#afeeee',\n        palevioletred: '#db7093',\n        papayawhip: '#ffefd5',\n        peachpuff: '#ffdab9',\n        peru: '#cd853f',\n        pink: '#ffc0cb',\n        plum: '#dda0dd',\n        powderblue: '#b0e0e6',\n        purple: '#800080',\n        rebeccapurple: '#663399',\n        red: '#ff0000',\n        rosybrown: '#bc8f8f',\n        royalblue: '#4169e1',\n        saddlebrown: '#8b4513',\n        salmon: '#fa8072',\n        sandybrown: '#f4a460',\n        seagreen: '#2e8b57',\n        seashell: '#fff5ee',\n        sienna: '#a0522d',\n        silver: '#c0c0c0',\n        skyblue: '#87ceeb',\n        slateblue: '#6a5acd',\n        slategray: '#708090',\n        slategrey: '#708090',\n        snow: '#fffafa',\n        springgreen: '#00ff7f',\n        steelblue: '#4682b4',\n        tan: '#d2b48c',\n        teal: '#008080',\n        thistle: '#d8bfd8',\n        tomato: '#ff6347',\n        turquoise: '#40e0d0',\n        violet: '#ee82ee',\n        wheat: '#f5deb3',\n        white: '#ffffff',\n        whitesmoke: '#f5f5f5',\n        yellow: '#ffff00',\n        yellowgreen: '#9acd32',\n    };\n})(Color || (Color = {}));\n//# sourceMappingURL=index.js.map","export class Dictionary {\n    constructor() {\n        this.clear();\n    }\n    clear() {\n        this.map = new WeakMap();\n        this.arr = [];\n    }\n    has(key) {\n        return this.map.has(key);\n    }\n    get(key) {\n        return this.map.get(key);\n    }\n    set(key, value) {\n        this.map.set(key, value);\n        this.arr.push(key);\n    }\n    delete(key) {\n        const index = this.arr.indexOf(key);\n        if (index >= 0) {\n            this.arr.splice(index, 1);\n        }\n        const ret = this.map.get(key);\n        this.map.delete(key);\n        return ret;\n    }\n    each(iterator) {\n        this.arr.forEach((key) => {\n            const value = this.map.get(key);\n            iterator(value, key);\n        });\n    }\n    dispose() {\n        this.clear();\n    }\n}\n//# sourceMappingURL=dictionary.js.map","import { Platform } from '../platform';\nconst cssModules = [];\nexport function ensure(name, content) {\n    const cssModule = cssModules.find((m) => m.name === name);\n    if (cssModule) {\n        cssModule.loadTimes += 1;\n        if (cssModule.loadTimes > 1) {\n            return;\n        }\n    }\n    if (!Platform.isApplyingHMR()) {\n        const styleElement = document.createElement('style');\n        styleElement.setAttribute('type', 'text/css');\n        styleElement.textContent = content;\n        const head = document.querySelector('head');\n        if (head) {\n            head.insertBefore(styleElement, head.firstChild);\n        }\n        cssModules.push({\n            name,\n            loadTimes: 1,\n            styleElement,\n        });\n    }\n}\nexport function clean(name) {\n    const index = cssModules.findIndex((m) => m.name === name);\n    if (index > -1) {\n        const cssModule = cssModules[index];\n        cssModule.loadTimes -= 1;\n        if (cssModule.loadTimes > 0) {\n            return;\n        }\n        let styleElement = cssModule.styleElement;\n        if (styleElement && styleElement.parentNode) {\n            styleElement.parentNode.removeChild(styleElement);\n        }\n        styleElement = null;\n        cssModules.splice(index, 1);\n    }\n}\n//# sourceMappingURL=loader.js.map","export var Angle;\n(function (Angle) {\n    /**\n     * Converts radian angle to degree angle.\n     * @param rad The radians to convert.\n     */\n    function toDeg(rad) {\n        return ((180 * rad) / Math.PI) % 360;\n    }\n    Angle.toDeg = toDeg;\n    /**\n     * Converts degree angle to radian angle.\n     * @param deg The degree angle to convert.\n     * @param over360\n     */\n    Angle.toRad = function (deg, over360 = false) {\n        const d = over360 ? deg : deg % 360;\n        return (d * Math.PI) / 180;\n    };\n    /**\n     * Returns the angle in degrees and clamps its value between `0` and `360`.\n     */\n    function normalize(angle) {\n        return (angle % 360) + (angle < 0 ? 360 : 0);\n    }\n    Angle.normalize = normalize;\n})(Angle || (Angle = {}));\n//# sourceMappingURL=angle.js.map","export var GeometryUtil;\n(function (GeometryUtil) {\n    function round(num, precision = 0) {\n        return Number.isInteger(num) ? num : +num.toFixed(precision);\n    }\n    GeometryUtil.round = round;\n    function random(min, max) {\n        let mmin;\n        let mmax;\n        if (max == null) {\n            mmax = min == null ? 1 : min;\n            mmin = 0;\n        }\n        else {\n            mmax = max;\n            mmin = min == null ? 0 : min;\n        }\n        if (mmax < mmin) {\n            const temp = mmin;\n            mmin = mmax;\n            mmax = temp;\n        }\n        return Math.floor(Math.random() * (mmax - mmin + 1) + mmin);\n    }\n    GeometryUtil.random = random;\n    function clamp(value, min, max) {\n        if (Number.isNaN(value)) {\n            return NaN;\n        }\n        if (Number.isNaN(min) || Number.isNaN(max)) {\n            return 0;\n        }\n        return min < max\n            ? value < min\n                ? min\n                : value > max\n                    ? max\n                    : value\n            : value < max\n                ? max\n                : value > min\n                    ? min\n                    : value;\n    }\n    GeometryUtil.clamp = clamp;\n    function snapToGrid(value, gridSize) {\n        return gridSize * Math.round(value / gridSize);\n    }\n    GeometryUtil.snapToGrid = snapToGrid;\n    function containsPoint(rect, point) {\n        return (point != null &&\n            rect != null &&\n            point.x >= rect.x &&\n            point.x <= rect.x + rect.width &&\n            point.y >= rect.y &&\n            point.y <= rect.y + rect.height);\n    }\n    GeometryUtil.containsPoint = containsPoint;\n    function squaredLength(p1, p2) {\n        const dx = p1.x - p2.x;\n        const dy = p1.y - p2.y;\n        return dx * dx + dy * dy;\n    }\n    GeometryUtil.squaredLength = squaredLength;\n})(GeometryUtil || (GeometryUtil = {}));\n//# sourceMappingURL=util.js.map","export class Geometry {\n    valueOf() {\n        return this.toJSON();\n    }\n    toString() {\n        return JSON.stringify(this.toJSON());\n    }\n}\n//# sourceMappingURL=geometry.js.map","import { GeometryUtil } from './util';\nimport { Angle } from './angle';\nimport { Geometry } from './geometry';\nexport class Point extends Geometry {\n    constructor(x, y) {\n        super();\n        this.x = x == null ? 0 : x;\n        this.y = y == null ? 0 : y;\n    }\n    /**\n     * Rounds the point to the given precision.\n     */\n    round(precision = 0) {\n        this.x = GeometryUtil.round(this.x, precision);\n        this.y = GeometryUtil.round(this.y, precision);\n        return this;\n    }\n    add(x, y) {\n        const p = Point.create(x, y);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    }\n    update(x, y) {\n        const p = Point.create(x, y);\n        this.x = p.x;\n        this.y = p.y;\n        return this;\n    }\n    translate(dx, dy) {\n        const t = Point.create(dx, dy);\n        this.x += t.x;\n        this.y += t.y;\n        return this;\n    }\n    /**\n     * Rotate the point by `degree` around `center`.\n     */\n    rotate(degree, center) {\n        const p = Point.rotate(this, degree, center);\n        this.x = p.x;\n        this.y = p.y;\n        return this;\n    }\n    /**\n     * Scale point by `sx` and `sy` around the given `origin`. If origin is\n     * not specified, the point is scaled around `0, 0`.\n     */\n    scale(sx, sy, origin = new Point()) {\n        const ref = Point.create(origin);\n        this.x = ref.x + sx * (this.x - ref.x);\n        this.y = ref.y + sy * (this.y - ref.y);\n        return this;\n    }\n    /**\n     * Chooses the point closest to this point from among `points`. If `points`\n     * is an empty array, `null` is returned.\n     */\n    closest(points) {\n        if (points.length === 1) {\n            return Point.create(points[0]);\n        }\n        let ret = null;\n        let min = Infinity;\n        points.forEach((p) => {\n            const dist = this.squaredDistance(p);\n            if (dist < min) {\n                ret = p;\n                min = dist;\n            }\n        });\n        return ret ? Point.create(ret) : null;\n    }\n    /**\n     * Returns the distance between the point and another point `p`.\n     */\n    distance(p) {\n        return Math.sqrt(this.squaredDistance(p));\n    }\n    /**\n     * Returns the squared distance between the point and another point `p`.\n     *\n     * Useful for distance comparisons in which real distance is not necessary\n     * (saves one `Math.sqrt()` operation).\n     */\n    squaredDistance(p) {\n        const ref = Point.create(p);\n        const dx = this.x - ref.x;\n        const dy = this.y - ref.y;\n        return dx * dx + dy * dy;\n    }\n    manhattanDistance(p) {\n        const ref = Point.create(p);\n        return Math.abs(ref.x - this.x) + Math.abs(ref.y - this.y);\n    }\n    /**\n     * Returns the magnitude of the point vector.\n     *\n     * @see http://en.wikipedia.org/wiki/Magnitude_(mathematics)\n     */\n    magnitude() {\n        return Math.sqrt(this.x * this.x + this.y * this.y) || 0.01;\n    }\n    /**\n     * Returns the angle(in degrees) between vector from this point to `p` and\n     * the x-axis.\n     */\n    theta(p = new Point()) {\n        const ref = Point.create(p);\n        const y = -(ref.y - this.y); // invert the y-axis.\n        const x = ref.x - this.x;\n        let rad = Math.atan2(y, x);\n        // Correction for III. and IV. quadrant.\n        if (rad < 0) {\n            rad = 2 * Math.PI + rad;\n        }\n        return (180 * rad) / Math.PI;\n    }\n    /**\n     * Returns the angle(in degrees) between vector from this point to `p1` and\n     * the vector from this point to `p2`.\n     *\n     * The ordering of points `p1` and `p2` is important.\n     *\n     * The function returns a value between `0` and `180` when the angle (in the\n     * direction from `p1` to `p2`) is clockwise, and a value between `180` and\n     * `360` when the angle is counterclockwise.\n     *\n     * Returns `NaN` if either of the points `p1` and `p2` is equal with this point.\n     */\n    angleBetween(p1, p2) {\n        if (this.equals(p1) || this.equals(p2)) {\n            return NaN;\n        }\n        let angle = this.theta(p2) - this.theta(p1);\n        if (angle < 0) {\n            angle += 360;\n        }\n        return angle;\n    }\n    /**\n     * Returns the angle(in degrees) between the line from `(0,0)` and this point\n     * and the line from `(0,0)` to `p`.\n     *\n     * The function returns a value between `0` and `180` when the angle (in the\n     * direction from this point to `p`) is clockwise, and a value between `180`\n     * and `360` when the angle is counterclockwise. Returns `NaN` if called from\n     * point `(0,0)` or if `p` is `(0,0)`.\n     */\n    vectorAngle(p) {\n        const zero = new Point(0, 0);\n        return zero.angleBetween(this, p);\n    }\n    /**\n     * Converts rectangular to polar coordinates.\n     */\n    toPolar(origin) {\n        this.update(Point.toPolar(this, origin));\n        return this;\n    }\n    /**\n     * Returns the change in angle(in degrees) that is the result of moving the\n     * point from its previous position to its current position.\n     *\n     * More specifically, this function computes the angle between the line from\n     * the ref point to the previous position of this point(i.e. current position\n     * `-dx`, `-dy`) and the line from the `ref` point to the current position of\n     * this point.\n     *\n     * The function returns a positive value between `0` and `180` when the angle\n     * (in the direction from previous position of this point to its current\n     * position) is clockwise, and a negative value between `0` and `-180` when\n     * the angle is counterclockwise.\n     *\n     * The function returns `0` if the previous and current positions of this\n     * point are the same (i.e. both `dx` and `dy` are `0`).\n     */\n    changeInAngle(dx, dy, ref = new Point()) {\n        // Revert the translation and measure the change in angle around x-axis.\n        return this.clone().translate(-dx, -dy).theta(ref) - this.theta(ref);\n    }\n    /**\n     * If the point lies outside the rectangle `rect`, adjust the point so that\n     * it becomes the nearest point on the boundary of `rect`.\n     */\n    adhereToRect(rect) {\n        if (!GeometryUtil.containsPoint(rect, this)) {\n            this.x = Math.min(Math.max(this.x, rect.x), rect.x + rect.width);\n            this.y = Math.min(Math.max(this.y, rect.y), rect.y + rect.height);\n        }\n        return this;\n    }\n    /**\n     * Returns the bearing(cardinal direction) between me and the given point.\n     *\n     * @see https://en.wikipedia.org/wiki/Cardinal_direction\n     */\n    bearing(p) {\n        const ref = Point.create(p);\n        const lat1 = Angle.toRad(this.y);\n        const lat2 = Angle.toRad(ref.y);\n        const lon1 = this.x;\n        const lon2 = ref.x;\n        const dLon = Angle.toRad(lon2 - lon1);\n        const y = Math.sin(dLon) * Math.cos(lat2);\n        const x = Math.cos(lat1) * Math.sin(lat2) -\n            Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);\n        const brng = Angle.toDeg(Math.atan2(y, x));\n        const bearings = ['NE', 'E', 'SE', 'S', 'SW', 'W', 'NW', 'N'];\n        let index = brng - 22.5;\n        if (index < 0) {\n            index += 360;\n        }\n        index = parseInt((index / 45), 10);\n        return bearings[index];\n    }\n    /**\n     * Returns the cross product of the vector from me to `p1` and the vector\n     * from me to `p2`.\n     *\n     * The left-hand rule is used because the coordinate system is left-handed.\n     */\n    cross(p1, p2) {\n        if (p1 != null && p2 != null) {\n            const a = Point.create(p1);\n            const b = Point.create(p2);\n            return (b.x - this.x) * (a.y - this.y) - (b.y - this.y) * (a.x - this.x);\n        }\n        return NaN;\n    }\n    /**\n     * Returns the dot product of this point with given other point.\n     */\n    dot(p) {\n        const ref = Point.create(p);\n        return this.x * ref.x + this.y * ref.y;\n    }\n    diff(dx, dy) {\n        if (typeof dx === 'number') {\n            return new Point(this.x - dx, this.y - dy);\n        }\n        const p = Point.create(dx);\n        return new Point(this.x - p.x, this.y - p.y);\n    }\n    /**\n     * Returns an interpolation between me and point `p` for a parametert in\n     * the closed interval `[0, 1]`.\n     */\n    lerp(p, t) {\n        const ref = Point.create(p);\n        return new Point((1 - t) * this.x + t * ref.x, (1 - t) * this.y + t * ref.y);\n    }\n    /**\n     * Normalize the point vector, scale the line segment between `(0, 0)`\n     * and the point in order for it to have the given length. If length is\n     * not specified, it is considered to be `1`; in that case, a unit vector\n     * is computed.\n     */\n    normalize(length = 1) {\n        const scale = length / this.magnitude();\n        return this.scale(scale, scale);\n    }\n    /**\n     * Moves this point along the line starting from `ref` to this point by a\n     * certain `distance`.\n     */\n    move(ref, distance) {\n        const p = Point.create(ref);\n        const rad = Angle.toRad(p.theta(this));\n        return this.translate(Math.cos(rad) * distance, -Math.sin(rad) * distance);\n    }\n    /**\n     * Returns a point that is the reflection of me with the center of inversion\n     * in `ref` point.\n     */\n    reflection(ref) {\n        return Point.create(ref).move(this, this.distance(ref));\n    }\n    snapToGrid(gx, gy) {\n        this.x = GeometryUtil.snapToGrid(this.x, gx);\n        this.y = GeometryUtil.snapToGrid(this.y, gy == null ? gx : gy);\n        return this;\n    }\n    equals(p) {\n        const ref = Point.create(p);\n        return ref != null && ref.x === this.x && ref.y === this.y;\n    }\n    clone() {\n        return Point.clone(this);\n    }\n    /**\n     * Returns the point as a simple JSON object. For example: `{ x: 0, y: 0 }`.\n     */\n    toJSON() {\n        return Point.toJSON(this);\n    }\n    serialize() {\n        return `${this.x} ${this.y}`;\n    }\n}\n(function (Point) {\n    function isPoint(instance) {\n        return instance != null && instance instanceof Point;\n    }\n    Point.isPoint = isPoint;\n})(Point || (Point = {}));\n(function (Point) {\n    function isPointLike(p) {\n        return (p != null &&\n            typeof p === 'object' &&\n            typeof p.x === 'number' &&\n            typeof p.y === 'number');\n    }\n    Point.isPointLike = isPointLike;\n    function isPointData(p) {\n        return (p != null &&\n            Array.isArray(p) &&\n            p.length === 2 &&\n            typeof p[0] === 'number' &&\n            typeof p[1] === 'number');\n    }\n    Point.isPointData = isPointData;\n})(Point || (Point = {}));\n(function (Point) {\n    function create(x, y) {\n        if (x == null || typeof x === 'number') {\n            return new Point(x, y);\n        }\n        return clone(x);\n    }\n    Point.create = create;\n    function clone(p) {\n        if (Point.isPoint(p)) {\n            return new Point(p.x, p.y);\n        }\n        if (Array.isArray(p)) {\n            return new Point(p[0], p[1]);\n        }\n        return new Point(p.x, p.y);\n    }\n    Point.clone = clone;\n    function toJSON(p) {\n        if (Point.isPoint(p)) {\n            return { x: p.x, y: p.y };\n        }\n        if (Array.isArray(p)) {\n            return { x: p[0], y: p[1] };\n        }\n        return { x: p.x, y: p.y };\n    }\n    Point.toJSON = toJSON;\n    /**\n     * Returns a new Point object from the given polar coordinates.\n     * @see http://en.wikipedia.org/wiki/Polar_coordinate_system\n     */\n    function fromPolar(r, rad, origin = new Point()) {\n        let x = Math.abs(r * Math.cos(rad));\n        let y = Math.abs(r * Math.sin(rad));\n        const org = clone(origin);\n        const deg = Angle.normalize(Angle.toDeg(rad));\n        if (deg < 90) {\n            y = -y;\n        }\n        else if (deg < 180) {\n            x = -x;\n            y = -y;\n        }\n        else if (deg < 270) {\n            x = -x;\n        }\n        return new Point(org.x + x, org.y + y);\n    }\n    Point.fromPolar = fromPolar;\n    /**\n     * Converts rectangular to polar coordinates.\n     */\n    function toPolar(point, origin = new Point()) {\n        const p = clone(point);\n        const o = clone(origin);\n        const dx = p.x - o.x;\n        const dy = p.y - o.y;\n        return new Point(Math.sqrt(dx * dx + dy * dy), // r\n        Angle.toRad(o.theta(p)));\n    }\n    Point.toPolar = toPolar;\n    function equals(p1, p2) {\n        if (p1 === p2) {\n            return true;\n        }\n        if (p1 != null && p2 != null) {\n            return p1.x === p2.x && p1.y === p2.y;\n        }\n        return false;\n    }\n    Point.equals = equals;\n    function equalPoints(p1, p2) {\n        if ((p1 == null && p2 != null) ||\n            (p1 != null && p2 == null) ||\n            (p1 != null && p2 != null && p1.length !== p2.length)) {\n            return false;\n        }\n        if (p1 != null && p2 != null) {\n            for (let i = 0, ii = p1.length; i < ii; i += 1) {\n                if (!equals(p1[i], p2[i])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    Point.equalPoints = equalPoints;\n    /**\n     * Returns a point with random coordinates that fall within the range\n     * `[x1, x2]` and `[y1, y2]`.\n     */\n    function random(x1, x2, y1, y2) {\n        return new Point(GeometryUtil.random(x1, x2), GeometryUtil.random(y1, y2));\n    }\n    Point.random = random;\n    function rotate(point, angle, center) {\n        const rad = Angle.toRad(Angle.normalize(-angle));\n        const sin = Math.sin(rad);\n        const cos = Math.cos(rad);\n        return rotateEx(point, cos, sin, center);\n    }\n    Point.rotate = rotate;\n    function rotateEx(point, cos, sin, center = new Point()) {\n        const source = clone(point);\n        const origin = clone(center);\n        const dx = source.x - origin.x;\n        const dy = source.y - origin.y;\n        const x1 = dx * cos - dy * sin;\n        const y1 = dy * cos + dx * sin;\n        return new Point(x1 + origin.x, y1 + origin.y);\n    }\n    Point.rotateEx = rotateEx;\n})(Point || (Point = {}));\n//# sourceMappingURL=point.js.map","import { GeometryUtil } from './util';\nimport { Angle } from './angle';\nimport { Line } from './line';\nimport { Point } from './point';\nimport { Geometry } from './geometry';\nexport class Rectangle extends Geometry {\n    get left() {\n        return this.x;\n    }\n    get top() {\n        return this.y;\n    }\n    get right() {\n        return this.x + this.width;\n    }\n    get bottom() {\n        return this.y + this.height;\n    }\n    get origin() {\n        return new Point(this.x, this.y);\n    }\n    get topLeft() {\n        return new Point(this.x, this.y);\n    }\n    get topCenter() {\n        return new Point(this.x + this.width / 2, this.y);\n    }\n    get topRight() {\n        return new Point(this.x + this.width, this.y);\n    }\n    get center() {\n        return new Point(this.x + this.width / 2, this.y + this.height / 2);\n    }\n    get bottomLeft() {\n        return new Point(this.x, this.y + this.height);\n    }\n    get bottomCenter() {\n        return new Point(this.x + this.width / 2, this.y + this.height);\n    }\n    get bottomRight() {\n        return new Point(this.x + this.width, this.y + this.height);\n    }\n    get corner() {\n        return new Point(this.x + this.width, this.y + this.height);\n    }\n    get rightMiddle() {\n        return new Point(this.x + this.width, this.y + this.height / 2);\n    }\n    get leftMiddle() {\n        return new Point(this.x, this.y + this.height / 2);\n    }\n    get topLine() {\n        return new Line(this.topLeft, this.topRight);\n    }\n    get rightLine() {\n        return new Line(this.topRight, this.bottomRight);\n    }\n    get bottomLine() {\n        return new Line(this.bottomLeft, this.bottomRight);\n    }\n    get leftLine() {\n        return new Line(this.topLeft, this.bottomLeft);\n    }\n    constructor(x, y, width, height) {\n        super();\n        this.x = x == null ? 0 : x;\n        this.y = y == null ? 0 : y;\n        this.width = width == null ? 0 : width;\n        this.height = height == null ? 0 : height;\n    }\n    getOrigin() {\n        return this.origin;\n    }\n    getTopLeft() {\n        return this.topLeft;\n    }\n    getTopCenter() {\n        return this.topCenter;\n    }\n    getTopRight() {\n        return this.topRight;\n    }\n    getCenter() {\n        return this.center;\n    }\n    getCenterX() {\n        return this.x + this.width / 2;\n    }\n    getCenterY() {\n        return this.y + this.height / 2;\n    }\n    getBottomLeft() {\n        return this.bottomLeft;\n    }\n    getBottomCenter() {\n        return this.bottomCenter;\n    }\n    getBottomRight() {\n        return this.bottomRight;\n    }\n    getCorner() {\n        return this.corner;\n    }\n    getRightMiddle() {\n        return this.rightMiddle;\n    }\n    getLeftMiddle() {\n        return this.leftMiddle;\n    }\n    getTopLine() {\n        return this.topLine;\n    }\n    getRightLine() {\n        return this.rightLine;\n    }\n    getBottomLine() {\n        return this.bottomLine;\n    }\n    getLeftLine() {\n        return this.leftLine;\n    }\n    /**\n     * Returns a rectangle that is the bounding box of the rectangle.\n     *\n     * If `angle` is specified, the bounding box calculation will take into\n     * account the rotation of the rectangle by angle degrees around its center.\n     */\n    bbox(angle) {\n        if (!angle) {\n            return this.clone();\n        }\n        const rad = Angle.toRad(angle);\n        const st = Math.abs(Math.sin(rad));\n        const ct = Math.abs(Math.cos(rad));\n        const w = this.width * ct + this.height * st;\n        const h = this.width * st + this.height * ct;\n        return new Rectangle(this.x + (this.width - w) / 2, this.y + (this.height - h) / 2, w, h);\n    }\n    round(precision = 0) {\n        this.x = GeometryUtil.round(this.x, precision);\n        this.y = GeometryUtil.round(this.y, precision);\n        this.width = GeometryUtil.round(this.width, precision);\n        this.height = GeometryUtil.round(this.height, precision);\n        return this;\n    }\n    add(x, y, width, height) {\n        const rect = Rectangle.create(x, y, width, height);\n        const minX = Math.min(this.x, rect.x);\n        const minY = Math.min(this.y, rect.y);\n        const maxX = Math.max(this.x + this.width, rect.x + rect.width);\n        const maxY = Math.max(this.y + this.height, rect.y + rect.height);\n        this.x = minX;\n        this.y = minY;\n        this.width = maxX - minX;\n        this.height = maxY - minY;\n        return this;\n    }\n    update(x, y, width, height) {\n        const rect = Rectangle.create(x, y, width, height);\n        this.x = rect.x;\n        this.y = rect.y;\n        this.width = rect.width;\n        this.height = rect.height;\n        return this;\n    }\n    inflate(dx, dy) {\n        const w = dx;\n        const h = dy != null ? dy : dx;\n        this.x -= w;\n        this.y -= h;\n        this.width += 2 * w;\n        this.height += 2 * h;\n        return this;\n    }\n    snapToGrid(gx, gy) {\n        const origin = this.origin.snapToGrid(gx, gy);\n        const corner = this.corner.snapToGrid(gx, gy);\n        this.x = origin.x;\n        this.y = origin.y;\n        this.width = corner.x - origin.x;\n        this.height = corner.y - origin.y;\n        return this;\n    }\n    translate(tx, ty) {\n        const p = Point.create(tx, ty);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    }\n    scale(sx, sy, origin = new Point()) {\n        const pos = this.origin.scale(sx, sy, origin);\n        this.x = pos.x;\n        this.y = pos.y;\n        this.width *= sx;\n        this.height *= sy;\n        return this;\n    }\n    rotate(degree, center = this.getCenter()) {\n        if (degree !== 0) {\n            const rad = Angle.toRad(degree);\n            const cos = Math.cos(rad);\n            const sin = Math.sin(rad);\n            let p1 = this.getOrigin();\n            let p2 = this.getTopRight();\n            let p3 = this.getBottomRight();\n            let p4 = this.getBottomLeft();\n            p1 = Point.rotateEx(p1, cos, sin, center);\n            p2 = Point.rotateEx(p2, cos, sin, center);\n            p3 = Point.rotateEx(p3, cos, sin, center);\n            p4 = Point.rotateEx(p4, cos, sin, center);\n            const rect = new Rectangle(p1.x, p1.y, 0, 0);\n            rect.add(p2.x, p2.y, 0, 0);\n            rect.add(p3.x, p3.y, 0, 0);\n            rect.add(p4.x, p4.y, 0, 0);\n            this.update(rect);\n        }\n        return this;\n    }\n    rotate90() {\n        const t = (this.width - this.height) / 2;\n        this.x += t;\n        this.y -= t;\n        const tmp = this.width;\n        this.width = this.height;\n        this.height = tmp;\n        return this;\n    }\n    /**\n     * Translates the rectangle by `rect.x` and `rect.y` and expand it by\n     * `rect.width` and `rect.height`.\n     */\n    moveAndExpand(rect) {\n        const ref = Rectangle.clone(rect);\n        this.x += ref.x || 0;\n        this.y += ref.y || 0;\n        this.width += ref.width || 0;\n        this.height += ref.height || 0;\n        return this;\n    }\n    /**\n     * Returns an object where `sx` and `sy` give the maximum scaling that can be\n     * applied to the rectangle so that it would still fit into `limit`. If\n     * `origin` is specified, the rectangle is scaled around it; otherwise, it is\n     * scaled around its center.\n     */\n    getMaxScaleToFit(limit, origin = this.center) {\n        const rect = Rectangle.clone(limit);\n        const ox = origin.x;\n        const oy = origin.y;\n        // Find the maximal possible scale for all corners, so when the scale\n        // is applied the point is still inside the rectangle.\n        let sx1 = Infinity;\n        let sx2 = Infinity;\n        let sx3 = Infinity;\n        let sx4 = Infinity;\n        let sy1 = Infinity;\n        let sy2 = Infinity;\n        let sy3 = Infinity;\n        let sy4 = Infinity;\n        // Top Left\n        const p1 = rect.topLeft;\n        if (p1.x < ox) {\n            sx1 = (this.x - ox) / (p1.x - ox);\n        }\n        if (p1.y < oy) {\n            sy1 = (this.y - oy) / (p1.y - oy);\n        }\n        // Bottom Right\n        const p2 = rect.bottomRight;\n        if (p2.x > ox) {\n            sx2 = (this.x + this.width - ox) / (p2.x - ox);\n        }\n        if (p2.y > oy) {\n            sy2 = (this.y + this.height - oy) / (p2.y - oy);\n        }\n        // Top Right\n        const p3 = rect.topRight;\n        if (p3.x > ox) {\n            sx3 = (this.x + this.width - ox) / (p3.x - ox);\n        }\n        if (p3.y < oy) {\n            sy3 = (this.y - oy) / (p3.y - oy);\n        }\n        // Bottom Left\n        const p4 = rect.bottomLeft;\n        if (p4.x < ox) {\n            sx4 = (this.x - ox) / (p4.x - ox);\n        }\n        if (p4.y > oy) {\n            sy4 = (this.y + this.height - oy) / (p4.y - oy);\n        }\n        return {\n            sx: Math.min(sx1, sx2, sx3, sx4),\n            sy: Math.min(sy1, sy2, sy3, sy4),\n        };\n    }\n    /**\n     * Returns a number that specifies the maximum scaling that can be applied to\n     * the rectangle along both axes so that it would still fit into `limit`. If\n     * `origin` is specified, the rectangle is scaled around it; otherwise, it is\n     * scaled around its center.\n     */\n    getMaxUniformScaleToFit(limit, origin = this.center) {\n        const scale = this.getMaxScaleToFit(limit, origin);\n        return Math.min(scale.sx, scale.sy);\n    }\n    containsPoint(x, y) {\n        return GeometryUtil.containsPoint(this, Point.create(x, y));\n    }\n    containsRect(x, y, width, height) {\n        const b = Rectangle.create(x, y, width, height);\n        const x1 = this.x;\n        const y1 = this.y;\n        const w1 = this.width;\n        const h1 = this.height;\n        const x2 = b.x;\n        const y2 = b.y;\n        const w2 = b.width;\n        const h2 = b.height;\n        // one of the dimensions is 0\n        if (w1 === 0 || h1 === 0 || w2 === 0 || h2 === 0) {\n            return false;\n        }\n        return x2 >= x1 && y2 >= y1 && x2 + w2 <= x1 + w1 && y2 + h2 <= y1 + h1;\n    }\n    /**\n     * Returns an array of the intersection points of the rectangle and the line.\n     * Return `null` if no intersection exists.\n     */\n    intersectsWithLine(line) {\n        const rectLines = [\n            this.topLine,\n            this.rightLine,\n            this.bottomLine,\n            this.leftLine,\n        ];\n        const points = [];\n        const dedupeArr = [];\n        rectLines.forEach((l) => {\n            const p = line.intersectsWithLine(l);\n            if (p !== null && dedupeArr.indexOf(p.toString()) < 0) {\n                points.push(p);\n                dedupeArr.push(p.toString());\n            }\n        });\n        return points.length > 0 ? points : null;\n    }\n    /**\n     * Returns the point on the boundary of the rectangle that is the intersection\n     * of the rectangle with a line starting in the center the rectangle ending in\n     * the point `p`.\n     *\n     * If `angle` is specified, the intersection will take into account the\n     * rotation of the rectangle by `angle` degrees around its center.\n     */\n    intersectsWithLineFromCenterToPoint(p, angle) {\n        const ref = Point.clone(p);\n        const center = this.center;\n        let result = null;\n        if (angle != null && angle !== 0) {\n            ref.rotate(angle, center);\n        }\n        const sides = [this.topLine, this.rightLine, this.bottomLine, this.leftLine];\n        const connector = new Line(center, ref);\n        for (let i = sides.length - 1; i >= 0; i -= 1) {\n            const intersection = sides[i].intersectsWithLine(connector);\n            if (intersection !== null) {\n                result = intersection;\n                break;\n            }\n        }\n        if (result && angle != null && angle !== 0) {\n            result.rotate(-angle, center);\n        }\n        return result;\n    }\n    intersectsWithRect(x, y, width, height) {\n        const ref = Rectangle.create(x, y, width, height);\n        // no intersection\n        if (!this.isIntersectWithRect(ref)) {\n            return null;\n        }\n        const myOrigin = this.origin;\n        const myCorner = this.corner;\n        const rOrigin = ref.origin;\n        const rCorner = ref.corner;\n        const xx = Math.max(myOrigin.x, rOrigin.x);\n        const yy = Math.max(myOrigin.y, rOrigin.y);\n        return new Rectangle(xx, yy, Math.min(myCorner.x, rCorner.x) - xx, Math.min(myCorner.y, rCorner.y) - yy);\n    }\n    isIntersectWithRect(x, y, width, height) {\n        const ref = Rectangle.create(x, y, width, height);\n        const myOrigin = this.origin;\n        const myCorner = this.corner;\n        const rOrigin = ref.origin;\n        const rCorner = ref.corner;\n        if (rCorner.x <= myOrigin.x ||\n            rCorner.y <= myOrigin.y ||\n            rOrigin.x >= myCorner.x ||\n            rOrigin.y >= myCorner.y) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Normalize the rectangle, i.e. make it so that it has non-negative\n     * width and height. If width is less than `0`, the function swaps left and\n     * right corners and if height is less than `0`, the top and bottom corners\n     * are swapped.\n     */\n    normalize() {\n        let newx = this.x;\n        let newy = this.y;\n        let newwidth = this.width;\n        let newheight = this.height;\n        if (this.width < 0) {\n            newx = this.x + this.width;\n            newwidth = -this.width;\n        }\n        if (this.height < 0) {\n            newy = this.y + this.height;\n            newheight = -this.height;\n        }\n        this.x = newx;\n        this.y = newy;\n        this.width = newwidth;\n        this.height = newheight;\n        return this;\n    }\n    /**\n     * Returns a rectangle that is a union of this rectangle and rectangle `rect`.\n     */\n    union(rect) {\n        const ref = Rectangle.clone(rect);\n        const myOrigin = this.origin;\n        const myCorner = this.corner;\n        const rOrigin = ref.origin;\n        const rCorner = ref.corner;\n        const originX = Math.min(myOrigin.x, rOrigin.x);\n        const originY = Math.min(myOrigin.y, rOrigin.y);\n        const cornerX = Math.max(myCorner.x, rCorner.x);\n        const cornerY = Math.max(myCorner.y, rCorner.y);\n        return new Rectangle(originX, originY, cornerX - originX, cornerY - originY);\n    }\n    /**\n     * Returns a string (\"top\", \"left\", \"right\" or \"bottom\") denoting the side of\n     * the rectangle which is nearest to the point `p`.\n     */\n    getNearestSideToPoint(p) {\n        const ref = Point.clone(p);\n        const distLeft = ref.x - this.x;\n        const distRight = this.x + this.width - ref.x;\n        const distTop = ref.y - this.y;\n        const distBottom = this.y + this.height - ref.y;\n        let closest = distLeft;\n        let side = 'left';\n        if (distRight < closest) {\n            closest = distRight;\n            side = 'right';\n        }\n        if (distTop < closest) {\n            closest = distTop;\n            side = 'top';\n        }\n        if (distBottom < closest) {\n            side = 'bottom';\n        }\n        return side;\n    }\n    /**\n     * Returns a point on the boundary of the rectangle nearest to the point `p`.\n     */\n    getNearestPointToPoint(p) {\n        const ref = Point.clone(p);\n        if (this.containsPoint(ref)) {\n            const side = this.getNearestSideToPoint(ref);\n            if (side === 'left') {\n                return new Point(this.x, ref.y);\n            }\n            if (side === 'top') {\n                return new Point(ref.x, this.y);\n            }\n            if (side === 'right') {\n                return new Point(this.x + this.width, ref.y);\n            }\n            if (side === 'bottom') {\n                return new Point(ref.x, this.y + this.height);\n            }\n        }\n        return ref.adhereToRect(this);\n    }\n    equals(rect) {\n        return (rect != null &&\n            rect.x === this.x &&\n            rect.y === this.y &&\n            rect.width === this.width &&\n            rect.height === this.height);\n    }\n    clone() {\n        return new Rectangle(this.x, this.y, this.width, this.height);\n    }\n    toJSON() {\n        return { x: this.x, y: this.y, width: this.width, height: this.height };\n    }\n    serialize() {\n        return `${this.x} ${this.y} ${this.width} ${this.height}`;\n    }\n}\n(function (Rectangle) {\n    function isRectangle(instance) {\n        return instance != null && instance instanceof Rectangle;\n    }\n    Rectangle.isRectangle = isRectangle;\n})(Rectangle || (Rectangle = {}));\n(function (Rectangle) {\n    function isRectangleLike(o) {\n        return (o != null &&\n            typeof o === 'object' &&\n            typeof o.x === 'number' &&\n            typeof o.y === 'number' &&\n            typeof o.width === 'number' &&\n            typeof o.height === 'number');\n    }\n    Rectangle.isRectangleLike = isRectangleLike;\n})(Rectangle || (Rectangle = {}));\n(function (Rectangle) {\n    function create(x, y, width, height) {\n        if (x == null || typeof x === 'number') {\n            return new Rectangle(x, y, width, height);\n        }\n        return clone(x);\n    }\n    Rectangle.create = create;\n    function clone(rect) {\n        if (Rectangle.isRectangle(rect)) {\n            return rect.clone();\n        }\n        if (Array.isArray(rect)) {\n            return new Rectangle(rect[0], rect[1], rect[2], rect[3]);\n        }\n        return new Rectangle(rect.x, rect.y, rect.width, rect.height);\n    }\n    Rectangle.clone = clone;\n    /**\n     * Returns a new rectangle from the given ellipse.\n     */\n    function fromEllipse(ellipse) {\n        return new Rectangle(ellipse.x - ellipse.a, ellipse.y - ellipse.b, 2 * ellipse.a, 2 * ellipse.b);\n    }\n    Rectangle.fromEllipse = fromEllipse;\n    function fromSize(size) {\n        return new Rectangle(0, 0, size.width, size.height);\n    }\n    Rectangle.fromSize = fromSize;\n    function fromPositionAndSize(pos, size) {\n        return new Rectangle(pos.x, pos.y, size.width, size.height);\n    }\n    Rectangle.fromPositionAndSize = fromPositionAndSize;\n})(Rectangle || (Rectangle = {}));\n//# sourceMappingURL=rectangle.js.map","import { Point } from './point';\nimport { Geometry } from './geometry';\nimport { Rectangle } from './rectangle';\nexport class Line extends Geometry {\n    get center() {\n        return new Point((this.start.x + this.end.x) / 2, (this.start.y + this.end.y) / 2);\n    }\n    constructor(x1, y1, x2, y2) {\n        super();\n        if (typeof x1 === 'number' && typeof y1 === 'number') {\n            this.start = new Point(x1, y1);\n            this.end = new Point(x2, y2);\n        }\n        else {\n            this.start = Point.create(x1);\n            this.end = Point.create(y1);\n        }\n    }\n    getCenter() {\n        return this.center;\n    }\n    /**\n     * Rounds the line to the given `precision`.\n     */\n    round(precision = 0) {\n        this.start.round(precision);\n        this.end.round(precision);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.start.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.start.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    /**\n     * Rotate the line by `angle` around `origin`.\n     */\n    rotate(angle, origin) {\n        this.start.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    /**\n     * Scale the line by `sx` and `sy` about the given `origin`. If origin is not\n     * specified, the line is scaled around `0,0`.\n     */\n    scale(sx, sy, origin) {\n        this.start.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    /**\n     * Returns the length of the line.\n     */\n    length() {\n        return Math.sqrt(this.squaredLength());\n    }\n    /**\n     * Useful for distance comparisons in which real length is not necessary\n     * (saves one `Math.sqrt()` operation).\n     */\n    squaredLength() {\n        const dx = this.start.x - this.end.x;\n        const dy = this.start.y - this.end.y;\n        return dx * dx + dy * dy;\n    }\n    /**\n     * Scale the line so that it has the requested length. The start point of\n     * the line is preserved.\n     */\n    setLength(length) {\n        const total = this.length();\n        if (!total) {\n            return this;\n        }\n        const scale = length / total;\n        return this.scale(scale, scale, this.start);\n    }\n    parallel(distance) {\n        const line = this.clone();\n        if (!line.isDifferentiable()) {\n            return line;\n        }\n        const { start, end } = line;\n        const eRef = start.clone().rotate(270, end);\n        const sRef = end.clone().rotate(90, start);\n        start.move(sRef, distance);\n        end.move(eRef, distance);\n        return line;\n    }\n    /**\n     * Returns the vector of the line with length equal to length of the line.\n     */\n    vector() {\n        return new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n    }\n    /**\n     * Returns the angle of incline of the line.\n     *\n     * The function returns `NaN` if the start and end endpoints of the line\n     * both lie at the same coordinates(it is impossible to determine the angle\n     * of incline of a line that appears to be a point). The\n     * `line.isDifferentiable()` function may be used in advance to determine\n     * whether the angle of incline can be computed for a given line.\n     */\n    angle() {\n        const ref = new Point(this.start.x + 1, this.start.y);\n        return this.start.angleBetween(this.end, ref);\n    }\n    /**\n     * Returns a rectangle that is the bounding box of the line.\n     */\n    bbox() {\n        const left = Math.min(this.start.x, this.end.x);\n        const top = Math.min(this.start.y, this.end.y);\n        const right = Math.max(this.start.x, this.end.x);\n        const bottom = Math.max(this.start.y, this.end.y);\n        return new Rectangle(left, top, right - left, bottom - top);\n    }\n    /**\n     * Returns the bearing (cardinal direction) of the line.\n     *\n     * The return value is one of the following strings:\n     * 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW' and 'N'.\n     *\n     * The function returns 'N' if the two endpoints of the line are coincident.\n     */\n    bearing() {\n        return this.start.bearing(this.end);\n    }\n    /**\n     * Returns the point on the line that lies closest to point `p`.\n     */\n    closestPoint(p) {\n        return this.pointAt(this.closestPointNormalizedLength(p));\n    }\n    /**\n     * Returns the length of the line up to the point that lies closest to point `p`.\n     */\n    closestPointLength(p) {\n        return this.closestPointNormalizedLength(p) * this.length();\n    }\n    /**\n     * Returns a line that is tangent to the line at the point that lies closest\n     * to point `p`.\n     */\n    closestPointTangent(p) {\n        return this.tangentAt(this.closestPointNormalizedLength(p));\n    }\n    /**\n     * Returns the normalized length (distance from the start of the line / total\n     * line length) of the line up to the point that lies closest to point.\n     */\n    closestPointNormalizedLength(p) {\n        const product = this.vector().dot(new Line(this.start, p).vector());\n        const normalized = Math.min(1, Math.max(0, product / this.squaredLength()));\n        // normalized returns `NaN` if this line has zero length\n        if (Number.isNaN(normalized)) {\n            return 0;\n        }\n        return normalized;\n    }\n    /**\n     * Returns a point on the line that lies `rate` (normalized length) away from\n     * the beginning of the line.\n     */\n    pointAt(ratio) {\n        const start = this.start;\n        const end = this.end;\n        if (ratio <= 0) {\n            return start.clone();\n        }\n        if (ratio >= 1) {\n            return end.clone();\n        }\n        return start.lerp(end, ratio);\n    }\n    /**\n     * Returns a point on the line that lies length away from the beginning of\n     * the line.\n     */\n    pointAtLength(length) {\n        const start = this.start;\n        const end = this.end;\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false; // start calculation from end point\n            length = -length; // eslint-disable-line\n        }\n        const total = this.length();\n        if (length >= total) {\n            return fromStart ? end.clone() : start.clone();\n        }\n        const rate = (fromStart ? length : total - length) / total;\n        return this.pointAt(rate);\n    }\n    /**\n     * Divides the line into two lines at the point that lies `rate` (normalized\n     * length) away from the beginning of the line.\n     */\n    divideAt(ratio) {\n        const dividerPoint = this.pointAt(ratio);\n        return [\n            new Line(this.start, dividerPoint),\n            new Line(dividerPoint, this.end),\n        ];\n    }\n    /**\n     * Divides the line into two lines at the point that lies length away from\n     * the beginning of the line.\n     */\n    divideAtLength(length) {\n        const dividerPoint = this.pointAtLength(length);\n        return [\n            new Line(this.start, dividerPoint),\n            new Line(dividerPoint, this.end),\n        ];\n    }\n    /**\n     * Returns `true` if the point `p` lies on the line. Return `false` otherwise.\n     */\n    containsPoint(p) {\n        const start = this.start;\n        const end = this.end;\n        // cross product of 0 indicates that this line and\n        // the vector to `p` are collinear.\n        if (start.cross(p, end) !== 0) {\n            return false;\n        }\n        const length = this.length();\n        if (new Line(start, p).length() > length) {\n            return false;\n        }\n        if (new Line(p, end).length() > length) {\n            return false;\n        }\n        return true;\n    }\n    intersect(shape, options) {\n        const ret = shape.intersectsWithLine(this, options);\n        if (ret) {\n            return Array.isArray(ret) ? ret : [ret];\n        }\n        return null;\n    }\n    /**\n     * Returns the intersection point of the line with another line. Returns\n     * `null` if no intersection exists.\n     */\n    intersectsWithLine(line) {\n        const pt1Dir = new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n        const pt2Dir = new Point(line.end.x - line.start.x, line.end.y - line.start.y);\n        const det = pt1Dir.x * pt2Dir.y - pt1Dir.y * pt2Dir.x;\n        const deltaPt = new Point(line.start.x - this.start.x, line.start.y - this.start.y);\n        const alpha = deltaPt.x * pt2Dir.y - deltaPt.y * pt2Dir.x;\n        const beta = deltaPt.x * pt1Dir.y - deltaPt.y * pt1Dir.x;\n        if (det === 0 || alpha * det < 0 || beta * det < 0) {\n            return null;\n        }\n        if (det > 0) {\n            if (alpha > det || beta > det) {\n                return null;\n            }\n        }\n        else if (alpha < det || beta < det) {\n            return null;\n        }\n        return new Point(this.start.x + (alpha * pt1Dir.x) / det, this.start.y + (alpha * pt1Dir.y) / det);\n    }\n    /**\n     * Returns `true` if a tangent line can be found for the line.\n     *\n     * Tangents cannot be found if both of the line endpoints are coincident\n     * (the line appears to be a point).\n     */\n    isDifferentiable() {\n        return !this.start.equals(this.end);\n    }\n    /**\n     * Returns the perpendicular distance between the line and point. The\n     * distance is positive if the point lies to the right of the line, negative\n     * if the point lies to the left of the line, and `0` if the point lies on\n     * the line.\n     */\n    pointOffset(p) {\n        const ref = Point.clone(p);\n        const start = this.start;\n        const end = this.end;\n        const determinant = (end.x - start.x) * (ref.y - start.y) -\n            (end.y - start.y) * (ref.x - start.x);\n        return determinant / this.length();\n    }\n    pointSquaredDistance(x, y) {\n        const p = Point.create(x, y);\n        return this.closestPoint(p).squaredDistance(p);\n    }\n    pointDistance(x, y) {\n        const p = Point.create(x, y);\n        return this.closestPoint(p).distance(p);\n    }\n    /**\n     * Returns a line tangent to the line at point that lies `rate` (normalized\n     * length) away from the beginning of the line.\n     */\n    tangentAt(ratio) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        const start = this.start;\n        const end = this.end;\n        const tangentStart = this.pointAt(ratio);\n        const tangentLine = new Line(start, end);\n        tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y);\n        return tangentLine;\n    }\n    /**\n     * Returns a line tangent to the line at point that lies `length` away from\n     * the beginning of the line.\n     */\n    tangentAtLength(length) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        const start = this.start;\n        const end = this.end;\n        const tangentStart = this.pointAtLength(length);\n        const tangentLine = new Line(start, end);\n        tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y);\n        return tangentLine;\n    }\n    relativeCcw(x, y) {\n        const ref = Point.create(x, y);\n        let dx1 = ref.x - this.start.x;\n        let dy1 = ref.y - this.start.y;\n        const dx2 = this.end.x - this.start.x;\n        const dy2 = this.end.y - this.start.y;\n        let ccw = dx1 * dy2 - dy1 * dx2;\n        if (ccw === 0) {\n            ccw = dx1 * dx2 + dy1 * dy2;\n            if (ccw > 0.0) {\n                dx1 -= dx2;\n                dy1 -= dy2;\n                ccw = dx1 * dx2 + dy1 * dy2;\n                if (ccw < 0.0) {\n                    ccw = 0.0;\n                }\n            }\n        }\n        return ccw < 0.0 ? -1 : ccw > 0.0 ? 1 : 0;\n    }\n    /**\n     * Return `true` if the line equals the other line.\n     */\n    equals(l) {\n        return (l != null &&\n            this.start.x === l.start.x &&\n            this.start.y === l.start.y &&\n            this.end.x === l.end.x &&\n            this.end.y === l.end.y);\n    }\n    /**\n     * Returns another line which is a clone of the line.\n     */\n    clone() {\n        return new Line(this.start, this.end);\n    }\n    toJSON() {\n        return { start: this.start.toJSON(), end: this.end.toJSON() };\n    }\n    serialize() {\n        return [this.start.serialize(), this.end.serialize()].join(' ');\n    }\n}\n(function (Line) {\n    function isLine(instance) {\n        return instance != null && instance instanceof Line;\n    }\n    Line.isLine = isLine;\n})(Line || (Line = {}));\n//# sourceMappingURL=line.js.map","import { Point } from './point';\nimport { Rectangle } from './rectangle';\nimport { Geometry } from './geometry';\nexport class Ellipse extends Geometry {\n    get center() {\n        return new Point(this.x, this.y);\n    }\n    constructor(x, y, a, b) {\n        super();\n        this.x = x == null ? 0 : x;\n        this.y = y == null ? 0 : y;\n        this.a = a == null ? 0 : a;\n        this.b = b == null ? 0 : b;\n    }\n    /**\n     * Returns a rectangle that is the bounding box of the ellipse.\n     */\n    bbox() {\n        return Rectangle.fromEllipse(this);\n    }\n    /**\n     * Returns a point that is the center of the ellipse.\n     */\n    getCenter() {\n        return this.center;\n    }\n    inflate(dx, dy) {\n        const w = dx;\n        const h = dy != null ? dy : dx;\n        this.a += 2 * w;\n        this.b += 2 * h;\n        return this;\n    }\n    normalizedDistance(x, y) {\n        const ref = Point.create(x, y);\n        const dx = ref.x - this.x;\n        const dy = ref.y - this.y;\n        const a = this.a;\n        const b = this.b;\n        return (dx * dx) / (a * a) + (dy * dy) / (b * b);\n    }\n    containsPoint(x, y) {\n        return this.normalizedDistance(x, y) <= 1;\n    }\n    /**\n     * Returns an array of the intersection points of the ellipse and the line.\n     * Returns `null` if no intersection exists.\n     */\n    intersectsWithLine(line) {\n        const intersections = [];\n        const rx = this.a;\n        const ry = this.b;\n        const a1 = line.start;\n        const a2 = line.end;\n        const dir = line.vector();\n        const diff = a1.diff(new Point(this.x, this.y));\n        const mDir = new Point(dir.x / (rx * rx), dir.y / (ry * ry));\n        const mDiff = new Point(diff.x / (rx * rx), diff.y / (ry * ry));\n        const a = dir.dot(mDir);\n        const b = dir.dot(mDiff);\n        const c = diff.dot(mDiff) - 1.0;\n        const d = b * b - a * c;\n        if (d < 0) {\n            return null;\n        }\n        if (d > 0) {\n            const root = Math.sqrt(d);\n            const ta = (-b - root) / a;\n            const tb = (-b + root) / a;\n            if ((ta < 0 || ta > 1) && (tb < 0 || tb > 1)) {\n                // outside\n                return null;\n            }\n            if (ta >= 0 && ta <= 1) {\n                intersections.push(a1.lerp(a2, ta));\n            }\n            if (tb >= 0 && tb <= 1) {\n                intersections.push(a1.lerp(a2, tb));\n            }\n        }\n        else {\n            const t = -b / a;\n            if (t >= 0 && t <= 1) {\n                intersections.push(a1.lerp(a2, t));\n            }\n            else {\n                // outside\n                return null;\n            }\n        }\n        return intersections;\n    }\n    /**\n     * Returns the point on the boundary of the ellipse that is the\n     * intersection of the ellipse with a line starting in the center\n     * of the ellipse ending in the point `p`.\n     *\n     * If angle is specified, the intersection will take into account\n     * the rotation of the ellipse by angle degrees around its center.\n     */\n    intersectsWithLineFromCenterToPoint(p, angle = 0) {\n        const ref = Point.clone(p);\n        if (angle) {\n            ref.rotate(angle, this.getCenter());\n        }\n        const dx = ref.x - this.x;\n        const dy = ref.y - this.y;\n        let result;\n        if (dx === 0) {\n            result = this.bbox().getNearestPointToPoint(ref);\n            if (angle) {\n                return result.rotate(-angle, this.getCenter());\n            }\n            return result;\n        }\n        const m = dy / dx;\n        const mSquared = m * m;\n        const aSquared = this.a * this.a;\n        const bSquared = this.b * this.b;\n        let x = Math.sqrt(1 / (1 / aSquared + mSquared / bSquared));\n        x = dx < 0 ? -x : x;\n        const y = m * x;\n        result = new Point(this.x + x, this.y + y);\n        if (angle) {\n            return result.rotate(-angle, this.getCenter());\n        }\n        return result;\n    }\n    /**\n     * Returns the angle between the x-axis and the tangent from a point. It is\n     * valid for points lying on the ellipse boundary only.\n     */\n    tangentTheta(p) {\n        const ref = Point.clone(p);\n        const x0 = ref.x;\n        const y0 = ref.y;\n        const a = this.a;\n        const b = this.b;\n        const center = this.bbox().center;\n        const cx = center.x;\n        const cy = center.y;\n        const refPointDelta = 30;\n        const q1 = x0 > center.x + a / 2;\n        const q3 = x0 < center.x - a / 2;\n        let x;\n        let y;\n        if (q1 || q3) {\n            y = x0 > center.x ? y0 - refPointDelta : y0 + refPointDelta;\n            x =\n                (a * a) / (x0 - cx) -\n                    (a * a * (y0 - cy) * (y - cy)) / (b * b * (x0 - cx)) +\n                    cx;\n        }\n        else {\n            x = y0 > center.y ? x0 + refPointDelta : x0 - refPointDelta;\n            y =\n                (b * b) / (y0 - cy) -\n                    (b * b * (x0 - cx) * (x - cx)) / (a * a * (y0 - cy)) +\n                    cy;\n        }\n        return new Point(x, y).theta(ref);\n    }\n    scale(sx, sy) {\n        this.a *= sx;\n        this.b *= sy;\n        return this;\n    }\n    rotate(angle, origin) {\n        const rect = Rectangle.fromEllipse(this);\n        rect.rotate(angle, origin);\n        const ellipse = Ellipse.fromRect(rect);\n        this.a = ellipse.a;\n        this.b = ellipse.b;\n        this.x = ellipse.x;\n        this.y = ellipse.y;\n        return this;\n    }\n    translate(dx, dy) {\n        const p = Point.create(dx, dy);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    }\n    equals(ellipse) {\n        return (ellipse != null &&\n            ellipse.x === this.x &&\n            ellipse.y === this.y &&\n            ellipse.a === this.a &&\n            ellipse.b === this.b);\n    }\n    clone() {\n        return new Ellipse(this.x, this.y, this.a, this.b);\n    }\n    toJSON() {\n        return { x: this.x, y: this.y, a: this.a, b: this.b };\n    }\n    serialize() {\n        return `${this.x} ${this.y} ${this.a} ${this.b}`;\n    }\n}\n(function (Ellipse) {\n    function isEllipse(instance) {\n        return instance != null && instance instanceof Ellipse;\n    }\n    Ellipse.isEllipse = isEllipse;\n})(Ellipse || (Ellipse = {}));\n(function (Ellipse) {\n    function create(x, y, a, b) {\n        if (x == null || typeof x === 'number') {\n            return new Ellipse(x, y, a, b);\n        }\n        return parse(x);\n    }\n    Ellipse.create = create;\n    function parse(e) {\n        if (Ellipse.isEllipse(e)) {\n            return e.clone();\n        }\n        if (Array.isArray(e)) {\n            return new Ellipse(e[0], e[1], e[2], e[3]);\n        }\n        return new Ellipse(e.x, e.y, e.a, e.b);\n    }\n    Ellipse.parse = parse;\n    function fromRect(rect) {\n        const center = rect.center;\n        return new Ellipse(center.x, center.y, rect.width / 2, rect.height / 2);\n    }\n    Ellipse.fromRect = fromRect;\n})(Ellipse || (Ellipse = {}));\n//# sourceMappingURL=ellipse.js.map","/* eslint-disable default-param-last */\nimport { Point } from '../point';\nconst regexSupportedData = new RegExp(`^[\\\\s\\\\dLMCZz,.]*$`); // eslint-disable-line prefer-regex-literals\nexport function isValid(data) {\n    if (typeof data !== 'string') {\n        return false;\n    }\n    return regexSupportedData.test(data);\n}\n/**\n * Returns the remainder of division of `n` by `m`. You should use this\n * instead of the built-in operation as the built-in operation does not\n * properly handle negative numbers.\n */\nfunction mod(n, m) {\n    return ((n % m) + m) % m;\n}\nfunction draw(points, round, initialMove, close, exclude) {\n    const data = [];\n    const end = points[points.length - 1];\n    const rounded = round != null && round > 0;\n    const arcSize = round || 0;\n    // Adds virtual waypoint in the center between start and end point\n    if (close && rounded) {\n        points = points.slice(); // eslint-disable-line\n        const p0 = points[0];\n        const wp = new Point(end.x + (p0.x - end.x) / 2, end.y + (p0.y - end.y) / 2);\n        points.splice(0, 0, wp);\n    }\n    let pt = points[0];\n    let i = 1;\n    // Draws the line segments\n    if (initialMove) {\n        data.push('M', pt.x, pt.y);\n    }\n    else {\n        data.push('L', pt.x, pt.y);\n    }\n    while (i < (close ? points.length : points.length - 1)) {\n        let tmp = points[mod(i, points.length)];\n        let dx = pt.x - tmp.x;\n        let dy = pt.y - tmp.y;\n        if (rounded &&\n            (dx !== 0 || dy !== 0) &&\n            (exclude == null || exclude.indexOf(i - 1) < 0)) {\n            // Draws a line from the last point to the current\n            // point with a spacing of size off the current point\n            // into direction of the last point\n            let dist = Math.sqrt(dx * dx + dy * dy);\n            const nx1 = (dx * Math.min(arcSize, dist / 2)) / dist;\n            const ny1 = (dy * Math.min(arcSize, dist / 2)) / dist;\n            const x1 = tmp.x + nx1;\n            const y1 = tmp.y + ny1;\n            data.push('L', x1, y1);\n            // Draws a curve from the last point to the current\n            // point with a spacing of size off the current point\n            // into direction of the next point\n            let next = points[mod(i + 1, points.length)];\n            // Uses next non-overlapping point\n            while (i < points.length - 2 &&\n                Math.round(next.x - tmp.x) === 0 &&\n                Math.round(next.y - tmp.y) === 0) {\n                next = points[mod(i + 2, points.length)];\n                i += 1;\n            }\n            dx = next.x - tmp.x;\n            dy = next.y - tmp.y;\n            dist = Math.max(1, Math.sqrt(dx * dx + dy * dy));\n            const nx2 = (dx * Math.min(arcSize, dist / 2)) / dist;\n            const ny2 = (dy * Math.min(arcSize, dist / 2)) / dist;\n            const x2 = tmp.x + nx2;\n            const y2 = tmp.y + ny2;\n            data.push('Q', tmp.x, tmp.y, x2, y2);\n            tmp = new Point(x2, y2);\n        }\n        else {\n            data.push('L', tmp.x, tmp.y);\n        }\n        pt = tmp;\n        i += 1;\n    }\n    if (close) {\n        data.push('Z');\n    }\n    else {\n        data.push('L', end.x, end.y);\n    }\n    return data.map((v) => (typeof v === 'string' ? v : +v.toFixed(3))).join(' ');\n}\nexport function drawPoints(points, options = {}) {\n    const pts = [];\n    if (points && points.length) {\n        points.forEach((p) => {\n            if (Array.isArray(p)) {\n                pts.push({ x: p[0], y: p[1] });\n            }\n            else {\n                pts.push({ x: p.x, y: p.y });\n            }\n        });\n    }\n    return draw(pts, options.round, options.initialMove == null || options.initialMove, options.close, options.exclude);\n}\n/**\n * Converts the given arc to a series of curves.\n */\nexport function arcToCurves(x0, y0, r1, r2, angle = 0, largeArcFlag = 0, sweepFlag = 0, x, y) {\n    if (r1 === 0 || r2 === 0) {\n        return [];\n    }\n    x -= x0; // eslint-disable-line\n    y -= y0; // eslint-disable-line\n    r1 = Math.abs(r1); // eslint-disable-line\n    r2 = Math.abs(r2); // eslint-disable-line\n    const ctx = -x / 2;\n    const cty = -y / 2;\n    const cpsi = Math.cos((angle * Math.PI) / 180);\n    const spsi = Math.sin((angle * Math.PI) / 180);\n    const rxd = cpsi * ctx + spsi * cty;\n    const ryd = -1 * spsi * ctx + cpsi * cty;\n    const rxdd = rxd * rxd;\n    const rydd = ryd * ryd;\n    const r1x = r1 * r1;\n    const r2y = r2 * r2;\n    const lamda = rxdd / r1x + rydd / r2y;\n    let sds;\n    if (lamda > 1) {\n        r1 = Math.sqrt(lamda) * r1; // eslint-disable-line\n        r2 = Math.sqrt(lamda) * r2; // eslint-disable-line\n        sds = 0;\n    }\n    else {\n        let seif = 1;\n        if (largeArcFlag === sweepFlag) {\n            seif = -1;\n        }\n        sds =\n            seif *\n                Math.sqrt((r1x * r2y - r1x * rydd - r2y * rxdd) / (r1x * rydd + r2y * rxdd));\n    }\n    const txd = (sds * r1 * ryd) / r2;\n    const tyd = (-1 * sds * r2 * rxd) / r1;\n    const tx = cpsi * txd - spsi * tyd + x / 2;\n    const ty = spsi * txd + cpsi * tyd + y / 2;\n    let rad = Math.atan2((ryd - tyd) / r2, (rxd - txd) / r1) - Math.atan2(0, 1);\n    let s1 = rad >= 0 ? rad : 2 * Math.PI + rad;\n    rad =\n        Math.atan2((-ryd - tyd) / r2, (-rxd - txd) / r1) -\n            Math.atan2((ryd - tyd) / r2, (rxd - txd) / r1);\n    let dr = rad >= 0 ? rad : 2 * Math.PI + rad;\n    if (sweepFlag === 0 && dr > 0) {\n        dr -= 2 * Math.PI;\n    }\n    else if (sweepFlag !== 0 && dr < 0) {\n        dr += 2 * Math.PI;\n    }\n    const sse = (dr * 2) / Math.PI;\n    const seg = Math.ceil(sse < 0 ? -1 * sse : sse);\n    const segr = dr / seg;\n    const t = ((8 / 3) * Math.sin(segr / 4) * Math.sin(segr / 4)) / Math.sin(segr / 2);\n    const cpsir1 = cpsi * r1;\n    const cpsir2 = cpsi * r2;\n    const spsir1 = spsi * r1;\n    const spsir2 = spsi * r2;\n    let mc = Math.cos(s1);\n    let ms = Math.sin(s1);\n    let x2 = -t * (cpsir1 * ms + spsir2 * mc);\n    let y2 = -t * (spsir1 * ms - cpsir2 * mc);\n    let x3 = 0;\n    let y3 = 0;\n    const result = [];\n    for (let n = 0; n < seg; n += 1) {\n        s1 += segr;\n        mc = Math.cos(s1);\n        ms = Math.sin(s1);\n        x3 = cpsir1 * mc - spsir2 * ms + tx;\n        y3 = spsir1 * mc + cpsir2 * ms + ty;\n        const dx = -t * (cpsir1 * ms + spsir2 * mc);\n        const dy = -t * (spsir1 * ms - cpsir2 * mc);\n        // CurveTo updates x0, y0 so need to restore it\n        const index = n * 6;\n        result[index] = Number(x2 + x0);\n        result[index + 1] = Number(y2 + y0);\n        result[index + 2] = Number(x3 - dx + x0);\n        result[index + 3] = Number(y3 - dy + y0);\n        result[index + 4] = Number(x3 + x0);\n        result[index + 5] = Number(y3 + y0);\n        x2 = x3 + dx;\n        y2 = y3 + dy;\n    }\n    return result.map((num) => +num.toFixed(2));\n}\nexport function drawArc(startX, startY, rx, ry, xAxisRotation = 0, largeArcFlag = 0, sweepFlag = 0, stopX, stopY) {\n    const data = [];\n    const points = arcToCurves(startX, startY, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, stopX, stopY);\n    if (points != null) {\n        for (let i = 0, ii = points.length; i < ii; i += 6) {\n            data.push('C', points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5]);\n        }\n    }\n    return data.join(' ');\n}\n//# sourceMappingURL=util.js.map","/* eslint-disable no-constructor-return */\nimport { Line } from './line';\nimport { Point } from './point';\nimport { Rectangle } from './rectangle';\nimport { Geometry } from './geometry';\nexport class Polyline extends Geometry {\n    get start() {\n        return this.points[0] || null;\n    }\n    get end() {\n        return this.points[this.points.length - 1] || null;\n    }\n    constructor(points) {\n        super();\n        if (points != null) {\n            if (typeof points === 'string') {\n                return Polyline.parse(points);\n            }\n            this.points = points.map((p) => Point.create(p));\n        }\n        else {\n            this.points = [];\n        }\n    }\n    scale(sx, sy, origin = new Point()) {\n        this.points.forEach((p) => p.scale(sx, sy, origin));\n        return this;\n    }\n    rotate(angle, origin) {\n        this.points.forEach((p) => p.rotate(angle, origin));\n        return this;\n    }\n    translate(dx, dy) {\n        const t = Point.create(dx, dy);\n        this.points.forEach((p) => p.translate(t.x, t.y));\n        return this;\n    }\n    round(precision = 0) {\n        this.points.forEach((p) => p.round(precision));\n        return this;\n    }\n    bbox() {\n        if (this.points.length === 0) {\n            return new Rectangle();\n        }\n        let x1 = Infinity;\n        let x2 = -Infinity;\n        let y1 = Infinity;\n        let y2 = -Infinity;\n        const points = this.points;\n        for (let i = 0, ii = points.length; i < ii; i += 1) {\n            const point = points[i];\n            const x = point.x;\n            const y = point.y;\n            if (x < x1)\n                x1 = x;\n            if (x > x2)\n                x2 = x;\n            if (y < y1)\n                y1 = y;\n            if (y > y2)\n                y2 = y;\n        }\n        return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    }\n    closestPoint(p) {\n        const cpLength = this.closestPointLength(p);\n        return this.pointAtLength(cpLength);\n    }\n    closestPointLength(p) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0 || count === 1) {\n            return 0;\n        }\n        let length = 0;\n        let cpLength = 0;\n        let minSqrDistance = Infinity;\n        for (let i = 0, ii = count - 1; i < ii; i += 1) {\n            const line = new Line(points[i], points[i + 1]);\n            const lineLength = line.length();\n            const cpNormalizedLength = line.closestPointNormalizedLength(p);\n            const cp = line.pointAt(cpNormalizedLength);\n            const sqrDistance = cp.squaredDistance(p);\n            if (sqrDistance < minSqrDistance) {\n                minSqrDistance = sqrDistance;\n                cpLength = length + cpNormalizedLength * lineLength;\n            }\n            length += lineLength;\n        }\n        return cpLength;\n    }\n    closestPointNormalizedLength(p) {\n        const length = this.length();\n        if (length === 0) {\n            return 0;\n        }\n        const cpLength = this.closestPointLength(p);\n        return cpLength / length;\n    }\n    closestPointTangent(p) {\n        const cpLength = this.closestPointLength(p);\n        return this.tangentAtLength(cpLength);\n    }\n    containsPoint(p) {\n        if (this.points.length === 0) {\n            return false;\n        }\n        const ref = Point.clone(p);\n        const x = ref.x;\n        const y = ref.y;\n        const points = this.points;\n        const count = points.length;\n        let startIndex = count - 1;\n        let intersectionCount = 0;\n        for (let endIndex = 0; endIndex < count; endIndex += 1) {\n            const start = points[startIndex];\n            const end = points[endIndex];\n            if (ref.equals(start)) {\n                return true;\n            }\n            const segment = new Line(start, end);\n            if (segment.containsPoint(p)) {\n                return true;\n            }\n            // do we have an intersection?\n            if ((y <= start.y && y > end.y) || (y > start.y && y <= end.y)) {\n                // this conditional branch IS NOT entered when `segment` is collinear/coincident with `ray`\n                // (when `y === start.y === end.y`)\n                // this conditional branch IS entered when `segment` touches `ray` at only one point\n                // (e.g. when `y === start.y !== end.y`)\n                // since this branch is entered again for the following segment, the two touches cancel out\n                const xDifference = start.x - x > end.x - x ? start.x - x : end.x - x;\n                if (xDifference >= 0) {\n                    // segment lies at least partially to the right of `p`\n                    const rayEnd = new Point(x + xDifference, y); // right\n                    const ray = new Line(p, rayEnd);\n                    if (segment.intersectsWithLine(ray)) {\n                        // an intersection was detected to the right of `p`\n                        intersectionCount += 1;\n                    }\n                } // else: `segment` lies completely to the left of `p` (i.e. no intersection to the right)\n            }\n            // move to check the next polyline segment\n            startIndex = endIndex;\n        }\n        // returns `true` for odd numbers of intersections (even-odd algorithm)\n        return intersectionCount % 2 === 1;\n    }\n    intersectsWithLine(line) {\n        const intersections = [];\n        for (let i = 0, n = this.points.length - 1; i < n; i += 1) {\n            const a = this.points[i];\n            const b = this.points[i + 1];\n            const int = line.intersectsWithLine(new Line(a, b));\n            if (int) {\n                intersections.push(int);\n            }\n        }\n        return intersections.length > 0 ? intersections : null;\n    }\n    isDifferentiable() {\n        for (let i = 0, ii = this.points.length - 1; i < ii; i += 1) {\n            const a = this.points[i];\n            const b = this.points[i + 1];\n            const line = new Line(a, b);\n            if (line.isDifferentiable()) {\n                return true;\n            }\n        }\n        return false;\n    }\n    length() {\n        let len = 0;\n        for (let i = 0, ii = this.points.length - 1; i < ii; i += 1) {\n            const a = this.points[i];\n            const b = this.points[i + 1];\n            len += a.distance(b);\n        }\n        return len;\n    }\n    pointAt(ratio) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0) {\n            return null;\n        }\n        if (count === 1) {\n            return points[0].clone();\n        }\n        if (ratio <= 0) {\n            return points[0].clone();\n        }\n        if (ratio >= 1) {\n            return points[count - 1].clone();\n        }\n        const total = this.length();\n        const length = total * ratio;\n        return this.pointAtLength(length);\n    }\n    pointAtLength(length) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0) {\n            return null;\n        }\n        if (count === 1) {\n            return points[0].clone();\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        let tmp = 0;\n        for (let i = 0, ii = count - 1; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const a = points[index];\n            const b = points[index + 1];\n            const l = new Line(a, b);\n            const d = a.distance(b);\n            if (length <= tmp + d) {\n                return l.pointAtLength((fromStart ? 1 : -1) * (length - tmp));\n            }\n            tmp += d;\n        }\n        const lastPoint = fromStart ? points[count - 1] : points[0];\n        return lastPoint.clone();\n    }\n    tangentAt(ratio) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0 || count === 1) {\n            return null;\n        }\n        if (ratio < 0) {\n            ratio = 0; // eslint-disable-line\n        }\n        if (ratio > 1) {\n            ratio = 1; // eslint-disable-line\n        }\n        const total = this.length();\n        const length = total * ratio;\n        return this.tangentAtLength(length);\n    }\n    tangentAtLength(length) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0 || count === 1) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        let lastValidLine;\n        let tmp = 0;\n        for (let i = 0, ii = count - 1; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const a = points[index];\n            const b = points[index + 1];\n            const l = new Line(a, b);\n            const d = a.distance(b);\n            if (l.isDifferentiable()) {\n                // has a tangent line (line length is not 0)\n                if (length <= tmp + d) {\n                    return l.tangentAtLength((fromStart ? 1 : -1) * (length - tmp));\n                }\n                lastValidLine = l;\n            }\n            tmp += d;\n        }\n        if (lastValidLine) {\n            const ratio = fromStart ? 1 : 0;\n            return lastValidLine.tangentAt(ratio);\n        }\n        return null;\n    }\n    simplify(\n    // TODO: Accept startIndex and endIndex to specify where to start and end simplification\n    options = {}) {\n        const points = this.points;\n        // we need at least 3 points\n        if (points.length < 3) {\n            return this;\n        }\n        const threshold = options.threshold || 0;\n        // start at the beginning of the polyline and go forward\n        let currentIndex = 0;\n        // we need at least one intermediate point (3 points) in every iteration\n        // as soon as that stops being true, we know we reached the end of the polyline\n        while (points[currentIndex + 2]) {\n            const firstIndex = currentIndex;\n            const middleIndex = currentIndex + 1;\n            const lastIndex = currentIndex + 2;\n            const firstPoint = points[firstIndex];\n            const middlePoint = points[middleIndex];\n            const lastPoint = points[lastIndex];\n            const chord = new Line(firstPoint, lastPoint); // = connection between first and last point\n            const closestPoint = chord.closestPoint(middlePoint); // = closest point on chord from middle point\n            const closestPointDistance = closestPoint.distance(middlePoint);\n            if (closestPointDistance <= threshold) {\n                // middle point is close enough to the chord = simplify\n                // 1) remove middle point:\n                points.splice(middleIndex, 1);\n                // 2) in next iteration, investigate the newly-created triplet of points\n                //    - do not change `currentIndex`\n                //    = (first point stays, point after removed point becomes middle point)\n            }\n            else {\n                // middle point is far from the chord\n                // 1) preserve middle point\n                // 2) in next iteration, move `currentIndex` by one step:\n                currentIndex += 1;\n                //    = (point after first point becomes first point)\n            }\n        }\n        // `points` array was modified in-place\n        return this;\n    }\n    toHull() {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0) {\n            return new Polyline();\n        }\n        // Step 1: find the starting point -- point with\n        // the lowest y (if equality, highest x).\n        let startPoint = points[0];\n        for (let i = 1; i < count; i += 1) {\n            if (points[i].y < startPoint.y) {\n                startPoint = points[i];\n            }\n            else if (points[i].y === startPoint.y && points[i].x > startPoint.x) {\n                startPoint = points[i];\n            }\n        }\n        // Step 2: sort the list of points by angle between line\n        // from start point to current point and the x-axis (theta).\n        // Step 2a: create the point records = [point, originalIndex, angle]\n        const sortedRecords = [];\n        for (let i = 0; i < count; i += 1) {\n            let angle = startPoint.theta(points[i]);\n            if (angle === 0) {\n                // Give highest angle to start point.\n                // The start point will end up at end of sorted list.\n                // The start point will end up at beginning of hull points list.\n                angle = 360;\n            }\n            sortedRecords.push([points[i], i, angle]);\n        }\n        // Step 2b: sort the list in place\n        sortedRecords.sort((record1, record2) => {\n            let ret = record1[2] - record2[2];\n            if (ret === 0) {\n                ret = record2[1] - record1[1];\n            }\n            return ret;\n        });\n        // Step 2c: duplicate start record from the top of\n        // the stack to the bottom of the stack.\n        if (sortedRecords.length > 2) {\n            const startPoint = sortedRecords[sortedRecords.length - 1];\n            sortedRecords.unshift(startPoint);\n        }\n        // Step 3\n        // ------\n        // Step 3a: go through sorted points in order and find those with\n        // right turns, and we want to get our results in clockwise order.\n        // Dictionary of points with left turns - cannot be on the hull.\n        const insidePoints = {};\n        // Stack of records with right turns - hull point candidates.\n        const hullRecords = [];\n        const getKey = (record) => `${record[0].toString()}@${record[1]}`;\n        while (sortedRecords.length !== 0) {\n            const currentRecord = sortedRecords.pop();\n            const currentPoint = currentRecord[0];\n            // Check if point has already been discarded.\n            if (insidePoints[getKey(currentRecord)]) {\n                continue;\n            }\n            let correctTurnFound = false;\n            while (!correctTurnFound) {\n                if (hullRecords.length < 2) {\n                    // Not enough points for comparison, just add current point.\n                    hullRecords.push(currentRecord);\n                    correctTurnFound = true;\n                }\n                else {\n                    const lastHullRecord = hullRecords.pop();\n                    const lastHullPoint = lastHullRecord[0];\n                    const secondLastHullRecord = hullRecords.pop();\n                    const secondLastHullPoint = secondLastHullRecord[0];\n                    const crossProduct = secondLastHullPoint.cross(lastHullPoint, currentPoint);\n                    if (crossProduct < 0) {\n                        // Found a right turn.\n                        hullRecords.push(secondLastHullRecord);\n                        hullRecords.push(lastHullRecord);\n                        hullRecords.push(currentRecord);\n                        correctTurnFound = true;\n                    }\n                    else if (crossProduct === 0) {\n                        // the three points are collinear\n                        // three options:\n                        // there may be a 180 or 0 degree angle at lastHullPoint\n                        // or two of the three points are coincident\n                        // we have to take rounding errors into account\n                        const THRESHOLD = 1e-10;\n                        const angleBetween = lastHullPoint.angleBetween(secondLastHullPoint, currentPoint);\n                        if (Math.abs(angleBetween - 180) < THRESHOLD) {\n                            // rouding around 180 to 180\n                            // if the cross product is 0 because the angle is 180 degrees\n                            // discard last hull point (add to insidePoints)\n                            // insidePoints.unshift(lastHullPoint);\n                            insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // do not do anything with current point\n                            // correct turn not found\n                        }\n                        else if (lastHullPoint.equals(currentPoint) ||\n                            secondLastHullPoint.equals(lastHullPoint)) {\n                            // if the cross product is 0 because two points are the same\n                            // discard last hull point (add to insidePoints)\n                            // insidePoints.unshift(lastHullPoint);\n                            insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // do not do anything with current point\n                            // correct turn not found\n                        }\n                        else if (Math.abs(((angleBetween + 1) % 360) - 1) < THRESHOLD) {\n                            // rounding around 0 and 360 to 0\n                            // if the cross product is 0 because the angle is 0 degrees\n                            // remove last hull point from hull BUT do not discard it\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // put last hull point back into the sorted point records list\n                            sortedRecords.push(lastHullRecord);\n                            // we are switching the order of the 0deg and 180deg points\n                            // correct turn not found\n                        }\n                    }\n                    else {\n                        // found a left turn\n                        // discard last hull point (add to insidePoints)\n                        // insidePoints.unshift(lastHullPoint);\n                        insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                        // reenter second-to-last hull point (will be last at next iter of loop)\n                        hullRecords.push(secondLastHullRecord);\n                        // do not do anything with current point\n                        // correct turn not found\n                    }\n                }\n            }\n        }\n        // At this point, hullPointRecords contains the output points in clockwise order\n        // the points start with lowest-y,highest-x startPoint, and end at the same point\n        // Step 3b: remove duplicated startPointRecord from the end of the array\n        if (hullRecords.length > 2) {\n            hullRecords.pop();\n        }\n        // Step 4: find the lowest originalIndex record and put it at the beginning of hull\n        let lowestHullIndex; // the lowest originalIndex on the hull\n        let indexOfLowestHullIndexRecord = -1; // the index of the record with lowestHullIndex\n        for (let i = 0, n = hullRecords.length; i < n; i += 1) {\n            const currentHullIndex = hullRecords[i][1];\n            if (lowestHullIndex === undefined || currentHullIndex < lowestHullIndex) {\n                lowestHullIndex = currentHullIndex;\n                indexOfLowestHullIndexRecord = i;\n            }\n        }\n        let hullPointRecordsReordered = [];\n        if (indexOfLowestHullIndexRecord > 0) {\n            const newFirstChunk = hullRecords.slice(indexOfLowestHullIndexRecord);\n            const newSecondChunk = hullRecords.slice(0, indexOfLowestHullIndexRecord);\n            hullPointRecordsReordered = newFirstChunk.concat(newSecondChunk);\n        }\n        else {\n            hullPointRecordsReordered = hullRecords;\n        }\n        const hullPoints = [];\n        for (let i = 0, n = hullPointRecordsReordered.length; i < n; i += 1) {\n            hullPoints.push(hullPointRecordsReordered[i][0]);\n        }\n        return new Polyline(hullPoints);\n    }\n    equals(p) {\n        if (p == null) {\n            return false;\n        }\n        if (p.points.length !== this.points.length) {\n            return false;\n        }\n        return p.points.every((a, i) => a.equals(this.points[i]));\n    }\n    clone() {\n        return new Polyline(this.points.map((p) => p.clone()));\n    }\n    toJSON() {\n        return this.points.map((p) => p.toJSON());\n    }\n    serialize() {\n        return this.points.map((p) => `${p.serialize()}`).join(' ');\n    }\n}\n(function (Polyline) {\n    function isPolyline(instance) {\n        return instance != null && instance instanceof Polyline;\n    }\n    Polyline.isPolyline = isPolyline;\n})(Polyline || (Polyline = {}));\n(function (Polyline) {\n    function parse(svgString) {\n        const str = svgString.trim();\n        if (str === '') {\n            return new Polyline();\n        }\n        const points = [];\n        const coords = str.split(/\\s*,\\s*|\\s+/);\n        for (let i = 0, ii = coords.length; i < ii; i += 2) {\n            points.push({ x: +coords[i], y: +coords[i + 1] });\n        }\n        return new Polyline(points);\n    }\n    Polyline.parse = parse;\n})(Polyline || (Polyline = {}));\n//# sourceMappingURL=polyline.js.map","import { Line } from './line';\nimport { Point } from './point';\nimport { Polyline } from './polyline';\nimport { Rectangle } from './rectangle';\nimport { Geometry } from './geometry';\nexport class Curve extends Geometry {\n    constructor(start, controlPoint1, controlPoint2, end) {\n        super();\n        this.PRECISION = 3;\n        this.start = Point.create(start);\n        this.controlPoint1 = Point.create(controlPoint1);\n        this.controlPoint2 = Point.create(controlPoint2);\n        this.end = Point.create(end);\n    }\n    bbox() {\n        const start = this.start;\n        const controlPoint1 = this.controlPoint1;\n        const controlPoint2 = this.controlPoint2;\n        const end = this.end;\n        const x0 = start.x;\n        const y0 = start.y;\n        const x1 = controlPoint1.x;\n        const y1 = controlPoint1.y;\n        const x2 = controlPoint2.x;\n        const y2 = controlPoint2.y;\n        const x3 = end.x;\n        const y3 = end.y;\n        const points = []; // local extremes\n        const tvalues = []; // t values of local extremes\n        const bounds = [[], []];\n        let a;\n        let b;\n        let c;\n        let t;\n        let t1;\n        let t2;\n        let b2ac;\n        let sqrtb2ac;\n        for (let i = 0; i < 2; i += 1) {\n            if (i === 0) {\n                b = 6 * x0 - 12 * x1 + 6 * x2;\n                a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n                c = 3 * x1 - 3 * x0;\n            }\n            else {\n                b = 6 * y0 - 12 * y1 + 6 * y2;\n                a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n                c = 3 * y1 - 3 * y0;\n            }\n            if (Math.abs(a) < 1e-12) {\n                if (Math.abs(b) < 1e-12) {\n                    continue;\n                }\n                t = -c / b;\n                if (t > 0 && t < 1)\n                    tvalues.push(t);\n                continue;\n            }\n            b2ac = b * b - 4 * c * a;\n            sqrtb2ac = Math.sqrt(b2ac);\n            if (b2ac < 0)\n                continue;\n            t1 = (-b + sqrtb2ac) / (2 * a);\n            if (t1 > 0 && t1 < 1)\n                tvalues.push(t1);\n            t2 = (-b - sqrtb2ac) / (2 * a);\n            if (t2 > 0 && t2 < 1)\n                tvalues.push(t2);\n        }\n        let x;\n        let y;\n        let mt;\n        let j = tvalues.length;\n        const jlen = j;\n        while (j) {\n            j -= 1;\n            t = tvalues[j];\n            mt = 1 - t;\n            x =\n                mt * mt * mt * x0 +\n                    3 * mt * mt * t * x1 +\n                    3 * mt * t * t * x2 +\n                    t * t * t * x3;\n            bounds[0][j] = x;\n            y =\n                mt * mt * mt * y0 +\n                    3 * mt * mt * t * y1 +\n                    3 * mt * t * t * y2 +\n                    t * t * t * y3;\n            bounds[1][j] = y;\n            points[j] = { X: x, Y: y };\n        }\n        tvalues[jlen] = 0;\n        tvalues[jlen + 1] = 1;\n        points[jlen] = { X: x0, Y: y0 };\n        points[jlen + 1] = { X: x3, Y: y3 };\n        bounds[0][jlen] = x0;\n        bounds[1][jlen] = y0;\n        bounds[0][jlen + 1] = x3;\n        bounds[1][jlen + 1] = y3;\n        tvalues.length = jlen + 2;\n        bounds[0].length = jlen + 2;\n        bounds[1].length = jlen + 2;\n        points.length = jlen + 2;\n        const left = Math.min.apply(null, bounds[0]);\n        const top = Math.min.apply(null, bounds[1]);\n        const right = Math.max.apply(null, bounds[0]);\n        const bottom = Math.max.apply(null, bounds[1]);\n        return new Rectangle(left, top, right - left, bottom - top);\n    }\n    closestPoint(p, options = {}) {\n        return this.pointAtT(this.closestPointT(p, options));\n    }\n    closestPointLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        return this.lengthAtT(this.closestPointT(p, opts), opts);\n    }\n    closestPointNormalizedLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        const cpLength = this.closestPointLength(p, opts);\n        if (!cpLength) {\n            return 0;\n        }\n        const length = this.length(opts);\n        if (length === 0) {\n            return 0;\n        }\n        return cpLength / length;\n    }\n    closestPointT(p, options = {}) {\n        const precision = this.getPrecision(options);\n        const subdivisions = this.getDivisions(options);\n        const precisionRatio = Math.pow(10, -precision); // eslint-disable-line\n        let investigatedSubdivision = null;\n        let investigatedSubdivisionStartT = 0;\n        let investigatedSubdivisionEndT = 0;\n        let distFromStart = 0;\n        let distFromEnd = 0;\n        let chordLength = 0;\n        let minSumDist = null;\n        const count = subdivisions.length;\n        let piece = count > 0 ? 1 / count : 0;\n        subdivisions.forEach((division, i) => {\n            const startDist = division.start.distance(p);\n            const endDist = division.end.distance(p);\n            const sumDist = startDist + endDist;\n            if (minSumDist == null || sumDist < minSumDist) {\n                investigatedSubdivision = division;\n                investigatedSubdivisionStartT = i * piece;\n                investigatedSubdivisionEndT = (i + 1) * piece;\n                distFromStart = startDist;\n                distFromEnd = endDist;\n                minSumDist = sumDist;\n                chordLength = division.endpointDistance();\n            }\n        });\n        // Recursively divide investigated subdivision, until distance between\n        // baselinePoint and closest path endpoint is within `10^(-precision)`,\n        // then return the closest endpoint of that final subdivision.\n        // eslint-disable-next-line\n        while (true) {\n            // check if we have reached at least one required observed precision\n            // - calculated as: the difference in distances from point to start and end divided by the distance\n            // - note that this function is not monotonic = it doesn't converge stably but has \"teeth\"\n            // - the function decreases while one of the endpoints is fixed but \"jumps\" whenever we switch\n            // - this criterion works well for points lying far away from the curve\n            const startPrecisionRatio = distFromStart\n                ? Math.abs(distFromStart - distFromEnd) / distFromStart\n                : 0;\n            const endPrecisionRatio = distFromEnd != null\n                ? Math.abs(distFromStart - distFromEnd) / distFromEnd\n                : 0;\n            const hasRequiredPrecision = startPrecisionRatio < precisionRatio ||\n                endPrecisionRatio < precisionRatio;\n            // check if we have reached at least one required minimal distance\n            // - calculated as: the subdivision chord length multiplied by precisionRatio\n            // - calculation is relative so it will work for arbitrarily large/small curves and their subdivisions\n            // - this is a backup criterion that works well for points lying \"almost at\" the curve\n            const hasMiniStartDistance = distFromStart\n                ? distFromStart < chordLength * precisionRatio\n                : true;\n            const hasMiniEndDistance = distFromEnd\n                ? distFromEnd < chordLength * precisionRatio\n                : true;\n            const hasMiniDistance = hasMiniStartDistance || hasMiniEndDistance;\n            if (hasRequiredPrecision || hasMiniDistance) {\n                return distFromStart <= distFromEnd\n                    ? investigatedSubdivisionStartT\n                    : investigatedSubdivisionEndT;\n            }\n            // otherwise, set up for next iteration\n            const divided = investigatedSubdivision.divide(0.5);\n            piece /= 2;\n            const startDist1 = divided[0].start.distance(p);\n            const endDist1 = divided[0].end.distance(p);\n            const sumDist1 = startDist1 + endDist1;\n            const startDist2 = divided[1].start.distance(p);\n            const endDist2 = divided[1].end.distance(p);\n            const sumDist2 = startDist2 + endDist2;\n            if (sumDist1 <= sumDist2) {\n                investigatedSubdivision = divided[0];\n                investigatedSubdivisionEndT -= piece;\n                distFromStart = startDist1;\n                distFromEnd = endDist1;\n            }\n            else {\n                investigatedSubdivision = divided[1];\n                investigatedSubdivisionStartT += piece;\n                distFromStart = startDist2;\n                distFromEnd = endDist2;\n            }\n        }\n    }\n    closestPointTangent(p, options = {}) {\n        return this.tangentAtT(this.closestPointT(p, options));\n    }\n    containsPoint(p, options = {}) {\n        const polyline = this.toPolyline(options);\n        return polyline.containsPoint(p);\n    }\n    divideAt(ratio, options = {}) {\n        if (ratio <= 0) {\n            return this.divideAtT(0);\n        }\n        if (ratio >= 1) {\n            return this.divideAtT(1);\n        }\n        const t = this.tAt(ratio, options);\n        return this.divideAtT(t);\n    }\n    divideAtLength(length, options = {}) {\n        const t = this.tAtLength(length, options);\n        return this.divideAtT(t);\n    }\n    divide(t) {\n        return this.divideAtT(t);\n    }\n    divideAtT(t) {\n        const start = this.start;\n        const controlPoint1 = this.controlPoint1;\n        const controlPoint2 = this.controlPoint2;\n        const end = this.end;\n        if (t <= 0) {\n            return [\n                new Curve(start, start, start, start),\n                new Curve(start, controlPoint1, controlPoint2, end),\n            ];\n        }\n        if (t >= 1) {\n            return [\n                new Curve(start, controlPoint1, controlPoint2, end),\n                new Curve(end, end, end, end),\n            ];\n        }\n        const dividerPoints = this.getSkeletonPoints(t);\n        const startControl1 = dividerPoints.startControlPoint1;\n        const startControl2 = dividerPoints.startControlPoint2;\n        const divider = dividerPoints.divider;\n        const dividerControl1 = dividerPoints.dividerControlPoint1;\n        const dividerControl2 = dividerPoints.dividerControlPoint2;\n        return [\n            new Curve(start, startControl1, startControl2, divider),\n            new Curve(divider, dividerControl1, dividerControl2, end),\n        ];\n    }\n    endpointDistance() {\n        return this.start.distance(this.end);\n    }\n    getSkeletonPoints(t) {\n        const start = this.start;\n        const control1 = this.controlPoint1;\n        const control2 = this.controlPoint2;\n        const end = this.end;\n        // shortcuts for `t` values that are out of range\n        if (t <= 0) {\n            return {\n                startControlPoint1: start.clone(),\n                startControlPoint2: start.clone(),\n                divider: start.clone(),\n                dividerControlPoint1: control1.clone(),\n                dividerControlPoint2: control2.clone(),\n            };\n        }\n        if (t >= 1) {\n            return {\n                startControlPoint1: control1.clone(),\n                startControlPoint2: control2.clone(),\n                divider: end.clone(),\n                dividerControlPoint1: end.clone(),\n                dividerControlPoint2: end.clone(),\n            };\n        }\n        const midpoint1 = new Line(start, control1).pointAt(t);\n        const midpoint2 = new Line(control1, control2).pointAt(t);\n        const midpoint3 = new Line(control2, end).pointAt(t);\n        const subControl1 = new Line(midpoint1, midpoint2).pointAt(t);\n        const subControl2 = new Line(midpoint2, midpoint3).pointAt(t);\n        const divideLine = new Line(subControl1, subControl2).pointAt(t);\n        return {\n            startControlPoint1: midpoint1,\n            startControlPoint2: subControl1,\n            divider: divideLine,\n            dividerControlPoint1: subControl2,\n            dividerControlPoint2: midpoint3,\n        };\n    }\n    getSubdivisions(options = {}) {\n        const precision = this.getPrecision(options);\n        let subdivisions = [\n            new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end),\n        ];\n        if (precision === 0) {\n            return subdivisions;\n        }\n        let previousLength = this.endpointDistance();\n        const precisionRatio = Math.pow(10, -precision); // eslint-disable-line\n        // Recursively divide curve at `t = 0.5`, until the difference between\n        // observed length at subsequent iterations is lower than precision.\n        let iteration = 0;\n        // eslint-disable-next-line\n        while (true) {\n            iteration += 1;\n            const divisions = [];\n            subdivisions.forEach((c) => {\n                // dividing at t = 0.5 (not at middle length!)\n                const divided = c.divide(0.5);\n                divisions.push(divided[0], divided[1]);\n            });\n            // measure new length\n            const length = divisions.reduce((memo, c) => memo + c.endpointDistance(), 0);\n            // check if we have reached required observed precision\n            // sine-like curves may have the same observed length in iteration 0 and 1 - skip iteration 1\n            // not a problem for further iterations because cubic curves cannot have more than two local extrema\n            // (i.e. cubic curves cannot intersect the baseline more than once)\n            // therefore two subsequent iterations cannot produce sampling with equal length\n            const ratio = length !== 0 ? (length - previousLength) / length : 0;\n            if (iteration > 1 && ratio < precisionRatio) {\n                return divisions;\n            }\n            subdivisions = divisions;\n            previousLength = length;\n        }\n    }\n    length(options = {}) {\n        const divisions = this.getDivisions(options);\n        return divisions.reduce((memo, c) => {\n            return memo + c.endpointDistance();\n        }, 0);\n    }\n    lengthAtT(t, options = {}) {\n        if (t <= 0) {\n            return 0;\n        }\n        const precision = options.precision === undefined ? this.PRECISION : options.precision;\n        const subCurve = this.divide(t)[0];\n        return subCurve.length({ precision });\n    }\n    pointAt(ratio, options = {}) {\n        if (ratio <= 0) {\n            return this.start.clone();\n        }\n        if (ratio >= 1) {\n            return this.end.clone();\n        }\n        const t = this.tAt(ratio, options);\n        return this.pointAtT(t);\n    }\n    pointAtLength(length, options = {}) {\n        const t = this.tAtLength(length, options);\n        return this.pointAtT(t);\n    }\n    pointAtT(t) {\n        if (t <= 0) {\n            return this.start.clone();\n        }\n        if (t >= 1) {\n            return this.end.clone();\n        }\n        return this.getSkeletonPoints(t).divider;\n    }\n    isDifferentiable() {\n        const start = this.start;\n        const control1 = this.controlPoint1;\n        const control2 = this.controlPoint2;\n        const end = this.end;\n        return !(start.equals(control1) &&\n            control1.equals(control2) &&\n            control2.equals(end));\n    }\n    tangentAt(ratio, options = {}) {\n        if (!this.isDifferentiable())\n            return null;\n        if (ratio < 0) {\n            ratio = 0; // eslint-disable-line\n        }\n        else if (ratio > 1) {\n            ratio = 1; // eslint-disable-line\n        }\n        const t = this.tAt(ratio, options);\n        return this.tangentAtT(t);\n    }\n    tangentAtLength(length, options = {}) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        const t = this.tAtLength(length, options);\n        return this.tangentAtT(t);\n    }\n    tangentAtT(t) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        if (t < 0) {\n            t = 0; // eslint-disable-line\n        }\n        if (t > 1) {\n            t = 1; // eslint-disable-line\n        }\n        const skeletonPoints = this.getSkeletonPoints(t);\n        const p1 = skeletonPoints.startControlPoint2;\n        const p2 = skeletonPoints.dividerControlPoint1;\n        const tangentStart = skeletonPoints.divider;\n        const tangentLine = new Line(p1, p2);\n        // move so that tangent line starts at the point requested\n        tangentLine.translate(tangentStart.x - p1.x, tangentStart.y - p1.y);\n        return tangentLine;\n    }\n    getPrecision(options = {}) {\n        return options.precision == null ? this.PRECISION : options.precision;\n    }\n    getDivisions(options = {}) {\n        if (options.subdivisions != null) {\n            return options.subdivisions;\n        }\n        const precision = this.getPrecision(options);\n        return this.getSubdivisions({ precision });\n    }\n    getOptions(options = {}) {\n        const precision = this.getPrecision(options);\n        const subdivisions = this.getDivisions(options);\n        return { precision, subdivisions };\n    }\n    tAt(ratio, options = {}) {\n        if (ratio <= 0) {\n            return 0;\n        }\n        if (ratio >= 1) {\n            return 1;\n        }\n        const opts = this.getOptions(options);\n        const total = this.length(opts);\n        const length = total * ratio;\n        return this.tAtLength(length, opts);\n    }\n    tAtLength(length, options = {}) {\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const subdivisions = this.getDivisions(options);\n        const opts = { precision, subdivisions };\n        let investigatedSubdivision = null;\n        let investigatedSubdivisionStartT;\n        let investigatedSubdivisionEndT;\n        let baselinePointDistFromStart = 0;\n        let baselinePointDistFromEnd = 0;\n        let memo = 0;\n        const count = subdivisions.length;\n        let piece = count > 0 ? 1 / count : 0;\n        for (let i = 0; i < count; i += 1) {\n            const index = fromStart ? i : count - 1 - i;\n            const division = subdivisions[i];\n            const dist = division.endpointDistance();\n            if (length <= memo + dist) {\n                investigatedSubdivision = division;\n                investigatedSubdivisionStartT = index * piece;\n                investigatedSubdivisionEndT = (index + 1) * piece;\n                baselinePointDistFromStart = fromStart\n                    ? length - memo\n                    : dist + memo - length;\n                baselinePointDistFromEnd = fromStart\n                    ? dist + memo - length\n                    : length - memo;\n                break;\n            }\n            memo += dist;\n        }\n        if (investigatedSubdivision == null) {\n            return fromStart ? 1 : 0;\n        }\n        // note that precision affects what length is recorded\n        // (imprecise measurements underestimate length by up to 10^(-precision) of the precise length)\n        // e.g. at precision 1, the length may be underestimated by up to 10% and cause this function to return 1\n        const total = this.length(opts);\n        const precisionRatio = Math.pow(10, -precision); // eslint-disable-line\n        // recursively divide investigated subdivision:\n        // until distance between baselinePoint and closest path endpoint is within 10^(-precision)\n        // then return the closest endpoint of that final subdivision\n        // eslint-disable-next-line\n        while (true) {\n            let ratio;\n            ratio = total !== 0 ? baselinePointDistFromStart / total : 0;\n            if (ratio < precisionRatio) {\n                return investigatedSubdivisionStartT;\n            }\n            ratio = total !== 0 ? baselinePointDistFromEnd / total : 0;\n            if (ratio < precisionRatio) {\n                return investigatedSubdivisionEndT;\n            }\n            // otherwise, set up for next iteration\n            let newBaselinePointDistFromStart;\n            let newBaselinePointDistFromEnd;\n            const divided = investigatedSubdivision.divide(0.5);\n            piece /= 2;\n            const baseline1Length = divided[0].endpointDistance();\n            const baseline2Length = divided[1].endpointDistance();\n            if (baselinePointDistFromStart <= baseline1Length) {\n                investigatedSubdivision = divided[0];\n                investigatedSubdivisionEndT -= piece;\n                newBaselinePointDistFromStart = baselinePointDistFromStart;\n                newBaselinePointDistFromEnd =\n                    baseline1Length - newBaselinePointDistFromStart;\n            }\n            else {\n                investigatedSubdivision = divided[1];\n                investigatedSubdivisionStartT += piece;\n                newBaselinePointDistFromStart =\n                    baselinePointDistFromStart - baseline1Length;\n                newBaselinePointDistFromEnd =\n                    baseline2Length - newBaselinePointDistFromStart;\n            }\n            baselinePointDistFromStart = newBaselinePointDistFromStart;\n            baselinePointDistFromEnd = newBaselinePointDistFromEnd;\n        }\n    }\n    toPoints(options = {}) {\n        const subdivisions = this.getDivisions(options);\n        const points = [subdivisions[0].start.clone()];\n        subdivisions.forEach((c) => points.push(c.end.clone()));\n        return points;\n    }\n    toPolyline(options = {}) {\n        return new Polyline(this.toPoints(options));\n    }\n    scale(sx, sy, origin) {\n        this.start.scale(sx, sy, origin);\n        this.controlPoint1.scale(sx, sy, origin);\n        this.controlPoint2.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.start.rotate(angle, origin);\n        this.controlPoint1.rotate(angle, origin);\n        this.controlPoint2.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.start.translate(tx, ty);\n            this.controlPoint1.translate(tx, ty);\n            this.controlPoint2.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.start.translate(tx);\n            this.controlPoint1.translate(tx);\n            this.controlPoint2.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    equals(c) {\n        return (c != null &&\n            this.start.equals(c.start) &&\n            this.controlPoint1.equals(c.controlPoint1) &&\n            this.controlPoint2.equals(c.controlPoint2) &&\n            this.end.equals(c.end));\n    }\n    clone() {\n        return new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    }\n    toJSON() {\n        return {\n            start: this.start.toJSON(),\n            controlPoint1: this.controlPoint1.toJSON(),\n            controlPoint2: this.controlPoint2.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        return [\n            this.start.serialize(),\n            this.controlPoint1.serialize(),\n            this.controlPoint2.serialize(),\n            this.end.serialize(),\n        ].join(' ');\n    }\n}\n(function (Curve) {\n    function isCurve(instance) {\n        return instance != null && instance instanceof Curve;\n    }\n    Curve.isCurve = isCurve;\n})(Curve || (Curve = {}));\n(function (Curve) {\n    function getFirstControlPoints(rhs) {\n        const n = rhs.length;\n        const x = []; // `x` is a solution vector.\n        const tmp = [];\n        let b = 2.0;\n        x[0] = rhs[0] / b;\n        // Decomposition and forward substitution.\n        for (let i = 1; i < n; i += 1) {\n            tmp[i] = 1 / b;\n            b = (i < n - 1 ? 4.0 : 3.5) - tmp[i];\n            x[i] = (rhs[i] - x[i - 1]) / b;\n        }\n        for (let i = 1; i < n; i += 1) {\n            // Backsubstitution.\n            x[n - i - 1] -= tmp[n - i] * x[n - i];\n        }\n        return x;\n    }\n    function getCurveControlPoints(points) {\n        const knots = points.map((p) => Point.clone(p));\n        const firstControlPoints = [];\n        const secondControlPoints = [];\n        const n = knots.length - 1;\n        // Special case: Bezier curve should be a straight line.\n        if (n === 1) {\n            // 3P1 = 2P0 + P3\n            firstControlPoints[0] = new Point((2 * knots[0].x + knots[1].x) / 3, (2 * knots[0].y + knots[1].y) / 3);\n            // P2 = 2P1 – P0\n            secondControlPoints[0] = new Point(2 * firstControlPoints[0].x - knots[0].x, 2 * firstControlPoints[0].y - knots[0].y);\n            return [firstControlPoints, secondControlPoints];\n        }\n        // Calculate first Bezier control points.\n        // Right hand side vector.\n        const rhs = [];\n        // Set right hand side X values.\n        for (let i = 1; i < n - 1; i += 1) {\n            rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;\n        }\n        rhs[0] = knots[0].x + 2 * knots[1].x;\n        rhs[n - 1] = (8 * knots[n - 1].x + knots[n].x) / 2.0;\n        // Get first control points X-values.\n        const x = getFirstControlPoints(rhs);\n        // Set right hand side Y values.\n        for (let i = 1; i < n - 1; i += 1) {\n            rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;\n        }\n        rhs[0] = knots[0].y + 2 * knots[1].y;\n        rhs[n - 1] = (8 * knots[n - 1].y + knots[n].y) / 2.0;\n        // Get first control points Y-values.\n        const y = getFirstControlPoints(rhs);\n        // Fill output arrays.\n        for (let i = 0; i < n; i += 1) {\n            // First control point.\n            firstControlPoints.push(new Point(x[i], y[i]));\n            // Second control point.\n            if (i < n - 1) {\n                secondControlPoints.push(new Point(2 * knots[i + 1].x - x[i + 1], 2 * knots[i + 1].y - y[i + 1]));\n            }\n            else {\n                secondControlPoints.push(new Point((knots[n].x + x[n - 1]) / 2, (knots[n].y + y[n - 1]) / 2));\n            }\n        }\n        return [firstControlPoints, secondControlPoints];\n    }\n    function throughPoints(points) {\n        if (points == null || (Array.isArray(points) && points.length < 2)) {\n            throw new Error('At least 2 points are required');\n        }\n        const controlPoints = getCurveControlPoints(points);\n        const curves = [];\n        for (let i = 0, ii = controlPoints[0].length; i < ii; i += 1) {\n            const controlPoint1 = new Point(controlPoints[0][i].x, controlPoints[0][i].y);\n            const controlPoint2 = new Point(controlPoints[1][i].x, controlPoints[1][i].y);\n            curves.push(new Curve(points[i], controlPoint1, controlPoint2, points[i + 1]));\n        }\n        return curves;\n    }\n    Curve.throughPoints = throughPoints;\n})(Curve || (Curve = {}));\n//# sourceMappingURL=curve.js.map","import { Geometry } from '../geometry';\nexport class Segment extends Geometry {\n    constructor() {\n        super(...arguments);\n        this.isVisible = true;\n        this.isSegment = true;\n        this.isSubpathStart = false;\n    }\n    get end() {\n        return this.endPoint;\n    }\n    get start() {\n        if (this.previousSegment == null) {\n            throw new Error('Missing previous segment. (This segment cannot be the ' +\n                'first segment of a path, or segment has not yet been ' +\n                'added to a path.)');\n        }\n        return this.previousSegment.end;\n    }\n    closestPointT(p, options) {\n        if (this.closestPointNormalizedLength) {\n            return this.closestPointNormalizedLength(p);\n        }\n        throw new Error('Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.');\n    }\n    // eslint-disable-next-line\n    lengthAtT(t, options) {\n        if (t <= 0) {\n            return 0;\n        }\n        const length = this.length();\n        if (t >= 1) {\n            return length;\n        }\n        return length * t;\n    }\n    divideAtT(t) {\n        if (this.divideAt) {\n            return this.divideAt(t);\n        }\n        throw new Error('Neither `divideAtT` nor `divideAt` method is implemented.');\n    }\n    pointAtT(t) {\n        if (this.pointAt) {\n            return this.pointAt(t);\n        }\n        throw new Error('Neither `pointAtT` nor `pointAt` method is implemented.');\n    }\n    tangentAtT(t) {\n        if (this.tangentAt) {\n            return this.tangentAt(t);\n        }\n        throw new Error('Neither `tangentAtT` nor `tangentAt` method is implemented.');\n    }\n}\n//# sourceMappingURL=segment.js.map","import { Line } from '../line';\nimport { Point } from '../point';\nimport { Segment } from './segment';\nexport class LineTo extends Segment {\n    constructor(x, y) {\n        super();\n        if (Line.isLine(x)) {\n            this.endPoint = x.end.clone().round(2);\n        }\n        else {\n            this.endPoint = Point.create(x, y).round(2);\n        }\n    }\n    get type() {\n        return 'L';\n    }\n    get line() {\n        return new Line(this.start, this.end);\n    }\n    bbox() {\n        return this.line.bbox();\n    }\n    closestPoint(p) {\n        return this.line.closestPoint(p);\n    }\n    closestPointLength(p) {\n        return this.line.closestPointLength(p);\n    }\n    closestPointNormalizedLength(p) {\n        return this.line.closestPointNormalizedLength(p);\n    }\n    closestPointTangent(p) {\n        return this.line.closestPointTangent(p);\n    }\n    length() {\n        return this.line.length();\n    }\n    divideAt(ratio) {\n        const divided = this.line.divideAt(ratio);\n        return [new LineTo(divided[0]), new LineTo(divided[1])];\n    }\n    divideAtLength(length) {\n        const divided = this.line.divideAtLength(length);\n        return [new LineTo(divided[0]), new LineTo(divided[1])];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt(ratio) {\n        return this.line.pointAt(ratio);\n    }\n    pointAtLength(length) {\n        return this.line.pointAtLength(length);\n    }\n    tangentAt(ratio) {\n        return this.line.tangentAt(ratio);\n    }\n    tangentAtLength(length) {\n        return this.line.tangentAtLength(length);\n    }\n    isDifferentiable() {\n        if (this.previousSegment == null) {\n            return false;\n        }\n        return !this.start.equals(this.end);\n    }\n    clone() {\n        return new LineTo(this.end);\n    }\n    scale(sx, sy, origin) {\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    equals(s) {\n        return (this.type === s.type &&\n            this.start.equals(s.start) &&\n            this.end.equals(s.end));\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        const end = this.end;\n        return `${this.type} ${end.x} ${end.y}`;\n    }\n}\n(function (LineTo) {\n    function create(...args) {\n        const len = args.length;\n        const arg0 = args[0];\n        // line provided\n        if (Line.isLine(arg0)) {\n            return new LineTo(arg0);\n        }\n        // points provided\n        if (Point.isPointLike(arg0)) {\n            if (len === 1) {\n                return new LineTo(arg0);\n            }\n            // poly-line segment\n            return args.map((arg) => new LineTo(arg));\n        }\n        // coordinates provided\n        if (len === 2) {\n            return new LineTo(+args[0], +args[1]);\n        }\n        // poly-line segment\n        const segments = [];\n        for (let i = 0; i < len; i += 2) {\n            const x = +args[i];\n            const y = +args[i + 1];\n            segments.push(new LineTo(x, y));\n        }\n        return segments;\n    }\n    LineTo.create = create;\n})(LineTo || (LineTo = {}));\n//# sourceMappingURL=lineto.js.map","import { Line } from '../line';\nimport { LineTo } from './lineto';\nimport { Segment } from './segment';\nexport class Close extends Segment {\n    get end() {\n        if (!this.subpathStartSegment) {\n            throw new Error('Missing subpath start segment. (This segment needs a subpath ' +\n                'start segment (e.g. MoveTo), or segment has not yet been added' +\n                ' to a path.)');\n        }\n        return this.subpathStartSegment.end;\n    }\n    get type() {\n        return 'Z';\n    }\n    get line() {\n        return new Line(this.start, this.end);\n    }\n    bbox() {\n        return this.line.bbox();\n    }\n    closestPoint(p) {\n        return this.line.closestPoint(p);\n    }\n    closestPointLength(p) {\n        return this.line.closestPointLength(p);\n    }\n    closestPointNormalizedLength(p) {\n        return this.line.closestPointNormalizedLength(p);\n    }\n    closestPointTangent(p) {\n        return this.line.closestPointTangent(p);\n    }\n    length() {\n        return this.line.length();\n    }\n    divideAt(ratio) {\n        const divided = this.line.divideAt(ratio);\n        return [\n            // do not actually cut into the segment, first divided part can stay as Z\n            divided[1].isDifferentiable() ? new LineTo(divided[0]) : this.clone(),\n            new LineTo(divided[1]),\n        ];\n    }\n    divideAtLength(length) {\n        const divided = this.line.divideAtLength(length);\n        return [\n            divided[1].isDifferentiable() ? new LineTo(divided[0]) : this.clone(),\n            new LineTo(divided[1]),\n        ];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt(ratio) {\n        return this.line.pointAt(ratio);\n    }\n    pointAtLength(length) {\n        return this.line.pointAtLength(length);\n    }\n    tangentAt(ratio) {\n        return this.line.tangentAt(ratio);\n    }\n    tangentAtLength(length) {\n        return this.line.tangentAtLength(length);\n    }\n    isDifferentiable() {\n        if (!this.previousSegment || !this.subpathStartSegment) {\n            return false;\n        }\n        return !this.start.equals(this.end);\n    }\n    scale() {\n        return this;\n    }\n    rotate() {\n        return this;\n    }\n    translate() {\n        return this;\n    }\n    equals(s) {\n        return (this.type === s.type &&\n            this.start.equals(s.start) &&\n            this.end.equals(s.end));\n    }\n    clone() {\n        return new Close();\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        return this.type;\n    }\n}\n(function (Close) {\n    function create() {\n        return new Close();\n    }\n    Close.create = create;\n})(Close || (Close = {}));\n//# sourceMappingURL=close.js.map","import { Line } from '../line';\nimport { Curve } from '../curve';\nimport { Point } from '../point';\nimport { LineTo } from './lineto';\nimport { Segment } from './segment';\nexport class MoveTo extends Segment {\n    constructor(x, y) {\n        super();\n        this.isVisible = false;\n        this.isSubpathStart = true;\n        if (Line.isLine(x) || Curve.isCurve(x)) {\n            this.endPoint = x.end.clone().round(2);\n        }\n        else {\n            this.endPoint = Point.create(x, y).round(2);\n        }\n    }\n    get start() {\n        throw new Error('Illegal access. Moveto segments should not need a start property.');\n    }\n    get type() {\n        return 'M';\n    }\n    bbox() {\n        return null;\n    }\n    closestPoint() {\n        return this.end.clone();\n    }\n    closestPointLength() {\n        return 0;\n    }\n    closestPointNormalizedLength() {\n        return 0;\n    }\n    closestPointT() {\n        return 1;\n    }\n    closestPointTangent() {\n        return null;\n    }\n    length() {\n        return 0;\n    }\n    lengthAtT() {\n        return 0;\n    }\n    divideAt() {\n        return [this.clone(), this.clone()];\n    }\n    divideAtLength() {\n        return [this.clone(), this.clone()];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt() {\n        return this.end.clone();\n    }\n    pointAtLength() {\n        return this.end.clone();\n    }\n    pointAtT() {\n        return this.end.clone();\n    }\n    tangentAt() {\n        return null;\n    }\n    tangentAtLength() {\n        return null;\n    }\n    tangentAtT() {\n        return null;\n    }\n    isDifferentiable() {\n        return false;\n    }\n    scale(sx, sy, origin) {\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    clone() {\n        return new MoveTo(this.end);\n    }\n    equals(s) {\n        return this.type === s.type && this.end.equals(s.end);\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        const end = this.end;\n        return `${this.type} ${end.x} ${end.y}`;\n    }\n}\n(function (MoveTo) {\n    function create(...args) {\n        const len = args.length;\n        const arg0 = args[0];\n        // line provided\n        if (Line.isLine(arg0)) {\n            return new MoveTo(arg0);\n        }\n        // curve provided\n        if (Curve.isCurve(arg0)) {\n            return new MoveTo(arg0);\n        }\n        // points provided\n        if (Point.isPointLike(arg0)) {\n            if (len === 1) {\n                return new MoveTo(arg0);\n            }\n            // this is a moveto-with-subsequent-poly-line segment\n            const segments = [];\n            // points come one by one\n            for (let i = 0; i < len; i += 1) {\n                if (i === 0) {\n                    segments.push(new MoveTo(args[i]));\n                }\n                else {\n                    segments.push(new LineTo(args[i]));\n                }\n            }\n            return segments;\n        }\n        // coordinates provided\n        if (len === 2) {\n            return new MoveTo(+args[0], +args[1]);\n        }\n        // this is a moveto-with-subsequent-poly-line segment\n        const segments = [];\n        for (let i = 0; i < len; i += 2) {\n            const x = +args[i];\n            const y = +args[i + 1];\n            if (i === 0) {\n                segments.push(new MoveTo(x, y));\n            }\n            else {\n                segments.push(new LineTo(x, y));\n            }\n        }\n        return segments;\n    }\n    MoveTo.create = create;\n})(MoveTo || (MoveTo = {}));\n//# sourceMappingURL=moveto.js.map","import { Curve } from '../curve';\nimport { Point } from '../point';\nimport { Segment } from './segment';\nexport class CurveTo extends Segment {\n    constructor(arg0, arg1, arg2, arg3, arg4, arg5) {\n        super();\n        if (Curve.isCurve(arg0)) {\n            this.controlPoint1 = arg0.controlPoint1.clone().round(2);\n            this.controlPoint2 = arg0.controlPoint2.clone().round(2);\n            this.endPoint = arg0.end.clone().round(2);\n        }\n        else if (typeof arg0 === 'number') {\n            this.controlPoint1 = new Point(arg0, arg1).round(2);\n            this.controlPoint2 = new Point(arg2, arg3).round(2);\n            this.endPoint = new Point(arg4, arg5).round(2);\n        }\n        else {\n            this.controlPoint1 = Point.create(arg0).round(2);\n            this.controlPoint2 = Point.create(arg1).round(2);\n            this.endPoint = Point.create(arg2).round(2);\n        }\n    }\n    get type() {\n        return 'C';\n    }\n    get curve() {\n        return new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    }\n    bbox() {\n        return this.curve.bbox();\n    }\n    closestPoint(p) {\n        return this.curve.closestPoint(p);\n    }\n    closestPointLength(p) {\n        return this.curve.closestPointLength(p);\n    }\n    closestPointNormalizedLength(p) {\n        return this.curve.closestPointNormalizedLength(p);\n    }\n    closestPointTangent(p) {\n        return this.curve.closestPointTangent(p);\n    }\n    length() {\n        return this.curve.length();\n    }\n    divideAt(ratio, options = {}) {\n        // TODO: fix options\n        const divided = this.curve.divideAt(ratio, options);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    }\n    divideAtLength(length, options = {}) {\n        // TODO: fix options\n        const divided = this.curve.divideAtLength(length, options);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    }\n    divideAtT(t) {\n        const divided = this.curve.divideAtT(t);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt(ratio) {\n        return this.curve.pointAt(ratio);\n    }\n    pointAtLength(length) {\n        return this.curve.pointAtLength(length);\n    }\n    tangentAt(ratio) {\n        return this.curve.tangentAt(ratio);\n    }\n    tangentAtLength(length) {\n        return this.curve.tangentAtLength(length);\n    }\n    isDifferentiable() {\n        if (!this.previousSegment) {\n            return false;\n        }\n        const start = this.start;\n        const control1 = this.controlPoint1;\n        const control2 = this.controlPoint2;\n        const end = this.end;\n        return !(start.equals(control1) &&\n            control1.equals(control2) &&\n            control2.equals(end));\n    }\n    scale(sx, sy, origin) {\n        this.controlPoint1.scale(sx, sy, origin);\n        this.controlPoint2.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.controlPoint1.rotate(angle, origin);\n        this.controlPoint2.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.controlPoint1.translate(tx, ty);\n            this.controlPoint2.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.controlPoint1.translate(tx);\n            this.controlPoint2.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    equals(s) {\n        return (this.start.equals(s.start) &&\n            this.end.equals(s.end) &&\n            this.controlPoint1.equals(s.controlPoint1) &&\n            this.controlPoint2.equals(s.controlPoint2));\n    }\n    clone() {\n        return new CurveTo(this.controlPoint1, this.controlPoint2, this.end);\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            controlPoint1: this.controlPoint1.toJSON(),\n            controlPoint2: this.controlPoint2.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        const c1 = this.controlPoint1;\n        const c2 = this.controlPoint2;\n        const end = this.end;\n        return [this.type, c1.x, c1.y, c2.x, c2.y, end.x, end.y].join(' ');\n    }\n}\n(function (CurveTo) {\n    function create(...args) {\n        const len = args.length;\n        const arg0 = args[0];\n        // curve provided\n        if (Curve.isCurve(arg0)) {\n            return new CurveTo(arg0);\n        }\n        // points provided\n        if (Point.isPointLike(arg0)) {\n            if (len === 3) {\n                return new CurveTo(args[0], args[1], args[2]);\n            }\n            // this is a poly-bezier segment\n            const segments = [];\n            for (let i = 0; i < len; i += 3) {\n                segments.push(new CurveTo(args[i], args[i + 1], args[i + 2]));\n            }\n            return segments;\n        }\n        // coordinates provided\n        if (len === 6) {\n            return new CurveTo(args[0], args[1], args[2], args[3], args[4], args[5]);\n        }\n        // this is a poly-bezier segment\n        const segments = [];\n        for (let i = 0; i < len; i += 6) {\n            segments.push(new CurveTo(args[i], args[i + 1], args[i + 2], args[i + 3], args[i + 4], args[i + 5]));\n        }\n        return segments;\n    }\n    CurveTo.create = create;\n})(CurveTo || (CurveTo = {}));\n//# sourceMappingURL=curveto.js.map","import { GeometryUtil } from '../util';\nfunction rotate(x, y, rad) {\n    return {\n        x: x * Math.cos(rad) - y * Math.sin(rad),\n        y: x * Math.sin(rad) + y * Math.cos(rad),\n    };\n}\nfunction q2c(x1, y1, ax, ay, x2, y2) {\n    const v13 = 1 / 3;\n    const v23 = 2 / 3;\n    return [\n        v13 * x1 + v23 * ax,\n        v13 * y1 + v23 * ay,\n        v13 * x2 + v23 * ax,\n        v13 * y2 + v23 * ay,\n        x2,\n        y2,\n    ];\n}\nfunction a2c(x1, y1, rx, ry, angle, largeArcFlag, sweepFlag, x2, y2, recursive) {\n    // for more information of where this math came from visit:\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n    const v120 = (Math.PI * 120) / 180;\n    const rad = (Math.PI / 180) * (+angle || 0);\n    let res = [];\n    let xy;\n    let f1;\n    let f2;\n    let cx;\n    let cy;\n    if (!recursive) {\n        xy = rotate(x1, y1, -rad);\n        x1 = xy.x; // eslint-disable-line\n        y1 = xy.y; // eslint-disable-line\n        xy = rotate(x2, y2, -rad);\n        x2 = xy.x; // eslint-disable-line\n        y2 = xy.y; // eslint-disable-line\n        const x = (x1 - x2) / 2;\n        const y = (y1 - y2) / 2;\n        let h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n        if (h > 1) {\n            h = Math.sqrt(h);\n            rx = h * rx; // eslint-disable-line\n            ry = h * ry; // eslint-disable-line\n        }\n        const rx2 = rx * rx;\n        const ry2 = ry * ry;\n        const k = (largeArcFlag === sweepFlag ? -1 : 1) *\n            Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));\n        cx = (k * rx * y) / ry + (x1 + x2) / 2;\n        cy = (k * -ry * x) / rx + (y1 + y2) / 2;\n        f1 = Math.asin((y1 - cy) / ry);\n        f2 = Math.asin((y2 - cy) / ry);\n        f1 = x1 < cx ? Math.PI - f1 : f1;\n        f2 = x2 < cx ? Math.PI - f2 : f2;\n        if (f1 < 0) {\n            f1 = Math.PI * 2 + f1;\n        }\n        if (f2 < 0) {\n            f2 = Math.PI * 2 + f2;\n        }\n        if (sweepFlag && f1 > f2) {\n            f1 -= Math.PI * 2;\n        }\n        if (!sweepFlag && f2 > f1) {\n            f2 -= Math.PI * 2;\n        }\n    }\n    else {\n        f1 = recursive[0];\n        f2 = recursive[1];\n        cx = recursive[2];\n        cy = recursive[3];\n    }\n    let df = f2 - f1;\n    if (Math.abs(df) > v120) {\n        const f2old = f2;\n        const x2old = x2;\n        const y2old = y2;\n        f2 = f1 + v120 * (sweepFlag && f2 > f1 ? 1 : -1);\n        x2 = cx + rx * Math.cos(f2); // eslint-disable-line\n        y2 = cy + ry * Math.sin(f2); // eslint-disable-line\n        res = a2c(x2, y2, rx, ry, angle, 0, sweepFlag, x2old, y2old, [\n            f2,\n            f2old,\n            cx,\n            cy,\n        ]);\n    }\n    df = f2 - f1;\n    const c1 = Math.cos(f1);\n    const s1 = Math.sin(f1);\n    const c2 = Math.cos(f2);\n    const s2 = Math.sin(f2);\n    const t = Math.tan(df / 4);\n    const hx = (4 / 3) * (rx * t);\n    const hy = (4 / 3) * (ry * t);\n    const m1 = [x1, y1];\n    const m2 = [x1 + hx * s1, y1 - hy * c1];\n    const m3 = [x2 + hx * s2, y2 - hy * c2];\n    const m4 = [x2, y2];\n    m2[0] = 2 * m1[0] - m2[0];\n    m2[1] = 2 * m1[1] - m2[1];\n    if (recursive) {\n        return [m2, m3, m4].concat(res);\n    }\n    {\n        res = [m2, m3, m4].concat(res).join().split(',');\n        const newres = [];\n        const ii = res.length;\n        for (let i = 0; i < ii; i += 1) {\n            newres[i] =\n                i % 2\n                    ? rotate(+res[i - 1], +res[i], rad).y\n                    : rotate(+res[i], +res[i + 1], rad).x;\n        }\n        return newres;\n    }\n}\nfunction parse(pathData) {\n    if (!pathData) {\n        return null;\n    }\n    const spaces = '\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029';\n    // https://regexper.com/#%28%5Ba-z%5D%29%5B%5Cs%2C%5D*%28%28-%3F%5Cd*%5C.%3F%5C%5Cd*%28%3F%3Ae%5B%5C-%2B%5D%3F%5Cd%2B%29%3F%5B%5Cs%5D*%2C%3F%5B%5Cs%5D*%29%2B%29\n    const segmentReg = new RegExp(`([a-z])[${spaces},]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[${spaces}]*,?[${spaces}]*)+)`, // eslint-disable-line\n    'ig');\n    // https://regexper.com/#%28-%3F%5Cd*%5C.%3F%5Cd*%28%3F%3Ae%5B%5C-%2B%5D%3F%5Cd%2B%29%3F%29%5B%5Cs%5D*%2C%3F%5B%5Cs%5D*\n    const commandParamReg = new RegExp(\n    // eslint-disable-next-line\n    `(-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?)[${spaces}]*,?[${spaces}]*`, 'ig');\n    const paramsCount = {\n        a: 7,\n        c: 6,\n        h: 1,\n        l: 2,\n        m: 2,\n        q: 4,\n        s: 4,\n        t: 2,\n        v: 1,\n        z: 0,\n    };\n    const segmetns = [];\n    pathData.replace(segmentReg, (input, cmd, args) => {\n        const params = [];\n        let command = cmd.toLowerCase();\n        args.replace(commandParamReg, (a, b) => {\n            if (b) {\n                params.push(+b);\n            }\n            return a;\n        });\n        if (command === 'm' && params.length > 2) {\n            segmetns.push([cmd, ...params.splice(0, 2)]);\n            command = 'l';\n            cmd = cmd === 'm' ? 'l' : 'L'; // eslint-disable-line\n        }\n        const count = paramsCount[command];\n        while (params.length >= count) {\n            segmetns.push([cmd, ...params.splice(0, count)]);\n            if (!count) {\n                break;\n            }\n        }\n        return input;\n    });\n    return segmetns;\n}\nfunction abs(pathString) {\n    const pathArray = parse(pathString);\n    // if invalid string, return 'M 0 0'\n    if (!pathArray || !pathArray.length) {\n        return [['M', 0, 0]];\n    }\n    let x = 0;\n    let y = 0;\n    let mx = 0;\n    let my = 0;\n    const segments = [];\n    for (let i = 0, ii = pathArray.length; i < ii; i += 1) {\n        const r = [];\n        segments.push(r);\n        const segment = pathArray[i];\n        const command = segment[0];\n        if (command !== command.toUpperCase()) {\n            r[0] = command.toUpperCase();\n            switch (r[0]) {\n                case 'A':\n                    r[1] = segment[1];\n                    r[2] = segment[2];\n                    r[3] = segment[3];\n                    r[4] = segment[4];\n                    r[5] = segment[5];\n                    r[6] = +segment[6] + x;\n                    r[7] = +segment[7] + y;\n                    break;\n                case 'V':\n                    r[1] = +segment[1] + y;\n                    break;\n                case 'H':\n                    r[1] = +segment[1] + x;\n                    break;\n                case 'M':\n                    mx = +segment[1] + x;\n                    my = +segment[2] + y;\n                    for (let j = 1, jj = segment.length; j < jj; j += 1) {\n                        r[j] = +segment[j] + (j % 2 ? x : y);\n                    }\n                    break;\n                default:\n                    for (let j = 1, jj = segment.length; j < jj; j += 1) {\n                        r[j] = +segment[j] + (j % 2 ? x : y);\n                    }\n                    break;\n            }\n        }\n        else {\n            for (let j = 0, jj = segment.length; j < jj; j += 1) {\n                r[j] = segment[j];\n            }\n        }\n        switch (r[0]) {\n            case 'Z':\n                x = +mx;\n                y = +my;\n                break;\n            case 'H':\n                x = r[1];\n                break;\n            case 'V':\n                y = r[1];\n                break;\n            case 'M':\n                mx = r[r.length - 2];\n                my = r[r.length - 1];\n                x = r[r.length - 2];\n                y = r[r.length - 1];\n                break;\n            default:\n                x = r[r.length - 2];\n                y = r[r.length - 1];\n                break;\n        }\n    }\n    return segments;\n}\nfunction normalize(path) {\n    const pathArray = abs(path);\n    const attrs = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null };\n    function processPath(path, d, pcom) {\n        let nx;\n        let ny;\n        if (!path) {\n            return ['C', d.x, d.y, d.x, d.y, d.x, d.y];\n        }\n        if (!(path[0] in { T: 1, Q: 1 })) {\n            d.qx = null;\n            d.qy = null;\n        }\n        switch (path[0]) {\n            case 'M':\n                d.X = path[1];\n                d.Y = path[2];\n                break;\n            case 'A':\n                if (parseFloat(path[1]) === 0 || parseFloat(path[2]) === 0) {\n                    // https://www.w3.org/TR/SVG/paths.html#ArcOutOfRangeParameters\n                    // \"If either rx or ry is 0, then this arc is treated as a\n                    // straight line segment (a \"lineto\") joining the endpoints.\"\n                    return ['L', path[6], path[7]];\n                }\n                return ['C'].concat(a2c.apply(0, [d.x, d.y].concat(path.slice(1))));\n            case 'S':\n                if (pcom === 'C' || pcom === 'S') {\n                    // In 'S' case we have to take into account, if the previous command is C/S.\n                    nx = d.x * 2 - d.bx; // And reflect the previous\n                    ny = d.y * 2 - d.by; // command's control point relative to the current point.\n                }\n                else {\n                    // or some else or nothing\n                    nx = d.x;\n                    ny = d.y;\n                }\n                return ['C', nx, ny].concat(path.slice(1));\n            case 'T':\n                if (pcom === 'Q' || pcom === 'T') {\n                    // In 'T' case we have to take into account, if the previous command is Q/T.\n                    d.qx = d.x * 2 - d.qx; // And make a reflection similar\n                    d.qy = d.y * 2 - d.qy; // to case 'S'.\n                }\n                else {\n                    // or something else or nothing\n                    d.qx = d.x;\n                    d.qy = d.y;\n                }\n                return ['C'].concat(q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n            case 'Q':\n                d.qx = path[1];\n                d.qy = path[2];\n                return ['C'].concat(q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n            case 'H':\n                return ['L'].concat(path[1], d.y);\n            case 'V':\n                return ['L'].concat(d.x, path[1]);\n            case 'L':\n                break;\n            case 'Z':\n                break;\n            default:\n                break;\n        }\n        return path;\n    }\n    function fixArc(pp, i) {\n        if (pp[i].length > 7) {\n            pp[i].shift();\n            const pi = pp[i];\n            while (pi.length) {\n                // if created multiple 'C's, their original seg is saved\n                commands[i] = 'A';\n                i += 1; // eslint-disable-line\n                pp.splice(i, 0, ['C'].concat(pi.splice(0, 6)));\n            }\n            pp.splice(i, 1);\n            ii = pathArray.length;\n        }\n    }\n    const commands = []; // path commands of original path p\n    let prevCommand = ''; // holder for previous path command of original path\n    let ii = pathArray.length;\n    for (let i = 0; i < ii; i += 1) {\n        let command = ''; // temporary holder for original path command\n        if (pathArray[i]) {\n            command = pathArray[i][0]; // save current path command\n        }\n        if (command !== 'C') {\n            // C is not saved yet, because it may be result of conversion\n            commands[i] = command; // Save current path command\n            if (i > 0) {\n                prevCommand = commands[i - 1]; // Get previous path command pcom\n            }\n        }\n        // Previous path command is inputted to processPath\n        pathArray[i] = processPath(pathArray[i], attrs, prevCommand);\n        if (commands[i] !== 'A' && command === 'C') {\n            commands[i] = 'C'; // 'A' is the only command\n        }\n        // which may produce multiple 'C's\n        // so we have to make sure that 'C' is also 'C' in original path\n        fixArc(pathArray, i); // fixArc adds also the right amount of 'A's to pcoms\n        const seg = pathArray[i];\n        const seglen = seg.length;\n        attrs.x = seg[seglen - 2];\n        attrs.y = seg[seglen - 1];\n        attrs.bx = parseFloat(seg[seglen - 4]) || attrs.x;\n        attrs.by = parseFloat(seg[seglen - 3]) || attrs.y;\n    }\n    // make sure normalized path data string starts with an M segment\n    if (!pathArray[0][0] || pathArray[0][0] !== 'M') {\n        pathArray.unshift(['M', 0, 0]);\n    }\n    return pathArray;\n}\n/**\n * Converts provided SVG path data string into a normalized path data string.\n *\n * The normalization uses a restricted subset of path commands; all segments\n * are translated into lineto, curveto, moveto, and closepath segments.\n *\n * Relative path commands are changed into their absolute counterparts,\n * and chaining of coordinates is disallowed.\n *\n * The function will always return a valid path data string; if an input\n * string cannot be normalized, 'M 0 0' is returned.\n */\nexport function normalizePathData(pathData) {\n    return normalize(pathData)\n        .map((segment) => segment.map((item) => typeof item === 'string' ? item : GeometryUtil.round(item, 2)))\n        .join(',')\n        .split(',')\n        .join(' ');\n}\n//# sourceMappingURL=normalize.js.map","import { GeometryUtil } from '../util';\nimport * as PathUtil from './util';\nimport { Line } from '../line';\nimport { Point } from '../point';\nimport { Curve } from '../curve';\nimport { Polyline } from '../polyline';\nimport { Rectangle } from '../rectangle';\nimport { Geometry } from '../geometry';\nimport { Close } from './close';\nimport { LineTo } from './lineto';\nimport { MoveTo } from './moveto';\nimport { CurveTo } from './curveto';\nimport { normalizePathData } from './normalize';\nexport class Path extends Geometry {\n    constructor(args) {\n        super();\n        this.PRECISION = 3;\n        this.segments = [];\n        if (Array.isArray(args)) {\n            if (Line.isLine(args[0]) || Curve.isCurve(args[0])) {\n                let previousObj = null;\n                const arr = args;\n                arr.forEach((o, i) => {\n                    if (i === 0) {\n                        this.appendSegment(Path.createSegment('M', o.start));\n                    }\n                    if (previousObj != null && !previousObj.end.equals(o.start)) {\n                        this.appendSegment(Path.createSegment('M', o.start));\n                    }\n                    if (Line.isLine(o)) {\n                        this.appendSegment(Path.createSegment('L', o.end));\n                    }\n                    else if (Curve.isCurve(o)) {\n                        this.appendSegment(Path.createSegment('C', o.controlPoint1, o.controlPoint2, o.end));\n                    }\n                    previousObj = o;\n                });\n            }\n            else {\n                const arr = args;\n                arr.forEach((s) => {\n                    if (s.isSegment) {\n                        this.appendSegment(s);\n                    }\n                });\n            }\n        }\n        else if (args != null) {\n            if (Line.isLine(args)) {\n                this.appendSegment(Path.createSegment('M', args.start));\n                this.appendSegment(Path.createSegment('L', args.end));\n            }\n            else if (Curve.isCurve(args)) {\n                this.appendSegment(Path.createSegment('M', args.start));\n                this.appendSegment(Path.createSegment('C', args.controlPoint1, args.controlPoint2, args.end));\n            }\n            else if (Polyline.isPolyline(args)) {\n                if (args.points && args.points.length) {\n                    args.points.forEach((point, index) => {\n                        const segment = index === 0\n                            ? Path.createSegment('M', point)\n                            : Path.createSegment('L', point);\n                        this.appendSegment(segment);\n                    });\n                }\n            }\n            else if (args.isSegment) {\n                this.appendSegment(args);\n            }\n        }\n    }\n    get start() {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        for (let i = 0; i < count; i += 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                return segment.start;\n            }\n        }\n        // if no visible segment, return last segment end point\n        return segments[count - 1].end;\n    }\n    get end() {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        for (let i = count - 1; i >= 0; i -= 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                return segment.end;\n            }\n        }\n        // if no visible segment, return last segment end point\n        return segments[count - 1].end;\n    }\n    moveTo(...args) {\n        return this.appendSegment(MoveTo.create.call(null, ...args));\n    }\n    lineTo(...args) {\n        return this.appendSegment(LineTo.create.call(null, ...args));\n    }\n    curveTo(...args) {\n        return this.appendSegment(CurveTo.create.call(null, ...args));\n    }\n    arcTo(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX, endY) {\n        const start = this.end || new Point();\n        const points = typeof endX === 'number'\n            ? PathUtil.arcToCurves(start.x, start.y, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX, endY)\n            : PathUtil.arcToCurves(start.x, start.y, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX.x, endX.y);\n        if (points != null) {\n            for (let i = 0, ii = points.length; i < ii; i += 6) {\n                this.curveTo(points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5]);\n            }\n        }\n        return this;\n    }\n    quadTo(x1, y1, x, y) {\n        const start = this.end || new Point();\n        const data = ['M', start.x, start.y];\n        if (typeof x1 === 'number') {\n            data.push('Q', x1, y1, x, y);\n        }\n        else {\n            const p = y1;\n            data.push(`Q`, x1.x, x1.y, p.x, p.y);\n        }\n        const path = Path.parse(data.join(' '));\n        this.appendSegment(path.segments.slice(1));\n        return this;\n    }\n    close() {\n        return this.appendSegment(Close.create());\n    }\n    drawPoints(points, options = {}) {\n        const raw = PathUtil.drawPoints(points, options);\n        const sub = Path.parse(raw);\n        if (sub && sub.segments) {\n            this.appendSegment(sub.segments);\n        }\n    }\n    bbox() {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        let bbox;\n        for (let i = 0; i < count; i += 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                const segmentBBox = segment.bbox();\n                if (segmentBBox != null) {\n                    bbox = bbox ? bbox.union(segmentBBox) : segmentBBox;\n                }\n            }\n        }\n        if (bbox != null) {\n            return bbox;\n        }\n        // if the path has only invisible elements, return end point of last segment\n        const lastSegment = segments[count - 1];\n        return new Rectangle(lastSegment.end.x, lastSegment.end.y, 0, 0);\n    }\n    appendSegment(seg) {\n        const count = this.segments.length;\n        let previousSegment = count !== 0 ? this.segments[count - 1] : null;\n        let currentSegment;\n        const nextSegment = null;\n        if (Array.isArray(seg)) {\n            for (let i = 0, ii = seg.length; i < ii; i += 1) {\n                const segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.push(currentSegment);\n                previousSegment = currentSegment;\n            }\n        }\n        else if (seg != null && seg.isSegment) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.push(currentSegment);\n        }\n        return this;\n    }\n    insertSegment(index, seg) {\n        const count = this.segments.length;\n        if (index < 0) {\n            index = count + index + 1; // eslint-disable-line\n        }\n        if (index > count || index < 0) {\n            throw new Error('Index out of range.');\n        }\n        let currentSegment;\n        let previousSegment = null;\n        let nextSegment = null;\n        if (count !== 0) {\n            if (index >= 1) {\n                previousSegment = this.segments[index - 1];\n                nextSegment = previousSegment.nextSegment;\n            }\n            else {\n                previousSegment = null;\n                nextSegment = this.segments[0];\n            }\n        }\n        if (!Array.isArray(seg)) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.splice(index, 0, currentSegment);\n        }\n        else {\n            for (let i = 0, ii = seg.length; i < ii; i += 1) {\n                const segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.splice(index + i, 0, currentSegment);\n                previousSegment = currentSegment;\n            }\n        }\n        return this;\n    }\n    removeSegment(index) {\n        const idx = this.fixIndex(index);\n        const removedSegment = this.segments.splice(idx, 1)[0];\n        const previousSegment = removedSegment.previousSegment;\n        const nextSegment = removedSegment.nextSegment;\n        // link the previous and next segments together (if present)\n        if (previousSegment) {\n            previousSegment.nextSegment = nextSegment;\n        }\n        if (nextSegment) {\n            nextSegment.previousSegment = previousSegment;\n        }\n        if (removedSegment.isSubpathStart && nextSegment) {\n            this.updateSubpathStartSegment(nextSegment);\n        }\n        return removedSegment;\n    }\n    replaceSegment(index, seg) {\n        const idx = this.fixIndex(index);\n        let currentSegment;\n        const replacedSegment = this.segments[idx];\n        let previousSegment = replacedSegment.previousSegment;\n        const nextSegment = replacedSegment.nextSegment;\n        let updateSubpathStart = replacedSegment.isSubpathStart;\n        if (!Array.isArray(seg)) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.splice(idx, 1, currentSegment);\n            if (updateSubpathStart && currentSegment.isSubpathStart) {\n                // already updated by `prepareSegment`\n                updateSubpathStart = false;\n            }\n        }\n        else {\n            this.segments.splice(index, 1);\n            for (let i = 0, ii = seg.length; i < ii; i += 1) {\n                const segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.splice(index + i, 0, currentSegment);\n                previousSegment = currentSegment;\n                if (updateSubpathStart && currentSegment.isSubpathStart) {\n                    updateSubpathStart = false;\n                }\n            }\n        }\n        if (updateSubpathStart && nextSegment) {\n            this.updateSubpathStartSegment(nextSegment);\n        }\n    }\n    getSegment(index) {\n        const idx = this.fixIndex(index);\n        return this.segments[idx];\n    }\n    fixIndex(index) {\n        const length = this.segments.length;\n        if (length === 0) {\n            throw new Error('Path has no segments.');\n        }\n        let i = index;\n        while (i < 0) {\n            i = length + i;\n        }\n        if (i >= length || i < 0) {\n            throw new Error('Index out of range.');\n        }\n        return i;\n    }\n    segmentAt(ratio, options = {}) {\n        const index = this.segmentIndexAt(ratio, options);\n        if (!index) {\n            return null;\n        }\n        return this.getSegment(index);\n    }\n    segmentAtLength(length, options = {}) {\n        const index = this.segmentIndexAtLength(length, options);\n        if (!index)\n            return null;\n        return this.getSegment(index);\n    }\n    segmentIndexAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const rate = GeometryUtil.clamp(ratio, 0, 1);\n        const opt = this.getOptions(options);\n        const len = this.length(opt);\n        const length = len * rate;\n        return this.segmentIndexAtLength(length, opt);\n    }\n    segmentIndexAtLength(length, options = {}) {\n        const count = this.segments.length;\n        if (count === 0) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let memo = 0;\n        let lastVisibleIndex = null;\n        for (let i = 0; i < count; i += 1) {\n            const index = fromStart ? i : count - 1 - i;\n            const segment = this.segments[index];\n            const subdivisions = segmentSubdivisions[index];\n            const len = segment.length({ precision, subdivisions });\n            if (segment.isVisible) {\n                if (length <= memo + len) {\n                    return index;\n                }\n                lastVisibleIndex = index;\n            }\n            memo += len;\n        }\n        // If length requested is higher than the length of the path, return\n        // last visible segment index. If no visible segment, return null.\n        return lastVisibleIndex;\n    }\n    getSegmentSubdivisions(options = {}) {\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = [];\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segment.getSubdivisions({ precision });\n            segmentSubdivisions.push(subdivisions);\n        }\n        return segmentSubdivisions;\n    }\n    updateSubpathStartSegment(segment) {\n        let previous = segment.previousSegment;\n        let current = segment;\n        while (current && !current.isSubpathStart) {\n            // assign previous segment's subpath start segment to this segment\n            if (previous != null) {\n                current.subpathStartSegment = previous.subpathStartSegment;\n            }\n            else {\n                current.subpathStartSegment = null;\n            }\n            previous = current;\n            current = current.nextSegment;\n        }\n    }\n    prepareSegment(segment, previousSegment, nextSegment) {\n        segment.previousSegment = previousSegment;\n        segment.nextSegment = nextSegment;\n        if (previousSegment != null) {\n            previousSegment.nextSegment = segment;\n        }\n        if (nextSegment != null) {\n            nextSegment.previousSegment = segment;\n        }\n        let updateSubpathStart = segment;\n        if (segment.isSubpathStart) {\n            // move to\n            segment.subpathStartSegment = segment;\n            updateSubpathStart = nextSegment;\n        }\n        // assign previous segment's subpath start (or self if it is a subpath start) to subsequent segments\n        if (updateSubpathStart != null) {\n            this.updateSubpathStartSegment(updateSubpathStart);\n        }\n        return segment;\n    }\n    closestPoint(p, options = {}) {\n        const t = this.closestPointT(p, options);\n        if (!t) {\n            return null;\n        }\n        return this.pointAtT(t);\n    }\n    closestPointLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        const t = this.closestPointT(p, opts);\n        if (!t) {\n            return 0;\n        }\n        return this.lengthAtT(t, opts);\n    }\n    closestPointNormalizedLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        const cpLength = this.closestPointLength(p, opts);\n        if (cpLength === 0) {\n            return 0;\n        }\n        const length = this.length(opts);\n        if (length === 0) {\n            return 0;\n        }\n        return cpLength / length;\n    }\n    closestPointT(p, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let closestPointT;\n        let minSquaredDistance = Infinity;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            if (segment.isVisible) {\n                const segmentClosestPointT = segment.closestPointT(p, {\n                    precision,\n                    subdivisions,\n                });\n                const segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n                const squaredDistance = GeometryUtil.squaredLength(segmentClosestPoint, p);\n                if (squaredDistance < minSquaredDistance) {\n                    closestPointT = { segmentIndex: i, value: segmentClosestPointT };\n                    minSquaredDistance = squaredDistance;\n                }\n            }\n        }\n        if (closestPointT) {\n            return closestPointT;\n        }\n        return { segmentIndex: this.segments.length - 1, value: 1 };\n    }\n    closestPointTangent(p, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let closestPointTangent;\n        let minSquaredDistance = Infinity;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            if (segment.isDifferentiable()) {\n                const segmentClosestPointT = segment.closestPointT(p, {\n                    precision,\n                    subdivisions,\n                });\n                const segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n                const squaredDistance = GeometryUtil.squaredLength(segmentClosestPoint, p);\n                if (squaredDistance < minSquaredDistance) {\n                    closestPointTangent = segment.tangentAtT(segmentClosestPointT);\n                    minSquaredDistance = squaredDistance;\n                }\n            }\n        }\n        if (closestPointTangent) {\n            return closestPointTangent;\n        }\n        return null;\n    }\n    containsPoint(p, options = {}) {\n        const polylines = this.toPolylines(options);\n        if (!polylines) {\n            return false;\n        }\n        let numIntersections = 0;\n        for (let i = 0, ii = polylines.length; i < ii; i += 1) {\n            const polyline = polylines[i];\n            if (polyline.containsPoint(p)) {\n                numIntersections += 1;\n            }\n        }\n        // returns `true` for odd numbers of intersections (even-odd algorithm)\n        return numIntersections % 2 === 1;\n    }\n    pointAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        if (ratio <= 0) {\n            return this.start.clone();\n        }\n        if (ratio >= 1) {\n            return this.end.clone();\n        }\n        const opts = this.getOptions(options);\n        const pathLength = this.length(opts);\n        const length = pathLength * ratio;\n        return this.pointAtLength(length, opts);\n    }\n    pointAtLength(length, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        if (length === 0) {\n            return this.start.clone();\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let lastVisibleSegment;\n        let memo = 0;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const segment = this.segments[index];\n            const subdivisions = segmentSubdivisions[index];\n            const d = segment.length({\n                precision,\n                subdivisions,\n            });\n            if (segment.isVisible) {\n                if (length <= memo + d) {\n                    return segment.pointAtLength((fromStart ? 1 : -1) * (length - memo), {\n                        precision,\n                        subdivisions,\n                    });\n                }\n                lastVisibleSegment = segment;\n            }\n            memo += d;\n        }\n        // if length requested is higher than the length of the path,\n        // return last visible segment endpoint\n        if (lastVisibleSegment) {\n            return fromStart ? lastVisibleSegment.end : lastVisibleSegment.start;\n        }\n        // if no visible segment, return last segment end point\n        const lastSegment = this.segments[this.segments.length - 1];\n        return lastSegment.end.clone();\n    }\n    pointAtT(t) {\n        const segments = this.segments;\n        const numSegments = segments.length;\n        if (numSegments === 0)\n            return null; // if segments is an empty array\n        const segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0)\n            return segments[0].pointAtT(0);\n        if (segmentIndex >= numSegments) {\n            return segments[numSegments - 1].pointAtT(1);\n        }\n        const tValue = GeometryUtil.clamp(t.value, 0, 1);\n        return segments[segmentIndex].pointAtT(tValue);\n    }\n    divideAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const rate = GeometryUtil.clamp(ratio, 0, 1);\n        const opts = this.getOptions(options);\n        const len = this.length(opts);\n        const length = len * rate;\n        return this.divideAtLength(length, opts);\n    }\n    divideAtLength(length, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let memo = 0;\n        let divided;\n        let dividedSegmentIndex;\n        let lastValidSegment;\n        let lastValidSegmentIndex;\n        let t;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const segment = this.getSegment(index);\n            const subdivisions = segmentSubdivisions[index];\n            const opts = { precision, subdivisions };\n            const len = segment.length(opts);\n            if (segment.isDifferentiable()) {\n                lastValidSegment = segment;\n                lastValidSegmentIndex = index;\n                if (length <= memo + len) {\n                    dividedSegmentIndex = index;\n                    divided = segment.divideAtLength((fromStart ? 1 : -1) * (length - memo), opts);\n                    break;\n                }\n            }\n            memo += len;\n        }\n        if (!lastValidSegment) {\n            return null;\n        }\n        if (!divided) {\n            dividedSegmentIndex = lastValidSegmentIndex;\n            t = fromStart ? 1 : 0;\n            divided = lastValidSegment.divideAtT(t);\n        }\n        // create a copy of this path and replace the identified segment with its two divided parts:\n        const pathCopy = this.clone();\n        const index = dividedSegmentIndex;\n        pathCopy.replaceSegment(index, divided);\n        const divisionStartIndex = index;\n        let divisionMidIndex = index + 1;\n        let divisionEndIndex = index + 2;\n        // do not insert the part if it looks like a point\n        if (!divided[0].isDifferentiable()) {\n            pathCopy.removeSegment(divisionStartIndex);\n            divisionMidIndex -= 1;\n            divisionEndIndex -= 1;\n        }\n        // insert a Moveto segment to ensure secondPath will be valid:\n        const movetoEnd = pathCopy.getSegment(divisionMidIndex).start;\n        pathCopy.insertSegment(divisionMidIndex, Path.createSegment('M', movetoEnd));\n        divisionEndIndex += 1;\n        // do not insert the part if it looks like a point\n        if (!divided[1].isDifferentiable()) {\n            pathCopy.removeSegment(divisionEndIndex - 1);\n            divisionEndIndex -= 1;\n        }\n        // ensure that Closepath segments in secondPath will be assigned correct subpathStartSegment:\n        const secondPathSegmentIndexConversion = divisionEndIndex - divisionStartIndex - 1;\n        for (let i = divisionEndIndex, ii = pathCopy.segments.length; i < ii; i += 1) {\n            const originalSegment = this.getSegment(i - secondPathSegmentIndexConversion);\n            const segment = pathCopy.getSegment(i);\n            if (segment.type === 'Z' &&\n                !originalSegment.subpathStartSegment.end.equals(segment.subpathStartSegment.end)) {\n                // pathCopy segment's subpathStartSegment is different from original segment's one\n                // convert this Closepath segment to a Lineto and replace it in pathCopy\n                const convertedSegment = Path.createSegment('L', originalSegment.end);\n                pathCopy.replaceSegment(i, convertedSegment);\n            }\n        }\n        // distribute pathCopy segments into two paths and return those:\n        const firstPath = new Path(pathCopy.segments.slice(0, divisionMidIndex));\n        const secondPath = new Path(pathCopy.segments.slice(divisionMidIndex));\n        return [firstPath, secondPath];\n    }\n    intersectsWithLine(line, options = {}) {\n        const polylines = this.toPolylines(options);\n        if (polylines == null) {\n            return null;\n        }\n        let intersections = null;\n        for (let i = 0, ii = polylines.length; i < ii; i += 1) {\n            const polyline = polylines[i];\n            const intersection = line.intersect(polyline);\n            if (intersection) {\n                if (intersections == null) {\n                    intersections = [];\n                }\n                if (Array.isArray(intersection)) {\n                    intersections.push(...intersection);\n                }\n                else {\n                    intersections.push(intersection);\n                }\n            }\n        }\n        return intersections;\n    }\n    isDifferentiable() {\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            if (segment.isDifferentiable()) {\n                return true;\n            }\n        }\n        return false;\n    }\n    isValid() {\n        const segments = this.segments;\n        const isValid = segments.length === 0 || segments[0].type === 'M';\n        return isValid;\n    }\n    length(options = {}) {\n        if (this.segments.length === 0) {\n            return 0;\n        }\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let length = 0;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            length += segment.length({ subdivisions });\n        }\n        return length;\n    }\n    lengthAtT(t, options = {}) {\n        const count = this.segments.length;\n        if (count === 0) {\n            return 0;\n        }\n        let segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0) {\n            return 0;\n        }\n        let tValue = GeometryUtil.clamp(t.value, 0, 1);\n        if (segmentIndex >= count) {\n            segmentIndex = count - 1;\n            tValue = 1;\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let length = 0;\n        for (let i = 0; i < segmentIndex; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            length += segment.length({ precision, subdivisions });\n        }\n        const segment = this.segments[segmentIndex];\n        const subdivisions = segmentSubdivisions[segmentIndex];\n        length += segment.lengthAtT(tValue, { precision, subdivisions });\n        return length;\n    }\n    tangentAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const rate = GeometryUtil.clamp(ratio, 0, 1);\n        const opts = this.getOptions(options);\n        const len = this.length(opts);\n        const length = len * rate;\n        return this.tangentAtLength(length, opts);\n    }\n    tangentAtLength(length, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let lastValidSegment;\n        let memo = 0;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const segment = this.segments[index];\n            const subdivisions = segmentSubdivisions[index];\n            const len = segment.length({ precision, subdivisions });\n            if (segment.isDifferentiable()) {\n                if (length <= memo + len) {\n                    return segment.tangentAtLength((fromStart ? 1 : -1) * (length - memo), {\n                        precision,\n                        subdivisions,\n                    });\n                }\n                lastValidSegment = segment;\n            }\n            memo += len;\n        }\n        // if length requested is higher than the length of the path, return tangent of endpoint of last valid segment\n        if (lastValidSegment) {\n            const t = fromStart ? 1 : 0;\n            return lastValidSegment.tangentAtT(t);\n        }\n        // if no valid segment, return null\n        return null;\n    }\n    tangentAtT(t) {\n        const count = this.segments.length;\n        if (count === 0) {\n            return null;\n        }\n        const segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0) {\n            return this.segments[0].tangentAtT(0);\n        }\n        if (segmentIndex >= count) {\n            return this.segments[count - 1].tangentAtT(1);\n        }\n        const tValue = GeometryUtil.clamp(t.value, 0, 1);\n        return this.segments[segmentIndex].tangentAtT(tValue);\n    }\n    getPrecision(options = {}) {\n        return options.precision == null ? this.PRECISION : options.precision;\n    }\n    getSubdivisions(options = {}) {\n        if (options.segmentSubdivisions == null) {\n            const precision = this.getPrecision(options);\n            return this.getSegmentSubdivisions({ precision });\n        }\n        return options.segmentSubdivisions;\n    }\n    getOptions(options = {}) {\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        return { precision, segmentSubdivisions };\n    }\n    toPoints(options = {}) {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        const segmentSubdivisions = this.getSubdivisions(options);\n        const points = [];\n        let partialPoints = [];\n        for (let i = 0; i < count; i += 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                const divisions = segmentSubdivisions[i];\n                if (divisions.length > 0) {\n                    // eslint-disable-next-line no-loop-func\n                    divisions.forEach((c) => partialPoints.push(c.start));\n                }\n                else {\n                    partialPoints.push(segment.start);\n                }\n            }\n            else if (partialPoints.length > 0) {\n                partialPoints.push(segments[i - 1].end);\n                points.push(partialPoints);\n                partialPoints = [];\n            }\n        }\n        if (partialPoints.length > 0) {\n            partialPoints.push(this.end);\n            points.push(partialPoints);\n        }\n        return points;\n    }\n    toPolylines(options = {}) {\n        const points = this.toPoints(options);\n        if (!points) {\n            return null;\n        }\n        return points.map((arr) => new Polyline(arr));\n    }\n    scale(sx, sy, origin) {\n        this.segments.forEach((s) => s.scale(sx, sy, origin));\n        return this;\n    }\n    rotate(angle, origin) {\n        this.segments.forEach((segment) => segment.rotate(angle, origin));\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.segments.forEach((s) => s.translate(tx, ty));\n        }\n        else {\n            this.segments.forEach((s) => s.translate(tx));\n        }\n        return this;\n    }\n    clone() {\n        const path = new Path();\n        this.segments.forEach((s) => path.appendSegment(s.clone()));\n        return path;\n    }\n    equals(p) {\n        if (p == null) {\n            return false;\n        }\n        const segments = this.segments;\n        const otherSegments = p.segments;\n        const count = segments.length;\n        if (otherSegments.length !== count) {\n            return false;\n        }\n        for (let i = 0; i < count; i += 1) {\n            const a = segments[i];\n            const b = otherSegments[i];\n            if (a.type !== b.type || !a.equals(b)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    toJSON() {\n        return this.segments.map((s) => s.toJSON());\n    }\n    serialize() {\n        if (!this.isValid()) {\n            throw new Error('Invalid path segments.');\n        }\n        return this.segments.map((s) => s.serialize()).join(' ');\n    }\n    toString() {\n        return this.serialize();\n    }\n}\n(function (Path) {\n    function isPath(instance) {\n        return instance != null && instance instanceof Path;\n    }\n    Path.isPath = isPath;\n})(Path || (Path = {}));\n(function (Path) {\n    function parse(pathData) {\n        if (!pathData) {\n            return new Path();\n        }\n        const path = new Path();\n        const commandRe = /(?:[a-zA-Z] *)(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)? *,? *)|(?:-?\\.\\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\\d|-|\\.)/g;\n        const commands = Path.normalize(pathData).match(commandRe);\n        if (commands != null) {\n            for (let i = 0, ii = commands.length; i < ii; i += 1) {\n                const command = commands[i];\n                const argRe = /(?:[a-zA-Z])|(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))|(?:(?:-?\\.\\d+))/g;\n                const args = command.match(argRe); // [type, coordinate1, coordinate2...]\n                if (args != null) {\n                    const type = args[0];\n                    const coords = args.slice(1).map((a) => +a);\n                    const segment = createSegment.call(null, type, ...coords);\n                    path.appendSegment(segment);\n                }\n            }\n        }\n        return path;\n    }\n    Path.parse = parse;\n    function createSegment(type, ...args) {\n        if (type === 'M') {\n            return MoveTo.create.call(null, ...args);\n        }\n        if (type === 'L') {\n            return LineTo.create.call(null, ...args);\n        }\n        if (type === 'C') {\n            return CurveTo.create.call(null, ...args);\n        }\n        if (type === 'z' || type === 'Z') {\n            return Close.create();\n        }\n        throw new Error(`Invalid path segment type \"${type}\"`);\n    }\n    Path.createSegment = createSegment;\n})(Path || (Path = {}));\n(function (Path) {\n    Path.normalize = normalizePathData;\n    Path.isValid = PathUtil.isValid;\n    Path.drawArc = PathUtil.drawArc;\n    Path.drawPoints = PathUtil.drawPoints;\n    Path.arcToCurves = PathUtil.arcToCurves;\n})(Path || (Path = {}));\n//# sourceMappingURL=path.js.map","import { StringExt, FunctionExt, Platform } from '@antv/x6-common';\nexport class Registry {\n    constructor(options) {\n        this.options = Object.assign({}, options);\n        this.data = this.options.data || {};\n        this.register = this.register.bind(this);\n        this.unregister = this.unregister.bind(this);\n    }\n    get names() {\n        return Object.keys(this.data);\n    }\n    register(name, options, force = false) {\n        if (typeof name === 'object') {\n            Object.entries(name).forEach(([key, val]) => {\n                this.register(key, val, options);\n            });\n            return;\n        }\n        if (this.exist(name) && !force && !Platform.isApplyingHMR()) {\n            this.onDuplicated(name);\n        }\n        const process = this.options.process;\n        const entity = process\n            ? FunctionExt.call(process, this, name, options)\n            : options;\n        this.data[name] = entity;\n        return entity;\n    }\n    unregister(name) {\n        const entity = name ? this.data[name] : null;\n        delete this.data[name];\n        return entity;\n    }\n    get(name) {\n        return name ? this.data[name] : null;\n    }\n    exist(name) {\n        return name ? this.data[name] != null : false;\n    }\n    onDuplicated(name) {\n        // eslint-disable-next-line no-useless-catch\n        try {\n            // race\n            if (this.options.onConflict) {\n                FunctionExt.call(this.options.onConflict, this, name);\n            }\n            throw new Error(`${StringExt.upperFirst(this.options.type)} with name '${name}' already registered.`);\n        }\n        catch (err) {\n            throw err;\n        }\n    }\n    onNotFound(name, prefix) {\n        throw new Error(this.getSpellingSuggestion(name, prefix));\n    }\n    getSpellingSuggestion(name, prefix) {\n        const suggestion = this.getSpellingSuggestionForName(name);\n        const prefixed = prefix\n            ? `${prefix} ${StringExt.lowerFirst(this.options.type)}`\n            : this.options.type;\n        return (\n        // eslint-disable-next-line\n        `${StringExt.upperFirst(prefixed)} with name '${name}' does not exist.${suggestion ? ` Did you mean '${suggestion}'?` : ''}`);\n    }\n    getSpellingSuggestionForName(name) {\n        return StringExt.getSpellingSuggestion(name, Object.keys(this.data), (candidate) => candidate);\n    }\n}\n(function (Registry) {\n    function create(options) {\n        return new Registry(options);\n    }\n    Registry.create = create;\n})(Registry || (Registry = {}));\n//# sourceMappingURL=registry.js.map","import { Dom } from '@antv/x6-common';\nexport const dot = {\n    color: '#aaaaaa',\n    thickness: 1,\n    markup: 'rect',\n    update(elem, options) {\n        const width = options.thickness * options.sx;\n        const height = options.thickness * options.sy;\n        Dom.attr(elem, {\n            width,\n            height,\n            rx: width,\n            ry: height,\n            fill: options.color,\n        });\n    },\n};\n//# sourceMappingURL=dot.js.map","import { Dom } from '@antv/x6-common';\nexport const fixedDot = {\n    color: '#aaaaaa',\n    thickness: 1,\n    markup: 'rect',\n    update(elem, options) {\n        const size = options.sx <= 1 ? options.thickness * options.sx : options.thickness;\n        Dom.attr(elem, {\n            width: size,\n            height: size,\n            rx: size,\n            ry: size,\n            fill: options.color,\n        });\n    },\n};\n//# sourceMappingURL=fixed-dot.js.map","import { Dom } from '@antv/x6-common';\nexport const mesh = {\n    color: 'rgba(224,224,224,1)',\n    thickness: 1,\n    markup: 'path',\n    update(elem, options) {\n        let d;\n        const width = options.width;\n        const height = options.height;\n        const thickness = options.thickness;\n        if (width - thickness >= 0 && height - thickness >= 0) {\n            d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n        }\n        else {\n            d = 'M 0 0 0 0';\n        }\n        Dom.attr(elem, {\n            d,\n            stroke: options.color,\n            'stroke-width': options.thickness,\n        });\n    },\n};\n//# sourceMappingURL=mesh.js.map","import { Dom } from '@antv/x6-common';\nexport const doubleMesh = [\n    {\n        color: 'rgba(224,224,224,1)',\n        thickness: 1,\n        markup: 'path',\n        update(elem, options) {\n            let d;\n            const width = options.width;\n            const height = options.height;\n            const thickness = options.thickness;\n            if (width - thickness >= 0 && height - thickness >= 0) {\n                d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n            }\n            else {\n                d = 'M 0 0 0 0';\n            }\n            Dom.attr(elem, {\n                d,\n                stroke: options.color,\n                'stroke-width': options.thickness,\n            });\n        },\n    },\n    {\n        color: 'rgba(224,224,224,0.2)',\n        thickness: 3,\n        factor: 4,\n        markup: 'path',\n        update(elem, options) {\n            let d;\n            const factor = options.factor || 1;\n            const width = options.width * factor;\n            const height = options.height * factor;\n            const thickness = options.thickness;\n            if (width - thickness >= 0 && height - thickness >= 0) {\n                d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n            }\n            else {\n                d = 'M 0 0 0 0';\n            }\n            // update wrapper size\n            options.width = width;\n            options.height = height;\n            Dom.attr(elem, {\n                d,\n                stroke: options.color,\n                'stroke-width': options.thickness,\n            });\n        },\n    },\n];\n//# sourceMappingURL=double-mesh.js.map","import { Dom, Vector } from '@antv/x6-common';\nimport { Registry } from '../registry';\nimport * as patterns from './main';\nexport class Grid {\n    constructor() {\n        this.patterns = {};\n        this.root = Vector.create(Dom.createSvgDocument(), {\n            width: '100%',\n            height: '100%',\n        }, [Dom.createSvgElement('defs')]).node;\n    }\n    add(id, elem) {\n        const firstChild = this.root.childNodes[0];\n        if (firstChild) {\n            firstChild.appendChild(elem);\n        }\n        this.patterns[id] = elem;\n        Vector.create('rect', {\n            width: '100%',\n            height: '100%',\n            fill: `url(#${id})`,\n        }).appendTo(this.root);\n    }\n    get(id) {\n        return this.patterns[id];\n    }\n    has(id) {\n        return this.patterns[id] != null;\n    }\n}\n(function (Grid) {\n    Grid.presets = patterns;\n    Grid.registry = Registry.create({\n        type: 'grid',\n    });\n    Grid.registry.register(Grid.presets, true);\n})(Grid || (Grid = {}));\n//# sourceMappingURL=index.js.map","export const flipX = function (img) {\n    // d b\n    // d b\n    const canvas = document.createElement('canvas');\n    const width = img.width;\n    const height = img.height;\n    canvas.width = width * 2;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    // left image\n    ctx.drawImage(img, 0, 0, width, height);\n    // flipped right image\n    ctx.translate(2 * width, 0);\n    ctx.scale(-1, 1);\n    ctx.drawImage(img, 0, 0, width, height);\n    return canvas;\n};\n//# sourceMappingURL=flip-x.js.map","export const flipY = function (img) {\n    // d d\n    // q q\n    const canvas = document.createElement('canvas');\n    const width = img.width;\n    const height = img.height;\n    canvas.width = width;\n    canvas.height = height * 2;\n    const ctx = canvas.getContext('2d');\n    // top image\n    ctx.drawImage(img, 0, 0, width, height);\n    // flipped bottom image\n    ctx.translate(0, 2 * height);\n    ctx.scale(1, -1);\n    ctx.drawImage(img, 0, 0, width, height);\n    return canvas;\n};\n//# sourceMappingURL=flip-y.js.map","export const flipXY = function (img) {\n    // d b\n    // q p\n    const canvas = document.createElement('canvas');\n    const width = img.width;\n    const height = img.height;\n    canvas.width = 2 * width;\n    canvas.height = 2 * height;\n    const ctx = canvas.getContext('2d');\n    // top-left image\n    ctx.drawImage(img, 0, 0, width, height);\n    // xy-flipped bottom-right image\n    ctx.setTransform(-1, 0, 0, -1, canvas.width, canvas.height);\n    ctx.drawImage(img, 0, 0, width, height);\n    // x-flipped top-right image\n    ctx.setTransform(-1, 0, 0, 1, canvas.width, 0);\n    ctx.drawImage(img, 0, 0, width, height);\n    // y-flipped bottom-left image\n    ctx.setTransform(1, 0, 0, -1, 0, canvas.height);\n    ctx.drawImage(img, 0, 0, width, height);\n    return canvas;\n};\n//# sourceMappingURL=flip-xy.js.map","import { Angle } from '@antv/x6-geometry';\nexport const watermark = function (img, options) {\n    const width = img.width;\n    const height = img.height;\n    const canvas = document.createElement('canvas');\n    canvas.width = width * 3;\n    canvas.height = height * 3;\n    const ctx = canvas.getContext('2d');\n    const angle = options.angle != null ? -options.angle : -20;\n    const radians = Angle.toRad(angle);\n    const stepX = canvas.width / 4;\n    const stepY = canvas.height / 4;\n    for (let i = 0; i < 4; i += 1) {\n        for (let j = 0; j < 4; j += 1) {\n            if ((i + j) % 2 > 0) {\n                ctx.setTransform(1, 0, 0, 1, (2 * i - 1) * stepX, (2 * j - 1) * stepY);\n                ctx.rotate(radians);\n                ctx.drawImage(img, -width / 2, -height / 2, width, height);\n            }\n        }\n    }\n    return canvas;\n};\n//# sourceMappingURL=watermark.js.map","/* eslint-disable @typescript-eslint/ban-types */\nimport { Registry } from '../registry';\nimport * as patterns from './main';\nexport var Background;\n(function (Background) {\n    Background.presets = Object.assign({}, patterns);\n    Background.presets['flip-x'] = patterns.flipX;\n    Background.presets['flip-y'] = patterns.flipY;\n    Background.presets['flip-xy'] = patterns.flipXY;\n    Background.registry = Registry.create({\n        type: 'background pattern',\n    });\n    Background.registry.register(Background.presets, true);\n})(Background || (Background = {}));\n//# sourceMappingURL=index.js.map","import { Registry } from '../registry';\nimport * as filters from './main';\nexport var Filter;\n(function (Filter) {\n    Filter.presets = filters;\n    Filter.registry = Registry.create({\n        type: 'filter',\n    });\n    Filter.registry.register(Filter.presets, true);\n})(Filter || (Filter = {}));\n//# sourceMappingURL=index.js.map","export function getString(value, defaultValue) {\n    return value != null ? value : defaultValue;\n}\nexport function getNumber(num, defaultValue) {\n    return num != null && Number.isFinite(num) ? num : defaultValue;\n}\n//# sourceMappingURL=util.js.map","import { getString, getNumber } from './util';\nexport function outline(args = {}) {\n    const color = getString(args.color, 'blue');\n    const width = getNumber(args.width, 1);\n    const margin = getNumber(args.margin, 2);\n    const opacity = getNumber(args.opacity, 1);\n    const innerRadius = margin;\n    const outerRadius = margin + width;\n    return `\n    <filter>\n      <feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/>\n      <feMorphology in=\"SourceAlpha\" result=\"morphedOuter\" operator=\"dilate\" radius=\"${outerRadius}\" />\n      <feMorphology in=\"SourceAlpha\" result=\"morphedInner\" operator=\"dilate\" radius=\"${innerRadius}\" />\n      <feComposite result=\"morphedOuterColored\" in=\"colored\" in2=\"morphedOuter\" operator=\"in\"/>\n      <feComposite operator=\"xor\" in=\"morphedOuterColored\" in2=\"morphedInner\" result=\"outline\"/>\n      <feMerge>\n        <feMergeNode in=\"outline\"/>\n        <feMergeNode in=\"SourceGraphic\"/>\n      </feMerge>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=outline.js.map","import { getString, getNumber } from './util';\nexport function highlight(args = {}) {\n    const color = getString(args.color, 'red');\n    const blur = getNumber(args.blur, 0);\n    const width = getNumber(args.width, 1);\n    const opacity = getNumber(args.opacity, 1);\n    return `\n      <filter>\n        <feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/>\n        <feMorphology result=\"morphed\" in=\"SourceGraphic\" operator=\"dilate\" radius=\"${width}\"/>\n        <feComposite result=\"composed\" in=\"colored\" in2=\"morphed\" operator=\"in\"/>\n        <feGaussianBlur result=\"blured\" in=\"composed\" stdDeviation=\"${blur}\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"blured\" mode=\"normal\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=highlight.js.map","import { getNumber } from './util';\nexport function blur(args = {}) {\n    const x = getNumber(args.x, 2);\n    const stdDeviation = args.y != null && Number.isFinite(args.y) ? [x, args.y] : x;\n    return `\n    <filter>\n      <feGaussianBlur stdDeviation=\"${stdDeviation}\"/>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=blur.js.map","import { getString, getNumber } from './util';\nexport function dropShadow(args = {}) {\n    const dx = getNumber(args.dx, 0);\n    const dy = getNumber(args.dy, 0);\n    const color = getString(args.color, 'black');\n    const blur = getNumber(args.blur, 4);\n    const opacity = getNumber(args.opacity, 1);\n    return 'SVGFEDropShadowElement' in window\n        ? `<filter>\n         <feDropShadow stdDeviation=\"${blur}\" dx=\"${dx}\" dy=\"${dy}\" flood-color=\"${color}\" flood-opacity=\"${opacity}\" />\n       </filter>`.trim()\n        : `<filter>\n         <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"${blur}\" />\n         <feOffset dx=\"${dx}\" dy=\"${dy}\" result=\"offsetblur\" />\n         <feFlood flood-color=\"${color}\" />\n         <feComposite in2=\"offsetblur\" operator=\"in\" />\n         <feComponentTransfer>\n           <feFuncA type=\"linear\" slope=\"${opacity}\" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in=\"SourceGraphic\"/>\n         </feMerge>\n       </filter>`.trim();\n}\n//# sourceMappingURL=drop-shadow.js.map","import { getNumber } from './util';\nexport function grayScale(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const a = 0.2126 + 0.7874 * (1 - amount);\n    const b = 0.7152 - 0.7152 * (1 - amount);\n    const c = 0.0722 - 0.0722 * (1 - amount);\n    const d = 0.2126 - 0.2126 * (1 - amount);\n    const e = 0.7152 + 0.2848 * (1 - amount);\n    const f = 0.0722 - 0.0722 * (1 - amount);\n    const g = 0.2126 - 0.2126 * (1 - amount);\n    const h = 0.0722 + 0.9278 * (1 - amount);\n    return `\n    <filter>\n      <feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0\"/>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=gray-scale.js.map","import { getNumber } from './util';\nexport function sepia(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const a = 0.393 + 0.607 * (1 - amount);\n    const b = 0.769 - 0.769 * (1 - amount);\n    const c = 0.189 - 0.189 * (1 - amount);\n    const d = 0.349 - 0.349 * (1 - amount);\n    const e = 0.686 + 0.314 * (1 - amount);\n    const f = 0.168 - 0.168 * (1 - amount);\n    const g = 0.272 - 0.272 * (1 - amount);\n    const h = 0.534 - 0.534 * (1 - amount);\n    const i = 0.131 + 0.869 * (1 - amount);\n    return `\n      <filter>\n        <feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=sepia.js.map","import { getNumber } from './util';\nexport function saturate(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    return `\n      <filter>\n        <feColorMatrix type=\"saturate\" values=\"${1 - amount}\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=saturate.js.map","import { getNumber } from './util';\nexport function hueRotate(args = {}) {\n    const angle = getNumber(args.angle, 0);\n    return `\n      <filter>\n        <feColorMatrix type=\"hueRotate\" values=\"${angle}\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=hue-rotate.js.map","import { getNumber } from './util';\nexport function invert(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const amount2 = 1 - amount;\n    return `\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n          <feFuncG type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n          <feFuncB type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n        </feComponentTransfer>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=invert.js.map","import { getNumber } from './util';\nexport function brightness(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    return `\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type=\"linear\" slope=\"${amount}\"/>\n        <feFuncG type=\"linear\" slope=\"${amount}\"/>\n        <feFuncB type=\"linear\" slope=\"${amount}\"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=brightness.js.map","import { getNumber } from './util';\nexport function contrast(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const amount2 = 0.5 - amount / 2;\n    return `\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n        <feFuncG type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n        <feFuncB type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=contrast.js.map","export const raw = {\n    xlinkHref: 'xlink:href',\n    xlinkShow: 'xlink:show',\n    xlinkRole: 'xlink:role',\n    xlinkType: 'xlink:type',\n    xlinkArcrole: 'xlink:arcrole',\n    xlinkTitle: 'xlink:title',\n    xlinkActuate: 'xlink:actuate',\n    xmlSpace: 'xml:space',\n    xmlBase: 'xml:base',\n    xmlLang: 'xml:lang',\n    preserveAspectRatio: 'preserveAspectRatio',\n    requiredExtension: 'requiredExtension',\n    requiredFeatures: 'requiredFeatures',\n    systemLanguage: 'systemLanguage',\n    externalResourcesRequired: 'externalResourceRequired',\n};\n//# sourceMappingURL=raw.js.map","import { Point, Path, Polyline } from '@antv/x6-geometry';\nimport { NumberExt, FunctionExt, Dom } from '@antv/x6-common';\nexport const ref = {\n// We do not set `ref` attribute directly on an element.\n// The attribute itself does not qualify for relative positioning.\n};\n// if `refX` is in [0, 1] then `refX` is a fraction of bounding box width\n// if `refX` is < 0 then `refX`'s absolute values is the right coordinate of the bounding box\n// otherwise, `refX` is the left coordinate of the bounding box\nexport const refX = {\n    position: positionWrapper('x', 'width', 'origin'),\n};\nexport const refY = {\n    position: positionWrapper('y', 'height', 'origin'),\n};\n// `ref-dx` and `ref-dy` define the offset of the subelement relative to the right and/or bottom\n// coordinate of the reference element.\nexport const refDx = {\n    position: positionWrapper('x', 'width', 'corner'),\n};\nexport const refDy = {\n    position: positionWrapper('y', 'height', 'corner'),\n};\n// 'ref-width'/'ref-height' defines the width/height of the subelement relatively to\n// the reference element size\n// val in 0..1         ref-width = 0.75 sets the width to 75% of the ref. el. width\n// val < 0 || val > 1  ref-height = -20 sets the height to the ref. el. height shorter by 20\nexport const refWidth = {\n    set: setWrapper('width', 'width'),\n};\nexport const refHeight = {\n    set: setWrapper('height', 'height'),\n};\nexport const refRx = {\n    set: setWrapper('rx', 'width'),\n};\nexport const refRy = {\n    set: setWrapper('ry', 'height'),\n};\nexport const refRInscribed = {\n    set: ((attrName) => {\n        const widthFn = setWrapper(attrName, 'width');\n        const heightFn = setWrapper(attrName, 'height');\n        return function (value, options) {\n            const refBBox = options.refBBox;\n            const fn = refBBox.height > refBBox.width ? widthFn : heightFn;\n            return FunctionExt.call(fn, this, value, options);\n        };\n    })('r'),\n};\nexport const refRCircumscribed = {\n    set(val, { refBBox }) {\n        let value = parseFloat(val);\n        const percentage = NumberExt.isPercentage(val);\n        if (percentage) {\n            value /= 100;\n        }\n        const diagonalLength = Math.sqrt(refBBox.height * refBBox.height + refBBox.width * refBBox.width);\n        let rValue;\n        if (Number.isFinite(value)) {\n            if (percentage || (value >= 0 && value <= 1)) {\n                rValue = value * diagonalLength;\n            }\n            else {\n                rValue = Math.max(value + diagonalLength, 0);\n            }\n        }\n        return { r: rValue };\n    },\n};\nexport const refCx = {\n    set: setWrapper('cx', 'width'),\n};\nexport const refCy = {\n    set: setWrapper('cy', 'height'),\n};\nexport const refDResetOffset = {\n    set: dWrapper({ resetOffset: true }),\n};\nexport const refDKeepOffset = {\n    set: dWrapper({ resetOffset: false }),\n};\nexport const refPointsResetOffset = {\n    set: pointsWrapper({ resetOffset: true }),\n};\nexport const refPointsKeepOffset = {\n    set: pointsWrapper({ resetOffset: false }),\n};\n// aliases\n// -------\nexport const refR = refRInscribed;\nexport const refD = refDResetOffset;\nexport const refPoints = refPointsResetOffset;\n// Allows to combine both absolute and relative positioning\n// refX: 50%, refX2: 20\nexport const refX2 = refX;\nexport const refY2 = refY;\nexport const refWidth2 = refWidth;\nexport const refHeight2 = refHeight;\n// utils\n// -----\nfunction positionWrapper(axis, dimension, origin) {\n    return (val, { refBBox }) => {\n        if (val == null) {\n            return null;\n        }\n        let value = parseFloat(val);\n        const percentage = NumberExt.isPercentage(val);\n        if (percentage) {\n            value /= 100;\n        }\n        let delta;\n        if (Number.isFinite(value)) {\n            const refOrigin = refBBox[origin];\n            if (percentage || (value > 0 && value < 1)) {\n                delta = refOrigin[axis] + refBBox[dimension] * value;\n            }\n            else {\n                delta = refOrigin[axis] + value;\n            }\n        }\n        const point = new Point();\n        point[axis] = delta || 0;\n        return point;\n    };\n}\nfunction setWrapper(attrName, dimension) {\n    return function (val, { refBBox }) {\n        let value = parseFloat(val);\n        const percentage = NumberExt.isPercentage(val);\n        if (percentage) {\n            value /= 100;\n        }\n        const attrs = {};\n        if (Number.isFinite(value)) {\n            const attrValue = percentage || (value >= 0 && value <= 1)\n                ? value * refBBox[dimension]\n                : Math.max(value + refBBox[dimension], 0);\n            attrs[attrName] = attrValue;\n        }\n        return attrs;\n    };\n}\nfunction shapeWrapper(shapeConstructor, options) {\n    const cacheName = 'x6-shape';\n    const resetOffset = options && options.resetOffset;\n    return function (value, { elem, refBBox }) {\n        let cache = Dom.data(elem, cacheName);\n        if (!cache || cache.value !== value) {\n            // only recalculate if value has changed\n            const cachedShape = shapeConstructor(value);\n            cache = {\n                value,\n                shape: cachedShape,\n                shapeBBox: cachedShape.bbox(),\n            };\n            Dom.data(elem, cacheName, cache);\n        }\n        const shape = cache.shape.clone();\n        const shapeBBox = cache.shapeBBox.clone();\n        const shapeOrigin = shapeBBox.getOrigin();\n        const refOrigin = refBBox.getOrigin();\n        shapeBBox.x = refOrigin.x;\n        shapeBBox.y = refOrigin.y;\n        const fitScale = refBBox.getMaxScaleToFit(shapeBBox, refOrigin);\n        // `maxRectScaleToFit` can give Infinity if width or height is 0\n        const sx = shapeBBox.width === 0 || refBBox.width === 0 ? 1 : fitScale.sx;\n        const sy = shapeBBox.height === 0 || refBBox.height === 0 ? 1 : fitScale.sy;\n        shape.scale(sx, sy, shapeOrigin);\n        if (resetOffset) {\n            shape.translate(-shapeOrigin.x, -shapeOrigin.y);\n        }\n        return shape;\n    };\n}\n// `d` attribute for SVGPaths\nfunction dWrapper(options) {\n    function pathConstructor(value) {\n        return Path.parse(value);\n    }\n    const shape = shapeWrapper(pathConstructor, options);\n    return (value, args) => {\n        const path = shape(value, args);\n        return {\n            d: path.serialize(),\n        };\n    };\n}\n// `points` attribute for SVGPolylines and SVGPolygons\nfunction pointsWrapper(options) {\n    const shape = shapeWrapper((points) => new Polyline(points), options);\n    return (value, args) => {\n        const polyline = shape(value, args);\n        return {\n            points: polyline.serialize(),\n        };\n    };\n}\n//# sourceMappingURL=ref.js.map","import { ObjectExt } from '@antv/x6-common';\nexport const fill = {\n    qualify: ObjectExt.isPlainObject,\n    set(fill, { view }) {\n        return `url(#${view.graph.defineGradient(fill)})`;\n    },\n};\n//# sourceMappingURL=fill.js.map","import { ObjectExt } from '@antv/x6-common';\nexport const stroke = {\n    qualify: ObjectExt.isPlainObject,\n    set(stroke, { view }) {\n        const cell = view.cell;\n        const options = Object.assign({}, stroke);\n        if (cell.isEdge() && options.type === 'linearGradient') {\n            const edgeView = view;\n            const source = edgeView.sourcePoint;\n            const target = edgeView.targetPoint;\n            options.id = `gradient-${options.type}-${cell.id}`;\n            options.attrs = Object.assign(Object.assign({}, options.attrs), { x1: source.x, y1: source.y, x2: target.x, y2: target.y, gradientUnits: 'userSpaceOnUse' });\n            view.graph.defs.remove(options.id);\n        }\n        return `url(#${view.graph.defineGradient(options)})`;\n    },\n};\n//# sourceMappingURL=stroke.js.map","import { ObjectExt, NumberExt, Dom, FunctionExt, } from '@antv/x6-common';\nexport const text = {\n    qualify(text, { attrs }) {\n        return attrs.textWrap == null || !ObjectExt.isPlainObject(attrs.textWrap);\n    },\n    set(text, { view, elem, attrs }) {\n        const cacheName = 'x6-text';\n        const cache = Dom.data(elem, cacheName);\n        const json = (str) => {\n            try {\n                return JSON.parse(str);\n            }\n            catch (error) {\n                return str;\n            }\n        };\n        const options = {\n            x: attrs.x,\n            eol: attrs.eol,\n            annotations: json(attrs.annotations),\n            textPath: json(attrs['text-path'] || attrs.textPath),\n            textVerticalAnchor: (attrs['text-vertical-anchor'] ||\n                attrs.textVerticalAnchor),\n            displayEmpty: (attrs['display-empty'] || attrs.displayEmpty) === 'true',\n            lineHeight: (attrs['line-height'] || attrs.lineHeight),\n        };\n        const fontSize = (attrs['font-size'] || attrs.fontSize);\n        const textHash = JSON.stringify([text, options]);\n        if (fontSize) {\n            elem.setAttribute('font-size', fontSize);\n        }\n        // Updates the text only if there was a change in the string\n        // or any of its attributes.\n        if (cache == null || cache !== textHash) {\n            // Text Along Path Selector\n            const textPath = options.textPath;\n            if (textPath != null && typeof textPath === 'object') {\n                const selector = textPath.selector;\n                if (typeof selector === 'string') {\n                    const pathNode = view.find(selector)[0];\n                    if (pathNode instanceof SVGPathElement) {\n                        Dom.ensureId(pathNode);\n                        options.textPath = Object.assign({ 'xlink:href': `#${pathNode.id}` }, textPath);\n                    }\n                }\n            }\n            Dom.text(elem, `${text}`, options);\n            Dom.data(elem, cacheName, textHash);\n        }\n    },\n};\nexport const textWrap = {\n    qualify: ObjectExt.isPlainObject,\n    set(val, { view, elem, attrs, refBBox }) {\n        const info = val;\n        // option `width`\n        const width = info.width || 0;\n        if (NumberExt.isPercentage(width)) {\n            refBBox.width *= parseFloat(width) / 100;\n        }\n        else if (width <= 0) {\n            refBBox.width += width;\n        }\n        else {\n            refBBox.width = width;\n        }\n        // option `height`\n        const height = info.height || 0;\n        if (NumberExt.isPercentage(height)) {\n            refBBox.height *= parseFloat(height) / 100;\n        }\n        else if (height <= 0) {\n            refBBox.height += height;\n        }\n        else {\n            refBBox.height = height;\n        }\n        // option `text`\n        let wrappedText;\n        let txt = info.text;\n        if (txt == null) {\n            // the edge of the label is assigned to txt\n            txt = attrs.text || (elem === null || elem === void 0 ? void 0 : elem.textContent);\n        }\n        if (txt != null) {\n            wrappedText = Dom.breakText(`${txt}`, refBBox, {\n                'font-weight': attrs['font-weight'] || attrs.fontWeight,\n                'font-size': attrs['font-size'] || attrs.fontSize,\n                'font-family': attrs['font-family'] || attrs.fontFamily,\n                lineHeight: attrs.lineHeight,\n            }, {\n                // svgDocument: view.graph.view.svg,\n                ellipsis: info.ellipsis,\n                // hyphen: info.hyphen as string,\n                // breakWord: info.breakWord as boolean,\n            });\n        }\n        else {\n            wrappedText = '';\n        }\n        FunctionExt.call(text.set, this, wrappedText, {\n            view,\n            elem,\n            attrs,\n            refBBox,\n            cell: view.cell,\n        });\n    },\n};\nconst isTextInUse = (val, { attrs }) => {\n    return attrs.text !== undefined;\n};\nexport const lineHeight = {\n    qualify: isTextInUse,\n};\nexport const textVerticalAnchor = {\n    qualify: isTextInUse,\n};\nexport const textPath = {\n    qualify: isTextInUse,\n};\nexport const annotations = {\n    qualify: isTextInUse,\n};\nexport const eol = {\n    qualify: isTextInUse,\n};\nexport const displayEmpty = {\n    qualify: isTextInUse,\n};\n//# sourceMappingURL=text.js.map","import { Dom } from '@antv/x6-common';\nexport const title = {\n    qualify(title, { elem }) {\n        // HTMLElement title is specified via an attribute (i.e. not an element)\n        return elem instanceof SVGElement;\n    },\n    set(val, { elem }) {\n        const cacheName = 'x6-title';\n        const title = `${val}`;\n        const cache = Dom.data(elem, cacheName);\n        if (cache == null || cache !== title) {\n            Dom.data(elem, cacheName, title);\n            // Generally SVGTitleElement should be the first child\n            // element of its parent.\n            const firstChild = elem.firstChild;\n            if (firstChild && firstChild.tagName.toUpperCase() === 'TITLE') {\n                // Update an existing title\n                const titleElem = firstChild;\n                titleElem.textContent = title;\n            }\n            else {\n                // Create a new title\n                const titleNode = document.createElementNS(elem.namespaceURI, 'title');\n                titleNode.textContent = title;\n                elem.insertBefore(titleNode, firstChild);\n            }\n        }\n    },\n};\n//# sourceMappingURL=title.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\n// `x-align` when set to `middle` causes centering of the subelement around its new x coordinate.\n// `x-align` when set to `right` uses the x coordinate as referenced to the right of the bbox.\nexport const xAlign = {\n    offset: offsetWrapper('x', 'width', 'right'),\n};\n// `y-align` when set to `middle` causes centering of the subelement around its new y coordinate.\n// `y-align` when set to `bottom` uses the y coordinate as referenced to the bottom of the bbox.\nexport const yAlign = {\n    offset: offsetWrapper('y', 'height', 'bottom'),\n};\nexport const resetOffset = {\n    offset(val, { refBBox }) {\n        return val ? { x: -refBBox.x, y: -refBBox.y } : { x: 0, y: 0 };\n    },\n};\nfunction offsetWrapper(axis, dimension, corner) {\n    return (value, { refBBox }) => {\n        const point = new Point();\n        let delta;\n        if (value === 'middle') {\n            delta = refBBox[dimension] / 2;\n        }\n        else if (value === corner) {\n            delta = refBBox[dimension];\n        }\n        else if (typeof value === 'number' && Number.isFinite(value)) {\n            delta = value > -1 && value < 1 ? -refBBox[dimension] * value : -value;\n        }\n        else if (NumberExt.isPercentage(value)) {\n            delta = (refBBox[dimension] * parseFloat(value)) / 100;\n        }\n        else {\n            delta = 0;\n        }\n        point[axis] = -(refBBox[axis] + delta);\n        return point;\n    };\n}\n//# sourceMappingURL=align.js.map","import { ObjectExt, Dom } from '@antv/x6-common';\nexport const style = {\n    qualify: ObjectExt.isPlainObject,\n    set(styles, { elem }) {\n        Dom.css(elem, styles);\n    },\n};\n//# sourceMappingURL=style.js.map","export const html = {\n    set(html, { elem }) {\n        elem.innerHTML = `${html}`;\n    },\n};\n//# sourceMappingURL=html.js.map","import { ObjectExt } from '@antv/x6-common';\nexport const filter = {\n    qualify: ObjectExt.isPlainObject,\n    set(filter, { view }) {\n        return `url(#${view.graph.defineFilter(filter)})`;\n    },\n};\n//# sourceMappingURL=filter.js.map","export const port = {\n    set(port) {\n        if (port != null && typeof port === 'object' && port.id) {\n            return port.id;\n        }\n        return port;\n    },\n};\n//# sourceMappingURL=port.js.map","import { Path } from '@antv/x6-geometry';\nexport function normalize(d, offset1, offset2) {\n    let offsetX;\n    let offsetY;\n    if (typeof offset1 === 'object') {\n        offsetX = offset1.x;\n        offsetY = offset1.y;\n    }\n    else {\n        offsetX = offset1;\n        offsetY = offset2;\n    }\n    const path = Path.parse(d);\n    const bbox = path.bbox();\n    if (bbox) {\n        let ty = -bbox.height / 2 - bbox.y;\n        let tx = -bbox.width / 2 - bbox.x;\n        if (typeof offsetX === 'number') {\n            tx -= offsetX;\n        }\n        if (typeof offsetY === 'number') {\n            ty -= offsetY;\n        }\n        path.translate(tx, ty);\n    }\n    return path.serialize();\n}\n//# sourceMappingURL=util.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { NumberExt } from '@antv/x6-common';\nimport { normalize } from './util';\nexport const block = (_a) => {\n    var { size, width, height, offset, open } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\", \"open\"]);\n    return createClassicMarker({ size, width, height, offset }, open === true, true, undefined, attrs);\n};\nexport const classic = (_a) => {\n    var { size, width, height, offset, factor } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\", \"factor\"]);\n    return createClassicMarker({ size, width, height, offset }, false, false, factor, attrs);\n};\nfunction createClassicMarker(options, open, full, factor = 3 / 4, attrs = {}) {\n    const size = options.size || 10;\n    const width = options.width || size;\n    const height = options.height || size;\n    const path = new Path();\n    const localAttrs = {};\n    if (open) {\n        path\n            .moveTo(width, 0)\n            .lineTo(0, height / 2)\n            .lineTo(width, height);\n        localAttrs.fill = 'none';\n    }\n    else {\n        path.moveTo(0, height / 2);\n        path.lineTo(width, 0);\n        if (!full) {\n            const f = NumberExt.clamp(factor, 0, 1);\n            path.lineTo(width * f, height / 2);\n        }\n        path.lineTo(width, height);\n        path.close();\n    }\n    return Object.assign(Object.assign(Object.assign({}, localAttrs), attrs), { tagName: 'path', d: normalize(path.serialize(), {\n            x: options.offset != null ? options.offset : -width / 2,\n        }) });\n}\n//# sourceMappingURL=classic.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const diamond = (_a) => {\n    var { size, width, height, offset } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\"]);\n    const s = size || 10;\n    const w = width || s;\n    const h = height || s;\n    const path = new Path();\n    path\n        .moveTo(0, h / 2)\n        .lineTo(w / 2, 0)\n        .lineTo(w, h / 2)\n        .lineTo(w / 2, h)\n        .close();\n    return Object.assign(Object.assign({}, attrs), { tagName: 'path', d: normalize(path.serialize(), offset == null ? -w / 2 : offset) });\n};\n//# sourceMappingURL=diamond.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { normalize } from './util';\nexport const path = (_a) => {\n    var { d, offsetX, offsetY } = _a, attrs = __rest(_a, [\"d\", \"offsetX\", \"offsetY\"]);\n    return Object.assign(Object.assign({}, attrs), { tagName: 'path', d: normalize(d, offsetX, offsetY) });\n};\n//# sourceMappingURL=path.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const cross = (_a) => {\n    var { size, width, height, offset } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\"]);\n    const s = size || 10;\n    const w = width || s;\n    const h = height || s;\n    const path = new Path();\n    path.moveTo(0, 0).lineTo(w, h).moveTo(0, h).lineTo(w, 0);\n    return Object.assign(Object.assign({}, attrs), { tagName: 'path', fill: 'none', d: normalize(path.serialize(), offset || -w / 2) });\n};\n//# sourceMappingURL=cross.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const async = (_a) => {\n    var { width, height, offset, open, flip } = _a, attrs = __rest(_a, [\"width\", \"height\", \"offset\", \"open\", \"flip\"]);\n    let h = height || 6;\n    const w = width || 10;\n    const opened = open === true;\n    const fliped = flip === true;\n    const result = Object.assign(Object.assign({}, attrs), { tagName: 'path' });\n    if (fliped) {\n        h = -h;\n    }\n    const path = new Path();\n    path.moveTo(0, h).lineTo(w, 0);\n    if (!opened) {\n        path.lineTo(w, h);\n        path.close();\n    }\n    else {\n        result.fill = 'none';\n    }\n    result.d = normalize(path.serialize(), {\n        x: offset || -w / 2,\n        y: h / 2,\n    });\n    return result;\n};\n//# sourceMappingURL=async.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const circle = (_a) => {\n    var { r } = _a, attrs = __rest(_a, [\"r\"]);\n    const radius = r || 5;\n    return Object.assign(Object.assign({ cx: radius }, attrs), { tagName: 'circle', r: radius });\n};\nexport const circlePlus = (_a) => {\n    var { r } = _a, attrs = __rest(_a, [\"r\"]);\n    const radius = r || 5;\n    const path = new Path();\n    path.moveTo(radius, 0).lineTo(radius, radius * 2);\n    path.moveTo(0, radius).lineTo(radius * 2, radius);\n    return {\n        children: [\n            Object.assign(Object.assign({}, circle({ r: radius })), { fill: 'none' }),\n            Object.assign(Object.assign({}, attrs), { tagName: 'path', d: normalize(path.serialize(), -radius) }),\n        ],\n    };\n};\n//# sourceMappingURL=circle.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nexport const ellipse = (_a) => {\n    var { rx, ry } = _a, attrs = __rest(_a, [\"rx\", \"ry\"]);\n    const radiusX = rx || 5;\n    const radiusy = ry || 5;\n    return Object.assign(Object.assign({ cx: radiusX }, attrs), { tagName: 'ellipse', rx: radiusX, ry: radiusy });\n};\n//# sourceMappingURL=ellipse.js.map","import { Registry } from '../registry';\nimport * as markers from './main';\nimport { normalize as normalizeMarker } from './util';\nexport var Marker;\n(function (Marker) {\n    Marker.presets = markers;\n    Marker.registry = Registry.create({\n        type: 'marker',\n    });\n    Marker.registry.register(Marker.presets, true);\n})(Marker || (Marker = {}));\n(function (Marker) {\n    Marker.normalize = normalizeMarker;\n})(Marker || (Marker = {}));\n//# sourceMappingURL=index.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Marker } from '../marker';\nfunction qualify(value) {\n    return typeof value === 'string' || ObjectExt.isPlainObject(value);\n}\nexport const sourceMarker = {\n    qualify,\n    set(marker, { view, attrs }) {\n        return createMarker('marker-start', marker, view, attrs);\n    },\n};\nexport const targetMarker = {\n    qualify,\n    set(marker, { view, attrs }) {\n        return createMarker('marker-end', marker, view, attrs, {\n            transform: 'rotate(180)',\n        });\n    },\n};\nexport const vertexMarker = {\n    qualify,\n    set(marker, { view, attrs }) {\n        return createMarker('marker-mid', marker, view, attrs);\n    },\n};\nfunction createMarker(type, marker, view, attrs, manual = {}) {\n    const def = typeof marker === 'string' ? { name: marker } : marker;\n    const { name, args } = def, others = __rest(def, [\"name\", \"args\"]);\n    let preset = others;\n    if (name && typeof name === 'string') {\n        const fn = Marker.registry.get(name);\n        if (fn) {\n            preset = fn(Object.assign(Object.assign({}, others), args));\n        }\n        else {\n            return Marker.registry.onNotFound(name);\n        }\n    }\n    const options = Object.assign(Object.assign(Object.assign({}, normalizeAttr(attrs, type)), manual), preset);\n    return {\n        [type]: `url(#${view.graph.defineMarker(options)})`,\n    };\n}\nfunction normalizeAttr(attr, type) {\n    const result = {};\n    // The context 'fill' is disregared here. The usual case is to use the\n    // marker with a connection(for which 'fill' attribute is set to 'none').\n    const stroke = attr.stroke;\n    if (typeof stroke === 'string') {\n        result.stroke = stroke;\n        result.fill = stroke;\n    }\n    // Again the context 'fill-opacity' is ignored.\n    let strokeOpacity = attr.strokeOpacity;\n    if (strokeOpacity == null) {\n        strokeOpacity = attr['stroke-opacity'];\n    }\n    if (strokeOpacity == null) {\n        strokeOpacity = attr.opacity;\n    }\n    if (strokeOpacity != null) {\n        result['stroke-opacity'] = strokeOpacity;\n        result['fill-opacity'] = strokeOpacity;\n    }\n    if (type !== 'marker-mid') {\n        const strokeWidth = parseFloat((attr.strokeWidth || attr['stroke-width']));\n        if (Number.isFinite(strokeWidth) && strokeWidth > 1) {\n            const offset = Math.ceil(strokeWidth / 2);\n            result.refX = type === 'marker-start' ? offset : -offset;\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=marker.js.map","const isEdgeView = (val, { view }) => {\n    return view.cell.isEdge();\n};\nexport const connection = {\n    qualify: isEdgeView,\n    set(val, args) {\n        var _a, _b, _c, _d;\n        const view = args.view;\n        const reverse = (val.reverse || false);\n        const stubs = (val.stubs || 0);\n        let d;\n        if (Number.isFinite(stubs) && stubs !== 0) {\n            if (!reverse) {\n                let offset;\n                if (stubs < 0) {\n                    const len = view.getConnectionLength() || 0;\n                    offset = (len + stubs) / 2;\n                }\n                else {\n                    offset = stubs;\n                }\n                const path = view.getConnection();\n                if (path) {\n                    const sourceParts = path.divideAtLength(offset);\n                    const targetParts = path.divideAtLength(-offset);\n                    if (sourceParts && targetParts) {\n                        d = `${sourceParts[0].serialize()} ${targetParts[1].serialize()}`;\n                    }\n                }\n            }\n            else {\n                let offset;\n                let length;\n                const len = view.getConnectionLength() || 0;\n                if (stubs < 0) {\n                    offset = (len + stubs) / 2;\n                    length = -stubs;\n                }\n                else {\n                    offset = stubs;\n                    length = len - stubs * 2;\n                }\n                const path = view.getConnection();\n                d = (_d = (_c = (_b = (_a = path === null || path === void 0 ? void 0 : path.divideAtLength(offset)) === null || _a === void 0 ? void 0 : _a[1]) === null || _b === void 0 ? void 0 : _b.divideAtLength(length)) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.serialize();\n            }\n        }\n        return { d: d || view.getConnectionPathData() };\n    },\n};\nexport const atConnectionLengthKeepGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtLength', { rotate: true }),\n};\nexport const atConnectionLengthIgnoreGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtLength', { rotate: false }),\n};\nexport const atConnectionRatioKeepGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtRatio', { rotate: true }),\n};\nexport const atConnectionRatioIgnoreGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtRatio', { rotate: false }),\n};\n// aliases\n// -------\nexport const atConnectionLength = atConnectionLengthKeepGradient;\nexport const atConnectionRatio = atConnectionRatioKeepGradient;\n// utils\n// -----\nfunction atConnectionWrapper(method, options) {\n    const zeroVector = { x: 1, y: 0 };\n    return (value, args) => {\n        let p;\n        let angle;\n        const view = args.view;\n        const tangent = view[method](Number(value));\n        if (tangent) {\n            angle = options.rotate ? tangent.vector().vectorAngle(zeroVector) : 0;\n            p = tangent.start;\n        }\n        else {\n            p = view.path.start;\n            angle = 0;\n        }\n        if (angle === 0) {\n            return { transform: `translate(${p.x},${p.y}')` };\n        }\n        return {\n            transform: `translate(${p.x},${p.y}') rotate(${angle})`,\n        };\n    };\n}\n//# sourceMappingURL=connection.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { Registry } from '../registry';\nimport { raw } from './raw';\nimport * as attrs from './main';\nexport var Attr;\n(function (Attr) {\n    function isValidDefinition(def, val, options) {\n        if (def != null) {\n            if (typeof def === 'string') {\n                return true;\n            }\n            if (typeof def.qualify !== 'function' ||\n                FunctionExt.call(def.qualify, this, val, options)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    Attr.isValidDefinition = isValidDefinition;\n})(Attr || (Attr = {}));\n(function (Attr) {\n    Attr.presets = Object.assign(Object.assign({}, raw), attrs);\n    Attr.registry = Registry.create({\n        type: 'attribute definition',\n    });\n    Attr.registry.register(Attr.presets, true);\n})(Attr || (Attr = {}));\n//# sourceMappingURL=index.js.map","export const Config = {\n    prefixCls: 'x6',\n    autoInsertCSS: true,\n    useCSSSelector: true,\n    prefix(suffix) {\n        return `${Config.prefixCls}-${suffix}`;\n    },\n};\n//# sourceMappingURL=index.js.map","import { Dom } from '@antv/x6-common';\nimport { Config } from '../../config';\nconst defaultClassName = Config.prefix('highlighted');\nexport const className = {\n    highlight(cellView, magnet, options) {\n        const cls = (options && options.className) || defaultClassName;\n        Dom.addClass(magnet, cls);\n    },\n    unhighlight(cellView, magnet, options) {\n        const cls = (options && options.className) || defaultClassName;\n        Dom.removeClass(magnet, cls);\n    },\n};\n//# sourceMappingURL=class.js.map","import { Dom } from '@antv/x6-common';\nimport { Config } from '../../config';\nconst className = Config.prefix('highlight-opacity');\nexport const opacity = {\n    highlight(cellView, magnet) {\n        Dom.addClass(magnet, className);\n    },\n    unhighlight(cellView, magnetEl) {\n        Dom.removeClass(magnetEl, className);\n    },\n};\n//# sourceMappingURL=opacity.js.map","import { Point, Line, Rectangle, Polyline, Ellipse, Path, } from '@antv/x6-geometry';\nimport { Dom } from '@antv/x6-common';\nimport { normalize } from '../registry/marker/util';\nexport var Util;\n(function (Util) {\n    const svgDocument = Dom.createSvgElement('svg');\n    Util.normalizeMarker = normalize;\n    /**\n     * Transforms point by an SVG transformation represented by `matrix`.\n     */\n    function transformPoint(point, matrix) {\n        const ret = Dom.createSVGPoint(point.x, point.y).matrixTransform(matrix);\n        return new Point(ret.x, ret.y);\n    }\n    Util.transformPoint = transformPoint;\n    /**\n     * Transforms line by an SVG transformation represented by `matrix`.\n     */\n    function transformLine(line, matrix) {\n        return new Line(transformPoint(line.start, matrix), transformPoint(line.end, matrix));\n    }\n    Util.transformLine = transformLine;\n    /**\n     * Transforms polyline by an SVG transformation represented by `matrix`.\n     */\n    function transformPolyline(polyline, matrix) {\n        let points = polyline instanceof Polyline ? polyline.points : polyline;\n        if (!Array.isArray(points)) {\n            points = [];\n        }\n        return new Polyline(points.map((p) => transformPoint(p, matrix)));\n    }\n    Util.transformPolyline = transformPolyline;\n    function transformRectangle(rect, matrix) {\n        const p = svgDocument.createSVGPoint();\n        p.x = rect.x;\n        p.y = rect.y;\n        const corner1 = p.matrixTransform(matrix);\n        p.x = rect.x + rect.width;\n        p.y = rect.y;\n        const corner2 = p.matrixTransform(matrix);\n        p.x = rect.x + rect.width;\n        p.y = rect.y + rect.height;\n        const corner3 = p.matrixTransform(matrix);\n        p.x = rect.x;\n        p.y = rect.y + rect.height;\n        const corner4 = p.matrixTransform(matrix);\n        const minX = Math.min(corner1.x, corner2.x, corner3.x, corner4.x);\n        const maxX = Math.max(corner1.x, corner2.x, corner3.x, corner4.x);\n        const minY = Math.min(corner1.y, corner2.y, corner3.y, corner4.y);\n        const maxY = Math.max(corner1.y, corner2.y, corner3.y, corner4.y);\n        return new Rectangle(minX, minY, maxX - minX, maxY - minY);\n    }\n    Util.transformRectangle = transformRectangle;\n    /**\n     * Returns the bounding box of the element after transformations are\n     * applied. If `withoutTransformations` is `true`, transformations of\n     * the element will not be considered when computing the bounding box.\n     * If `target` is specified, bounding box will be computed relatively\n     * to the `target` element.\n     */\n    function bbox(elem, withoutTransformations, target) {\n        let box;\n        const ownerSVGElement = elem.ownerSVGElement;\n        // If the element is not in the live DOM, it does not have a bounding\n        // box defined and so fall back to 'zero' dimension element.\n        if (!ownerSVGElement) {\n            return new Rectangle(0, 0, 0, 0);\n        }\n        try {\n            box = elem.getBBox();\n        }\n        catch (e) {\n            // Fallback for IE.\n            box = {\n                x: elem.clientLeft,\n                y: elem.clientTop,\n                width: elem.clientWidth,\n                height: elem.clientHeight,\n            };\n        }\n        if (withoutTransformations) {\n            return Rectangle.create(box);\n        }\n        const matrix = Dom.getTransformToElement(elem, target || ownerSVGElement);\n        return transformRectangle(box, matrix);\n    }\n    Util.bbox = bbox;\n    /**\n     * Returns the bounding box of the element after transformations are\n     * applied. Unlike `bbox()`, this function fixes a browser implementation\n     * bug to return the correct bounding box if this elemenent is a group of\n     * svg elements (if `options.recursive` is specified).\n     */\n    function getBBox(elem, options = {}) {\n        let outputBBox;\n        const ownerSVGElement = elem.ownerSVGElement;\n        // If the element is not in the live DOM, it does not have a bounding box\n        // defined and so fall back to 'zero' dimension element.\n        // If the element is not an SVGGraphicsElement, we could not measure the\n        // bounding box either\n        if (!ownerSVGElement || !Dom.isSVGGraphicsElement(elem)) {\n            if (Dom.isHTMLElement(elem)) {\n                // If the element is a HTMLElement, return the position relative to the body\n                const { left, top, width, height } = getBoundingOffsetRect(elem);\n                return new Rectangle(left, top, width, height);\n            }\n            return new Rectangle(0, 0, 0, 0);\n        }\n        let target = options.target;\n        const recursive = options.recursive;\n        if (!recursive) {\n            try {\n                outputBBox = elem.getBBox();\n            }\n            catch (e) {\n                outputBBox = {\n                    x: elem.clientLeft,\n                    y: elem.clientTop,\n                    width: elem.clientWidth,\n                    height: elem.clientHeight,\n                };\n            }\n            if (!target) {\n                return Rectangle.create(outputBBox);\n            }\n            // transform like target\n            const matrix = Dom.getTransformToElement(elem, target);\n            return transformRectangle(outputBBox, matrix);\n        }\n        // recursive\n        {\n            const children = elem.childNodes;\n            const n = children.length;\n            if (n === 0) {\n                return getBBox(elem, {\n                    target,\n                });\n            }\n            if (!target) {\n                target = elem; // eslint-disable-line\n            }\n            for (let i = 0; i < n; i += 1) {\n                const child = children[i];\n                let childBBox;\n                if (child.childNodes.length === 0) {\n                    childBBox = getBBox(child, {\n                        target,\n                    });\n                }\n                else {\n                    // if child is a group element, enter it with a recursive call\n                    childBBox = getBBox(child, {\n                        target,\n                        recursive: true,\n                    });\n                }\n                if (!outputBBox) {\n                    outputBBox = childBBox;\n                }\n                else {\n                    outputBBox = outputBBox.union(childBBox);\n                }\n            }\n            return outputBBox;\n        }\n    }\n    Util.getBBox = getBBox;\n    function getBoundingOffsetRect(elem) {\n        let left = 0;\n        let top = 0;\n        let width = 0;\n        let height = 0;\n        if (elem) {\n            let current = elem;\n            while (current) {\n                left += current.offsetLeft;\n                top += current.offsetTop;\n                current = current.offsetParent;\n                if (current) {\n                    left += parseInt(Dom.getComputedStyle(current, 'borderLeft'), 10);\n                    top += parseInt(Dom.getComputedStyle(current, 'borderTop'), 10);\n                }\n            }\n            width = elem.offsetWidth;\n            height = elem.offsetHeight;\n        }\n        return {\n            left,\n            top,\n            width,\n            height,\n        };\n    }\n    Util.getBoundingOffsetRect = getBoundingOffsetRect;\n    /**\n     * Convert the SVGElement to an equivalent geometric shape. The element's\n     * transformations are not taken into account.\n     *\n     * SVGRectElement      => Rectangle\n     *\n     * SVGLineElement      => Line\n     *\n     * SVGCircleElement    => Ellipse\n     *\n     * SVGEllipseElement   => Ellipse\n     *\n     * SVGPolygonElement   => Polyline\n     *\n     * SVGPolylineElement  => Polyline\n     *\n     * SVGPathElement      => Path\n     *\n     * others              => Rectangle\n     */\n    function toGeometryShape(elem) {\n        const attr = (name) => {\n            const s = elem.getAttribute(name);\n            const v = s ? parseFloat(s) : 0;\n            return Number.isNaN(v) ? 0 : v;\n        };\n        switch (elem instanceof SVGElement && elem.nodeName.toLowerCase()) {\n            case 'rect':\n                return new Rectangle(attr('x'), attr('y'), attr('width'), attr('height'));\n            case 'circle':\n                return new Ellipse(attr('cx'), attr('cy'), attr('r'), attr('r'));\n            case 'ellipse':\n                return new Ellipse(attr('cx'), attr('cy'), attr('rx'), attr('ry'));\n            case 'polyline': {\n                const points = Dom.getPointsFromSvgElement(elem);\n                return new Polyline(points);\n            }\n            case 'polygon': {\n                const points = Dom.getPointsFromSvgElement(elem);\n                if (points.length > 1) {\n                    points.push(points[0]);\n                }\n                return new Polyline(points);\n            }\n            case 'path': {\n                let d = elem.getAttribute('d');\n                if (!Path.isValid(d)) {\n                    d = Path.normalize(d);\n                }\n                return Path.parse(d);\n            }\n            case 'line': {\n                return new Line(attr('x1'), attr('y1'), attr('x2'), attr('y2'));\n            }\n            default:\n                break;\n        }\n        // Anything else is a rectangle\n        return getBBox(elem);\n    }\n    Util.toGeometryShape = toGeometryShape;\n    function translateAndAutoOrient(elem, position, reference, target) {\n        const pos = Point.create(position);\n        const ref = Point.create(reference);\n        if (!target) {\n            const svg = elem instanceof SVGSVGElement ? elem : elem.ownerSVGElement;\n            target = svg; // eslint-disable-line\n        }\n        // Clean-up previously set transformations except the scale.\n        // If we didn't clean up the previous transformations then they'd\n        // add up with the old ones. Scale is an exception as it doesn't\n        // add up, consider: `this.scale(2).scale(2).scale(2)`. The result\n        // is that the element is scaled by the factor 2, not 8.\n        const s = Dom.scale(elem);\n        elem.setAttribute('transform', '');\n        const bbox = getBBox(elem, {\n            target,\n        }).scale(s.sx, s.sy);\n        // 1. Translate to origin.\n        const translateToOrigin = Dom.createSVGTransform();\n        translateToOrigin.setTranslate(-bbox.x - bbox.width / 2, -bbox.y - bbox.height / 2);\n        // 2. Rotate around origin.\n        const rotateAroundOrigin = Dom.createSVGTransform();\n        const angle = pos.angleBetween(ref, pos.clone().translate(1, 0));\n        if (angle)\n            rotateAroundOrigin.setRotate(angle, 0, 0);\n        // 3. Translate to the `position` + the offset (half my width)\n        //    towards the `reference` point.\n        const translateFromOrigin = Dom.createSVGTransform();\n        const finalPosition = pos.clone().move(ref, bbox.width / 2);\n        translateFromOrigin.setTranslate(2 * pos.x - finalPosition.x, 2 * pos.y - finalPosition.y);\n        // 4. Get the current transformation matrix of this node\n        const ctm = Dom.getTransformToElement(elem, target);\n        // 5. Apply transformations and the scale\n        const transform = Dom.createSVGTransform();\n        transform.setMatrix(translateFromOrigin.matrix.multiply(rotateAroundOrigin.matrix.multiply(translateToOrigin.matrix.multiply(ctm.scale(s.sx, s.sy)))));\n        elem.setAttribute('transform', Dom.matrixToTransformString(transform.matrix));\n    }\n    Util.translateAndAutoOrient = translateAndAutoOrient;\n    function findShapeNode(magnet) {\n        if (magnet == null) {\n            return null;\n        }\n        let node = magnet;\n        do {\n            let tagName = node.tagName;\n            if (typeof tagName !== 'string')\n                return null;\n            tagName = tagName.toUpperCase();\n            if (Dom.hasClass(node, 'x6-port')) {\n                node = node.nextElementSibling;\n            }\n            else if (tagName === 'G') {\n                node = node.firstElementChild;\n            }\n            else if (tagName === 'TITLE') {\n                node = node.nextElementSibling;\n            }\n            else\n                break;\n        } while (node);\n        return node;\n    }\n    Util.findShapeNode = findShapeNode;\n    // BBox is calculated by the attribute and shape of the node.\n    // Because of the reduction in DOM API calls, there is a significant performance improvement.\n    function getBBoxV2(elem) {\n        const node = findShapeNode(elem);\n        if (!Dom.isSVGGraphicsElement(node)) {\n            if (Dom.isHTMLElement(elem)) {\n                const { left, top, width, height } = getBoundingOffsetRect(elem);\n                return new Rectangle(left, top, width, height);\n            }\n            return new Rectangle(0, 0, 0, 0);\n        }\n        const shape = toGeometryShape(node);\n        const bbox = shape.bbox() || Rectangle.create();\n        // const transform = node.getAttribute('transform')\n        // if (transform) {\n        //   const nodeMatrix = Dom.transformStringToMatrix(transform)\n        //   return transformRectangle(bbox, nodeMatrix)\n        // }\n        return bbox;\n    }\n    Util.getBBoxV2 = getBBoxV2;\n})(Util || (Util = {}));\n//# sourceMappingURL=index.js.map","import { ObjectExt, Dom, Vector } from '@antv/x6-common';\nimport { Config } from '../../config';\nimport { Util } from '../../util';\nconst defaultOptions = {\n    padding: 3,\n    rx: 0,\n    ry: 0,\n    attrs: {\n        'stroke-width': 3,\n        stroke: '#FEB663',\n    },\n};\nexport const stroke = {\n    highlight(cellView, magnet, options) {\n        const id = Private.getHighlighterId(magnet, options);\n        if (Private.hasCache(id)) {\n            return;\n        }\n        // eslint-disable-next-line\n        options = ObjectExt.defaultsDeep({}, options, defaultOptions);\n        const magnetVel = Vector.create(magnet);\n        let pathData;\n        let magnetBBox;\n        try {\n            pathData = magnetVel.toPathData();\n        }\n        catch (error) {\n            // Failed to get path data from magnet element.\n            // Draw a rectangle around the entire cell view instead.\n            magnetBBox = Util.bbox(magnetVel.node, true);\n            pathData = Dom.rectToPathData(Object.assign(Object.assign({}, options), magnetBBox));\n        }\n        const path = Dom.createSvgElement('path');\n        Dom.attr(path, Object.assign({ d: pathData, 'pointer-events': 'none', 'vector-effect': 'non-scaling-stroke', fill: 'none' }, (options.attrs ? Dom.kebablizeAttrs(options.attrs) : null)));\n        // const highlightVel = v.create('path').attr()\n        if (cellView.isEdgeElement(magnet)) {\n            Dom.attr(path, 'd', cellView.getConnectionPathData());\n        }\n        else {\n            let highlightMatrix = magnetVel.getTransformToElement(cellView.container);\n            // Add padding to the highlight element.\n            const padding = options.padding;\n            if (padding) {\n                if (magnetBBox == null) {\n                    magnetBBox = Util.bbox(magnetVel.node, true);\n                }\n                const cx = magnetBBox.x + magnetBBox.width / 2;\n                const cy = magnetBBox.y + magnetBBox.height / 2;\n                magnetBBox = Util.transformRectangle(magnetBBox, highlightMatrix);\n                const width = Math.max(magnetBBox.width, 1);\n                const height = Math.max(magnetBBox.height, 1);\n                const sx = (width + padding) / width;\n                const sy = (height + padding) / height;\n                const paddingMatrix = Dom.createSVGMatrix({\n                    a: sx,\n                    b: 0,\n                    c: 0,\n                    d: sy,\n                    e: cx - sx * cx,\n                    f: cy - sy * cy,\n                });\n                highlightMatrix = highlightMatrix.multiply(paddingMatrix);\n            }\n            Dom.transform(path, highlightMatrix);\n        }\n        Dom.addClass(path, Config.prefix('highlight-stroke'));\n        const cell = cellView.cell;\n        const removeHandler = () => Private.removeHighlighter(id);\n        cell.on('removed', removeHandler);\n        if (cell.model) {\n            cell.model.on('reseted', removeHandler);\n        }\n        cellView.container.appendChild(path);\n        Private.setCache(id, path);\n    },\n    unhighlight(cellView, magnet, opt) {\n        Private.removeHighlighter(Private.getHighlighterId(magnet, opt));\n    },\n};\nvar Private;\n(function (Private) {\n    function getHighlighterId(magnet, options) {\n        Dom.ensureId(magnet);\n        return magnet.id + JSON.stringify(options);\n    }\n    Private.getHighlighterId = getHighlighterId;\n    const cache = {};\n    function setCache(id, elem) {\n        cache[id] = elem;\n    }\n    Private.setCache = setCache;\n    function hasCache(id) {\n        return cache[id] != null;\n    }\n    Private.hasCache = hasCache;\n    function removeHighlighter(id) {\n        const elem = cache[id];\n        if (elem) {\n            Dom.remove(elem);\n            delete cache[id];\n        }\n    }\n    Private.removeHighlighter = removeHighlighter;\n})(Private || (Private = {}));\n//# sourceMappingURL=stroke.js.map","import { Registry } from '../registry';\nimport * as highlighters from './main';\nexport var Highlighter;\n(function (Highlighter) {\n    function check(name, highlighter) {\n        if (typeof highlighter.highlight !== 'function') {\n            throw new Error(`Highlighter '${name}' is missing required \\`highlight()\\` method`);\n        }\n        if (typeof highlighter.unhighlight !== 'function') {\n            throw new Error(`Highlighter '${name}' is missing required \\`unhighlight()\\` method`);\n        }\n    }\n    Highlighter.check = check;\n})(Highlighter || (Highlighter = {}));\n(function (Highlighter) {\n    Highlighter.presets = highlighters;\n    Highlighter.registry = Registry.create({\n        type: 'highlighter',\n    });\n    Highlighter.registry.register(Highlighter.presets, true);\n})(Highlighter || (Highlighter = {}));\n//# sourceMappingURL=index.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nexport function normalizePoint(bbox, args = {}) {\n    return new Point(NumberExt.normalizePercentage(args.x, bbox.width), NumberExt.normalizePercentage(args.y, bbox.height));\n}\nexport function toResult(point, angle, rawArgs) {\n    return Object.assign({ angle, position: point.toJSON() }, rawArgs);\n}\n//# sourceMappingURL=util.js.map","import { normalizePoint, toResult } from './util';\nexport const absolute = (portsPositionArgs, elemBBox) => {\n    return portsPositionArgs.map(({ x, y, angle }) => toResult(normalizePoint(elemBBox, { x, y }), angle || 0));\n};\n//# sourceMappingURL=absolute.js.map","import { Ellipse } from '@antv/x6-geometry';\nimport { toResult } from './util';\nexport const ellipse = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    const startAngle = groupPositionArgs.start || 0;\n    const stepAngle = groupPositionArgs.step || 20;\n    return ellipseLayout(portsPositionArgs, elemBBox, startAngle, (index, count) => (index + 0.5 - count / 2) * stepAngle);\n};\nexport const ellipseSpread = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    const startAngle = groupPositionArgs.start || 0;\n    const stepAngle = groupPositionArgs.step || 360 / portsPositionArgs.length;\n    return ellipseLayout(portsPositionArgs, elemBBox, startAngle, (index) => {\n        return index * stepAngle;\n    });\n};\nfunction ellipseLayout(portsPositionArgs, elemBBox, startAngle, stepFn) {\n    const center = elemBBox.getCenter();\n    const start = elemBBox.getTopCenter();\n    const ratio = elemBBox.width / elemBBox.height;\n    const ellipse = Ellipse.fromRect(elemBBox);\n    const count = portsPositionArgs.length;\n    return portsPositionArgs.map((item, index) => {\n        const angle = startAngle + stepFn(index, count);\n        const p = start.clone().rotate(-angle, center).scale(ratio, 1, center);\n        const theta = item.compensateRotate ? -ellipse.tangentTheta(p) : 0;\n        if (item.dx || item.dy) {\n            p.translate(item.dx || 0, item.dy || 0);\n        }\n        if (item.dr) {\n            p.move(center, item.dr);\n        }\n        return toResult(p.round(), theta, item);\n    });\n}\n//# sourceMappingURL=ellipse.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Line } from '@antv/x6-geometry';\nimport { normalizePoint, toResult } from './util';\nexport const line = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    const start = normalizePoint(elemBBox, groupPositionArgs.start || elemBBox.getOrigin());\n    const end = normalizePoint(elemBBox, groupPositionArgs.end || elemBBox.getCorner());\n    return lineLayout(portsPositionArgs, start, end, groupPositionArgs);\n};\nexport const left = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getTopLeft(), elemBBox.getBottomLeft(), groupPositionArgs);\n};\nexport const right = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getTopRight(), elemBBox.getBottomRight(), groupPositionArgs);\n};\nexport const top = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getTopLeft(), elemBBox.getTopRight(), groupPositionArgs);\n};\nexport const bottom = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getBottomLeft(), elemBBox.getBottomRight(), groupPositionArgs);\n};\nfunction lineLayout(portsPositionArgs, p1, p2, groupPositionArgs) {\n    const line = new Line(p1, p2);\n    const length = portsPositionArgs.length;\n    return portsPositionArgs.map((_a, index) => {\n        var { strict } = _a, offset = __rest(_a, [\"strict\"]);\n        const ratio = strict || groupPositionArgs.strict\n            ? (index + 1) / (length + 1)\n            : (index + 0.5) / length;\n        const p = line.pointAt(ratio);\n        if (offset.dx || offset.dy) {\n            p.translate(offset.dx || 0, offset.dy || 0);\n        }\n        return toResult(p.round(), 0, offset);\n    });\n}\n//# sourceMappingURL=line.js.map","import { Registry } from '../registry';\nimport * as layouts from './main';\nexport var PortLayout;\n(function (PortLayout) {\n    PortLayout.presets = layouts;\n    PortLayout.registry = Registry.create({\n        type: 'port layout',\n    });\n    PortLayout.registry.register(PortLayout.presets, true);\n})(PortLayout || (PortLayout = {}));\n//# sourceMappingURL=index.js.map","import { ObjectExt } from '@antv/x6-common';\nconst defaults = {\n    position: { x: 0, y: 0 },\n    angle: 0,\n    attrs: {\n        '.': {\n            y: '0',\n            'text-anchor': 'start',\n        },\n    },\n};\nexport function toResult(preset, args) {\n    const { x, y, angle, attrs } = args || {};\n    return ObjectExt.defaultsDeep({}, { angle, attrs, position: { x, y } }, preset, defaults);\n}\n//# sourceMappingURL=util.js.map","import { toResult } from './util';\nexport const manual = (portPosition, elemBBox, args) => toResult({ position: elemBBox.getTopLeft() }, args);\nexport const left = (portPosition, elemBBox, args) => toResult({\n    position: { x: -15, y: 0 },\n    attrs: { '.': { y: '.3em', 'text-anchor': 'end' } },\n}, args);\nexport const right = (portPosition, elemBBox, args) => toResult({\n    position: { x: 15, y: 0 },\n    attrs: { '.': { y: '.3em', 'text-anchor': 'start' } },\n}, args);\nexport const top = (portPosition, elemBBox, args) => toResult({\n    position: { x: 0, y: -15 },\n    attrs: { '.': { 'text-anchor': 'middle' } },\n}, args);\nexport const bottom = (portPosition, elemBBox, args) => toResult({\n    position: { x: 0, y: 15 },\n    attrs: { '.': { y: '.6em', 'text-anchor': 'middle' } },\n}, args);\n//# sourceMappingURL=side.js.map","import { toResult } from './util';\nexport const outside = (portPosition, elemBBox, args) => outsideLayout(portPosition, elemBBox, false, args);\nexport const outsideOriented = (portPosition, elemBBox, args) => outsideLayout(portPosition, elemBBox, true, args);\nexport const inside = (portPosition, elemBBox, args) => insideLayout(portPosition, elemBBox, false, args);\nexport const insideOriented = (portPosition, elemBBox, args) => insideLayout(portPosition, elemBBox, true, args);\nfunction outsideLayout(portPosition, elemBBox, autoOrient, args) {\n    const offset = args.offset != null ? args.offset : 15;\n    const angle = elemBBox.getCenter().theta(portPosition);\n    const bboxAngles = getBBoxAngles(elemBBox);\n    let y;\n    let tx;\n    let ty;\n    let textAnchor;\n    let orientAngle = 0;\n    if (angle < bboxAngles[1] || angle > bboxAngles[2]) {\n        y = '.3em';\n        tx = offset;\n        ty = 0;\n        textAnchor = 'start';\n    }\n    else if (angle < bboxAngles[0]) {\n        y = '0';\n        tx = 0;\n        ty = -offset;\n        if (autoOrient) {\n            orientAngle = -90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    else if (angle < bboxAngles[3]) {\n        y = '.3em';\n        tx = -offset;\n        ty = 0;\n        textAnchor = 'end';\n    }\n    else {\n        y = '.6em';\n        tx = 0;\n        ty = offset;\n        if (autoOrient) {\n            orientAngle = 90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    return toResult({\n        position: {\n            x: Math.round(tx),\n            y: Math.round(ty),\n        },\n        angle: orientAngle,\n        attrs: {\n            '.': {\n                y,\n                'text-anchor': textAnchor,\n            },\n        },\n    }, args);\n}\nfunction insideLayout(portPosition, elemBBox, autoOrient, args) {\n    const offset = args.offset != null ? args.offset : 15;\n    const angle = elemBBox.getCenter().theta(portPosition);\n    const bboxAngles = getBBoxAngles(elemBBox);\n    let y;\n    let tx;\n    let ty;\n    let textAnchor;\n    let orientAngle = 0;\n    if (angle < bboxAngles[1] || angle > bboxAngles[2]) {\n        y = '.3em';\n        tx = -offset;\n        ty = 0;\n        textAnchor = 'end';\n    }\n    else if (angle < bboxAngles[0]) {\n        y = '.6em';\n        tx = 0;\n        ty = offset;\n        if (autoOrient) {\n            orientAngle = 90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    else if (angle < bboxAngles[3]) {\n        y = '.3em';\n        tx = offset;\n        ty = 0;\n        textAnchor = 'start';\n    }\n    else {\n        y = '0em';\n        tx = 0;\n        ty = -offset;\n        if (autoOrient) {\n            orientAngle = -90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    return toResult({\n        position: {\n            x: Math.round(tx),\n            y: Math.round(ty),\n        },\n        angle: orientAngle,\n        attrs: {\n            '.': {\n                y,\n                'text-anchor': textAnchor,\n            },\n        },\n    }, args);\n}\nfunction getBBoxAngles(elemBBox) {\n    const center = elemBBox.getCenter();\n    const tl = center.theta(elemBBox.getTopLeft());\n    const bl = center.theta(elemBBox.getBottomLeft());\n    const br = center.theta(elemBBox.getBottomRight());\n    const tr = center.theta(elemBBox.getTopRight());\n    return [tl, tr, br, bl];\n}\n//# sourceMappingURL=inout.js.map","import { Point } from '@antv/x6-geometry';\nimport { toResult } from './util';\nexport const radial = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), false, args);\nexport const radialOriented = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), true, args);\nfunction radialLayout(portCenterOffset, autoOrient, args) {\n    const offset = args.offset != null ? args.offset : 20;\n    const origin = new Point(0, 0);\n    const angle = -portCenterOffset.theta(origin);\n    const pos = portCenterOffset\n        .clone()\n        .move(origin, offset)\n        .diff(portCenterOffset)\n        .round();\n    let y = '.3em';\n    let textAnchor;\n    let orientAngle = angle;\n    if ((angle + 90) % 180 === 0) {\n        textAnchor = autoOrient ? 'end' : 'middle';\n        if (!autoOrient && angle === -270) {\n            y = '0em';\n        }\n    }\n    else if (angle > -270 && angle < -90) {\n        textAnchor = 'start';\n        orientAngle = angle - 180;\n    }\n    else {\n        textAnchor = 'end';\n    }\n    return toResult({\n        position: pos.round().toJSON(),\n        angle: autoOrient ? orientAngle : 0,\n        attrs: {\n            '.': {\n                y,\n                'text-anchor': textAnchor,\n            },\n        },\n    }, args);\n}\n//# sourceMappingURL=radial.js.map","import { Registry } from '../registry';\nimport * as layouts from './main';\nexport var PortLabelLayout;\n(function (PortLabelLayout) {\n    PortLabelLayout.presets = layouts;\n    PortLabelLayout.registry = Registry.create({\n        type: 'port label layout',\n    });\n    PortLabelLayout.registry.register(PortLabelLayout.presets, true);\n})(PortLabelLayout || (PortLabelLayout = {}));\n//# sourceMappingURL=index.js.map","import { Dom, Basecoat } from '@antv/x6-common';\nimport { Config } from '../config';\nexport class View extends Basecoat {\n    get priority() {\n        return 2;\n    }\n    constructor() {\n        super();\n        this.cid = Private.uniqueId();\n        View.views[this.cid] = this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    confirmUpdate(flag, options) {\n        return 0;\n    }\n    empty(elem = this.container) {\n        Dom.empty(elem);\n        return this;\n    }\n    unmount(elem = this.container) {\n        Dom.remove(elem);\n        return this;\n    }\n    remove(elem = this.container) {\n        if (elem === this.container) {\n            this.removeEventListeners(document);\n            this.onRemove();\n            delete View.views[this.cid];\n        }\n        this.unmount(elem);\n        return this;\n    }\n    onRemove() { }\n    setClass(className, elem = this.container) {\n        elem.classList.value = Array.isArray(className)\n            ? className.join(' ')\n            : className;\n    }\n    addClass(className, elem = this.container) {\n        Dom.addClass(elem, Array.isArray(className) ? className.join(' ') : className);\n        return this;\n    }\n    removeClass(className, elem = this.container) {\n        Dom.removeClass(elem, Array.isArray(className) ? className.join(' ') : className);\n        return this;\n    }\n    setStyle(style, elem = this.container) {\n        Dom.css(elem, style);\n        return this;\n    }\n    setAttrs(attrs, elem = this.container) {\n        if (attrs != null && elem != null) {\n            Dom.attr(elem, attrs);\n        }\n        return this;\n    }\n    /**\n     * Returns the value of the specified attribute of `node`.\n     *\n     * If the node does not set a value for attribute, start recursing up\n     * the DOM tree from node to lookup for attribute at the ancestors of\n     * node. If the recursion reaches CellView's root node and attribute\n     * is not found even there, return `null`.\n     */\n    findAttr(attrName, elem = this.container) {\n        let current = elem;\n        while (current && current.nodeType === 1) {\n            const value = current.getAttribute(attrName);\n            if (value != null) {\n                return value;\n            }\n            if (current === this.container) {\n                return null;\n            }\n            current = current.parentNode;\n        }\n        return null;\n    }\n    find(selector, rootElem = this.container, selectors = this.selectors) {\n        return View.find(selector, rootElem, selectors).elems;\n    }\n    findOne(selector, rootElem = this.container, selectors = this.selectors) {\n        const nodes = this.find(selector, rootElem, selectors);\n        return nodes.length > 0 ? nodes[0] : null;\n    }\n    findByAttr(attrName, elem = this.container) {\n        let node = elem;\n        while (node && node.getAttribute) {\n            const val = node.getAttribute(attrName);\n            if ((val != null || node === this.container) && val !== 'false') {\n                return node;\n            }\n            node = node.parentNode;\n        }\n        // If the overall cell has set `magnet === false`, then returns\n        // `null` to announce there is no magnet found for this cell.\n        // This is especially useful to set on cells that have 'ports'.\n        // In this case, only the ports have set `magnet === true` and the\n        // overall element has `magnet === false`.\n        return null;\n    }\n    getSelector(elem, prevSelector) {\n        let selector;\n        if (elem === this.container) {\n            if (typeof prevSelector === 'string') {\n                selector = `> ${prevSelector}`;\n            }\n            return selector;\n        }\n        if (elem) {\n            const nth = Dom.index(elem) + 1;\n            selector = `${elem.tagName.toLowerCase()}:nth-child(${nth})`;\n            if (prevSelector) {\n                selector += ` > ${prevSelector}`;\n            }\n            selector = this.getSelector(elem.parentNode, selector);\n        }\n        return selector;\n    }\n    prefixClassName(className) {\n        return Config.prefix(className);\n    }\n    delegateEvents(events, append) {\n        if (events == null) {\n            return this;\n        }\n        if (!append) {\n            this.undelegateEvents();\n        }\n        const splitter = /^(\\S+)\\s*(.*)$/;\n        Object.keys(events).forEach((key) => {\n            const match = key.match(splitter);\n            if (match == null) {\n                return;\n            }\n            const method = this.getEventHandler(events[key]);\n            if (typeof method === 'function') {\n                this.delegateEvent(match[1], match[2], method);\n            }\n        });\n        return this;\n    }\n    undelegateEvents() {\n        Dom.Event.off(this.container, this.getEventNamespace());\n        return this;\n    }\n    delegateDocumentEvents(events, data) {\n        this.addEventListeners(document, events, data);\n        return this;\n    }\n    undelegateDocumentEvents() {\n        this.removeEventListeners(document);\n        return this;\n    }\n    delegateEvent(eventName, selector, listener) {\n        Dom.Event.on(this.container, eventName + this.getEventNamespace(), selector, listener);\n        return this;\n    }\n    undelegateEvent(eventName, selector, listener) {\n        const name = eventName + this.getEventNamespace();\n        if (selector == null) {\n            Dom.Event.off(this.container, name);\n        }\n        else if (typeof selector === 'string') {\n            Dom.Event.off(this.container, name, selector, listener);\n        }\n        else {\n            Dom.Event.off(this.container, name, selector);\n        }\n        return this;\n    }\n    addEventListeners(elem, events, data) {\n        if (events == null) {\n            return this;\n        }\n        const ns = this.getEventNamespace();\n        Object.keys(events).forEach((eventName) => {\n            const method = this.getEventHandler(events[eventName]);\n            if (typeof method === 'function') {\n                Dom.Event.on(elem, eventName + ns, data, method);\n            }\n        });\n        return this;\n    }\n    removeEventListeners(elem) {\n        if (elem != null) {\n            Dom.Event.off(elem, this.getEventNamespace());\n        }\n        return this;\n    }\n    getEventNamespace() {\n        return `.${Config.prefixCls}-event-${this.cid}`;\n    }\n    // eslint-disable-next-line\n    getEventHandler(handler) {\n        // eslint-disable-next-line\n        let method;\n        if (typeof handler === 'string') {\n            const fn = this[handler];\n            if (typeof fn === 'function') {\n                method = (...args) => fn.call(this, ...args);\n            }\n        }\n        else {\n            method = (...args) => handler.call(this, ...args);\n        }\n        return method;\n    }\n    getEventTarget(e, options = {}) {\n        // Touchmove/Touchend event's target is not reflecting the element\n        // under the coordinates as mousemove does.\n        // It holds the element when a touchstart triggered.\n        const { target, type, clientX = 0, clientY = 0 } = e;\n        if (options.fromPoint || type === 'touchmove' || type === 'touchend') {\n            return document.elementFromPoint(clientX, clientY);\n        }\n        return target;\n    }\n    stopPropagation(e) {\n        this.setEventData(e, { propagationStopped: true });\n        return this;\n    }\n    isPropagationStopped(e) {\n        return this.getEventData(e).propagationStopped === true;\n    }\n    getEventData(e) {\n        return this.eventData(e);\n    }\n    setEventData(e, data) {\n        return this.eventData(e, data);\n    }\n    eventData(e, data) {\n        if (e == null) {\n            throw new TypeError('Event object required');\n        }\n        let currentData = e.data;\n        const key = `__${this.cid}__`;\n        // get\n        if (data == null) {\n            if (currentData == null) {\n                return {};\n            }\n            return currentData[key] || {};\n        }\n        // set\n        if (currentData == null) {\n            currentData = e.data = {};\n        }\n        if (currentData[key] == null) {\n            currentData[key] = Object.assign({}, data);\n        }\n        else {\n            currentData[key] = Object.assign(Object.assign({}, currentData[key]), data);\n        }\n        return currentData[key];\n    }\n    normalizeEvent(evt) {\n        return View.normalizeEvent(evt);\n    }\n}\n(function (View) {\n    function createElement(tagName, isSvgElement) {\n        return isSvgElement\n            ? Dom.createSvgElement(tagName || 'g')\n            : Dom.createElementNS(tagName || 'div');\n    }\n    View.createElement = createElement;\n    function find(selector, rootElem, selectors) {\n        if (!selector || selector === '.') {\n            return { elems: [rootElem] };\n        }\n        if (selectors) {\n            const nodes = selectors[selector];\n            if (nodes) {\n                return { elems: Array.isArray(nodes) ? nodes : [nodes] };\n            }\n        }\n        if (Config.useCSSSelector) {\n            const validSelector = selector.includes('>')\n                ? `:scope ${selector}`\n                : selector;\n            return {\n                isCSSSelector: true,\n                // $(rootElem).find(selector).toArray() as Element[]\n                elems: Array.prototype.slice.call(rootElem.querySelectorAll(validSelector)),\n            };\n        }\n        return { elems: [] };\n    }\n    View.find = find;\n    function normalizeEvent(evt) {\n        let normalizedEvent = evt;\n        const originalEvent = evt.originalEvent;\n        const touchEvt = originalEvent &&\n            originalEvent.changedTouches &&\n            originalEvent.changedTouches[0];\n        if (touchEvt) {\n            // eslint-disable-next-line no-restricted-syntax\n            for (const key in evt) {\n                if (touchEvt[key] === undefined) {\n                    touchEvt[key] = evt[key];\n                }\n            }\n            normalizedEvent = touchEvt;\n        }\n        return normalizedEvent;\n    }\n    View.normalizeEvent = normalizeEvent;\n})(View || (View = {}));\n(function (View) {\n    View.views = {};\n    function getView(cid) {\n        return View.views[cid] || null;\n    }\n    View.getView = getView;\n})(View || (View = {}));\nvar Private;\n(function (Private) {\n    let counter = 0;\n    function uniqueId() {\n        const id = `v${counter}`;\n        counter += 1;\n        return id;\n    }\n    Private.uniqueId = uniqueId;\n})(Private || (Private = {}));\n//# sourceMappingURL=view.js.map","import { ObjectExt, Dom, Vector } from '@antv/x6-common';\n// eslint-disable-next-line\nexport var Markup;\n(function (Markup) {\n    function isJSONMarkup(markup) {\n        return markup != null && !isStringMarkup(markup);\n    }\n    Markup.isJSONMarkup = isJSONMarkup;\n    function isStringMarkup(markup) {\n        return markup != null && typeof markup === 'string';\n    }\n    Markup.isStringMarkup = isStringMarkup;\n    function clone(markup) {\n        return markup == null || isStringMarkup(markup)\n            ? markup\n            : ObjectExt.cloneDeep(markup);\n    }\n    Markup.clone = clone;\n    /**\n     * Removes blank space in markup to prevent create empty text node.\n     */\n    function sanitize(markup) {\n        return `${markup}`\n            .trim()\n            .replace(/[\\r|\\n]/g, ' ')\n            .replace(/>\\s+</g, '><');\n    }\n    Markup.sanitize = sanitize;\n    function parseJSONMarkup(markup, options = { ns: Dom.ns.svg }) {\n        const fragment = document.createDocumentFragment();\n        const groups = {};\n        const selectors = {};\n        const queue = [\n            {\n                markup: Array.isArray(markup) ? markup : [markup],\n                parent: fragment,\n                ns: options.ns,\n            },\n        ];\n        while (queue.length > 0) {\n            const item = queue.pop();\n            let ns = item.ns || Dom.ns.svg;\n            const defines = item.markup;\n            const parentNode = item.parent;\n            defines.forEach((define) => {\n                // tagName\n                const tagName = define.tagName;\n                if (!tagName) {\n                    throw new TypeError('Invalid tagName');\n                }\n                // ns\n                if (define.ns) {\n                    ns = define.ns;\n                }\n                const node = ns\n                    ? Dom.createElementNS(tagName, ns)\n                    : Dom.createElement(tagName);\n                // attrs\n                const attrs = define.attrs;\n                if (attrs) {\n                    Dom.attr(node, Dom.kebablizeAttrs(attrs));\n                }\n                // style\n                const style = define.style;\n                if (style) {\n                    Dom.css(node, style);\n                }\n                // classname\n                const className = define.className;\n                if (className != null) {\n                    node.setAttribute('class', Array.isArray(className) ? className.join(' ') : className);\n                }\n                // textContent\n                if (define.textContent) {\n                    node.textContent = define.textContent;\n                }\n                // selector\n                const selector = define.selector;\n                if (selector != null) {\n                    if (selectors[selector]) {\n                        throw new TypeError('Selector must be unique');\n                    }\n                    selectors[selector] = node;\n                }\n                // group\n                if (define.groupSelector) {\n                    let nodeGroups = define.groupSelector;\n                    if (!Array.isArray(nodeGroups)) {\n                        nodeGroups = [nodeGroups];\n                    }\n                    nodeGroups.forEach((name) => {\n                        if (!groups[name]) {\n                            groups[name] = [];\n                        }\n                        groups[name].push(node);\n                    });\n                }\n                parentNode.appendChild(node);\n                // children\n                const children = define.children;\n                if (Array.isArray(children)) {\n                    queue.push({ ns, markup: children, parent: node });\n                }\n            });\n        }\n        Object.keys(groups).forEach((groupName) => {\n            if (selectors[groupName]) {\n                throw new Error('Ambiguous group selector');\n            }\n            selectors[groupName] = groups[groupName];\n        });\n        return { fragment, selectors, groups };\n    }\n    Markup.parseJSONMarkup = parseJSONMarkup;\n    function createContainer(firstChild) {\n        return firstChild instanceof SVGElement\n            ? Dom.createSvgElement('g')\n            : Dom.createElement('div');\n    }\n    function renderMarkup(markup) {\n        if (isStringMarkup(markup)) {\n            const nodes = Vector.createVectors(markup);\n            const count = nodes.length;\n            if (count === 1) {\n                return {\n                    elem: nodes[0].node,\n                };\n            }\n            if (count > 1) {\n                const elem = createContainer(nodes[0].node);\n                nodes.forEach((node) => {\n                    elem.appendChild(node.node);\n                });\n                return { elem };\n            }\n            return {};\n        }\n        const result = parseJSONMarkup(markup);\n        const fragment = result.fragment;\n        let elem = null;\n        if (fragment.childNodes.length > 1) {\n            elem = createContainer(fragment.firstChild);\n            elem.appendChild(fragment);\n        }\n        else {\n            elem = fragment.firstChild;\n        }\n        return { elem, selectors: result.selectors };\n    }\n    Markup.renderMarkup = renderMarkup;\n    function parseLabelStringMarkup(markup) {\n        const children = Vector.createVectors(markup);\n        const fragment = document.createDocumentFragment();\n        for (let i = 0, n = children.length; i < n; i += 1) {\n            const currentChild = children[i].node;\n            fragment.appendChild(currentChild);\n        }\n        return { fragment, selectors: {} };\n    }\n    Markup.parseLabelStringMarkup = parseLabelStringMarkup;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getSelector(elem, stop, prev) {\n        if (elem != null) {\n            let selector;\n            const tagName = elem.tagName.toLowerCase();\n            if (elem === stop) {\n                if (typeof prev === 'string') {\n                    selector = `> ${tagName} > ${prev}`;\n                }\n                else {\n                    selector = `> ${tagName}`;\n                }\n                return selector;\n            }\n            const parent = elem.parentNode;\n            if (parent && parent.childNodes.length > 1) {\n                const nth = Dom.index(elem) + 1;\n                selector = `${tagName}:nth-child(${nth})`;\n            }\n            else {\n                selector = tagName;\n            }\n            if (prev) {\n                selector += ` > ${prev}`;\n            }\n            return getSelector(elem.parentNode, stop, selector);\n        }\n        return prev;\n    }\n    Markup.getSelector = getSelector;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getPortContainerMarkup() {\n        return 'g';\n    }\n    Markup.getPortContainerMarkup = getPortContainerMarkup;\n    function getPortMarkup() {\n        return {\n            tagName: 'circle',\n            selector: 'circle',\n            attrs: {\n                r: 10,\n                fill: '#FFFFFF',\n                stroke: '#000000',\n            },\n        };\n    }\n    Markup.getPortMarkup = getPortMarkup;\n    function getPortLabelMarkup() {\n        return {\n            tagName: 'text',\n            selector: 'text',\n            attrs: {\n                fill: '#000000',\n            },\n        };\n    }\n    Markup.getPortLabelMarkup = getPortLabelMarkup;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getEdgeMarkup() {\n        return [\n            {\n                tagName: 'path',\n                selector: 'wrap',\n                groupSelector: 'lines',\n                attrs: {\n                    fill: 'none',\n                    cursor: 'pointer',\n                    stroke: 'transparent',\n                    strokeLinecap: 'round',\n                },\n            },\n            {\n                tagName: 'path',\n                selector: 'line',\n                groupSelector: 'lines',\n                attrs: {\n                    fill: 'none',\n                    pointerEvents: 'none',\n                },\n            },\n        ];\n    }\n    Markup.getEdgeMarkup = getEdgeMarkup;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getForeignObjectMarkup(bare = false) {\n        return {\n            tagName: 'foreignObject',\n            selector: 'fo',\n            children: [\n                {\n                    ns: Dom.ns.xhtml,\n                    tagName: 'body',\n                    selector: 'foBody',\n                    attrs: {\n                        xmlns: Dom.ns.xhtml,\n                    },\n                    style: {\n                        width: '100%',\n                        height: '100%',\n                        background: 'transparent',\n                    },\n                    children: bare\n                        ? []\n                        : [\n                            {\n                                tagName: 'div',\n                                selector: 'foContent',\n                                style: {\n                                    width: '100%',\n                                    height: '100%',\n                                },\n                            },\n                        ],\n                },\n            ],\n        };\n    }\n    Markup.getForeignObjectMarkup = getForeignObjectMarkup;\n})(Markup || (Markup = {}));\n//# sourceMappingURL=markup.js.map","import { Dictionary, Dom } from '@antv/x6-common';\nimport { Util } from '../util';\nexport class Cache {\n    constructor(view) {\n        this.view = view;\n        this.clean();\n    }\n    clean() {\n        if (this.elemCache) {\n            this.elemCache.dispose();\n        }\n        this.elemCache = new Dictionary();\n        this.pathCache = {};\n    }\n    get(elem) {\n        const cache = this.elemCache;\n        if (!cache.has(elem)) {\n            this.elemCache.set(elem, {});\n        }\n        return this.elemCache.get(elem);\n    }\n    getData(elem) {\n        const meta = this.get(elem);\n        if (!meta.data) {\n            meta.data = {};\n        }\n        return meta.data;\n    }\n    getMatrix(elem) {\n        const meta = this.get(elem);\n        if (meta.matrix == null) {\n            const target = this.view.container;\n            meta.matrix = Dom.getTransformToParentElement(elem, target);\n        }\n        return Dom.createSVGMatrix(meta.matrix);\n    }\n    getShape(elem) {\n        const meta = this.get(elem);\n        if (meta.shape == null) {\n            meta.shape = Util.toGeometryShape(elem);\n        }\n        return meta.shape.clone();\n    }\n    getBoundingRect(elem) {\n        const meta = this.get(elem);\n        if (meta.boundingRect == null) {\n            meta.boundingRect = Util.getBBoxV2(elem);\n        }\n        return meta.boundingRect.clone();\n    }\n}\n//# sourceMappingURL=cache.js.map","import { ObjectExt, ArrayExt, Dom, FunctionExt, Dictionary, StringExt, } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { Attr } from '../registry/attr';\nimport { View } from './view';\nimport { Util } from '../util';\nexport class AttrManager {\n    constructor(view) {\n        this.view = view;\n    }\n    get cell() {\n        return this.view.cell;\n    }\n    getDefinition(attrName) {\n        return this.cell.getAttrDefinition(attrName);\n    }\n    processAttrs(elem, raw) {\n        let normal;\n        let set;\n        let offset;\n        let position;\n        const specials = [];\n        // divide the attributes between normal and special\n        Object.keys(raw).forEach((name) => {\n            const val = raw[name];\n            const definition = this.getDefinition(name);\n            const isValid = FunctionExt.call(Attr.isValidDefinition, this.view, definition, val, {\n                elem,\n                attrs: raw,\n                cell: this.cell,\n                view: this.view,\n            });\n            if (definition && isValid) {\n                if (typeof definition === 'string') {\n                    if (normal == null) {\n                        normal = {};\n                    }\n                    normal[definition] = val;\n                }\n                else if (val !== null) {\n                    specials.push({ name, definition });\n                }\n            }\n            else {\n                if (normal == null) {\n                    normal = {};\n                }\n                const normalName = Dom.CASE_SENSITIVE_ATTR.includes(name)\n                    ? name\n                    : StringExt.kebabCase(name);\n                normal[normalName] = val;\n            }\n        });\n        specials.forEach(({ name, definition }) => {\n            const val = raw[name];\n            const setDefine = definition;\n            if (typeof setDefine.set === 'function') {\n                if (set == null) {\n                    set = {};\n                }\n                set[name] = val;\n            }\n            const offsetDefine = definition;\n            if (typeof offsetDefine.offset === 'function') {\n                if (offset == null) {\n                    offset = {};\n                }\n                offset[name] = val;\n            }\n            const positionDefine = definition;\n            if (typeof positionDefine.position === 'function') {\n                if (position == null) {\n                    position = {};\n                }\n                position[name] = val;\n            }\n        });\n        return {\n            raw,\n            normal,\n            set,\n            offset,\n            position,\n        };\n    }\n    mergeProcessedAttrs(allProcessedAttrs, roProcessedAttrs) {\n        allProcessedAttrs.set = Object.assign(Object.assign({}, allProcessedAttrs.set), roProcessedAttrs.set);\n        allProcessedAttrs.position = Object.assign(Object.assign({}, allProcessedAttrs.position), roProcessedAttrs.position);\n        allProcessedAttrs.offset = Object.assign(Object.assign({}, allProcessedAttrs.offset), roProcessedAttrs.offset);\n        // Handle also the special transform property.\n        const transform = allProcessedAttrs.normal && allProcessedAttrs.normal.transform;\n        if (transform != null && roProcessedAttrs.normal) {\n            roProcessedAttrs.normal.transform = transform;\n        }\n        allProcessedAttrs.normal = roProcessedAttrs.normal;\n    }\n    findAttrs(cellAttrs, rootNode, selectorCache, selectors) {\n        const merge = [];\n        const result = new Dictionary();\n        Object.keys(cellAttrs).forEach((selector) => {\n            const attrs = cellAttrs[selector];\n            if (!ObjectExt.isPlainObject(attrs)) {\n                return;\n            }\n            const { isCSSSelector, elems } = View.find(selector, rootNode, selectors);\n            selectorCache[selector] = elems;\n            for (let i = 0, l = elems.length; i < l; i += 1) {\n                const elem = elems[i];\n                const unique = selectors && selectors[selector] === elem;\n                const prev = result.get(elem);\n                if (prev) {\n                    if (!prev.array) {\n                        merge.push(elem);\n                        prev.array = true;\n                        prev.attrs = [prev.attrs];\n                        prev.priority = [prev.priority];\n                    }\n                    const attributes = prev.attrs;\n                    const selectedLength = prev.priority;\n                    if (unique) {\n                        // node referenced by `selector`\n                        attributes.unshift(attrs);\n                        selectedLength.unshift(-1);\n                    }\n                    else {\n                        // node referenced by `groupSelector` or CSSSelector\n                        const sortIndex = ArrayExt.sortedIndex(selectedLength, isCSSSelector ? -1 : l);\n                        attributes.splice(sortIndex, 0, attrs);\n                        selectedLength.splice(sortIndex, 0, l);\n                    }\n                }\n                else {\n                    result.set(elem, {\n                        elem,\n                        attrs,\n                        priority: unique ? -1 : l,\n                        array: false,\n                    });\n                }\n            }\n        });\n        merge.forEach((node) => {\n            const item = result.get(node);\n            const arr = item.attrs;\n            item.attrs = arr.reduceRight((memo, attrs) => ObjectExt.merge(memo, attrs), {});\n        });\n        return result;\n    }\n    updateRelativeAttrs(elem, processedAttrs, refBBox) {\n        const rawAttrs = processedAttrs.raw || {};\n        let nodeAttrs = processedAttrs.normal || {};\n        const setAttrs = processedAttrs.set;\n        const positionAttrs = processedAttrs.position;\n        const offsetAttrs = processedAttrs.offset;\n        const getOptions = () => ({\n            elem,\n            cell: this.cell,\n            view: this.view,\n            attrs: rawAttrs,\n            refBBox: refBBox.clone(),\n        });\n        if (setAttrs != null) {\n            Object.keys(setAttrs).forEach((name) => {\n                const val = setAttrs[name];\n                const def = this.getDefinition(name);\n                if (def != null) {\n                    const ret = FunctionExt.call(def.set, this.view, val, getOptions());\n                    if (typeof ret === 'object') {\n                        nodeAttrs = Object.assign(Object.assign({}, nodeAttrs), ret);\n                    }\n                    else if (ret != null) {\n                        nodeAttrs[name] = ret;\n                    }\n                }\n            });\n        }\n        if (elem instanceof HTMLElement) {\n            // TODO: setting the `transform` attribute on HTMLElements\n            // via `node.style.transform = 'matrix(...)';` would introduce\n            // a breaking change (e.g. basic.TextBlock).\n            this.view.setAttrs(nodeAttrs, elem);\n            return;\n        }\n        // The final translation of the subelement.\n        const nodeTransform = nodeAttrs.transform;\n        const transform = nodeTransform ? `${nodeTransform}` : null;\n        const nodeMatrix = Dom.transformStringToMatrix(transform);\n        const nodePosition = new Point(nodeMatrix.e, nodeMatrix.f);\n        if (nodeTransform) {\n            delete nodeAttrs.transform;\n            nodeMatrix.e = 0;\n            nodeMatrix.f = 0;\n        }\n        let positioned = false;\n        if (positionAttrs != null) {\n            Object.keys(positionAttrs).forEach((name) => {\n                const val = positionAttrs[name];\n                const def = this.getDefinition(name);\n                if (def != null) {\n                    const ts = FunctionExt.call(def.position, this.view, val, getOptions());\n                    if (ts != null) {\n                        positioned = true;\n                        nodePosition.translate(Point.create(ts));\n                    }\n                }\n            });\n        }\n        // The node bounding box could depend on the `size`\n        // set from the previous loop.\n        this.view.setAttrs(nodeAttrs, elem);\n        let offseted = false;\n        if (offsetAttrs != null) {\n            // Check if the node is visible\n            const nodeBoundingRect = this.view.getBoundingRectOfElement(elem);\n            if (nodeBoundingRect.width > 0 && nodeBoundingRect.height > 0) {\n                const nodeBBox = Util.transformRectangle(nodeBoundingRect, nodeMatrix);\n                Object.keys(offsetAttrs).forEach((name) => {\n                    const val = offsetAttrs[name];\n                    const def = this.getDefinition(name);\n                    if (def != null) {\n                        const ts = FunctionExt.call(def.offset, this.view, val, {\n                            elem,\n                            cell: this.cell,\n                            view: this.view,\n                            attrs: rawAttrs,\n                            refBBox: nodeBBox,\n                        });\n                        if (ts != null) {\n                            offseted = true;\n                            nodePosition.translate(Point.create(ts));\n                        }\n                    }\n                });\n            }\n        }\n        if (nodeTransform != null || positioned || offseted) {\n            nodePosition.round(1);\n            nodeMatrix.e = nodePosition.x;\n            nodeMatrix.f = nodePosition.y;\n            elem.setAttribute('transform', Dom.matrixToTransformString(nodeMatrix));\n        }\n    }\n    update(rootNode, attrs, options) {\n        const selectorCache = {};\n        const nodesAttrs = this.findAttrs(options.attrs || attrs, rootNode, selectorCache, options.selectors);\n        // `nodesAttrs` are different from all attributes, when\n        // rendering only attributes sent to this method.\n        const nodesAllAttrs = options.attrs\n            ? this.findAttrs(attrs, rootNode, selectorCache, options.selectors)\n            : nodesAttrs;\n        const specialItems = [];\n        nodesAttrs.each((data) => {\n            const node = data.elem;\n            const nodeAttrs = data.attrs;\n            const processed = this.processAttrs(node, nodeAttrs);\n            if (processed.set == null &&\n                processed.position == null &&\n                processed.offset == null) {\n                this.view.setAttrs(processed.normal, node);\n            }\n            else {\n                const data = nodesAllAttrs.get(node);\n                const nodeAllAttrs = data ? data.attrs : null;\n                const refSelector = nodeAllAttrs && nodeAttrs.ref == null\n                    ? nodeAllAttrs.ref\n                    : nodeAttrs.ref;\n                let refNode;\n                if (refSelector) {\n                    refNode = (selectorCache[refSelector] ||\n                        this.view.find(refSelector, rootNode, options.selectors))[0];\n                    if (!refNode) {\n                        throw new Error(`\"${refSelector}\" reference does not exist.`);\n                    }\n                }\n                else {\n                    refNode = null;\n                }\n                const item = {\n                    node,\n                    refNode,\n                    attributes: nodeAllAttrs,\n                    processedAttributes: processed,\n                };\n                // If an element in the list is positioned relative to this one, then\n                // we want to insert this one before it in the list.\n                const index = specialItems.findIndex((item) => item.refNode === node);\n                if (index > -1) {\n                    specialItems.splice(index, 0, item);\n                }\n                else {\n                    specialItems.push(item);\n                }\n            }\n        });\n        const bboxCache = new Dictionary();\n        let rotatableMatrix;\n        specialItems.forEach((item) => {\n            const node = item.node;\n            const refNode = item.refNode;\n            let unrotatedRefBBox;\n            const isRefNodeRotatable = refNode != null &&\n                options.rotatableNode != null &&\n                Dom.contains(options.rotatableNode, refNode);\n            // Find the reference element bounding box. If no reference was\n            // provided, we use the optional bounding box.\n            if (refNode) {\n                unrotatedRefBBox = bboxCache.get(refNode);\n            }\n            if (!unrotatedRefBBox) {\n                const target = (isRefNodeRotatable ? options.rotatableNode : rootNode);\n                unrotatedRefBBox = refNode\n                    ? Util.getBBox(refNode, { target })\n                    : options.rootBBox;\n                if (refNode) {\n                    bboxCache.set(refNode, unrotatedRefBBox);\n                }\n            }\n            let processedAttrs;\n            if (options.attrs && item.attributes) {\n                // If there was a special attribute affecting the position amongst\n                // passed-in attributes we have to merge it with the rest of the\n                // element's attributes as they are necessary to update the position\n                // relatively (i.e `ref-x` && 'ref-dx').\n                processedAttrs = this.processAttrs(node, item.attributes);\n                this.mergeProcessedAttrs(processedAttrs, item.processedAttributes);\n            }\n            else {\n                processedAttrs = item.processedAttributes;\n            }\n            let refBBox = unrotatedRefBBox;\n            if (isRefNodeRotatable &&\n                options.rotatableNode != null &&\n                !options.rotatableNode.contains(node)) {\n                // If the referenced node is inside the rotatable group while the\n                // updated node is outside, we need to take the rotatable node\n                // transformation into account.\n                if (!rotatableMatrix) {\n                    rotatableMatrix = Dom.transformStringToMatrix(Dom.attr(options.rotatableNode, 'transform'));\n                }\n                refBBox = Util.transformRectangle(unrotatedRefBBox, rotatableMatrix);\n            }\n            this.updateRelativeAttrs(node, processedAttrs, refBBox);\n        });\n    }\n}\n//# sourceMappingURL=attr.js.map","/* eslint-disable no-bitwise */\nexport class FlagManager {\n    get cell() {\n        return this.view.cell;\n    }\n    constructor(view, actions, bootstrap = []) {\n        this.view = view;\n        const flags = {};\n        const attrs = {};\n        let shift = 0;\n        Object.keys(actions).forEach((attr) => {\n            let labels = actions[attr];\n            if (!Array.isArray(labels)) {\n                labels = [labels];\n            }\n            labels.forEach((label) => {\n                let flag = flags[label];\n                if (!flag) {\n                    shift += 1;\n                    flag = flags[label] = 1 << shift;\n                }\n                attrs[attr] |= flag;\n            });\n        });\n        let labels = bootstrap;\n        if (!Array.isArray(labels)) {\n            labels = [labels];\n        }\n        labels.forEach((label) => {\n            if (!flags[label]) {\n                shift += 1;\n                flags[label] = 1 << shift;\n            }\n        });\n        // 26 - 30 are reserved for paper flags\n        // 31+ overflows maximal number\n        if (shift > 25) {\n            throw new Error('Maximum number of flags exceeded.');\n        }\n        this.flags = flags;\n        this.attrs = attrs;\n        this.bootstrap = bootstrap;\n    }\n    getFlag(label) {\n        const flags = this.flags;\n        if (flags == null) {\n            return 0;\n        }\n        if (Array.isArray(label)) {\n            return label.reduce((memo, key) => memo | flags[key], 0);\n        }\n        return flags[label] | 0;\n    }\n    hasAction(flag, label) {\n        return flag & this.getFlag(label);\n    }\n    removeAction(flag, label) {\n        return flag ^ (flag & this.getFlag(label));\n    }\n    getBootstrapFlag() {\n        return this.getFlag(this.bootstrap);\n    }\n    getChangedFlag() {\n        let flag = 0;\n        if (!this.attrs) {\n            return flag;\n        }\n        Object.keys(this.attrs).forEach((attr) => {\n            if (this.cell.hasChanged(attr)) {\n                flag |= this.attrs[attr];\n            }\n        });\n        return flag;\n    }\n}\n//# sourceMappingURL=flag.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Rectangle } from '@antv/x6-geometry';\nimport { ArrayExt, ObjectExt, Dom, FunctionExt, } from '@antv/x6-common';\nimport { Registry } from '../registry/registry';\nimport { View } from './view';\nimport { Cache } from './cache';\nimport { Markup } from './markup';\nimport { ToolsView } from './tool';\nimport { AttrManager } from './attr';\nimport { FlagManager } from './flag';\nimport { Util } from '../util';\nexport class CellView extends View {\n    static getDefaults() {\n        return this.defaults;\n    }\n    static config(options) {\n        this.defaults = this.getOptions(options);\n    }\n    static getOptions(options) {\n        const mergeActions = (arr1, arr2) => {\n            if (arr2 != null) {\n                return ArrayExt.uniq([\n                    ...(Array.isArray(arr1) ? arr1 : [arr1]),\n                    ...(Array.isArray(arr2) ? arr2 : [arr2]),\n                ]);\n            }\n            return Array.isArray(arr1) ? [...arr1] : [arr1];\n        };\n        const ret = ObjectExt.cloneDeep(this.getDefaults());\n        const { bootstrap, actions, events, documentEvents } = options, others = __rest(options, [\"bootstrap\", \"actions\", \"events\", \"documentEvents\"]);\n        if (bootstrap) {\n            ret.bootstrap = mergeActions(ret.bootstrap, bootstrap);\n        }\n        if (actions) {\n            Object.entries(actions).forEach(([key, val]) => {\n                const raw = ret.actions[key];\n                if (val && raw) {\n                    ret.actions[key] = mergeActions(raw, val);\n                }\n                else if (val) {\n                    ret.actions[key] = mergeActions(val);\n                }\n            });\n        }\n        if (events) {\n            ret.events = Object.assign(Object.assign({}, ret.events), events);\n        }\n        if (options.documentEvents) {\n            ret.documentEvents = Object.assign(Object.assign({}, ret.documentEvents), documentEvents);\n        }\n        return ObjectExt.merge(ret, others);\n    }\n    get [Symbol.toStringTag]() {\n        return CellView.toStringTag;\n    }\n    constructor(cell, options = {}) {\n        super();\n        this.cell = cell;\n        this.options = this.ensureOptions(options);\n        this.graph = this.options.graph;\n        this.attr = new AttrManager(this);\n        this.flag = new FlagManager(this, this.options.actions, this.options.bootstrap);\n        this.cache = new Cache(this);\n        this.setContainer(this.ensureContainer());\n        this.setup();\n        this.init();\n    }\n    init() { }\n    onRemove() {\n        this.removeTools();\n    }\n    get priority() {\n        return this.options.priority;\n    }\n    get rootSelector() {\n        return this.options.rootSelector;\n    }\n    getConstructor() {\n        return this.constructor;\n    }\n    ensureOptions(options) {\n        return this.getConstructor().getOptions(options);\n    }\n    getContainerTagName() {\n        return this.options.isSvgElement ? 'g' : 'div';\n    }\n    getContainerStyle() { }\n    getContainerAttrs() {\n        return {\n            'data-cell-id': this.cell.id,\n            'data-shape': this.cell.shape,\n        };\n    }\n    getContainerClassName() {\n        return this.prefixClassName('cell');\n    }\n    ensureContainer() {\n        return View.createElement(this.getContainerTagName(), this.options.isSvgElement);\n    }\n    setContainer(container) {\n        if (this.container !== container) {\n            this.undelegateEvents();\n            this.container = container;\n            if (this.options.events != null) {\n                this.delegateEvents(this.options.events);\n            }\n            const attrs = this.getContainerAttrs();\n            if (attrs != null) {\n                this.setAttrs(attrs, container);\n            }\n            const style = this.getContainerStyle();\n            if (style != null) {\n                this.setStyle(style, container);\n            }\n            const className = this.getContainerClassName();\n            if (className != null) {\n                this.addClass(className, container);\n            }\n        }\n        return this;\n    }\n    isNodeView() {\n        return false;\n    }\n    isEdgeView() {\n        return false;\n    }\n    render() {\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    confirmUpdate(flag, options = {}) {\n        return 0;\n    }\n    getBootstrapFlag() {\n        return this.flag.getBootstrapFlag();\n    }\n    getFlag(actions) {\n        return this.flag.getFlag(actions);\n    }\n    hasAction(flag, actions) {\n        return this.flag.hasAction(flag, actions);\n    }\n    removeAction(flag, actions) {\n        return this.flag.removeAction(flag, actions);\n    }\n    handleAction(flag, action, handle, additionalRemovedActions) {\n        if (this.hasAction(flag, action)) {\n            handle();\n            const removedFlags = [action];\n            if (additionalRemovedActions) {\n                if (typeof additionalRemovedActions === 'string') {\n                    removedFlags.push(additionalRemovedActions);\n                }\n                else {\n                    removedFlags.push(...additionalRemovedActions);\n                }\n            }\n            return this.removeAction(flag, removedFlags);\n        }\n        return flag;\n    }\n    setup() {\n        this.cell.on('changed', ({ options }) => this.onAttrsChange(options));\n    }\n    onAttrsChange(options) {\n        let flag = this.flag.getChangedFlag();\n        if (options.updated || !flag) {\n            return;\n        }\n        if (options.dirty && this.hasAction(flag, 'update')) {\n            flag |= this.getFlag('render'); // eslint-disable-line no-bitwise\n        }\n        // tool changes should be sync render\n        if (options.toolId) {\n            options.async = false;\n        }\n        if (this.graph != null) {\n            this.graph.renderer.requestViewUpdate(this, flag, options);\n        }\n    }\n    parseJSONMarkup(markup, rootElem) {\n        const result = Markup.parseJSONMarkup(markup);\n        const selectors = result.selectors;\n        const rootSelector = this.rootSelector;\n        if (rootElem && rootSelector) {\n            if (selectors[rootSelector]) {\n                throw new Error('Invalid root selector');\n            }\n            selectors[rootSelector] = rootElem;\n        }\n        return result;\n    }\n    can(feature) {\n        let interacting = this.graph.options.interacting;\n        if (typeof interacting === 'function') {\n            interacting = FunctionExt.call(interacting, this.graph, this);\n        }\n        if (typeof interacting === 'object') {\n            let val = interacting[feature];\n            if (typeof val === 'function') {\n                val = FunctionExt.call(val, this.graph, this);\n            }\n            return val !== false;\n        }\n        if (typeof interacting === 'boolean') {\n            return interacting;\n        }\n        return false;\n    }\n    cleanCache() {\n        this.cache.clean();\n        return this;\n    }\n    getCache(elem) {\n        return this.cache.get(elem);\n    }\n    getDataOfElement(elem) {\n        return this.cache.getData(elem);\n    }\n    getMatrixOfElement(elem) {\n        return this.cache.getMatrix(elem);\n    }\n    getShapeOfElement(elem) {\n        return this.cache.getShape(elem);\n    }\n    getBoundingRectOfElement(elem) {\n        return this.cache.getBoundingRect(elem);\n    }\n    getBBoxOfElement(elem) {\n        const rect = this.getBoundingRectOfElement(elem);\n        const matrix = this.getMatrixOfElement(elem);\n        const rm = this.getRootRotatedMatrix();\n        const tm = this.getRootTranslatedMatrix();\n        return Util.transformRectangle(rect, tm.multiply(rm).multiply(matrix));\n    }\n    getUnrotatedBBoxOfElement(elem) {\n        const rect = this.getBoundingRectOfElement(elem);\n        const matrix = this.getMatrixOfElement(elem);\n        const tm = this.getRootTranslatedMatrix();\n        return Util.transformRectangle(rect, tm.multiply(matrix));\n    }\n    getBBox(options = {}) {\n        let bbox;\n        if (options.useCellGeometry) {\n            const cell = this.cell;\n            const angle = cell.isNode() ? cell.getAngle() : 0;\n            bbox = cell.getBBox().bbox(angle);\n        }\n        else {\n            bbox = this.getBBoxOfElement(this.container);\n        }\n        return this.graph.coord.localToGraphRect(bbox);\n    }\n    getRootTranslatedMatrix() {\n        const cell = this.cell;\n        const pos = cell.isNode() ? cell.getPosition() : { x: 0, y: 0 };\n        return Dom.createSVGMatrix().translate(pos.x, pos.y);\n    }\n    getRootRotatedMatrix() {\n        let matrix = Dom.createSVGMatrix();\n        const cell = this.cell;\n        const angle = cell.isNode() ? cell.getAngle() : 0;\n        if (angle) {\n            const bbox = cell.getBBox();\n            const cx = bbox.width / 2;\n            const cy = bbox.height / 2;\n            matrix = matrix.translate(cx, cy).rotate(angle).translate(-cx, -cy);\n        }\n        return matrix;\n    }\n    findMagnet(elem = this.container) {\n        return this.findByAttr('magnet', elem);\n    }\n    updateAttrs(rootNode, attrs, options = {}) {\n        if (options.rootBBox == null) {\n            options.rootBBox = new Rectangle();\n        }\n        if (options.selectors == null) {\n            options.selectors = this.selectors;\n        }\n        this.attr.update(rootNode, attrs, options);\n    }\n    isEdgeElement(magnet) {\n        return this.cell.isEdge() && (magnet == null || magnet === this.container);\n    }\n    // #region highlight\n    prepareHighlight(elem, options = {}) {\n        const magnet = elem || this.container;\n        options.partial = magnet === this.container;\n        return magnet;\n    }\n    highlight(elem, options = {}) {\n        const magnet = this.prepareHighlight(elem, options);\n        this.notify('cell:highlight', {\n            magnet,\n            options,\n            view: this,\n            cell: this.cell,\n        });\n        if (this.isEdgeView()) {\n            this.notify('edge:highlight', {\n                magnet,\n                options,\n                view: this,\n                edge: this.cell,\n                cell: this.cell,\n            });\n        }\n        else if (this.isNodeView()) {\n            this.notify('node:highlight', {\n                magnet,\n                options,\n                view: this,\n                node: this.cell,\n                cell: this.cell,\n            });\n        }\n        return this;\n    }\n    unhighlight(elem, options = {}) {\n        const magnet = this.prepareHighlight(elem, options);\n        this.notify('cell:unhighlight', {\n            magnet,\n            options,\n            view: this,\n            cell: this.cell,\n        });\n        if (this.isNodeView()) {\n            this.notify('node:unhighlight', {\n                magnet,\n                options,\n                view: this,\n                node: this.cell,\n                cell: this.cell,\n            });\n        }\n        else if (this.isEdgeView()) {\n            this.notify('edge:unhighlight', {\n                magnet,\n                options,\n                view: this,\n                edge: this.cell,\n                cell: this.cell,\n            });\n        }\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    notifyUnhighlight(magnet, options) { }\n    // #endregion\n    getEdgeTerminal(magnet, x, y, edge, type) {\n        const cell = this.cell;\n        const portId = this.findAttr('port', magnet);\n        const selector = magnet.getAttribute('data-selector');\n        const terminal = { cell: cell.id };\n        if (selector != null) {\n            terminal.magnet = selector;\n        }\n        if (portId != null) {\n            terminal.port = portId;\n            if (cell.isNode()) {\n                if (!cell.hasPort(portId) && selector == null) {\n                    // port created via the `port` attribute (not API)\n                    terminal.selector = this.getSelector(magnet);\n                }\n            }\n        }\n        else if (selector == null && this.container !== magnet) {\n            terminal.selector = this.getSelector(magnet);\n        }\n        return terminal;\n    }\n    getMagnetFromEdgeTerminal(terminal) {\n        const cell = this.cell;\n        const root = this.container;\n        const portId = terminal.port;\n        let selector = terminal.magnet;\n        let magnet;\n        if (portId != null && cell.isNode() && cell.hasPort(portId)) {\n            magnet = this.findPortElem(portId, selector) || root;\n        }\n        else {\n            if (!selector) {\n                selector = terminal.selector;\n            }\n            if (!selector && portId != null) {\n                selector = `[port=\"${portId}\"]`;\n            }\n            magnet = this.findOne(selector, root, this.selectors);\n        }\n        return magnet;\n    }\n    hasTools(name) {\n        const tools = this.tools;\n        if (tools == null) {\n            return false;\n        }\n        if (name == null) {\n            return true;\n        }\n        return tools.name === name;\n    }\n    addTools(config) {\n        this.removeTools();\n        if (config) {\n            if (!this.can('toolsAddable')) {\n                return this;\n            }\n            const tools = ToolsView.isToolsView(config)\n                ? config\n                : new ToolsView(config);\n            this.tools = tools;\n            tools.config({ view: this });\n            tools.mount();\n        }\n        return this;\n    }\n    updateTools(options = {}) {\n        if (this.tools) {\n            this.tools.update(options);\n        }\n        return this;\n    }\n    removeTools() {\n        if (this.tools) {\n            this.tools.remove();\n            this.tools = null;\n        }\n        return this;\n    }\n    hideTools() {\n        if (this.tools) {\n            this.tools.hide();\n        }\n        return this;\n    }\n    showTools() {\n        if (this.tools) {\n            this.tools.show();\n        }\n        return this;\n    }\n    renderTools() {\n        const tools = this.cell.getTools();\n        this.addTools(tools);\n        return this;\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        this.graph.trigger(name, args);\n        return this;\n    }\n    getEventArgs(e, x, y) {\n        const view = this; // eslint-disable-line @typescript-eslint/no-this-alias\n        const cell = view.cell;\n        if (x == null || y == null) {\n            return { e, view, cell };\n        }\n        return { e, x, y, view, cell };\n    }\n    onClick(e, x, y) {\n        this.notify('cell:click', this.getEventArgs(e, x, y));\n    }\n    onDblClick(e, x, y) {\n        this.notify('cell:dblclick', this.getEventArgs(e, x, y));\n    }\n    onContextMenu(e, x, y) {\n        this.notify('cell:contextmenu', this.getEventArgs(e, x, y));\n    }\n    onMouseDown(e, x, y) {\n        if (this.cell.model) {\n            this.cachedModelForMouseEvent = this.cell.model;\n            this.cachedModelForMouseEvent.startBatch('mouse');\n        }\n        this.notify('cell:mousedown', this.getEventArgs(e, x, y));\n    }\n    onMouseUp(e, x, y) {\n        this.notify('cell:mouseup', this.getEventArgs(e, x, y));\n        if (this.cachedModelForMouseEvent) {\n            this.cachedModelForMouseEvent.stopBatch('mouse', { cell: this.cell });\n            this.cachedModelForMouseEvent = null;\n        }\n    }\n    onMouseMove(e, x, y) {\n        this.notify('cell:mousemove', this.getEventArgs(e, x, y));\n    }\n    onMouseOver(e) {\n        this.notify('cell:mouseover', this.getEventArgs(e));\n    }\n    onMouseOut(e) {\n        this.notify('cell:mouseout', this.getEventArgs(e));\n    }\n    onMouseEnter(e) {\n        this.notify('cell:mouseenter', this.getEventArgs(e));\n    }\n    onMouseLeave(e) {\n        this.notify('cell:mouseleave', this.getEventArgs(e));\n    }\n    onMouseWheel(e, x, y, delta) {\n        this.notify('cell:mousewheel', Object.assign({ delta }, this.getEventArgs(e, x, y)));\n    }\n    onCustomEvent(e, name, x, y) {\n        this.notify('cell:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n        this.notify(name, Object.assign({}, this.getEventArgs(e, x, y)));\n    }\n    onMagnetMouseDown(e, magnet, x, y) { }\n    onMagnetDblClick(e, magnet, x, y) { }\n    onMagnetContextMenu(e, magnet, x, y) { }\n    onLabelMouseDown(e, x, y) { }\n    checkMouseleave(e) {\n        const target = this.getEventTarget(e, { fromPoint: true });\n        const view = this.graph.findViewByElem(target);\n        if (view === this) {\n            return;\n        }\n        // Leaving the current view\n        this.onMouseLeave(e);\n        if (!view) {\n            return;\n        }\n        // Entering another view\n        view.onMouseEnter(e);\n    }\n}\nCellView.defaults = {\n    isSvgElement: true,\n    rootSelector: 'root',\n    priority: 0,\n    bootstrap: [],\n    actions: {},\n};\n(function (CellView) {\n    CellView.Flag = FlagManager;\n    CellView.Attr = AttrManager;\n})(CellView || (CellView = {}));\n(function (CellView) {\n    CellView.toStringTag = `X6.${CellView.name}`;\n    function isCellView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof CellView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === CellView.toStringTag) &&\n            typeof view.isNodeView === 'function' &&\n            typeof view.isEdgeView === 'function' &&\n            typeof view.confirmUpdate === 'function') {\n            return true;\n        }\n        return false;\n    }\n    CellView.isCellView = isCellView;\n})(CellView || (CellView = {}));\n// decorators\n// ----\n(function (CellView) {\n    function priority(value) {\n        return function (ctor) {\n            ctor.config({ priority: value });\n        };\n    }\n    CellView.priority = priority;\n    function bootstrap(actions) {\n        return function (ctor) {\n            ctor.config({ bootstrap: actions });\n        };\n    }\n    CellView.bootstrap = bootstrap;\n})(CellView || (CellView = {}));\n(function (CellView) {\n    CellView.registry = Registry.create({\n        type: 'view',\n    });\n})(CellView || (CellView = {}));\n//# sourceMappingURL=cell.js.map","import { Dom, ObjectExt, StringExt } from '@antv/x6-common';\nimport { NodeTool, EdgeTool } from '../registry/tool';\nimport { View } from './view';\nimport { CellView } from './cell';\nimport { Markup } from './markup';\nexport class ToolsView extends View {\n    get name() {\n        return this.options.name;\n    }\n    get graph() {\n        return this.cellView.graph;\n    }\n    get cell() {\n        return this.cellView.cell;\n    }\n    get [Symbol.toStringTag]() {\n        return ToolsView.toStringTag;\n    }\n    constructor(options = {}) {\n        super();\n        this.svgContainer = this.createContainer(true, options);\n        this.htmlContainer = this.createContainer(false, options);\n        this.config(options);\n    }\n    createContainer(svg, options) {\n        const container = svg\n            ? View.createElement('g', true)\n            : View.createElement('div', false);\n        Dom.addClass(container, this.prefixClassName('cell-tools'));\n        if (options.className) {\n            Dom.addClass(container, options.className);\n        }\n        return container;\n    }\n    config(options) {\n        this.options = Object.assign(Object.assign({}, this.options), options);\n        if (!CellView.isCellView(options.view) || options.view === this.cellView) {\n            return this;\n        }\n        this.cellView = options.view;\n        if (this.cell.isEdge()) {\n            Dom.addClass(this.svgContainer, this.prefixClassName('edge-tools'));\n            Dom.addClass(this.htmlContainer, this.prefixClassName('edge-tools'));\n        }\n        else if (this.cell.isNode()) {\n            Dom.addClass(this.svgContainer, this.prefixClassName('node-tools'));\n            Dom.addClass(this.htmlContainer, this.prefixClassName('node-tools'));\n        }\n        this.svgContainer.setAttribute('data-cell-id', this.cell.id);\n        this.htmlContainer.setAttribute('data-cell-id', this.cell.id);\n        if (this.name) {\n            this.svgContainer.setAttribute('data-tools-name', this.name);\n            this.htmlContainer.setAttribute('data-tools-name', this.name);\n        }\n        const tools = this.options.items;\n        if (!Array.isArray(tools)) {\n            return this;\n        }\n        this.tools = [];\n        const normalizedTools = [];\n        tools.forEach((meta) => {\n            if (ToolsView.ToolItem.isToolItem(meta)) {\n                if (meta.name === 'vertices') {\n                    normalizedTools.unshift(meta);\n                }\n                else {\n                    normalizedTools.push(meta);\n                }\n            }\n            else {\n                const name = typeof meta === 'object' ? meta.name : meta;\n                if (name === 'vertices') {\n                    normalizedTools.unshift(meta);\n                }\n                else {\n                    normalizedTools.push(meta);\n                }\n            }\n        });\n        for (let i = 0; i < normalizedTools.length; i += 1) {\n            const meta = normalizedTools[i];\n            let tool;\n            if (ToolsView.ToolItem.isToolItem(meta)) {\n                tool = meta;\n            }\n            else {\n                const name = typeof meta === 'object' ? meta.name : meta;\n                const args = typeof meta === 'object' ? meta.args || {} : {};\n                if (name) {\n                    if (this.cell.isNode()) {\n                        const ctor = NodeTool.registry.get(name);\n                        if (ctor) {\n                            tool = new ctor(args); // eslint-disable-line\n                        }\n                        else {\n                            return NodeTool.registry.onNotFound(name);\n                        }\n                    }\n                    else if (this.cell.isEdge()) {\n                        const ctor = EdgeTool.registry.get(name);\n                        if (ctor) {\n                            tool = new ctor(args); // eslint-disable-line\n                        }\n                        else {\n                            return EdgeTool.registry.onNotFound(name);\n                        }\n                    }\n                }\n            }\n            if (tool) {\n                tool.config(this.cellView, this);\n                tool.render();\n                const container = tool.options.isSVGElement !== false\n                    ? this.svgContainer\n                    : this.htmlContainer;\n                container.appendChild(tool.container);\n                this.tools.push(tool);\n            }\n        }\n        return this;\n    }\n    update(options = {}) {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => {\n                if (options.toolId !== tool.cid && tool.isVisible()) {\n                    tool.update();\n                }\n            });\n        }\n        return this;\n    }\n    focus(focusedTool) {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => {\n                if (focusedTool === tool) {\n                    tool.show();\n                }\n                else {\n                    tool.hide();\n                }\n            });\n        }\n        return this;\n    }\n    blur(blurredTool) {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => {\n                if (tool !== blurredTool && !tool.isVisible()) {\n                    tool.show();\n                    tool.update();\n                }\n            });\n        }\n        return this;\n    }\n    hide() {\n        return this.focus(null);\n    }\n    show() {\n        return this.blur(null);\n    }\n    remove() {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => tool.remove());\n            this.tools = null;\n        }\n        Dom.remove(this.svgContainer);\n        Dom.remove(this.htmlContainer);\n        return super.remove();\n    }\n    mount() {\n        const tools = this.tools;\n        const cellView = this.cellView;\n        if (cellView && tools) {\n            const hasSVG = tools.some((tool) => tool.options.isSVGElement !== false);\n            const hasHTML = tools.some((tool) => tool.options.isSVGElement === false);\n            if (hasSVG) {\n                const parent = this.options.local\n                    ? cellView.container\n                    : cellView.graph.view.decorator;\n                parent.appendChild(this.svgContainer);\n            }\n            if (hasHTML) {\n                this.graph.container.appendChild(this.htmlContainer);\n            }\n        }\n        return this;\n    }\n}\n(function (ToolsView) {\n    ToolsView.toStringTag = `X6.${ToolsView.name}`;\n    function isToolsView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof ToolsView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === ToolsView.toStringTag) &&\n            view.graph != null &&\n            view.cell != null &&\n            typeof view.config === 'function' &&\n            typeof view.update === 'function' &&\n            typeof view.focus === 'function' &&\n            typeof view.blur === 'function' &&\n            typeof view.show === 'function' &&\n            typeof view.hide === 'function') {\n            return true;\n        }\n        return false;\n    }\n    ToolsView.isToolsView = isToolsView;\n})(ToolsView || (ToolsView = {}));\n(function (ToolsView) {\n    class ToolItem extends View {\n        static getDefaults() {\n            return this.defaults;\n        }\n        static config(options) {\n            this.defaults = this.getOptions(options);\n        }\n        static getOptions(options) {\n            return ObjectExt.merge(ObjectExt.cloneDeep(this.getDefaults()), options);\n        }\n        get graph() {\n            return this.cellView.graph;\n        }\n        get cell() {\n            return this.cellView.cell;\n        }\n        get name() {\n            return this.options.name;\n        }\n        get [Symbol.toStringTag]() {\n            return ToolItem.toStringTag;\n        }\n        constructor(options = {}) {\n            super();\n            this.visible = true;\n            this.options = this.getOptions(options);\n            this.container = View.createElement(this.options.tagName || 'g', this.options.isSVGElement !== false);\n            Dom.addClass(this.container, this.prefixClassName('cell-tool'));\n            if (typeof this.options.className === 'string') {\n                Dom.addClass(this.container, this.options.className);\n            }\n            this.init();\n        }\n        init() { }\n        getOptions(options) {\n            const ctor = this.constructor;\n            return ctor.getOptions(options);\n        }\n        delegateEvents() {\n            if (this.options.events) {\n                super.delegateEvents(this.options.events);\n            }\n            return this;\n        }\n        config(view, toolsView) {\n            this.cellView = view;\n            this.parent = toolsView;\n            this.stamp(this.container);\n            if (this.cell.isEdge()) {\n                Dom.addClass(this.container, this.prefixClassName('edge-tool'));\n            }\n            else if (this.cell.isNode()) {\n                Dom.addClass(this.container, this.prefixClassName('node-tool'));\n            }\n            if (this.name) {\n                this.container.setAttribute('data-tool-name', this.name);\n            }\n            this.delegateEvents();\n            return this;\n        }\n        render() {\n            this.empty();\n            const markup = this.options.markup;\n            if (markup) {\n                const meta = Markup.parseJSONMarkup(markup);\n                this.container.appendChild(meta.fragment);\n                this.childNodes = meta.selectors;\n            }\n            this.onRender();\n            return this;\n        }\n        onRender() { }\n        update() {\n            return this;\n        }\n        stamp(elem) {\n            if (elem) {\n                elem.setAttribute('data-cell-id', this.cellView.cell.id);\n            }\n        }\n        show() {\n            this.container.style.display = '';\n            this.visible = true;\n            return this;\n        }\n        hide() {\n            this.container.style.display = 'none';\n            this.visible = false;\n            return this;\n        }\n        isVisible() {\n            return this.visible;\n        }\n        focus() {\n            const opacity = this.options.focusOpacity;\n            if (opacity != null && Number.isFinite(opacity)) {\n                this.container.style.opacity = `${opacity}`;\n            }\n            this.parent.focus(this);\n            return this;\n        }\n        blur() {\n            this.container.style.opacity = '';\n            this.parent.blur(this);\n            return this;\n        }\n        guard(evt) {\n            if (this.graph == null || this.cellView == null) {\n                return true;\n            }\n            return this.graph.view.guard(evt, this.cellView);\n        }\n    }\n    // #region static\n    ToolItem.defaults = {\n        isSVGElement: true,\n        tagName: 'g',\n    };\n    ToolsView.ToolItem = ToolItem;\n    (function (ToolItem) {\n        let counter = 0;\n        function getClassName(name) {\n            if (name) {\n                return StringExt.pascalCase(name);\n            }\n            counter += 1;\n            return `CustomTool${counter}`;\n        }\n        function define(options) {\n            const tool = ObjectExt.createClass(getClassName(options.name), this);\n            tool.config(options);\n            return tool;\n        }\n        ToolItem.define = define;\n    })(ToolItem = ToolsView.ToolItem || (ToolsView.ToolItem = {}));\n    (function (ToolItem) {\n        ToolItem.toStringTag = `X6.${ToolItem.name}`;\n        function isToolItem(instance) {\n            if (instance == null) {\n                return false;\n            }\n            if (instance instanceof ToolItem) {\n                return true;\n            }\n            const tag = instance[Symbol.toStringTag];\n            const view = instance;\n            if ((tag == null || tag === ToolItem.toStringTag) &&\n                view.graph != null &&\n                view.cell != null &&\n                typeof view.config === 'function' &&\n                typeof view.update === 'function' &&\n                typeof view.focus === 'function' &&\n                typeof view.blur === 'function' &&\n                typeof view.show === 'function' &&\n                typeof view.hide === 'function' &&\n                typeof view.isVisible === 'function') {\n                return true;\n            }\n            return false;\n        }\n        ToolItem.isToolItem = isToolItem;\n    })(ToolItem = ToolsView.ToolItem || (ToolsView.ToolItem = {}));\n})(ToolsView || (ToolsView = {}));\n//# sourceMappingURL=tool.js.map","export const noop = (terminal) => terminal;\n//# sourceMappingURL=noop.js.map","import { Point } from '@antv/x6-geometry';\nfunction toPercentage(value, max) {\n    if (max === 0) {\n        return '0%';\n    }\n    return `${Math.round((value / max) * 100)}%`;\n}\nfunction pin(relative) {\n    const strategy = (terminal, view, magnet, coords) => {\n        return view.isEdgeElement(magnet)\n            ? pinEdgeTerminal(relative, terminal, view, magnet, coords)\n            : pinNodeTerminal(relative, terminal, view, magnet, coords);\n    };\n    return strategy;\n}\nfunction pinNodeTerminal(relative, data, view, magnet, coords) {\n    const node = view.cell;\n    const angle = node.getAngle();\n    const bbox = view.getUnrotatedBBoxOfElement(magnet);\n    const center = node.getBBox().getCenter();\n    const pos = Point.create(coords).rotate(angle, center);\n    let dx = pos.x - bbox.x;\n    let dy = pos.y - bbox.y;\n    if (relative) {\n        dx = toPercentage(dx, bbox.width);\n        dy = toPercentage(dy, bbox.height);\n    }\n    data.anchor = {\n        name: 'topLeft',\n        args: {\n            dx,\n            dy,\n            rotate: true,\n        },\n    };\n    return data;\n}\nfunction pinEdgeTerminal(relative, end, view, magnet, coords) {\n    const connection = view.getConnection();\n    if (!connection) {\n        return end;\n    }\n    const length = connection.closestPointLength(coords);\n    if (relative) {\n        const totalLength = connection.length();\n        end.anchor = {\n            name: 'ratio',\n            args: {\n                ratio: length / totalLength,\n            },\n        };\n    }\n    else {\n        end.anchor = {\n            name: 'length',\n            args: {\n                length,\n            },\n        };\n    }\n    return end;\n}\nexport const pinRelative = pin(true);\nexport const pinAbsolute = pin(false);\n//# sourceMappingURL=pin.js.map","import { Registry } from '../registry';\nimport * as strategies from './main';\nexport var ConnectionStrategy;\n(function (ConnectionStrategy) {\n    ConnectionStrategy.presets = strategies;\n    ConnectionStrategy.registry = Registry.create({\n        type: 'connection strategy',\n    });\n    ConnectionStrategy.registry.register(ConnectionStrategy.presets, true);\n})(ConnectionStrategy || (ConnectionStrategy = {}));\n//# sourceMappingURL=index.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { ConnectionStrategy } from '../connection-strategy';\nexport function getAnchor(pos, terminalView, terminalMagnet, type) {\n    const end = FunctionExt.call(ConnectionStrategy.presets.pinRelative, this.graph, {}, terminalView, terminalMagnet, pos, this.cell, type, {});\n    return end.anchor;\n}\nexport function getViewBBox(view, quick) {\n    if (quick) {\n        return view.cell.getBBox();\n    }\n    return view.cell.isEdge()\n        ? view.getConnection().bbox()\n        : view.getUnrotatedBBoxOfElement(view.container);\n}\n//# sourceMappingURL=util.js.map","import { Point } from '@antv/x6-geometry';\nimport { Dom, NumberExt, FunctionExt } from '@antv/x6-common';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nexport class Button extends ToolsView.ToolItem {\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName('cell-tool-button'));\n        this.update();\n    }\n    update() {\n        this.updatePosition();\n        return this;\n    }\n    updatePosition() {\n        const view = this.cellView;\n        const matrix = view.cell.isEdge()\n            ? this.getEdgeMatrix()\n            : this.getNodeMatrix();\n        Dom.transform(this.container, matrix, { absolute: true });\n    }\n    getNodeMatrix() {\n        const view = this.cellView;\n        const options = this.options;\n        let { x = 0, y = 0 } = options;\n        const { offset, useCellGeometry, rotate } = options;\n        let bbox = Util.getViewBBox(view, useCellGeometry);\n        const angle = view.cell.getAngle();\n        if (!rotate) {\n            bbox = bbox.bbox(angle);\n        }\n        let offsetX = 0;\n        let offsetY = 0;\n        if (typeof offset === 'number') {\n            offsetX = offset;\n            offsetY = offset;\n        }\n        else if (typeof offset === 'object') {\n            offsetX = offset.x;\n            offsetY = offset.y;\n        }\n        x = NumberExt.normalizePercentage(x, bbox.width);\n        y = NumberExt.normalizePercentage(y, bbox.height);\n        let matrix = Dom.createSVGMatrix().translate(bbox.x + bbox.width / 2, bbox.y + bbox.height / 2);\n        if (rotate) {\n            matrix = matrix.rotate(angle);\n        }\n        matrix = matrix.translate(x + offsetX - bbox.width / 2, y + offsetY - bbox.height / 2);\n        return matrix;\n    }\n    getEdgeMatrix() {\n        const view = this.cellView;\n        const options = this.options;\n        const { offset = 0, distance = 0, rotate } = options;\n        let tangent;\n        let position;\n        let angle;\n        const d = NumberExt.normalizePercentage(distance, 1);\n        if (d >= 0 && d <= 1) {\n            tangent = view.getTangentAtRatio(d);\n        }\n        else {\n            tangent = view.getTangentAtLength(d);\n        }\n        if (tangent) {\n            position = tangent.start;\n            angle = tangent.vector().vectorAngle(new Point(1, 0)) || 0;\n        }\n        else {\n            position = view.getConnection().start;\n            angle = 0;\n        }\n        let matrix = Dom.createSVGMatrix()\n            .translate(position.x, position.y)\n            .rotate(angle);\n        if (typeof offset === 'object') {\n            matrix = matrix.translate(offset.x || 0, offset.y || 0);\n        }\n        else {\n            matrix = matrix.translate(0, offset);\n        }\n        if (!rotate) {\n            matrix = matrix.rotate(-angle);\n        }\n        return matrix;\n    }\n    onMouseDown(e) {\n        if (this.guard(e)) {\n            return;\n        }\n        e.stopPropagation();\n        e.preventDefault();\n        const onClick = this.options.onClick;\n        if (typeof onClick === 'function') {\n            FunctionExt.call(onClick, this.cellView, {\n                e,\n                view: this.cellView,\n                cell: this.cellView.cell,\n                btn: this,\n            });\n        }\n    }\n}\n(function (Button) {\n    Button.config({\n        name: 'button',\n        useCellGeometry: true,\n        events: {\n            mousedown: 'onMouseDown',\n            touchstart: 'onMouseDown',\n        },\n    });\n})(Button || (Button = {}));\n(function (Button) {\n    Button.Remove = Button.define({\n        name: 'button-remove',\n        markup: [\n            {\n                tagName: 'circle',\n                selector: 'button',\n                attrs: {\n                    r: 7,\n                    fill: '#FF1D00',\n                    cursor: 'pointer',\n                },\n            },\n            {\n                tagName: 'path',\n                selector: 'icon',\n                attrs: {\n                    d: 'M -3 -3 3 3 M -3 3 3 -3',\n                    fill: 'none',\n                    stroke: '#FFFFFF',\n                    'stroke-width': 2,\n                    'pointer-events': 'none',\n                },\n            },\n        ],\n        distance: 60,\n        offset: 0,\n        useCellGeometry: true,\n        onClick({ view, btn }) {\n            btn.parent.remove();\n            view.cell.remove({ ui: true, toolId: btn.cid });\n        },\n    });\n})(Button || (Button = {}));\n//# sourceMappingURL=button.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { NumberExt, Dom } from '@antv/x6-common';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nexport class Boundary extends ToolsView.ToolItem {\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName('cell-tool-boundary'));\n        if (this.options.attrs) {\n            const _a = this.options.attrs, { class: className } = _a, attrs = __rest(_a, [\"class\"]);\n            Dom.attr(this.container, Dom.kebablizeAttrs(attrs));\n            if (className) {\n                Dom.addClass(this.container, className);\n            }\n        }\n        this.update();\n    }\n    update() {\n        const view = this.cellView;\n        const options = this.options;\n        const { useCellGeometry, rotate } = options;\n        const padding = NumberExt.normalizeSides(options.padding);\n        let bbox = Util.getViewBBox(view, useCellGeometry).moveAndExpand({\n            x: -padding.left,\n            y: -padding.top,\n            width: padding.left + padding.right,\n            height: padding.top + padding.bottom,\n        });\n        const cell = view.cell;\n        if (cell.isNode()) {\n            const angle = cell.getAngle();\n            if (angle) {\n                if (rotate) {\n                    const origin = cell.getBBox().getCenter();\n                    Dom.rotate(this.container, angle, origin.x, origin.y, {\n                        absolute: true,\n                    });\n                }\n                else {\n                    bbox = bbox.bbox(angle);\n                }\n            }\n        }\n        Dom.attr(this.container, bbox.toJSON());\n        return this;\n    }\n}\n(function (Boundary) {\n    Boundary.config({\n        name: 'boundary',\n        tagName: 'rect',\n        padding: 10,\n        useCellGeometry: true,\n        attrs: {\n            fill: 'none',\n            stroke: '#333',\n            'stroke-width': 0.5,\n            'stroke-dasharray': '5, 5',\n            'pointer-events': 'none',\n        },\n    });\n})(Boundary || (Boundary = {}));\n//# sourceMappingURL=boundary.js.map","import { Point } from '@antv/x6-geometry';\nimport { ModifierKey } from '@antv/x6-common';\nimport { Config } from '../../config';\nimport { View } from '../../view/view';\nimport { ToolsView } from '../../view/tool';\nexport class Vertices extends ToolsView.ToolItem {\n    constructor() {\n        super(...arguments);\n        this.handles = [];\n    }\n    get vertices() {\n        return this.cellView.cell.getVertices();\n    }\n    onRender() {\n        this.addClass(this.prefixClassName('edge-tool-vertices'));\n        if (this.options.addable) {\n            this.updatePath();\n        }\n        this.resetHandles();\n        this.renderHandles();\n        return this;\n    }\n    update() {\n        const vertices = this.vertices;\n        if (vertices.length === this.handles.length) {\n            this.updateHandles();\n        }\n        else {\n            this.resetHandles();\n            this.renderHandles();\n        }\n        if (this.options.addable) {\n            this.updatePath();\n        }\n        return this;\n    }\n    resetHandles() {\n        const handles = this.handles;\n        this.handles = [];\n        if (handles) {\n            handles.forEach((handle) => {\n                this.stopHandleListening(handle);\n                handle.remove();\n            });\n        }\n    }\n    renderHandles() {\n        const vertices = this.vertices;\n        for (let i = 0, l = vertices.length; i < l; i += 1) {\n            const vertex = vertices[i];\n            const createHandle = this.options.createHandle;\n            const processHandle = this.options.processHandle;\n            const handle = createHandle({\n                index: i,\n                graph: this.graph,\n                guard: (evt) => this.guard(evt),\n                attrs: this.options.attrs || {},\n            });\n            if (processHandle) {\n                processHandle(handle);\n            }\n            handle.updatePosition(vertex.x, vertex.y);\n            this.stamp(handle.container);\n            this.container.appendChild(handle.container);\n            this.handles.push(handle);\n            this.startHandleListening(handle);\n        }\n    }\n    updateHandles() {\n        const vertices = this.vertices;\n        for (let i = 0, l = vertices.length; i < l; i += 1) {\n            const vertex = vertices[i];\n            const handle = this.handles[i];\n            if (handle) {\n                handle.updatePosition(vertex.x, vertex.y);\n            }\n        }\n    }\n    updatePath() {\n        const connection = this.childNodes.connection;\n        if (connection) {\n            connection.setAttribute('d', this.cellView.getConnectionPathData());\n        }\n    }\n    startHandleListening(handle) {\n        const edgeView = this.cellView;\n        if (edgeView.can('vertexMovable')) {\n            handle.on('change', this.onHandleChange, this);\n            handle.on('changing', this.onHandleChanging, this);\n            handle.on('changed', this.onHandleChanged, this);\n        }\n        if (edgeView.can('vertexDeletable')) {\n            handle.on('remove', this.onHandleRemove, this);\n        }\n    }\n    stopHandleListening(handle) {\n        const edgeView = this.cellView;\n        if (edgeView.can('vertexMovable')) {\n            handle.off('change', this.onHandleChange, this);\n            handle.off('changing', this.onHandleChanging, this);\n            handle.off('changed', this.onHandleChanged, this);\n        }\n        if (edgeView.can('vertexDeletable')) {\n            handle.off('remove', this.onHandleRemove, this);\n        }\n    }\n    getNeighborPoints(index) {\n        const edgeView = this.cellView;\n        const vertices = this.vertices;\n        const prev = index > 0 ? vertices[index - 1] : edgeView.sourceAnchor;\n        const next = index < vertices.length - 1 ? vertices[index + 1] : edgeView.targetAnchor;\n        return {\n            prev: Point.create(prev),\n            next: Point.create(next),\n        };\n    }\n    getMouseEventArgs(evt) {\n        const e = this.normalizeEvent(evt);\n        const { x, y } = this.graph.snapToGrid(e.clientX, e.clientY);\n        return { e, x, y };\n    }\n    onHandleChange({ e }) {\n        this.focus();\n        const edgeView = this.cellView;\n        edgeView.cell.startBatch('move-vertex', { ui: true, toolId: this.cid });\n        if (!this.options.stopPropagation) {\n            const { e: evt, x, y } = this.getMouseEventArgs(e);\n            this.eventData(evt, { start: { x, y } });\n            edgeView.notifyMouseDown(evt, x, y);\n        }\n    }\n    onHandleChanging({ handle, e, }) {\n        const edgeView = this.cellView;\n        const index = handle.options.index;\n        const { e: evt, x, y } = this.getMouseEventArgs(e);\n        const vertex = { x, y };\n        this.snapVertex(vertex, index);\n        edgeView.cell.setVertexAt(index, vertex, { ui: true, toolId: this.cid });\n        handle.updatePosition(vertex.x, vertex.y);\n        if (!this.options.stopPropagation) {\n            edgeView.notifyMouseMove(evt, x, y);\n        }\n    }\n    stopBatch(vertexAdded) {\n        this.cell.stopBatch('move-vertex', { ui: true, toolId: this.cid });\n        if (vertexAdded) {\n            this.cell.stopBatch('add-vertex', { ui: true, toolId: this.cid });\n        }\n    }\n    onHandleChanged({ e }) {\n        const options = this.options;\n        const edgeView = this.cellView;\n        if (options.addable) {\n            this.updatePath();\n        }\n        if (!options.removeRedundancies) {\n            this.stopBatch(this.eventData(e).vertexAdded);\n            return;\n        }\n        const verticesRemoved = edgeView.removeRedundantLinearVertices({\n            ui: true,\n            toolId: this.cid,\n        });\n        if (verticesRemoved) {\n            this.render();\n        }\n        this.blur();\n        this.stopBatch(this.eventData(e).vertexAdded);\n        const { e: evt, x, y } = this.getMouseEventArgs(e);\n        if (!this.options.stopPropagation) {\n            edgeView.notifyMouseUp(evt, x, y);\n            const { start } = this.eventData(evt);\n            if (start) {\n                const { x: startX, y: startY } = start;\n                if (startX === x && startY === y) {\n                    edgeView.onClick(evt, x, y);\n                }\n            }\n        }\n        edgeView.checkMouseleave(evt);\n        options.onChanged && options.onChanged({ edge: edgeView.cell, edgeView });\n    }\n    snapVertex(vertex, index) {\n        const snapRadius = this.options.snapRadius || 0;\n        if (snapRadius > 0) {\n            const neighbors = this.getNeighborPoints(index);\n            const prev = neighbors.prev;\n            const next = neighbors.next;\n            if (Math.abs(vertex.x - prev.x) < snapRadius) {\n                vertex.x = prev.x;\n            }\n            else if (Math.abs(vertex.x - next.x) < snapRadius) {\n                vertex.x = next.x;\n            }\n            if (Math.abs(vertex.y - prev.y) < snapRadius) {\n                vertex.y = neighbors.prev.y;\n            }\n            else if (Math.abs(vertex.y - next.y) < snapRadius) {\n                vertex.y = next.y;\n            }\n        }\n    }\n    onHandleRemove({ handle, e }) {\n        if (this.options.removable) {\n            const index = handle.options.index;\n            const edgeView = this.cellView;\n            edgeView.cell.removeVertexAt(index, { ui: true });\n            if (this.options.addable) {\n                this.updatePath();\n            }\n            edgeView.checkMouseleave(this.normalizeEvent(e));\n        }\n    }\n    allowAddVertex(e) {\n        const guard = this.guard(e);\n        const addable = this.options.addable && this.cellView.can('vertexAddable');\n        const matchModifiers = this.options.modifiers\n            ? ModifierKey.isMatch(e, this.options.modifiers)\n            : true;\n        return !guard && addable && matchModifiers;\n    }\n    onPathMouseDown(evt) {\n        const edgeView = this.cellView;\n        if (!this.allowAddVertex(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        const e = this.normalizeEvent(evt);\n        const vertex = this.graph.snapToGrid(e.clientX, e.clientY).toJSON();\n        edgeView.cell.startBatch('add-vertex', { ui: true, toolId: this.cid });\n        const index = edgeView.getVertexIndex(vertex.x, vertex.y);\n        this.snapVertex(vertex, index);\n        edgeView.cell.insertVertex(vertex, index, {\n            ui: true,\n            toolId: this.cid,\n        });\n        this.render();\n        const handle = this.handles[index];\n        this.eventData(e, { vertexAdded: true });\n        handle.onMouseDown(e);\n    }\n    onRemove() {\n        this.resetHandles();\n    }\n}\n(function (Vertices) {\n    class Handle extends View {\n        get graph() {\n            return this.options.graph;\n        }\n        constructor(options) {\n            super();\n            this.options = options;\n            this.render();\n            this.delegateEvents({\n                mousedown: 'onMouseDown',\n                touchstart: 'onMouseDown',\n                dblclick: 'onDoubleClick',\n            });\n        }\n        render() {\n            this.container = View.createElement('circle', true);\n            const attrs = this.options.attrs;\n            if (typeof attrs === 'function') {\n                const defaults = Vertices.getDefaults();\n                this.setAttrs(Object.assign(Object.assign({}, defaults.attrs), attrs(this)));\n            }\n            else {\n                this.setAttrs(attrs);\n            }\n            this.addClass(this.prefixClassName('edge-tool-vertex'));\n        }\n        updatePosition(x, y) {\n            this.setAttrs({ cx: x, cy: y });\n        }\n        onMouseDown(evt) {\n            if (this.options.guard(evt)) {\n                return;\n            }\n            evt.stopPropagation();\n            evt.preventDefault();\n            this.graph.view.undelegateEvents();\n            this.delegateDocumentEvents({\n                mousemove: 'onMouseMove',\n                touchmove: 'onMouseMove',\n                mouseup: 'onMouseUp',\n                touchend: 'onMouseUp',\n                touchcancel: 'onMouseUp',\n            }, evt.data);\n            this.emit('change', { e: evt, handle: this });\n        }\n        onMouseMove(evt) {\n            this.emit('changing', { e: evt, handle: this });\n        }\n        onMouseUp(evt) {\n            this.emit('changed', { e: evt, handle: this });\n            this.undelegateDocumentEvents();\n            this.graph.view.delegateEvents();\n        }\n        onDoubleClick(evt) {\n            this.emit('remove', { e: evt, handle: this });\n        }\n    }\n    Vertices.Handle = Handle;\n})(Vertices || (Vertices = {}));\n(function (Vertices) {\n    const pathClassName = Config.prefix('edge-tool-vertex-path');\n    Vertices.config({\n        name: 'vertices',\n        snapRadius: 20,\n        addable: true,\n        removable: true,\n        removeRedundancies: true,\n        stopPropagation: true,\n        attrs: {\n            r: 6,\n            fill: '#333',\n            stroke: '#fff',\n            cursor: 'move',\n            'stroke-width': 2,\n        },\n        createHandle: (options) => new Vertices.Handle(options),\n        markup: [\n            {\n                tagName: 'path',\n                selector: 'connection',\n                className: pathClassName,\n                attrs: {\n                    fill: 'none',\n                    stroke: 'transparent',\n                    'stroke-width': 10,\n                    cursor: 'pointer',\n                },\n            },\n        ],\n        events: {\n            [`mousedown .${pathClassName}`]: 'onPathMouseDown',\n            [`touchstart .${pathClassName}`]: 'onPathMouseDown',\n        },\n    });\n})(Vertices || (Vertices = {}));\n//# sourceMappingURL=vertices.js.map","import { Dom, ObjectExt, FunctionExt } from '@antv/x6-common';\nimport { Point, Line } from '@antv/x6-geometry';\nimport { View } from '../../view/view';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nexport class Segments extends ToolsView.ToolItem {\n    constructor() {\n        super(...arguments);\n        this.handles = [];\n    }\n    get vertices() {\n        return this.cellView.cell.getVertices();\n    }\n    update() {\n        this.render();\n        return this;\n    }\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName('edge-tool-segments'));\n        this.resetHandles();\n        const edgeView = this.cellView;\n        const vertices = [...this.vertices];\n        vertices.unshift(edgeView.sourcePoint);\n        vertices.push(edgeView.targetPoint);\n        for (let i = 0, l = vertices.length; i < l - 1; i += 1) {\n            const vertex = vertices[i];\n            const nextVertex = vertices[i + 1];\n            const handle = this.renderHandle(vertex, nextVertex, i);\n            this.stamp(handle.container);\n            this.handles.push(handle);\n        }\n        return this;\n    }\n    renderHandle(vertex, nextVertex, index) {\n        const handle = this.options.createHandle({\n            index,\n            graph: this.graph,\n            guard: (evt) => this.guard(evt),\n            attrs: this.options.attrs || {},\n        });\n        if (this.options.processHandle) {\n            this.options.processHandle(handle);\n        }\n        this.updateHandle(handle, vertex, nextVertex);\n        this.container.appendChild(handle.container);\n        this.startHandleListening(handle);\n        return handle;\n    }\n    startHandleListening(handle) {\n        handle.on('change', this.onHandleChange, this);\n        handle.on('changing', this.onHandleChanging, this);\n        handle.on('changed', this.onHandleChanged, this);\n    }\n    stopHandleListening(handle) {\n        handle.off('change', this.onHandleChange, this);\n        handle.off('changing', this.onHandleChanging, this);\n        handle.off('changed', this.onHandleChanged, this);\n    }\n    resetHandles() {\n        const handles = this.handles;\n        this.handles = [];\n        if (handles) {\n            handles.forEach((handle) => {\n                this.stopHandleListening(handle);\n                handle.remove();\n            });\n        }\n    }\n    shiftHandleIndexes(delta) {\n        const handles = this.handles;\n        for (let i = 0, n = handles.length; i < n; i += 1) {\n            handles[i].options.index += delta;\n        }\n    }\n    resetAnchor(type, anchor) {\n        const edge = this.cellView.cell;\n        const options = {\n            ui: true,\n            toolId: this.cid,\n        };\n        if (anchor) {\n            edge.prop([type, 'anchor'], anchor, options);\n        }\n        else {\n            edge.removeProp([type, 'anchor'], options);\n        }\n    }\n    snapHandle(handle, position, data) {\n        const axis = handle.options.axis;\n        const index = handle.options.index;\n        const edgeView = this.cellView;\n        const edge = edgeView.cell;\n        const vertices = edge.getVertices();\n        const prev = vertices[index - 2] || data.sourceAnchor;\n        const next = vertices[index + 1] || data.targetAnchor;\n        const snapRadius = this.options.snapRadius;\n        if (Math.abs(position[axis] - prev[axis]) < snapRadius) {\n            position[axis] = prev[axis];\n        }\n        else if (Math.abs(position[axis] - next[axis]) < snapRadius) {\n            position[axis] = next[axis];\n        }\n        return position;\n    }\n    onHandleChanging({ handle, e, }) {\n        const graph = this.graph;\n        const options = this.options;\n        const edgeView = this.cellView;\n        const anchorFn = options.anchor;\n        const axis = handle.options.axis;\n        const index = handle.options.index - 1;\n        const data = this.getEventData(e);\n        const evt = this.normalizeEvent(e);\n        const coords = graph.snapToGrid(evt.clientX, evt.clientY);\n        const position = this.snapHandle(handle, coords.clone(), data);\n        const vertices = ObjectExt.cloneDeep(this.vertices);\n        let vertex = vertices[index];\n        let nextVertex = vertices[index + 1];\n        // First Segment\n        const sourceView = edgeView.sourceView;\n        const sourceBBox = edgeView.sourceBBox;\n        let changeSourceAnchor = false;\n        let deleteSourceAnchor = false;\n        if (!vertex) {\n            vertex = edgeView.sourceAnchor.toJSON();\n            vertex[axis] = position[axis];\n            if (sourceBBox.containsPoint(vertex)) {\n                changeSourceAnchor = true;\n            }\n            else {\n                vertices.unshift(vertex);\n                this.shiftHandleIndexes(1);\n                deleteSourceAnchor = true;\n            }\n        }\n        else if (index === 0) {\n            if (sourceBBox.containsPoint(vertex)) {\n                vertices.shift();\n                this.shiftHandleIndexes(-1);\n                changeSourceAnchor = true;\n            }\n            else {\n                vertex[axis] = position[axis];\n                deleteSourceAnchor = true;\n            }\n        }\n        else {\n            vertex[axis] = position[axis];\n        }\n        if (typeof anchorFn === 'function' && sourceView) {\n            if (changeSourceAnchor) {\n                const sourceAnchorPosition = data.sourceAnchor.clone();\n                sourceAnchorPosition[axis] = position[axis];\n                const sourceAnchor = FunctionExt.call(anchorFn, edgeView, sourceAnchorPosition, sourceView, edgeView.sourceMagnet || sourceView.container, 'source', edgeView, this);\n                this.resetAnchor('source', sourceAnchor);\n            }\n            if (deleteSourceAnchor) {\n                this.resetAnchor('source', data.sourceAnchorDef);\n            }\n        }\n        // Last segment\n        const targetView = edgeView.targetView;\n        const targetBBox = edgeView.targetBBox;\n        let changeTargetAnchor = false;\n        let deleteTargetAnchor = false;\n        if (!nextVertex) {\n            nextVertex = edgeView.targetAnchor.toJSON();\n            nextVertex[axis] = position[axis];\n            if (targetBBox.containsPoint(nextVertex)) {\n                changeTargetAnchor = true;\n            }\n            else {\n                vertices.push(nextVertex);\n                deleteTargetAnchor = true;\n            }\n        }\n        else if (index === vertices.length - 2) {\n            if (targetBBox.containsPoint(nextVertex)) {\n                vertices.pop();\n                changeTargetAnchor = true;\n            }\n            else {\n                nextVertex[axis] = position[axis];\n                deleteTargetAnchor = true;\n            }\n        }\n        else {\n            nextVertex[axis] = position[axis];\n        }\n        if (typeof anchorFn === 'function' && targetView) {\n            if (changeTargetAnchor) {\n                const targetAnchorPosition = data.targetAnchor.clone();\n                targetAnchorPosition[axis] = position[axis];\n                const targetAnchor = FunctionExt.call(anchorFn, edgeView, targetAnchorPosition, targetView, edgeView.targetMagnet || targetView.container, 'target', edgeView, this);\n                this.resetAnchor('target', targetAnchor);\n            }\n            if (deleteTargetAnchor) {\n                this.resetAnchor('target', data.targetAnchorDef);\n            }\n        }\n        if (!Point.equalPoints(vertices, this.vertices)) {\n            this.cellView.cell.setVertices(vertices, { ui: true, toolId: this.cid });\n        }\n        this.updateHandle(handle, vertex, nextVertex, 0);\n        if (!options.stopPropagation) {\n            edgeView.notifyMouseMove(evt, coords.x, coords.y);\n        }\n    }\n    onHandleChange({ handle, e }) {\n        const options = this.options;\n        const handles = this.handles;\n        const edgeView = this.cellView;\n        const index = handle.options.index;\n        if (!Array.isArray(handles)) {\n            return;\n        }\n        for (let i = 0, n = handles.length; i < n; i += 1) {\n            if (i !== index) {\n                handles[i].hide();\n            }\n        }\n        this.focus();\n        this.setEventData(e, {\n            sourceAnchor: edgeView.sourceAnchor.clone(),\n            targetAnchor: edgeView.targetAnchor.clone(),\n            sourceAnchorDef: ObjectExt.cloneDeep(this.cell.prop(['source', 'anchor'])),\n            targetAnchorDef: ObjectExt.cloneDeep(this.cell.prop(['target', 'anchor'])),\n        });\n        this.cell.startBatch('move-segment', { ui: true, toolId: this.cid });\n        if (!options.stopPropagation) {\n            const normalizedEvent = this.normalizeEvent(e);\n            const coords = this.graph.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n            edgeView.notifyMouseDown(normalizedEvent, coords.x, coords.y);\n        }\n    }\n    onHandleChanged({ e }) {\n        const options = this.options;\n        const edgeView = this.cellView;\n        if (options.removeRedundancies) {\n            edgeView.removeRedundantLinearVertices({ ui: true, toolId: this.cid });\n        }\n        const normalizedEvent = this.normalizeEvent(e);\n        const coords = this.graph.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n        this.render();\n        this.blur();\n        this.cell.stopBatch('move-segment', { ui: true, toolId: this.cid });\n        if (!options.stopPropagation) {\n            edgeView.notifyMouseUp(normalizedEvent, coords.x, coords.y);\n        }\n        edgeView.checkMouseleave(normalizedEvent);\n        options.onChanged && options.onChanged({ edge: edgeView.cell, edgeView });\n    }\n    updateHandle(handle, vertex, nextVertex, offset = 0) {\n        const precision = this.options.precision || 0;\n        const vertical = Math.abs(vertex.x - nextVertex.x) < precision;\n        const horizontal = Math.abs(vertex.y - nextVertex.y) < precision;\n        if (vertical || horizontal) {\n            const segmentLine = new Line(vertex, nextVertex);\n            const length = segmentLine.length();\n            if (length < this.options.threshold) {\n                handle.hide();\n            }\n            else {\n                const position = segmentLine.getCenter();\n                const axis = vertical ? 'x' : 'y';\n                position[axis] += offset || 0;\n                const angle = segmentLine.vector().vectorAngle(new Point(1, 0));\n                handle.updatePosition(position.x, position.y, angle, this.cellView);\n                handle.show();\n                handle.options.axis = axis;\n            }\n        }\n        else {\n            handle.hide();\n        }\n    }\n    onRemove() {\n        this.resetHandles();\n    }\n}\n(function (Segments) {\n    class Handle extends View {\n        constructor(options) {\n            super();\n            this.options = options;\n            this.render();\n            this.delegateEvents({\n                mousedown: 'onMouseDown',\n                touchstart: 'onMouseDown',\n            });\n        }\n        render() {\n            this.container = View.createElement('rect', true);\n            const attrs = this.options.attrs;\n            if (typeof attrs === 'function') {\n                const defaults = Segments.getDefaults();\n                this.setAttrs(Object.assign(Object.assign({}, defaults.attrs), attrs(this)));\n            }\n            else {\n                this.setAttrs(attrs);\n            }\n            this.addClass(this.prefixClassName('edge-tool-segment'));\n        }\n        updatePosition(x, y, angle, view) {\n            const p = view.getClosestPoint(new Point(x, y)) || new Point(x, y);\n            let matrix = Dom.createSVGMatrix().translate(p.x, p.y);\n            if (!p.equals({ x, y })) {\n                const line = new Line(x, y, p.x, p.y);\n                let deg = line.vector().vectorAngle(new Point(1, 0));\n                if (deg !== 0) {\n                    deg += 90;\n                }\n                matrix = matrix.rotate(deg);\n            }\n            else {\n                matrix = matrix.rotate(angle);\n            }\n            this.setAttrs({\n                transform: Dom.matrixToTransformString(matrix),\n                cursor: angle % 180 === 0 ? 'row-resize' : 'col-resize',\n            });\n        }\n        onMouseDown(evt) {\n            if (this.options.guard(evt)) {\n                return;\n            }\n            this.trigger('change', { e: evt, handle: this });\n            evt.stopPropagation();\n            evt.preventDefault();\n            this.options.graph.view.undelegateEvents();\n            this.delegateDocumentEvents({\n                mousemove: 'onMouseMove',\n                touchmove: 'onMouseMove',\n                mouseup: 'onMouseUp',\n                touchend: 'onMouseUp',\n                touchcancel: 'onMouseUp',\n            }, evt.data);\n        }\n        onMouseMove(evt) {\n            this.emit('changing', { e: evt, handle: this });\n        }\n        onMouseUp(evt) {\n            this.emit('changed', { e: evt, handle: this });\n            this.undelegateDocumentEvents();\n            this.options.graph.view.delegateEvents();\n        }\n        show() {\n            this.container.style.display = '';\n        }\n        hide() {\n            this.container.style.display = 'none';\n        }\n    }\n    Segments.Handle = Handle;\n})(Segments || (Segments = {}));\n(function (Segments) {\n    Segments.config({\n        name: 'segments',\n        precision: 0.5,\n        threshold: 40,\n        snapRadius: 10,\n        stopPropagation: true,\n        removeRedundancies: true,\n        attrs: {\n            width: 20,\n            height: 8,\n            x: -10,\n            y: -4,\n            rx: 4,\n            ry: 4,\n            fill: '#333',\n            stroke: '#fff',\n            'stroke-width': 2,\n        },\n        createHandle: (options) => new Segments.Handle(options),\n        anchor: Util.getAnchor,\n    });\n})(Segments || (Segments = {}));\n//# sourceMappingURL=segments.js.map","import { Dom, FunctionExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nclass Anchor extends ToolsView.ToolItem {\n    get type() {\n        return this.options.type;\n    }\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName(`edge-tool-${this.type}-anchor`));\n        this.toggleArea(false);\n        this.update();\n    }\n    update() {\n        const type = this.type;\n        const edgeView = this.cellView;\n        const terminalView = edgeView.getTerminalView(type);\n        if (terminalView) {\n            this.updateAnchor();\n            this.updateArea();\n            this.container.style.display = '';\n        }\n        else {\n            this.container.style.display = 'none';\n        }\n        return this;\n    }\n    updateAnchor() {\n        const childNodes = this.childNodes;\n        if (!childNodes) {\n            return;\n        }\n        const anchorNode = childNodes.anchor;\n        if (!anchorNode) {\n            return;\n        }\n        const type = this.type;\n        const edgeView = this.cellView;\n        const options = this.options;\n        const position = edgeView.getTerminalAnchor(type);\n        const customAnchor = edgeView.cell.prop([type, 'anchor']);\n        anchorNode.setAttribute('transform', `translate(${position.x}, ${position.y})`);\n        const anchorAttrs = customAnchor\n            ? options.customAnchorAttrs\n            : options.defaultAnchorAttrs;\n        if (anchorAttrs) {\n            Object.keys(anchorAttrs).forEach((attrName) => {\n                anchorNode.setAttribute(attrName, anchorAttrs[attrName]);\n            });\n        }\n    }\n    updateArea() {\n        const childNodes = this.childNodes;\n        if (!childNodes) {\n            return;\n        }\n        const areaNode = childNodes.area;\n        if (!areaNode) {\n            return;\n        }\n        const type = this.type;\n        const edgeView = this.cellView;\n        const terminalView = edgeView.getTerminalView(type);\n        if (terminalView) {\n            const terminalCell = terminalView.cell;\n            const magnet = edgeView.getTerminalMagnet(type);\n            let padding = this.options.areaPadding || 0;\n            if (!Number.isFinite(padding)) {\n                padding = 0;\n            }\n            let bbox;\n            let angle;\n            let center;\n            if (terminalView.isEdgeElement(magnet)) {\n                bbox = terminalView.getBBox();\n                angle = 0;\n                center = bbox.getCenter();\n            }\n            else {\n                bbox = terminalView.getUnrotatedBBoxOfElement(magnet);\n                angle = terminalCell.getAngle();\n                center = bbox.getCenter();\n                if (angle) {\n                    center.rotate(-angle, terminalCell.getBBox().getCenter());\n                }\n            }\n            bbox.inflate(padding);\n            Dom.attr(areaNode, {\n                x: -bbox.width / 2,\n                y: -bbox.height / 2,\n                width: bbox.width,\n                height: bbox.height,\n                transform: `translate(${center.x}, ${center.y}) rotate(${angle})`,\n            });\n        }\n    }\n    toggleArea(visible) {\n        if (this.childNodes) {\n            const elem = this.childNodes.area;\n            if (elem) {\n                elem.style.display = visible ? '' : 'none';\n            }\n        }\n    }\n    onMouseDown(evt) {\n        if (this.guard(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.graph.view.undelegateEvents();\n        if (this.options.documentEvents) {\n            this.delegateDocumentEvents(this.options.documentEvents);\n        }\n        this.focus();\n        this.toggleArea(this.options.restrictArea);\n        this.cell.startBatch('move-anchor', {\n            ui: true,\n            toolId: this.cid,\n        });\n    }\n    resetAnchor(anchor) {\n        const type = this.type;\n        const cell = this.cell;\n        if (anchor) {\n            cell.prop([type, 'anchor'], anchor, {\n                rewrite: true,\n                ui: true,\n                toolId: this.cid,\n            });\n        }\n        else {\n            cell.removeProp([type, 'anchor'], {\n                ui: true,\n                toolId: this.cid,\n            });\n        }\n    }\n    onMouseMove(evt) {\n        const terminalType = this.type;\n        const edgeView = this.cellView;\n        const terminalView = edgeView.getTerminalView(terminalType);\n        if (terminalView == null) {\n            return;\n        }\n        const e = this.normalizeEvent(evt);\n        const terminalCell = terminalView.cell;\n        const terminalMagnet = edgeView.getTerminalMagnet(terminalType);\n        let coords = this.graph.coord.clientToLocalPoint(e.clientX, e.clientY);\n        const snapFn = this.options.snap;\n        if (typeof snapFn === 'function') {\n            const tmp = FunctionExt.call(snapFn, edgeView, coords, terminalView, terminalMagnet, terminalType, edgeView, this);\n            coords = Point.create(tmp);\n        }\n        if (this.options.restrictArea) {\n            if (terminalView.isEdgeElement(terminalMagnet)) {\n                const pointAtConnection = terminalView.getClosestPoint(coords);\n                if (pointAtConnection) {\n                    coords = pointAtConnection;\n                }\n            }\n            else {\n                const bbox = terminalView.getUnrotatedBBoxOfElement(terminalMagnet);\n                const angle = terminalCell.getAngle();\n                const origin = terminalCell.getBBox().getCenter();\n                const rotatedCoords = coords.clone().rotate(angle, origin);\n                if (!bbox.containsPoint(rotatedCoords)) {\n                    coords = bbox\n                        .getNearestPointToPoint(rotatedCoords)\n                        .rotate(-angle, origin);\n                }\n            }\n        }\n        let anchor;\n        const anchorFn = this.options.anchor;\n        if (typeof anchorFn === 'function') {\n            anchor = FunctionExt.call(anchorFn, edgeView, coords, terminalView, terminalMagnet, terminalType, edgeView, this);\n        }\n        this.resetAnchor(anchor);\n        this.update();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onMouseUp(evt) {\n        this.graph.view.delegateEvents();\n        this.undelegateDocumentEvents();\n        this.blur();\n        this.toggleArea(false);\n        const edgeView = this.cellView;\n        if (this.options.removeRedundancies) {\n            edgeView.removeRedundantLinearVertices({ ui: true, toolId: this.cid });\n        }\n        this.cell.stopBatch('move-anchor', { ui: true, toolId: this.cid });\n    }\n    onDblClick() {\n        const anchor = this.options.resetAnchor;\n        if (anchor) {\n            this.resetAnchor(anchor === true ? undefined : anchor);\n        }\n        this.update();\n    }\n}\n(function (Anchor) {\n    Anchor.config({\n        tagName: 'g',\n        markup: [\n            {\n                tagName: 'circle',\n                selector: 'anchor',\n                attrs: {\n                    cursor: 'pointer',\n                },\n            },\n            {\n                tagName: 'rect',\n                selector: 'area',\n                attrs: {\n                    'pointer-events': 'none',\n                    fill: 'none',\n                    stroke: '#33334F',\n                    'stroke-dasharray': '2,4',\n                    rx: 5,\n                    ry: 5,\n                },\n            },\n        ],\n        events: {\n            mousedown: 'onMouseDown',\n            touchstart: 'onMouseDown',\n            dblclick: 'onDblClick',\n        },\n        documentEvents: {\n            mousemove: 'onMouseMove',\n            touchmove: 'onMouseMove',\n            mouseup: 'onMouseUp',\n            touchend: 'onMouseUp',\n            touchcancel: 'onMouseUp',\n        },\n        customAnchorAttrs: {\n            'stroke-width': 4,\n            stroke: '#33334F',\n            fill: '#FFFFFF',\n            r: 5,\n        },\n        defaultAnchorAttrs: {\n            'stroke-width': 2,\n            stroke: '#FFFFFF',\n            fill: '#33334F',\n            r: 6,\n        },\n        areaPadding: 6,\n        snapRadius: 10,\n        resetAnchor: true,\n        restrictArea: true,\n        removeRedundancies: true,\n        anchor: Util.getAnchor,\n        snap(pos, terminalView, terminalMagnet, terminalType, edgeView, toolView) {\n            const snapRadius = toolView.options.snapRadius || 0;\n            const isSource = terminalType === 'source';\n            const refIndex = isSource ? 0 : -1;\n            const ref = this.cell.getVertexAt(refIndex) ||\n                this.getTerminalAnchor(isSource ? 'target' : 'source');\n            if (ref) {\n                if (Math.abs(ref.x - pos.x) < snapRadius)\n                    pos.x = ref.x;\n                if (Math.abs(ref.y - pos.y) < snapRadius)\n                    pos.y = ref.y;\n            }\n            return pos;\n        },\n    });\n})(Anchor || (Anchor = {}));\nexport const SourceAnchor = Anchor.define({\n    name: 'source-anchor',\n    type: 'source',\n});\nexport const TargetAnchor = Anchor.define({\n    name: 'target-anchor',\n    type: 'target',\n});\n//# sourceMappingURL=anchor.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Dom } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { ToolsView } from '../../view/tool';\nclass Arrowhead extends ToolsView.ToolItem {\n    get type() {\n        return this.options.type;\n    }\n    get ratio() {\n        return this.options.ratio;\n    }\n    init() {\n        if (this.options.attrs) {\n            const _a = this.options.attrs, { class: className } = _a, attrs = __rest(_a, [\"class\"]);\n            this.setAttrs(attrs, this.container);\n            if (className) {\n                Dom.addClass(this.container, className);\n            }\n        }\n    }\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName(`edge-tool-${this.type}-arrowhead`));\n        this.update();\n    }\n    update() {\n        const ratio = this.ratio;\n        const edgeView = this.cellView;\n        const tangent = edgeView.getTangentAtRatio(ratio);\n        const position = tangent ? tangent.start : edgeView.getPointAtRatio(ratio);\n        const angle = (tangent && tangent.vector().vectorAngle(new Point(1, 0))) || 0;\n        if (!position) {\n            return this;\n        }\n        const matrix = Dom.createSVGMatrix()\n            .translate(position.x, position.y)\n            .rotate(angle);\n        Dom.transform(this.container, matrix, { absolute: true });\n        return this;\n    }\n    onMouseDown(evt) {\n        if (this.guard(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        const edgeView = this.cellView;\n        if (edgeView.can('arrowheadMovable')) {\n            edgeView.cell.startBatch('move-arrowhead', {\n                ui: true,\n                toolId: this.cid,\n            });\n            const coords = this.graph.snapToGrid(evt.clientX, evt.clientY);\n            const data = edgeView.prepareArrowheadDragging(this.type, {\n                x: coords.x,\n                y: coords.y,\n                options: Object.assign(Object.assign({}, this.options), { toolId: this.cid }),\n            });\n            this.cellView.setEventData(evt, data);\n            this.delegateDocumentEvents(this.options.documentEvents, evt.data);\n            edgeView.graph.view.undelegateEvents();\n            this.container.style.pointerEvents = 'none';\n        }\n        this.focus();\n    }\n    onMouseMove(evt) {\n        const e = this.normalizeEvent(evt);\n        const coords = this.graph.snapToGrid(e.clientX, e.clientY);\n        this.cellView.onMouseMove(e, coords.x, coords.y);\n        this.update();\n    }\n    onMouseUp(evt) {\n        this.undelegateDocumentEvents();\n        const e = this.normalizeEvent(evt);\n        const edgeView = this.cellView;\n        const coords = this.graph.snapToGrid(e.clientX, e.clientY);\n        edgeView.onMouseUp(e, coords.x, coords.y);\n        this.graph.view.delegateEvents();\n        this.blur();\n        this.container.style.pointerEvents = '';\n        edgeView.cell.stopBatch('move-arrowhead', {\n            ui: true,\n            toolId: this.cid,\n        });\n    }\n}\n(function (Arrowhead) {\n    Arrowhead.config({\n        tagName: 'path',\n        isSVGElement: true,\n        events: {\n            mousedown: 'onMouseDown',\n            touchstart: 'onMouseDown',\n        },\n        documentEvents: {\n            mousemove: 'onMouseMove',\n            touchmove: 'onMouseMove',\n            mouseup: 'onMouseUp',\n            touchend: 'onMouseUp',\n            touchcancel: 'onMouseUp',\n        },\n    });\n})(Arrowhead || (Arrowhead = {}));\nexport const SourceArrowhead = Arrowhead.define({\n    name: 'source-arrowhead',\n    type: 'source',\n    ratio: 0,\n    attrs: {\n        d: 'M 10 -8 -10 0 10 8 Z',\n        fill: '#333',\n        stroke: '#fff',\n        'stroke-width': 2,\n        cursor: 'move',\n    },\n});\nexport const TargetArrowhead = Arrowhead.define({\n    name: 'target-arrowhead',\n    type: 'target',\n    ratio: 1,\n    attrs: {\n        d: 'M -10 -8 10 0 -10 8 Z',\n        fill: '#333',\n        stroke: '#fff',\n        'stroke-width': 2,\n        cursor: 'move',\n    },\n});\n//# sourceMappingURL=arrowhead.js.map","import { Point } from '@antv/x6-geometry';\nimport { Dom, FunctionExt, NumberExt, ObjectExt } from '@antv/x6-common';\nimport { ToolsView } from '../../view/tool';\nimport { Util } from '../../util';\nexport class CellEditor extends ToolsView.ToolItem {\n    constructor() {\n        super(...arguments);\n        this.labelIndex = -1;\n        this.distance = 0.5;\n        this.dblClick = this.onCellDblClick.bind(this);\n    }\n    onRender() {\n        const cellView = this.cellView;\n        if (cellView) {\n            cellView.on('cell:dblclick', this.dblClick);\n        }\n    }\n    createElement() {\n        const classNames = [\n            this.prefixClassName(`${this.cell.isEdge() ? 'edge' : 'node'}-tool-editor`),\n            this.prefixClassName('cell-tool-editor'),\n        ];\n        this.editor = ToolsView.createElement('div', false);\n        this.addClass(classNames, this.editor);\n        this.editor.contentEditable = 'true';\n        this.container.appendChild(this.editor);\n    }\n    removeElement() {\n        this.undelegateDocumentEvents();\n        if (this.editor) {\n            this.container.removeChild(this.editor);\n            this.editor = null;\n        }\n    }\n    updateEditor() {\n        const { cell, editor } = this;\n        if (!editor) {\n            return;\n        }\n        const { style } = editor;\n        if (cell.isNode()) {\n            this.updateNodeEditorTransform();\n        }\n        else if (cell.isEdge()) {\n            this.updateEdgeEditorTransform();\n        }\n        // set font style\n        const { attrs } = this.options;\n        style.fontSize = `${attrs.fontSize}px`;\n        style.fontFamily = attrs.fontFamily;\n        style.color = attrs.color;\n        style.backgroundColor = attrs.backgroundColor;\n        // set init value\n        const text = this.getCellText() || '';\n        editor.innerText = text;\n        this.setCellText(''); // clear display value when edit status because char ghosting.\n        return this;\n    }\n    updateNodeEditorTransform() {\n        const { graph, cell, editor } = this;\n        if (!editor) {\n            return;\n        }\n        let pos = Point.create();\n        let minWidth = 20;\n        let translate = '';\n        let { x, y } = this.options;\n        const { width, height } = this.options;\n        if (typeof x !== 'undefined' && typeof y !== 'undefined') {\n            const bbox = cell.getBBox();\n            x = NumberExt.normalizePercentage(x, bbox.width);\n            y = NumberExt.normalizePercentage(y, bbox.height);\n            pos = bbox.topLeft.translate(x, y);\n            minWidth = bbox.width - x * 2;\n        }\n        else {\n            const bbox = cell.getBBox();\n            pos = bbox.center;\n            minWidth = bbox.width - 4;\n            translate = 'translate(-50%, -50%)';\n        }\n        const scale = graph.scale();\n        const { style } = editor;\n        pos = graph.localToGraph(pos);\n        style.left = `${pos.x}px`;\n        style.top = `${pos.y}px`;\n        style.transform = `scale(${scale.sx}, ${scale.sy}) ${translate}`;\n        style.minWidth = `${minWidth}px`;\n        if (typeof width === 'number') {\n            style.width = `${width}px`;\n        }\n        if (typeof height === 'number') {\n            style.height = `${height}px`;\n        }\n    }\n    updateEdgeEditorTransform() {\n        if (!this.event) {\n            return;\n        }\n        const { graph, editor } = this;\n        if (!editor) {\n            return;\n        }\n        let pos = Point.create();\n        let minWidth = 20;\n        const { style } = editor;\n        const target = this.event.target;\n        const parent = target.parentElement;\n        const isEdgeLabel = parent && Dom.hasClass(parent, this.prefixClassName('edge-label'));\n        if (isEdgeLabel) {\n            const index = parent.getAttribute('data-index') || '0';\n            this.labelIndex = parseInt(index, 10);\n            const matrix = parent.getAttribute('transform');\n            const { translation } = Dom.parseTransformString(matrix);\n            pos = new Point(translation.tx, translation.ty);\n            minWidth = Util.getBBox(target).width;\n        }\n        else {\n            if (!this.options.labelAddable) {\n                return this;\n            }\n            pos = graph.clientToLocal(Point.create(this.event.clientX, this.event.clientY));\n            const view = this.cellView;\n            const d = view.path.closestPointLength(pos);\n            this.distance = d;\n            this.labelIndex = -1;\n        }\n        pos = graph.localToGraph(pos);\n        const scale = graph.scale();\n        style.left = `${pos.x}px`;\n        style.top = `${pos.y}px`;\n        style.minWidth = `${minWidth}px`;\n        style.transform = `scale(${scale.sx}, ${scale.sy}) translate(-50%, -50%)`;\n    }\n    onDocumentMouseDown(e) {\n        if (this.editor && e.target !== this.editor) {\n            const value = this.editor.innerText.replace(/\\n$/, '') || '';\n            // set value, when value is null, we will remove label in edge\n            this.setCellText(value !== '' ? value : null);\n            // remove tool\n            this.removeElement();\n        }\n    }\n    onCellDblClick({ e }) {\n        e.stopPropagation();\n        this.removeElement();\n        this.event = e;\n        this.createElement();\n        this.updateEditor();\n        this.autoFocus();\n        this.delegateDocumentEvents(this.options.documentEvents);\n    }\n    onMouseDown(e) {\n        e.stopPropagation();\n    }\n    autoFocus() {\n        setTimeout(() => {\n            if (this.editor) {\n                this.editor.focus();\n                this.selectText();\n            }\n        });\n    }\n    selectText() {\n        if (window.getSelection && this.editor) {\n            const range = document.createRange();\n            const selection = window.getSelection();\n            range.selectNodeContents(this.editor);\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n    }\n    getCellText() {\n        const { getText } = this.options;\n        if (typeof getText === 'function') {\n            return FunctionExt.call(getText, this.cellView, {\n                cell: this.cell,\n                index: this.labelIndex,\n            });\n        }\n        if (typeof getText === 'string') {\n            if (this.cell.isNode()) {\n                return this.cell.attr(getText);\n            }\n            if (this.cell.isEdge()) {\n                if (this.labelIndex !== -1) {\n                    return this.cell.prop(`labels/${this.labelIndex}/attrs/${getText}`);\n                }\n            }\n        }\n    }\n    setCellText(value) {\n        const setText = this.options.setText;\n        if (typeof setText === 'function') {\n            FunctionExt.call(setText, this.cellView, {\n                cell: this.cell,\n                value,\n                index: this.labelIndex,\n                distance: this.distance,\n            });\n            return;\n        }\n        if (typeof setText === 'string') {\n            if (this.cell.isNode()) {\n                if (value !== null) {\n                    this.cell.attr(setText, value);\n                }\n                return;\n            }\n            if (this.cell.isEdge()) {\n                const edge = this.cell;\n                if (this.labelIndex === -1) {\n                    if (value) {\n                        const newLabel = {\n                            position: {\n                                distance: this.distance,\n                            },\n                            attrs: {},\n                        };\n                        ObjectExt.setByPath(newLabel, `attrs/${setText}`, value);\n                        edge.appendLabel(newLabel);\n                    }\n                }\n                else {\n                    if (value !== null) {\n                        edge.prop(`labels/${this.labelIndex}/attrs/${setText}`, value);\n                    }\n                    else if (typeof this.labelIndex === 'number') {\n                        edge.removeLabelAt(this.labelIndex);\n                    }\n                }\n            }\n        }\n    }\n    onRemove() {\n        const cellView = this.cellView;\n        if (cellView) {\n            cellView.off('cell:dblclick', this.dblClick);\n        }\n        this.removeElement();\n    }\n}\n(function (CellEditor) {\n    CellEditor.config({\n        tagName: 'div',\n        isSVGElement: false,\n        events: {\n            mousedown: 'onMouseDown',\n        },\n        documentEvents: {\n            mousedown: 'onDocumentMouseDown',\n        },\n    });\n})(CellEditor || (CellEditor = {}));\n(function (CellEditor) {\n    CellEditor.NodeEditor = CellEditor.define({\n        attrs: {\n            fontSize: 14,\n            fontFamily: 'Arial, helvetica, sans-serif',\n            color: '#000',\n            backgroundColor: '#fff',\n        },\n        getText: 'text/text',\n        setText: 'text/text',\n    });\n    CellEditor.EdgeEditor = CellEditor.define({\n        attrs: {\n            fontSize: 14,\n            fontFamily: 'Arial, helvetica, sans-serif',\n            color: '#000',\n            backgroundColor: '#fff',\n        },\n        labelAddable: true,\n        getText: 'label/text',\n        setText: 'label/text',\n    });\n})(CellEditor || (CellEditor = {}));\n//# sourceMappingURL=editor.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Registry } from '../registry';\nimport { ToolsView } from '../../view/tool';\nimport { Button } from './button';\nimport { Boundary } from './boundary';\nimport { Vertices } from './vertices';\nimport { Segments } from './segments';\nimport { SourceAnchor, TargetAnchor } from './anchor';\nimport { SourceArrowhead, TargetArrowhead } from './arrowhead';\nimport { CellEditor } from './editor';\nexport var NodeTool;\n(function (NodeTool) {\n    NodeTool.presets = {\n        boundary: Boundary,\n        button: Button,\n        'button-remove': Button.Remove,\n        'node-editor': CellEditor.NodeEditor,\n    };\n    NodeTool.registry = Registry.create({\n        type: 'node tool',\n        process(name, options) {\n            if (typeof options === 'function') {\n                return options;\n            }\n            let parent = ToolsView.ToolItem;\n            const { inherit } = options, others = __rest(options, [\"inherit\"]);\n            if (inherit) {\n                const base = this.get(inherit);\n                if (base == null) {\n                    this.onNotFound(inherit, 'inherited');\n                }\n                else {\n                    parent = base;\n                }\n            }\n            if (others.name == null) {\n                others.name = name;\n            }\n            return parent.define.call(parent, others);\n        },\n    });\n    NodeTool.registry.register(NodeTool.presets, true);\n})(NodeTool || (NodeTool = {}));\nexport var EdgeTool;\n(function (EdgeTool) {\n    EdgeTool.presets = {\n        boundary: Boundary,\n        vertices: Vertices,\n        segments: Segments,\n        button: Button,\n        'button-remove': Button.Remove,\n        'source-anchor': SourceAnchor,\n        'target-anchor': TargetAnchor,\n        'source-arrowhead': SourceArrowhead,\n        'target-arrowhead': TargetArrowhead,\n        'edge-editor': CellEditor.EdgeEditor,\n    };\n    EdgeTool.registry = Registry.create({\n        type: 'edge tool',\n        process(name, options) {\n            if (typeof options === 'function') {\n                return options;\n            }\n            let parent = ToolsView.ToolItem;\n            const { inherit } = options, others = __rest(options, [\"inherit\"]);\n            if (inherit) {\n                const base = this.get(inherit);\n                if (base == null) {\n                    this.onNotFound(inherit, 'inherited');\n                }\n                else {\n                    parent = base;\n                }\n            }\n            if (others.name == null) {\n                others.name = name;\n            }\n            return parent.define.call(parent, others);\n        },\n    });\n    EdgeTool.registry.register(EdgeTool.presets, true);\n})(EdgeTool || (EdgeTool = {}));\n//# sourceMappingURL=index.js.map","import { NumberExt } from '@antv/x6-common';\nexport const center = createBBoxAnchor('center');\nexport const top = createBBoxAnchor('topCenter');\nexport const bottom = createBBoxAnchor('bottomCenter');\nexport const left = createBBoxAnchor('leftMiddle');\nexport const right = createBBoxAnchor('rightMiddle');\nexport const topLeft = createBBoxAnchor('topLeft');\nexport const topRight = createBBoxAnchor('topRight');\nexport const bottomLeft = createBBoxAnchor('bottomLeft');\nexport const bottomRight = createBBoxAnchor('bottomRight');\nfunction createBBoxAnchor(method) {\n    return function (view, magnet, ref, options = {}) {\n        const bbox = options.rotate\n            ? view.getUnrotatedBBoxOfElement(magnet)\n            : view.getBBoxOfElement(magnet);\n        const result = bbox[method];\n        result.x += NumberExt.normalizePercentage(options.dx, bbox.width);\n        result.y += NumberExt.normalizePercentage(options.dy, bbox.height);\n        const cell = view.cell;\n        return options.rotate\n            ? result.rotate(-cell.getAngle(), cell.getBBox().getCenter())\n            : result;\n    };\n}\n//# sourceMappingURL=bbox.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\n// eslint-disable-next-line\nexport function resolve(fn) {\n    return function (view, magnet, ref, options) {\n        if (ref instanceof Element) {\n            const refView = this.graph.findViewByElem(ref);\n            let refPoint;\n            if (refView) {\n                if (refView.isEdgeElement(ref)) {\n                    const distance = options.fixedAt != null ? options.fixedAt : '50%';\n                    refPoint = getPointAtEdge(refView, distance);\n                }\n                else {\n                    refPoint = refView.getBBoxOfElement(ref).getCenter();\n                }\n            }\n            else {\n                refPoint = new Point();\n            }\n            return fn.call(this, view, magnet, refPoint, options);\n        }\n        return fn.apply(this, arguments); // eslint-disable-line\n    };\n}\nexport function getPointAtEdge(edgeView, value) {\n    const isPercentage = NumberExt.isPercentage(value);\n    const num = typeof value === 'string' ? parseFloat(value) : value;\n    if (isPercentage) {\n        return edgeView.getPointAtRatio(num / 100);\n    }\n    return edgeView.getPointAtLength(num);\n}\n//# sourceMappingURL=util.js.map","import { Angle } from '@antv/x6-geometry';\nimport { resolve } from './util';\nconst orthogonal = function (view, magnet, refPoint, options) {\n    const angle = view.cell.getAngle();\n    const bbox = view.getBBoxOfElement(magnet);\n    const result = bbox.getCenter();\n    const topLeft = bbox.getTopLeft();\n    const bottomRight = bbox.getBottomRight();\n    let padding = options.padding;\n    if (!Number.isFinite(padding)) {\n        padding = 0;\n    }\n    if (topLeft.y + padding <= refPoint.y &&\n        refPoint.y <= bottomRight.y - padding) {\n        const dy = refPoint.y - result.y;\n        result.x +=\n            angle === 0 || angle === 180\n                ? 0\n                : (dy * 1) / Math.tan(Angle.toRad(angle));\n        result.y += dy;\n    }\n    else if (topLeft.x + padding <= refPoint.x &&\n        refPoint.x <= bottomRight.x - padding) {\n        const dx = refPoint.x - result.x;\n        result.y +=\n            angle === 90 || angle === 270 ? 0 : dx * Math.tan(Angle.toRad(angle));\n        result.x += dx;\n    }\n    return result;\n};\n/**\n * Tries to place the anchor of the edge inside the view bbox so that the\n * edge is made orthogonal. The anchor is placed along two line segments\n * inside the view bbox (between the centers of the top and bottom side and\n * between the centers of the left and right sides). If it is not possible\n * to place the anchor so that the edge would be orthogonal, the anchor is\n * placed at the center of the view bbox instead.\n */\nexport const orth = resolve(orthogonal);\n//# sourceMappingURL=orth.js.map","/**\n * Places the anchor of the edge at center of the node bbox.\n */\nexport const nodeCenter = function (view, magnet, ref, options, endType) {\n    const result = view.cell.getConnectionPoint(this.cell, endType);\n    if (options.dx || options.dy) {\n        result.translate(options.dx || 0, options.dy || 0);\n    }\n    return result;\n};\n//# sourceMappingURL=node-center.js.map","import { resolve } from './util';\nconst middleSide = function (view, magnet, refPoint, options) {\n    let bbox;\n    let angle = 0;\n    let center;\n    const node = view.cell;\n    if (options.rotate) {\n        bbox = view.getUnrotatedBBoxOfElement(magnet);\n        center = node.getBBox().getCenter();\n        angle = node.getAngle();\n    }\n    else {\n        bbox = view.getBBoxOfElement(magnet);\n    }\n    const padding = options.padding;\n    if (padding != null && Number.isFinite(padding)) {\n        bbox.inflate(padding);\n    }\n    if (options.rotate) {\n        refPoint.rotate(angle, center);\n    }\n    const side = bbox.getNearestSideToPoint(refPoint);\n    let result;\n    switch (side) {\n        case 'left':\n            result = bbox.getLeftMiddle();\n            break;\n        case 'right':\n            result = bbox.getRightMiddle();\n            break;\n        case 'top':\n            result = bbox.getTopCenter();\n            break;\n        case 'bottom':\n            result = bbox.getBottomCenter();\n            break;\n        default:\n            break;\n    }\n    const direction = options.direction;\n    if (direction === 'H') {\n        if (side === 'top' || side === 'bottom') {\n            if (refPoint.x <= bbox.x + bbox.width) {\n                result = bbox.getLeftMiddle();\n            }\n            else {\n                result = bbox.getRightMiddle();\n            }\n        }\n    }\n    else if (direction === 'V') {\n        if (refPoint.y <= bbox.y + bbox.height) {\n            result = bbox.getTopCenter();\n        }\n        else {\n            result = bbox.getBottomCenter();\n        }\n    }\n    return options.rotate ? result.rotate(-angle, center) : result;\n};\n/**\n * Places the anchor of the edge in the middle of the side of view bbox\n * closest to the other endpoint.\n */\nexport const midSide = resolve(middleSide);\n//# sourceMappingURL=middle-side.js.map","import { Registry } from '../registry';\nimport * as anchors from './main';\nexport var NodeAnchor;\n(function (NodeAnchor) {\n    NodeAnchor.presets = anchors;\n    NodeAnchor.registry = Registry.create({\n        type: 'node endpoint',\n    });\n    NodeAnchor.registry.register(NodeAnchor.presets, true);\n})(NodeAnchor || (NodeAnchor = {}));\n//# sourceMappingURL=index.js.map","export const ratio = function (view, magnet, ref, options) {\n    let ratio = options.ratio != null ? options.ratio : 0.5;\n    if (ratio > 1) {\n        ratio /= 100;\n    }\n    return view.getPointAtRatio(ratio);\n};\n//# sourceMappingURL=ratio.js.map","export const length = function (view, magnet, ref, options) {\n    const length = options.length != null ? options.length : 20;\n    return view.getPointAtLength(length);\n};\n//# sourceMappingURL=length.js.map","import { Point } from '@antv/x6-geometry';\nimport { resolve } from '../node-anchor/util';\nexport const getClosestPoint = function (view, magnet, refPoint, options) {\n    const closestPoint = view.getClosestPoint(refPoint);\n    return closestPoint != null ? closestPoint : new Point();\n};\nexport const closest = resolve(getClosestPoint);\n//# sourceMappingURL=closest.js.map","import { Line } from '@antv/x6-geometry';\nimport { FunctionExt } from '@antv/x6-common';\nimport { resolve, getPointAtEdge } from '../node-anchor/util';\nimport { getClosestPoint } from './closest';\nconst orthogonal = function (view, magnet, refPoint, options) {\n    const OFFSET = 1e6;\n    const path = view.getConnection();\n    const segmentSubdivisions = view.getConnectionSubdivisions();\n    const vLine = new Line(refPoint.clone().translate(0, OFFSET), refPoint.clone().translate(0, -OFFSET));\n    const hLine = new Line(refPoint.clone().translate(OFFSET, 0), refPoint.clone().translate(-OFFSET, 0));\n    const vIntersections = vLine.intersect(path, {\n        segmentSubdivisions,\n    });\n    const hIntersections = hLine.intersect(path, {\n        segmentSubdivisions,\n    });\n    const intersections = [];\n    if (vIntersections) {\n        intersections.push(...vIntersections);\n    }\n    if (hIntersections) {\n        intersections.push(...hIntersections);\n    }\n    if (intersections.length > 0) {\n        return refPoint.closest(intersections);\n    }\n    if (options.fallbackAt != null) {\n        return getPointAtEdge(view, options.fallbackAt);\n    }\n    return FunctionExt.call(getClosestPoint, this, view, magnet, refPoint, options);\n};\nexport const orth = resolve(orthogonal);\n//# sourceMappingURL=orth.js.map","import { Registry } from '../registry';\nimport * as anchors from './main';\nexport var EdgeAnchor;\n(function (EdgeAnchor) {\n    EdgeAnchor.presets = anchors;\n    EdgeAnchor.registry = Registry.create({\n        type: 'edge endpoint',\n    });\n    EdgeAnchor.registry.register(EdgeAnchor.presets, true);\n})(EdgeAnchor || (EdgeAnchor = {}));\n//# sourceMappingURL=index.js.map","import { Line } from '@antv/x6-geometry';\nexport function offset(p1, p2, offset) {\n    let tx;\n    if (typeof offset === 'object') {\n        if (Number.isFinite(offset.y)) {\n            const line = new Line(p2, p1);\n            const { start, end } = line.parallel(offset.y);\n            p2 = start; // eslint-disable-line\n            p1 = end; // eslint-disable-line\n        }\n        tx = offset.x;\n    }\n    else {\n        tx = offset;\n    }\n    if (tx == null || !Number.isFinite(tx)) {\n        return p1;\n    }\n    const length = p1.distance(p2);\n    if (tx === 0 && length > 0) {\n        return p1;\n    }\n    return p1.move(p2, -Math.min(tx, length - 1));\n}\nexport function getStrokeWidth(magnet) {\n    const stroke = magnet.getAttribute('stroke-width');\n    if (stroke === null) {\n        return 0;\n    }\n    return parseFloat(stroke) || 0;\n}\nexport function findShapeNode(magnet) {\n    if (magnet == null) {\n        return null;\n    }\n    let node = magnet;\n    do {\n        let tagName = node.tagName;\n        if (typeof tagName !== 'string')\n            return null;\n        tagName = tagName.toUpperCase();\n        if (tagName === 'G') {\n            node = node.firstElementChild;\n        }\n        else if (tagName === 'TITLE') {\n            node = node.nextElementSibling;\n        }\n        else\n            break;\n    } while (node);\n    return node;\n}\n//# sourceMappingURL=util.js.map","import { offset, getStrokeWidth } from './util';\n/**\n * Places the connection point at the intersection between the edge\n * path end segment and the target node bbox.\n */\nexport const bbox = function (line, view, magnet, options) {\n    const bbox = view.getBBoxOfElement(magnet);\n    if (options.stroked) {\n        bbox.inflate(getStrokeWidth(magnet) / 2);\n    }\n    const intersections = line.intersect(bbox);\n    const p = intersections && intersections.length\n        ? line.start.closest(intersections)\n        : line.end;\n    return offset(p, line.start, options.offset);\n};\n//# sourceMappingURL=bbox.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { bbox } from './bbox';\nimport { offset, getStrokeWidth } from './util';\n/**\n * Places the connection point at the intersection between the\n * link path end segment and the element's unrotated bbox.\n */\nexport const rect = function (line, view, magnet, options, type) {\n    const cell = view.cell;\n    const angle = cell.isNode() ? cell.getAngle() : 0;\n    if (angle === 0) {\n        return FunctionExt.call(bbox, this, line, view, magnet, options, type);\n    }\n    const bboxRaw = view.getUnrotatedBBoxOfElement(magnet);\n    if (options.stroked) {\n        bboxRaw.inflate(getStrokeWidth(magnet) / 2);\n    }\n    const center = bboxRaw.getCenter();\n    const lineRaw = line.clone().rotate(angle, center);\n    const intersections = lineRaw.setLength(1e6).intersect(bboxRaw);\n    const p = intersections && intersections.length\n        ? lineRaw.start.closest(intersections).rotate(-angle, center)\n        : line.end;\n    return offset(p, line.start, options.offset);\n};\n//# sourceMappingURL=rect.js.map","import { ObjectExt, Dom } from '@antv/x6-common';\nimport { Path, Rectangle, Ellipse } from '@antv/x6-geometry';\nimport { offset, getStrokeWidth, findShapeNode } from './util';\nimport { Util } from '../../util';\n/**\n * Places the connection point at the intersection between the\n * edge path end segment and the actual shape of the target magnet.\n */\nexport const boundary = function (line, view, magnet, options) {\n    let node;\n    let intersection;\n    const anchor = line.end;\n    const selector = options.selector;\n    if (typeof selector === 'string') {\n        node = view.findOne(selector);\n    }\n    else if (Array.isArray(selector)) {\n        node = ObjectExt.getByPath(magnet, selector);\n    }\n    else {\n        node = findShapeNode(magnet);\n    }\n    if (!Dom.isSVGGraphicsElement(node)) {\n        if (node === magnet || !Dom.isSVGGraphicsElement(magnet)) {\n            return anchor;\n        }\n        node = magnet;\n    }\n    const localShape = view.getShapeOfElement(node);\n    const magnetMatrix = view.getMatrixOfElement(node);\n    const translateMatrix = view.getRootTranslatedMatrix();\n    const rotateMatrix = view.getRootRotatedMatrix();\n    const targetMatrix = translateMatrix\n        .multiply(rotateMatrix)\n        .multiply(magnetMatrix);\n    const localMatrix = targetMatrix.inverse();\n    const localLine = Util.transformLine(line, localMatrix);\n    const localRef = localLine.start.clone();\n    const data = view.getDataOfElement(node);\n    if (options.insideout === false) {\n        if (data.shapeBBox == null) {\n            data.shapeBBox = localShape.bbox();\n        }\n        const localBBox = data.shapeBBox;\n        if (localBBox != null && localBBox.containsPoint(localRef)) {\n            return anchor;\n        }\n    }\n    if (options.extrapolate === true) {\n        localLine.setLength(1e6);\n    }\n    // Caching segment subdivisions for paths\n    let pathOptions;\n    if (Path.isPath(localShape)) {\n        const precision = options.precision || 2;\n        if (data.segmentSubdivisions == null) {\n            data.segmentSubdivisions = localShape.getSegmentSubdivisions({\n                precision,\n            });\n        }\n        pathOptions = {\n            precision,\n            segmentSubdivisions: data.segmentSubdivisions,\n        };\n        intersection = localLine.intersect(localShape, pathOptions);\n    }\n    else {\n        intersection = localLine.intersect(localShape);\n    }\n    if (intersection) {\n        if (Array.isArray(intersection)) {\n            intersection = localRef.closest(intersection);\n        }\n    }\n    else if (options.sticky === true) {\n        // No intersection, find the closest point instead\n        if (Rectangle.isRectangle(localShape)) {\n            intersection = localShape.getNearestPointToPoint(localRef);\n        }\n        else if (Ellipse.isEllipse(localShape)) {\n            intersection = localShape.intersectsWithLineFromCenterToPoint(localRef);\n        }\n        else {\n            intersection = localShape.closestPoint(localRef, pathOptions);\n        }\n    }\n    const cp = intersection\n        ? Util.transformPoint(intersection, targetMatrix)\n        : anchor;\n    let cpOffset = options.offset || 0;\n    if (options.stroked !== false) {\n        if (typeof cpOffset === 'object') {\n            cpOffset = Object.assign({}, cpOffset);\n            if (cpOffset.x == null) {\n                cpOffset.x = 0;\n            }\n            cpOffset.x += getStrokeWidth(node) / 2;\n        }\n        else {\n            cpOffset += getStrokeWidth(node) / 2;\n        }\n    }\n    return offset(cp, line.start, cpOffset);\n};\n//# sourceMappingURL=boundary.js.map","import { offset } from './util';\nfunction alignLine(line, type, offset = 0) {\n    const { start, end } = line;\n    let a;\n    let b;\n    let direction;\n    let coordinate;\n    switch (type) {\n        case 'left':\n            coordinate = 'x';\n            a = end;\n            b = start;\n            direction = -1;\n            break;\n        case 'right':\n            coordinate = 'x';\n            a = start;\n            b = end;\n            direction = 1;\n            break;\n        case 'top':\n            coordinate = 'y';\n            a = end;\n            b = start;\n            direction = -1;\n            break;\n        case 'bottom':\n            coordinate = 'y';\n            a = start;\n            b = end;\n            direction = 1;\n            break;\n        default:\n            return;\n    }\n    if (start[coordinate] < end[coordinate]) {\n        a[coordinate] = b[coordinate];\n    }\n    else {\n        b[coordinate] = a[coordinate];\n    }\n    if (Number.isFinite(offset)) {\n        a[coordinate] += direction * offset;\n        b[coordinate] += direction * offset;\n    }\n}\n/**\n * Places the connection point at the edge's endpoint.\n */\nexport const anchor = function (line, view, magnet, options) {\n    const { alignOffset, align } = options;\n    if (align) {\n        alignLine(line, align, alignOffset);\n    }\n    return offset(line.end, line.start, options.offset);\n};\n//# sourceMappingURL=anchor.js.map","import { Registry } from '../registry';\nimport * as connectionPoints from './main';\nexport var ConnectionPoint;\n(function (ConnectionPoint) {\n    ConnectionPoint.presets = connectionPoints;\n    ConnectionPoint.registry = Registry.create({\n        type: 'connection point',\n    });\n    ConnectionPoint.registry.register(ConnectionPoint.presets, true);\n})(ConnectionPoint || (ConnectionPoint = {}));\n//# sourceMappingURL=index.js.map","export const normal = function (vertices) {\n    return [...vertices];\n};\n//# sourceMappingURL=normal.js.map","import { NumberExt } from '@antv/x6-common';\n/**\n * Routes the edge always to/from a certain side\n */\nexport const oneSide = function (vertices, options, edgeView) {\n    const side = options.side || 'bottom';\n    const padding = NumberExt.normalizeSides(options.padding || 40);\n    const sourceBBox = edgeView.sourceBBox;\n    const targetBBox = edgeView.targetBBox;\n    const sourcePoint = sourceBBox.getCenter();\n    const targetPoint = targetBBox.getCenter();\n    let coord;\n    let dim;\n    let factor;\n    switch (side) {\n        case 'top':\n            factor = -1;\n            coord = 'y';\n            dim = 'height';\n            break;\n        case 'left':\n            factor = -1;\n            coord = 'x';\n            dim = 'width';\n            break;\n        case 'right':\n            factor = 1;\n            coord = 'x';\n            dim = 'width';\n            break;\n        case 'bottom':\n        default:\n            factor = 1;\n            coord = 'y';\n            dim = 'height';\n            break;\n    }\n    // Move the points from the center of the element to outside of it.\n    sourcePoint[coord] += factor * (sourceBBox[dim] / 2 + padding[side]);\n    targetPoint[coord] += factor * (targetBBox[dim] / 2 + padding[side]);\n    // Make edge orthogonal (at least the first and last vertex).\n    if (factor * (sourcePoint[coord] - targetPoint[coord]) > 0) {\n        targetPoint[coord] = sourcePoint[coord];\n    }\n    else {\n        sourcePoint[coord] = targetPoint[coord];\n    }\n    return [sourcePoint.toJSON(), ...vertices, targetPoint.toJSON()];\n};\n//# sourceMappingURL=oneside.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Rectangle } from '@antv/x6-geometry';\nexport function getPointBBox(p) {\n    return new Rectangle(p.x, p.y, 0, 0);\n}\nexport function getPaddingBox(options = {}) {\n    const sides = NumberExt.normalizeSides(options.padding || 20);\n    return {\n        x: -sides.left,\n        y: -sides.top,\n        width: sides.left + sides.right,\n        height: sides.top + sides.bottom,\n    };\n}\nexport function getSourceBBox(view, options = {}) {\n    return view.sourceBBox.clone().moveAndExpand(getPaddingBox(options));\n}\nexport function getTargetBBox(view, options = {}) {\n    return view.targetBBox.clone().moveAndExpand(getPaddingBox(options));\n}\nexport function getSourceAnchor(view, options = {}) {\n    if (view.sourceAnchor) {\n        return view.sourceAnchor;\n    }\n    const bbox = getSourceBBox(view, options);\n    return bbox.getCenter();\n}\nexport function getTargetAnchor(view, options = {}) {\n    if (view.targetAnchor) {\n        return view.targetAnchor;\n    }\n    const bbox = getTargetBBox(view, options);\n    return bbox.getCenter();\n}\n//# sourceMappingURL=util.js.map","import { ArrayExt } from '@antv/x6-common';\nimport { Point, Line, Angle } from '@antv/x6-geometry';\nimport * as Util from './util';\n/**\n * Returns a route with orthogonal line segments.\n */\nexport const orth = function (vertices, options, edgeView) {\n    let sourceBBox = Util.getSourceBBox(edgeView, options);\n    let targetBBox = Util.getTargetBBox(edgeView, options);\n    const sourceAnchor = Util.getSourceAnchor(edgeView, options);\n    const targetAnchor = Util.getTargetAnchor(edgeView, options);\n    // If anchor lies outside of bbox, the bbox expands to include it\n    sourceBBox = sourceBBox.union(Util.getPointBBox(sourceAnchor));\n    targetBBox = targetBBox.union(Util.getPointBBox(targetAnchor));\n    const points = vertices.map((p) => Point.create(p));\n    points.unshift(sourceAnchor);\n    points.push(targetAnchor);\n    // bearing of previous route segment\n    let bearing = null;\n    const result = [];\n    for (let i = 0, len = points.length - 1; i < len; i += 1) {\n        let route = null;\n        const from = points[i];\n        const to = points[i + 1];\n        const isOrthogonal = Private.getBearing(from, to) != null;\n        if (i === 0) {\n            // source\n            if (i + 1 === len) {\n                // source -> target\n                // Expand one of the nodes by 1px to detect situations when the two\n                // nodes are positioned next to each other with no gap in between.\n                if (sourceBBox.intersectsWithRect(targetBBox.clone().inflate(1))) {\n                    route = Private.insideNode(from, to, sourceBBox, targetBBox);\n                }\n                else if (!isOrthogonal) {\n                    route = Private.nodeToNode(from, to, sourceBBox, targetBBox);\n                }\n            }\n            else {\n                // source -> vertex\n                if (sourceBBox.containsPoint(to)) {\n                    route = Private.insideNode(from, to, sourceBBox, Util.getPointBBox(to).moveAndExpand(Util.getPaddingBox(options)));\n                }\n                else if (!isOrthogonal) {\n                    route = Private.nodeToVertex(from, to, sourceBBox);\n                }\n            }\n        }\n        else if (i + 1 === len) {\n            // vertex -> target\n            // prevent overlaps with previous line segment\n            const isOrthogonalLoop = isOrthogonal && Private.getBearing(to, from) === bearing;\n            if (targetBBox.containsPoint(from) || isOrthogonalLoop) {\n                route = Private.insideNode(from, to, Util.getPointBBox(from).moveAndExpand(Util.getPaddingBox(options)), targetBBox, bearing);\n            }\n            else if (!isOrthogonal) {\n                route = Private.vertexToNode(from, to, targetBBox, bearing);\n            }\n        }\n        else if (!isOrthogonal) {\n            // vertex -> vertex\n            route = Private.vertexToVertex(from, to, bearing);\n        }\n        // set bearing for next iteration\n        if (route) {\n            result.push(...route.points);\n            bearing = route.direction;\n        }\n        else {\n            // orthogonal route and not looped\n            bearing = Private.getBearing(from, to);\n        }\n        // push `to` point to identified orthogonal vertices array\n        if (i + 1 < len) {\n            result.push(to);\n        }\n    }\n    return result;\n};\nvar Private;\n(function (Private) {\n    /**\n     * Bearing to opposite bearing map\n     */\n    const opposites = {\n        N: 'S',\n        S: 'N',\n        E: 'W',\n        W: 'E',\n    };\n    /**\n     * Bearing to radians map\n     */\n    const radians = {\n        N: (-Math.PI / 2) * 3,\n        S: -Math.PI / 2,\n        E: 0,\n        W: Math.PI,\n    };\n    /**\n     * Returns a point `p` where lines p,p1 and p,p2 are perpendicular\n     * and p is not contained in the given box\n     */\n    function freeJoin(p1, p2, bbox) {\n        let p = new Point(p1.x, p2.y);\n        if (bbox.containsPoint(p)) {\n            p = new Point(p2.x, p1.y);\n        }\n        // kept for reference\n        // if (bbox.containsPoint(p)) {\n        //   return null\n        // }\n        return p;\n    }\n    /**\n     * Returns either width or height of a bbox based on the given bearing.\n     */\n    function getBBoxSize(bbox, bearing) {\n        return bbox[bearing === 'W' || bearing === 'E' ? 'width' : 'height'];\n    }\n    Private.getBBoxSize = getBBoxSize;\n    function getBearing(from, to) {\n        if (from.x === to.x) {\n            return from.y > to.y ? 'N' : 'S';\n        }\n        if (from.y === to.y) {\n            return from.x > to.x ? 'W' : 'E';\n        }\n        return null;\n    }\n    Private.getBearing = getBearing;\n    function vertexToVertex(from, to, bearing) {\n        const p1 = new Point(from.x, to.y);\n        const p2 = new Point(to.x, from.y);\n        const d1 = getBearing(from, p1);\n        const d2 = getBearing(from, p2);\n        const opposite = bearing ? opposites[bearing] : null;\n        const p = d1 === bearing || (d1 !== opposite && (d2 === opposite || d2 !== bearing))\n            ? p1\n            : p2;\n        return { points: [p], direction: getBearing(p, to) };\n    }\n    Private.vertexToVertex = vertexToVertex;\n    function nodeToVertex(from, to, fromBBox) {\n        const p = freeJoin(from, to, fromBBox);\n        return { points: [p], direction: getBearing(p, to) };\n    }\n    Private.nodeToVertex = nodeToVertex;\n    function vertexToNode(from, to, toBBox, bearing) {\n        const points = [new Point(from.x, to.y), new Point(to.x, from.y)];\n        const freePoints = points.filter((p) => !toBBox.containsPoint(p));\n        const freeBearingPoints = freePoints.filter((p) => getBearing(p, from) !== bearing);\n        let p;\n        if (freeBearingPoints.length > 0) {\n            // Try to pick a point which bears the same direction as the previous segment.\n            p = freeBearingPoints.filter((p) => getBearing(from, p) === bearing).pop();\n            p = p || freeBearingPoints[0];\n            return {\n                points: [p],\n                direction: getBearing(p, to),\n            };\n        }\n        {\n            // Here we found only points which are either contained in the element or they would create\n            // a link segment going in opposite direction from the previous one.\n            // We take the point inside element and move it outside the element in the direction the\n            // route is going. Now we can join this point with the current end (using freeJoin).\n            p = ArrayExt.difference(points, freePoints)[0];\n            const p2 = Point.create(to).move(p, -getBBoxSize(toBBox, bearing) / 2);\n            const p1 = freeJoin(p2, from, toBBox);\n            return {\n                points: [p1, p2],\n                direction: getBearing(p2, to),\n            };\n        }\n    }\n    Private.vertexToNode = vertexToNode;\n    function nodeToNode(from, to, fromBBox, toBBox) {\n        let route = nodeToVertex(to, from, toBBox);\n        const p1 = route.points[0];\n        if (fromBBox.containsPoint(p1)) {\n            route = nodeToVertex(from, to, fromBBox);\n            const p2 = route.points[0];\n            if (toBBox.containsPoint(p2)) {\n                const fromBorder = Point.create(from).move(p2, -getBBoxSize(fromBBox, getBearing(from, p2)) / 2);\n                const toBorder = Point.create(to).move(p1, -getBBoxSize(toBBox, getBearing(to, p1)) / 2);\n                const mid = new Line(fromBorder, toBorder).getCenter();\n                const startRoute = nodeToVertex(from, mid, fromBBox);\n                const endRoute = vertexToVertex(mid, to, startRoute.direction);\n                route.points = [startRoute.points[0], endRoute.points[0]];\n                route.direction = endRoute.direction;\n            }\n        }\n        return route;\n    }\n    Private.nodeToNode = nodeToNode;\n    // Finds route for situations where one node is inside the other.\n    // Typically the route is directed outside the outer node first and\n    // then back towards the inner node.\n    function insideNode(from, to, fromBBox, toBBox, bearing) {\n        const boundary = fromBBox.union(toBBox).inflate(1);\n        // start from the point which is closer to the boundary\n        const center = boundary.getCenter();\n        const reversed = center.distance(to) > center.distance(from);\n        const start = reversed ? to : from;\n        const end = reversed ? from : to;\n        let p1;\n        let p2;\n        let p3;\n        if (bearing) {\n            // Points on circle with radius equals 'W + H` are always outside the rectangle\n            // with width W and height H if the center of that circle is the center of that rectangle.\n            p1 = Point.fromPolar(boundary.width + boundary.height, radians[bearing], start);\n            p1 = boundary.getNearestPointToPoint(p1).move(p1, -1);\n        }\n        else {\n            p1 = boundary.getNearestPointToPoint(start).move(start, 1);\n        }\n        p2 = freeJoin(p1, end, boundary);\n        let points;\n        if (p1.round().equals(p2.round())) {\n            p2 = Point.fromPolar(boundary.width + boundary.height, Angle.toRad(p1.theta(start)) + Math.PI / 2, end);\n            p2 = boundary.getNearestPointToPoint(p2).move(end, 1).round();\n            p3 = freeJoin(p1, p2, boundary);\n            points = reversed ? [p2, p3, p1] : [p1, p3, p2];\n        }\n        else {\n            points = reversed ? [p2, p1] : [p1, p2];\n        }\n        const direction = reversed ? getBearing(p1, to) : getBearing(p2, to);\n        return {\n            points,\n            direction,\n        };\n    }\n    Private.insideNode = insideNode;\n})(Private || (Private = {}));\n//# sourceMappingURL=orth.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point, Angle } from '@antv/x6-geometry';\nimport { orth } from '../orth';\nexport const defaults = {\n    step: 10,\n    maxLoopCount: 2000,\n    precision: 1,\n    maxDirectionChange: 90,\n    perpendicular: true,\n    excludeTerminals: [],\n    excludeNodes: [],\n    excludeShapes: [],\n    startDirections: ['top', 'right', 'bottom', 'left'],\n    endDirections: ['top', 'right', 'bottom', 'left'],\n    directionMap: {\n        top: { x: 0, y: -1 },\n        right: { x: 1, y: 0 },\n        bottom: { x: 0, y: 1 },\n        left: { x: -1, y: 0 },\n    },\n    cost() {\n        const step = resolve(this.step, this);\n        return step;\n    },\n    directions() {\n        const step = resolve(this.step, this);\n        const cost = resolve(this.cost, this);\n        return [\n            { cost, offsetX: step, offsetY: 0 },\n            { cost, offsetX: -step, offsetY: 0 },\n            { cost, offsetX: 0, offsetY: step },\n            { cost, offsetX: 0, offsetY: -step },\n        ];\n    },\n    penalties() {\n        const step = resolve(this.step, this);\n        return {\n            0: 0,\n            45: step / 2,\n            90: step / 2,\n        };\n    },\n    paddingBox() {\n        const step = resolve(this.step, this);\n        return {\n            x: -step,\n            y: -step,\n            width: 2 * step,\n            height: 2 * step,\n        };\n    },\n    fallbackRouter: orth,\n    draggingRouter: null,\n    snapToGrid: true,\n};\nexport function resolve(input, options) {\n    if (typeof input === 'function') {\n        return input.call(options);\n    }\n    return input;\n}\nexport function resolveOptions(options) {\n    const result = Object.keys(options).reduce((memo, key) => {\n        const ret = memo;\n        if (key === 'fallbackRouter' ||\n            key === 'draggingRouter' ||\n            key === 'fallbackRoute') {\n            ret[key] = options[key];\n        }\n        else {\n            ret[key] = resolve(options[key], options);\n        }\n        return memo;\n    }, {});\n    if (result.padding) {\n        const sides = NumberExt.normalizeSides(result.padding);\n        result.paddingBox = {\n            x: -sides.left,\n            y: -sides.top,\n            width: sides.left + sides.right,\n            height: sides.top + sides.bottom,\n        };\n    }\n    result.directions.forEach((direction) => {\n        const point1 = new Point(0, 0);\n        const point2 = new Point(direction.offsetX, direction.offsetY);\n        direction.angle = Angle.normalize(point1.theta(point2));\n    });\n    return result;\n}\n//# sourceMappingURL=options.js.map","import { ArrayExt } from '@antv/x6-common';\nconst OPEN = 1;\nconst CLOSE = 2;\nexport class SortedSet {\n    constructor() {\n        this.items = [];\n        this.hash = {};\n        this.values = {};\n    }\n    add(item, value) {\n        if (this.hash[item]) {\n            // item removal\n            this.items.splice(this.items.indexOf(item), 1);\n        }\n        else {\n            this.hash[item] = OPEN;\n        }\n        this.values[item] = value;\n        const index = ArrayExt.sortedIndexBy(this.items, item, (key) => this.values[key]);\n        this.items.splice(index, 0, item);\n    }\n    pop() {\n        const item = this.items.shift();\n        if (item) {\n            this.hash[item] = CLOSE;\n        }\n        return item;\n    }\n    isOpen(item) {\n        return this.hash[item] === OPEN;\n    }\n    isClose(item) {\n        return this.hash[item] === CLOSE;\n    }\n    isEmpty() {\n        return this.items.length === 0;\n    }\n}\n//# sourceMappingURL=sorted-set.js.map","import { ArrayExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\n/**\n * Helper structure to identify whether a point lies inside an obstacle.\n */\nexport class ObstacleMap {\n    constructor(options) {\n        this.options = options;\n        this.mapGridSize = 100;\n        this.map = {};\n    }\n    /**\n     * Builds a map of all nodes for quicker obstacle queries i.e. is a point\n     * contained in any obstacle?\n     *\n     * A simplified grid search.\n     */\n    build(model, edge) {\n        const options = this.options;\n        // source or target node could be excluded from set of obstacles\n        const excludedTerminals = options.excludeTerminals.reduce((memo, type) => {\n            const terminal = edge[type];\n            if (terminal) {\n                const cell = model.getCell(terminal.cell);\n                if (cell) {\n                    memo.push(cell);\n                }\n            }\n            return memo;\n        }, []);\n        let excludedAncestors = [];\n        const source = model.getCell(edge.getSourceCellId());\n        if (source) {\n            excludedAncestors = ArrayExt.union(excludedAncestors, source.getAncestors().map((cell) => cell.id));\n        }\n        const target = model.getCell(edge.getTargetCellId());\n        if (target) {\n            excludedAncestors = ArrayExt.union(excludedAncestors, target.getAncestors().map((cell) => cell.id));\n        }\n        // The graph is divided into smaller cells, where each holds information\n        // about which node belong to it. When we query whether a point lies\n        // inside an obstacle we don't need to go through all obstacles, we check\n        // only those in a particular cell.\n        const mapGridSize = this.mapGridSize;\n        model.getNodes().reduce((map, node) => {\n            const excludedTerminal = excludedTerminals.some((cell) => cell.id === node.id);\n            const excludedShape = node.shape\n                ? options.excludeShapes.includes(node.shape)\n                : false;\n            const excludedNode = options.excludeNodes.some((item) => {\n                if (typeof item === 'string') {\n                    return node.id === item;\n                }\n                return item === node;\n            });\n            const excludedAncestor = excludedAncestors.includes(node.id);\n            const excluded = excludedShape || excludedTerminal || excludedNode || excludedAncestor;\n            if (!excluded) {\n                const bbox = node.getBBox().moveAndExpand(options.paddingBox);\n                const origin = bbox.getOrigin().snapToGrid(mapGridSize);\n                const corner = bbox.getCorner().snapToGrid(mapGridSize);\n                for (let x = origin.x; x <= corner.x; x += mapGridSize) {\n                    for (let y = origin.y; y <= corner.y; y += mapGridSize) {\n                        const key = new Point(x, y).toString();\n                        if (map[key] == null) {\n                            map[key] = [];\n                        }\n                        map[key].push(bbox);\n                    }\n                }\n            }\n            return map;\n        }, this.map);\n        return this;\n    }\n    isAccessible(point) {\n        const key = point.clone().snapToGrid(this.mapGridSize).toString();\n        const rects = this.map[key];\n        return rects ? rects.every((rect) => !rect.containsPoint(point)) : true;\n    }\n}\n//# sourceMappingURL=obstacle-map.js.map","import { Point, Line, Angle, GeometryUtil } from '@antv/x6-geometry';\nexport function getSourceBBox(view, options) {\n    const bbox = view.sourceBBox.clone();\n    if (options && options.paddingBox) {\n        return bbox.moveAndExpand(options.paddingBox);\n    }\n    return bbox;\n}\nexport function getTargetBBox(view, options) {\n    const bbox = view.targetBBox.clone();\n    if (options && options.paddingBox) {\n        return bbox.moveAndExpand(options.paddingBox);\n    }\n    return bbox;\n}\nexport function getSourceEndpoint(view, options) {\n    if (view.sourceAnchor) {\n        return view.sourceAnchor;\n    }\n    const sourceBBox = getSourceBBox(view, options);\n    return sourceBBox.getCenter();\n}\nexport function getTargetEndpoint(view, options) {\n    if (view.targetAnchor) {\n        return view.targetAnchor;\n    }\n    const targetBBox = getTargetBBox(view, options);\n    return targetBBox.getCenter();\n}\n// returns a direction index from start point to end point\n// corrects for grid deformation between start and end\nexport function getDirectionAngle(start, end, directionCount, grid, options) {\n    const quadrant = 360 / directionCount;\n    const angleTheta = start.theta(fixAngleEnd(start, end, grid, options));\n    const normalizedAngle = Angle.normalize(angleTheta + quadrant / 2);\n    return quadrant * Math.floor(normalizedAngle / quadrant);\n}\nfunction fixAngleEnd(start, end, grid, options) {\n    const step = options.step;\n    const diffX = end.x - start.x;\n    const diffY = end.y - start.y;\n    const gridStepsX = diffX / grid.x;\n    const gridStepsY = diffY / grid.y;\n    const distanceX = gridStepsX * step;\n    const distanceY = gridStepsY * step;\n    return new Point(start.x + distanceX, start.y + distanceY);\n}\n/**\n * Returns the change in direction between two direction angles.\n */\nexport function getDirectionChange(angle1, angle2) {\n    const change = Math.abs(angle1 - angle2);\n    return change > 180 ? 360 - change : change;\n}\n// fix direction offsets according to current grid\nexport function getGridOffsets(grid, options) {\n    const step = options.step;\n    options.directions.forEach((direction) => {\n        direction.gridOffsetX = (direction.offsetX / step) * grid.x;\n        direction.gridOffsetY = (direction.offsetY / step) * grid.y;\n    });\n    return options.directions;\n}\n// get grid size in x and y dimensions, adapted to source and target positions\nexport function getGrid(step, source, target) {\n    return {\n        source: source.clone(),\n        x: getGridDimension(target.x - source.x, step),\n        y: getGridDimension(target.y - source.y, step),\n    };\n}\nfunction getGridDimension(diff, step) {\n    // return step if diff = 0\n    if (!diff) {\n        return step;\n    }\n    const abs = Math.abs(diff);\n    const count = Math.round(abs / step);\n    // return `abs` if less than one step apart\n    if (!count) {\n        return abs;\n    }\n    // otherwise, return corrected step\n    const roundedDiff = count * step;\n    const remainder = abs - roundedDiff;\n    const correction = remainder / count;\n    return step + correction;\n}\nfunction snapGrid(point, grid) {\n    const source = grid.source;\n    const x = GeometryUtil.snapToGrid(point.x - source.x, grid.x) + source.x;\n    const y = GeometryUtil.snapToGrid(point.y - source.y, grid.y) + source.y;\n    return new Point(x, y);\n}\nexport function round(point, precision) {\n    return point.round(precision);\n}\nexport function align(point, grid, precision) {\n    return round(snapGrid(point.clone(), grid), precision);\n}\nexport function getKey(point) {\n    return point.toString();\n}\nexport function normalizePoint(point) {\n    return new Point(point.x === 0 ? 0 : Math.abs(point.x) / point.x, point.y === 0 ? 0 : Math.abs(point.y) / point.y);\n}\nexport function getCost(from, anchors) {\n    let min = Infinity;\n    for (let i = 0, len = anchors.length; i < len; i += 1) {\n        const dist = from.manhattanDistance(anchors[i]);\n        if (dist < min) {\n            min = dist;\n        }\n    }\n    return min;\n}\n// Find points around the bbox taking given directions into account\n// lines are drawn from anchor in given directions, intersections recorded\n// if anchor is outside bbox, only those directions that intersect get a rect point\n// the anchor itself is returned as rect point (representing some directions)\n// (since those directions are unobstructed by the bbox)\nexport function getRectPoints(anchor, bbox, directionList, grid, options) {\n    const precision = options.precision;\n    const directionMap = options.directionMap;\n    const centerVector = anchor.diff(bbox.getCenter());\n    const rectPoints = Object.keys(directionMap).reduce((res, key) => {\n        if (directionList.includes(key)) {\n            const direction = directionMap[key];\n            // Create a line that is guaranteed to intersect the bbox if bbox\n            // is in the direction even if anchor lies outside of bbox.\n            const ending = new Point(anchor.x + direction.x * (Math.abs(centerVector.x) + bbox.width), anchor.y + direction.y * (Math.abs(centerVector.y) + bbox.height));\n            const intersectionLine = new Line(anchor, ending);\n            // Get the farther intersection, in case there are two\n            // (that happens if anchor lies next to bbox)\n            const intersections = intersectionLine.intersect(bbox) || [];\n            let farthestIntersectionDistance;\n            let farthestIntersection = null;\n            for (let i = 0; i < intersections.length; i += 1) {\n                const intersection = intersections[i];\n                const distance = anchor.squaredDistance(intersection);\n                if (farthestIntersectionDistance == null ||\n                    distance > farthestIntersectionDistance) {\n                    farthestIntersectionDistance = distance;\n                    farthestIntersection = intersection;\n                }\n            }\n            // If an intersection was found in this direction, it is our rectPoint\n            if (farthestIntersection) {\n                let target = align(farthestIntersection, grid, precision);\n                // If the rectPoint lies inside the bbox, offset it by one more step\n                if (bbox.containsPoint(target)) {\n                    target = align(target.translate(direction.x * grid.x, direction.y * grid.y), grid, precision);\n                }\n                res.push(target);\n            }\n        }\n        return res;\n    }, []);\n    // if anchor lies outside of bbox, add it to the array of points\n    if (!bbox.containsPoint(anchor)) {\n        rectPoints.push(align(anchor, grid, precision));\n    }\n    return rectPoints;\n}\n// reconstructs a route by concatenating points with their parents\nexport function reconstructRoute(parents, points, tailPoint, from, to) {\n    const route = [];\n    let prevDiff = normalizePoint(to.diff(tailPoint));\n    // tailPoint is assumed to be aligned already\n    let currentKey = getKey(tailPoint);\n    let parent = parents[currentKey];\n    let point;\n    while (parent) {\n        // point is assumed to be aligned already\n        point = points[currentKey];\n        const diff = normalizePoint(point.diff(parent));\n        if (!diff.equals(prevDiff)) {\n            route.unshift(point);\n            prevDiff = diff;\n        }\n        // parent is assumed to be aligned already\n        currentKey = getKey(parent);\n        parent = parents[currentKey];\n    }\n    // leadPoint is assumed to be aligned already\n    const leadPoint = points[currentKey];\n    const fromDiff = normalizePoint(leadPoint.diff(from));\n    if (!fromDiff.equals(prevDiff)) {\n        route.unshift(leadPoint);\n    }\n    return route;\n}\n//# sourceMappingURL=util.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { SortedSet } from './sorted-set';\nimport { ObstacleMap } from './obstacle-map';\nimport * as util from './util';\nimport { resolveOptions, } from './options';\n/**\n * Finds the route between two points (`from`, `to`).\n */\nfunction findRoute(edgeView, from, to, map, options) {\n    const precision = options.precision;\n    let sourceEndpoint;\n    let targetEndpoint;\n    if (Rectangle.isRectangle(from)) {\n        sourceEndpoint = util.round(util.getSourceEndpoint(edgeView, options).clone(), precision);\n    }\n    else {\n        sourceEndpoint = util.round(from.clone(), precision);\n    }\n    if (Rectangle.isRectangle(to)) {\n        targetEndpoint = util.round(util.getTargetEndpoint(edgeView, options).clone(), precision);\n    }\n    else {\n        targetEndpoint = util.round(to.clone(), precision);\n    }\n    // Get grid for this route.\n    const grid = util.getGrid(options.step, sourceEndpoint, targetEndpoint);\n    // Get pathfinding points.\n    // -----------------------\n    const startPoint = sourceEndpoint;\n    const endPoint = targetEndpoint;\n    let startPoints;\n    let endPoints;\n    if (Rectangle.isRectangle(from)) {\n        startPoints = util.getRectPoints(startPoint, from, options.startDirections, grid, options);\n    }\n    else {\n        startPoints = [startPoint];\n    }\n    if (Rectangle.isRectangle(to)) {\n        endPoints = util.getRectPoints(targetEndpoint, to, options.endDirections, grid, options);\n    }\n    else {\n        endPoints = [endPoint];\n    }\n    // take into account only accessible rect points (those not under obstacles)\n    startPoints = startPoints.filter((p) => map.isAccessible(p));\n    endPoints = endPoints.filter((p) => map.isAccessible(p));\n    // There is an accessible route point on both sides.\n    if (startPoints.length > 0 && endPoints.length > 0) {\n        const openSet = new SortedSet();\n        // Keeps the actual points for given nodes of the open set.\n        const points = {};\n        // Keeps the point that is immediate predecessor of given element.\n        const parents = {};\n        // Cost from start to a point along best known path.\n        const costs = {};\n        for (let i = 0, n = startPoints.length; i < n; i += 1) {\n            // startPoint is assumed to be aligned already\n            const startPoint = startPoints[i];\n            const key = util.getKey(startPoint);\n            openSet.add(key, util.getCost(startPoint, endPoints));\n            points[key] = startPoint;\n            costs[key] = 0;\n        }\n        const previousRouteDirectionAngle = options.previousDirectionAngle;\n        // undefined for first route\n        const isPathBeginning = previousRouteDirectionAngle === undefined;\n        // directions\n        let direction;\n        let directionChange;\n        const directions = util.getGridOffsets(grid, options);\n        const numDirections = directions.length;\n        const endPointsKeys = endPoints.reduce((res, endPoint) => {\n            const key = util.getKey(endPoint);\n            res.push(key);\n            return res;\n        }, []);\n        // main route finding loop\n        const sameStartEndPoints = Point.equalPoints(startPoints, endPoints);\n        let loopsRemaining = options.maxLoopCount;\n        while (!openSet.isEmpty() && loopsRemaining > 0) {\n            // Get the closest item and mark it CLOSED\n            const currentKey = openSet.pop();\n            const currentPoint = points[currentKey];\n            const currentParent = parents[currentKey];\n            const currentCost = costs[currentKey];\n            const isStartPoint = currentPoint.equals(startPoint);\n            const isRouteBeginning = currentParent == null;\n            let previousDirectionAngle;\n            if (!isRouteBeginning) {\n                previousDirectionAngle = util.getDirectionAngle(currentParent, currentPoint, numDirections, grid, options);\n            }\n            else if (!isPathBeginning) {\n                // a vertex on the route\n                previousDirectionAngle = previousRouteDirectionAngle;\n            }\n            else if (!isStartPoint) {\n                // beginning of route on the path\n                previousDirectionAngle = util.getDirectionAngle(startPoint, currentPoint, numDirections, grid, options);\n            }\n            else {\n                previousDirectionAngle = null;\n            }\n            // Check if we reached any endpoint\n            const skipEndCheck = isRouteBeginning && sameStartEndPoints;\n            if (!skipEndCheck && endPointsKeys.indexOf(currentKey) >= 0) {\n                options.previousDirectionAngle = previousDirectionAngle;\n                return util.reconstructRoute(parents, points, currentPoint, startPoint, endPoint);\n            }\n            // Go over all possible directions and find neighbors\n            for (let i = 0; i < numDirections; i += 1) {\n                direction = directions[i];\n                const directionAngle = direction.angle;\n                directionChange = util.getDirectionChange(previousDirectionAngle, directionAngle);\n                // Don't use the point changed rapidly.\n                if (!(isPathBeginning && isStartPoint) &&\n                    directionChange > options.maxDirectionChange) {\n                    continue;\n                }\n                const neighborPoint = util.align(currentPoint\n                    .clone()\n                    .translate(direction.gridOffsetX || 0, direction.gridOffsetY || 0), grid, precision);\n                const neighborKey = util.getKey(neighborPoint);\n                // Closed points were already evaluated.\n                if (openSet.isClose(neighborKey) || !map.isAccessible(neighborPoint)) {\n                    continue;\n                }\n                // Neighbor is an end point.\n                if (endPointsKeys.indexOf(neighborKey) >= 0) {\n                    const isEndPoint = neighborPoint.equals(endPoint);\n                    if (!isEndPoint) {\n                        const endDirectionAngle = util.getDirectionAngle(neighborPoint, endPoint, numDirections, grid, options);\n                        const endDirectionChange = util.getDirectionChange(directionAngle, endDirectionAngle);\n                        if (endDirectionChange > options.maxDirectionChange) {\n                            continue;\n                        }\n                    }\n                }\n                // The current direction is ok.\n                // ----------------------------\n                const neighborCost = direction.cost;\n                const neighborPenalty = isStartPoint\n                    ? 0\n                    : options.penalties[directionChange];\n                const costFromStart = currentCost + neighborCost + neighborPenalty;\n                // Neighbor point has not been processed yet or the cost of\n                // the path from start is lower than previously calculated.\n                if (!openSet.isOpen(neighborKey) ||\n                    costFromStart < costs[neighborKey]) {\n                    points[neighborKey] = neighborPoint;\n                    parents[neighborKey] = currentPoint;\n                    costs[neighborKey] = costFromStart;\n                    openSet.add(neighborKey, costFromStart + util.getCost(neighborPoint, endPoints));\n                }\n            }\n            loopsRemaining -= 1;\n        }\n    }\n    if (options.fallbackRoute) {\n        return FunctionExt.call(options.fallbackRoute, this, startPoint, endPoint, options);\n    }\n    return null;\n}\nfunction snap(vertices, gridSize = 10) {\n    if (vertices.length <= 1) {\n        return vertices;\n    }\n    for (let i = 0, len = vertices.length; i < len - 1; i += 1) {\n        const first = vertices[i];\n        const second = vertices[i + 1];\n        if (first.x === second.x) {\n            const x = gridSize * Math.round(first.x / gridSize);\n            if (first.x !== x) {\n                first.x = x;\n                second.x = x;\n            }\n        }\n        else if (first.y === second.y) {\n            const y = gridSize * Math.round(first.y / gridSize);\n            if (first.y !== y) {\n                first.y = y;\n                second.y = y;\n            }\n        }\n    }\n    return vertices;\n}\nexport const router = function (vertices, optionsRaw, edgeView) {\n    const options = resolveOptions(optionsRaw);\n    const sourceBBox = util.getSourceBBox(edgeView, options);\n    const targetBBox = util.getTargetBBox(edgeView, options);\n    const sourceEndpoint = util.getSourceEndpoint(edgeView, options);\n    // pathfinding\n    const map = new ObstacleMap(options).build(edgeView.graph.model, edgeView.cell);\n    const oldVertices = vertices.map((p) => Point.create(p));\n    const newVertices = [];\n    // The origin of first route's grid, does not need snapping\n    let tailPoint = sourceEndpoint;\n    let from;\n    let to;\n    for (let i = 0, len = oldVertices.length; i <= len; i += 1) {\n        let partialRoute = null;\n        from = to || sourceBBox;\n        to = oldVertices[i];\n        // This is the last iteration\n        if (to == null) {\n            to = targetBBox;\n            // If the target is a point, we should use dragging route\n            // instead of main routing method if it has been provided.\n            const edge = edgeView.cell;\n            const isEndingAtPoint = edge.getSourceCellId() == null || edge.getTargetCellId() == null;\n            if (isEndingAtPoint && typeof options.draggingRouter === 'function') {\n                const dragFrom = from === sourceBBox ? sourceEndpoint : from;\n                const dragTo = to.getOrigin();\n                partialRoute = FunctionExt.call(options.draggingRouter, edgeView, dragFrom, dragTo, options);\n            }\n        }\n        // Find the partial route\n        if (partialRoute == null) {\n            partialRoute = findRoute(edgeView, from, to, map, options);\n        }\n        // Cannot found the partial route.\n        if (partialRoute === null) {\n            // eslint-next-line\n            console.warn(`Unable to execute manhattan algorithm, use orth instead`);\n            return FunctionExt.call(options.fallbackRouter, this, vertices, options, edgeView);\n        }\n        // Remove the first point if the previous partial route has\n        // the same point as last.\n        const leadPoint = partialRoute[0];\n        if (leadPoint && leadPoint.equals(tailPoint)) {\n            partialRoute.shift();\n        }\n        // Save tailPoint for next iteration\n        tailPoint = partialRoute[partialRoute.length - 1] || tailPoint;\n        newVertices.push(...partialRoute);\n    }\n    if (options.snapToGrid) {\n        return snap(newVertices, edgeView.graph.grid.getGridSize());\n    }\n    return newVertices;\n};\n//# sourceMappingURL=router.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { router } from './router';\nimport { defaults } from './options';\nexport const manhattan = function (vertices, options, edgeView) {\n    return FunctionExt.call(router, this, vertices, Object.assign(Object.assign({}, defaults), options), edgeView);\n};\n//# sourceMappingURL=index.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { Point, Line, Angle } from '@antv/x6-geometry';\nimport { resolve } from './manhattan/options';\nimport { manhattan } from './manhattan/index';\nconst defaults = {\n    maxDirectionChange: 45,\n    // an array of directions to find next points on the route\n    // different from start/end directions\n    directions() {\n        const step = resolve(this.step, this);\n        const cost = resolve(this.cost, this);\n        const diagonalCost = Math.ceil(Math.sqrt((step * step) << 1)); // eslint-disable-line no-bitwise\n        return [\n            { cost, offsetX: step, offsetY: 0 },\n            { cost: diagonalCost, offsetX: step, offsetY: step },\n            { cost, offsetX: 0, offsetY: step },\n            { cost: diagonalCost, offsetX: -step, offsetY: step },\n            { cost, offsetX: -step, offsetY: 0 },\n            { cost: diagonalCost, offsetX: -step, offsetY: -step },\n            { cost, offsetX: 0, offsetY: -step },\n            { cost: diagonalCost, offsetX: step, offsetY: -step },\n        ];\n    },\n    // a simple route used in situations when main routing method fails\n    // (exceed max number of loop iterations, inaccessible)\n    fallbackRoute(from, to, options) {\n        // Find a route which breaks by 45 degrees ignoring all obstacles.\n        const theta = from.theta(to);\n        const route = [];\n        let a = { x: to.x, y: from.y };\n        let b = { x: from.x, y: to.y };\n        if (theta % 180 > 90) {\n            const t = a;\n            a = b;\n            b = t;\n        }\n        const p1 = theta % 90 < 45 ? a : b;\n        const l1 = new Line(from, p1);\n        const alpha = 90 * Math.ceil(theta / 90);\n        const p2 = Point.fromPolar(l1.squaredLength(), Angle.toRad(alpha + 135), p1);\n        const l2 = new Line(to, p2);\n        const intersectionPoint = l1.intersectsWithLine(l2);\n        const point = intersectionPoint || to;\n        const directionFrom = intersectionPoint ? point : from;\n        const quadrant = 360 / options.directions.length;\n        const angleTheta = directionFrom.theta(to);\n        const normalizedAngle = Angle.normalize(angleTheta + quadrant / 2);\n        const directionAngle = quadrant * Math.floor(normalizedAngle / quadrant);\n        options.previousDirectionAngle = directionAngle;\n        if (point)\n            route.push(point.round());\n        route.push(to);\n        return route;\n    },\n};\nexport const metro = function (vertices, options, linkView) {\n    return FunctionExt.call(manhattan, this, vertices, Object.assign(Object.assign({}, defaults), options), linkView);\n};\n//# sourceMappingURL=metro.js.map","export const er = function (vertices, options, edgeView) {\n    const offsetRaw = options.offset || 32;\n    const min = options.min == null ? 16 : options.min;\n    let offset = 0;\n    let direction = options.direction;\n    const sourceBBox = edgeView.sourceBBox;\n    const targetBBox = edgeView.targetBBox;\n    const sourcePoint = sourceBBox.getCenter();\n    const targetPoint = targetBBox.getCenter();\n    if (typeof offsetRaw === 'number') {\n        offset = offsetRaw;\n    }\n    if (direction == null) {\n        let dx = targetBBox.left - sourceBBox.right;\n        let dy = targetBBox.top - sourceBBox.bottom;\n        if (dx >= 0 && dy >= 0) {\n            direction = dx >= dy ? 'L' : 'T';\n        }\n        else if (dx <= 0 && dy >= 0) {\n            dx = sourceBBox.left - targetBBox.right;\n            if (dx >= 0) {\n                direction = dx >= dy ? 'R' : 'T';\n            }\n            else {\n                direction = 'T';\n            }\n        }\n        else if (dx >= 0 && dy <= 0) {\n            dy = sourceBBox.top - targetBBox.bottom;\n            if (dy >= 0) {\n                direction = dx >= dy ? 'L' : 'B';\n            }\n            else {\n                direction = 'L';\n            }\n        }\n        else {\n            dx = sourceBBox.left - targetBBox.right;\n            dy = sourceBBox.top - targetBBox.bottom;\n            if (dx >= 0 && dy >= 0) {\n                direction = dx >= dy ? 'R' : 'B';\n            }\n            else if (dx <= 0 && dy >= 0) {\n                direction = 'B';\n            }\n            else if (dx >= 0 && dy <= 0) {\n                direction = 'R';\n            }\n            else {\n                direction = Math.abs(dx) > Math.abs(dy) ? 'R' : 'B';\n            }\n        }\n    }\n    if (direction === 'H') {\n        direction = targetPoint.x - sourcePoint.x >= 0 ? 'L' : 'R';\n    }\n    else if (direction === 'V') {\n        direction = targetPoint.y - sourcePoint.y >= 0 ? 'T' : 'B';\n    }\n    if (offsetRaw === 'center') {\n        if (direction === 'L') {\n            offset = (targetBBox.left - sourceBBox.right) / 2;\n        }\n        else if (direction === 'R') {\n            offset = (sourceBBox.left - targetBBox.right) / 2;\n        }\n        else if (direction === 'T') {\n            offset = (targetBBox.top - sourceBBox.bottom) / 2;\n        }\n        else if (direction === 'B') {\n            offset = (sourceBBox.top - targetBBox.bottom) / 2;\n        }\n    }\n    let coord;\n    let dim;\n    let factor;\n    const horizontal = direction === 'L' || direction === 'R';\n    if (horizontal) {\n        if (targetPoint.y === sourcePoint.y) {\n            return [...vertices];\n        }\n        factor = direction === 'L' ? 1 : -1;\n        coord = 'x';\n        dim = 'width';\n    }\n    else {\n        if (targetPoint.x === sourcePoint.x) {\n            return [...vertices];\n        }\n        factor = direction === 'T' ? 1 : -1;\n        coord = 'y';\n        dim = 'height';\n    }\n    const source = sourcePoint.clone();\n    const target = targetPoint.clone();\n    source[coord] += factor * (sourceBBox[dim] / 2 + offset);\n    target[coord] -= factor * (targetBBox[dim] / 2 + offset);\n    if (horizontal) {\n        const sourceX = source.x;\n        const targetX = target.x;\n        const sourceDelta = sourceBBox.width / 2 + min;\n        const targetDelta = targetBBox.width / 2 + min;\n        if (targetPoint.x > sourcePoint.x) {\n            if (targetX <= sourceX) {\n                source.x = Math.max(targetX, sourcePoint.x + sourceDelta);\n                target.x = Math.min(sourceX, targetPoint.x - targetDelta);\n            }\n        }\n        else if (targetX >= sourceX) {\n            source.x = Math.min(targetX, sourcePoint.x - sourceDelta);\n            target.x = Math.max(sourceX, targetPoint.x + targetDelta);\n        }\n    }\n    else {\n        const sourceY = source.y;\n        const targetY = target.y;\n        const sourceDelta = sourceBBox.height / 2 + min;\n        const targetDelta = targetBBox.height / 2 + min;\n        if (targetPoint.y > sourcePoint.y) {\n            if (targetY <= sourceY) {\n                source.y = Math.max(targetY, sourcePoint.y + sourceDelta);\n                target.y = Math.min(sourceY, targetPoint.y - targetDelta);\n            }\n        }\n        else if (targetY >= sourceY) {\n            source.y = Math.min(targetY, sourcePoint.y - sourceDelta);\n            target.y = Math.max(sourceY, targetPoint.y + targetDelta);\n        }\n    }\n    return [source.toJSON(), ...vertices, target.toJSON()];\n};\n//# sourceMappingURL=er.js.map","import { Angle, Point, Line } from '@antv/x6-geometry';\nfunction rollup(points, merge) {\n    if (merge != null && merge !== false) {\n        const amount = typeof merge === 'boolean' ? 0 : merge;\n        if (amount > 0) {\n            const center1 = Point.create(points[1]).move(points[2], amount);\n            const center2 = Point.create(points[1]).move(points[0], amount);\n            return [center1.toJSON(), ...points, center2.toJSON()];\n        }\n        {\n            const center = points[1];\n            return [Object.assign({}, center), ...points, Object.assign({}, center)];\n        }\n    }\n    return points;\n}\nexport const loop = function (vertices, options, edgeView) {\n    const width = options.width || 50;\n    const height = options.height || 80;\n    const halfHeight = height / 2;\n    const angle = options.angle || 'auto';\n    const sourceAnchor = edgeView.sourceAnchor;\n    const targetAnchor = edgeView.targetAnchor;\n    const sourceBBox = edgeView.sourceBBox;\n    const targetBBox = edgeView.targetBBox;\n    if (sourceAnchor.equals(targetAnchor)) {\n        const getVertices = (angle) => {\n            const rad = Angle.toRad(angle);\n            const sin = Math.sin(rad);\n            const cos = Math.cos(rad);\n            const center = new Point(sourceAnchor.x + cos * width, sourceAnchor.y + sin * width);\n            const ref = new Point(center.x - cos * halfHeight, center.y - sin * halfHeight);\n            const p1 = ref.clone().rotate(-90, center);\n            const p2 = ref.clone().rotate(90, center);\n            return [p1.toJSON(), center.toJSON(), p2.toJSON()];\n        };\n        const validate = (end) => {\n            const start = sourceAnchor.clone().move(end, -1);\n            const line = new Line(start, end);\n            return (!sourceBBox.containsPoint(end) && !sourceBBox.intersectsWithLine(line));\n        };\n        const angles = [0, 90, 180, 270, 45, 135, 225, 315];\n        if (typeof angle === 'number') {\n            return rollup(getVertices(angle), options.merge);\n        }\n        const center = sourceBBox.getCenter();\n        if (center.equals(sourceAnchor)) {\n            return rollup(getVertices(0), options.merge);\n        }\n        const deg = center.angleBetween(sourceAnchor, center.clone().translate(1, 0));\n        let ret = getVertices(deg);\n        if (validate(ret[1])) {\n            return rollup(ret, options.merge);\n        }\n        // return the best vertices\n        for (let i = 1, l = angles.length; i < l; i += 1) {\n            ret = getVertices(deg + angles[i]);\n            if (validate(ret[1])) {\n                return rollup(ret, options.merge);\n            }\n        }\n        return rollup(ret, options.merge);\n    }\n    {\n        const line = new Line(sourceAnchor, targetAnchor);\n        let parallel = line.parallel(-width);\n        let center = parallel.getCenter();\n        let p1 = parallel.start.clone().move(parallel.end, halfHeight);\n        let p2 = parallel.end.clone().move(parallel.start, halfHeight);\n        const ref = line.parallel(-1);\n        const line1 = new Line(ref.start, center);\n        const line2 = new Line(ref.end, center);\n        if (sourceBBox.containsPoint(center) ||\n            targetBBox.containsPoint(center) ||\n            sourceBBox.intersectsWithLine(line1) ||\n            sourceBBox.intersectsWithLine(line2) ||\n            targetBBox.intersectsWithLine(line1) ||\n            targetBBox.intersectsWithLine(line2)) {\n            parallel = line.parallel(width);\n            center = parallel.getCenter();\n            p1 = parallel.start.clone().move(parallel.end, halfHeight);\n            p2 = parallel.end.clone().move(parallel.start, halfHeight);\n        }\n        if (options.merge) {\n            const line = new Line(sourceAnchor, targetAnchor);\n            const normal = new Line(center, line.center).setLength(Number.MAX_SAFE_INTEGER);\n            const intersects1 = sourceBBox.intersectsWithLine(normal);\n            const intersects2 = targetBBox.intersectsWithLine(normal);\n            const intersects = intersects1\n                ? Array.isArray(intersects1)\n                    ? intersects1\n                    : [intersects1]\n                : [];\n            if (intersects2) {\n                if (Array.isArray(intersects2)) {\n                    intersects.push(...intersects2);\n                }\n                else {\n                    intersects.push(intersects2);\n                }\n            }\n            const anchor = line.center.closest(intersects);\n            if (anchor) {\n                edgeView.sourceAnchor = anchor.clone();\n                edgeView.targetAnchor = anchor.clone();\n            }\n            else {\n                edgeView.sourceAnchor = line.center.clone();\n                edgeView.targetAnchor = line.center.clone();\n            }\n        }\n        return rollup([p1.toJSON(), center.toJSON(), p2.toJSON()], options.merge);\n    }\n};\n//# sourceMappingURL=loop.js.map","import { Registry } from '../registry';\nimport * as routers from './main';\nexport var Router;\n(function (Router) {\n    Router.presets = routers;\n    Router.registry = Registry.create({\n        type: 'router',\n    });\n    Router.registry.register(Router.presets, true);\n})(Router || (Router = {}));\n//# sourceMappingURL=index.js.map","import { Polyline, Path } from '@antv/x6-geometry';\nexport const normal = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    const points = [sourcePoint, ...routePoints, targetPoint];\n    const polyline = new Polyline(points);\n    const path = new Path(polyline);\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=normal.js.map","import { Path, Point } from '@antv/x6-geometry';\nexport const loop = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    const fix = routePoints.length === 3 ? 0 : 1;\n    const p1 = Point.create(routePoints[0 + fix]);\n    const p2 = Point.create(routePoints[2 + fix]);\n    const center = Point.create(routePoints[1 + fix]);\n    if (!Point.equals(sourcePoint, targetPoint)) {\n        const middle = new Point((sourcePoint.x + targetPoint.x) / 2, (sourcePoint.y + targetPoint.y) / 2);\n        const angle = middle.angleBetween(Point.create(sourcePoint).rotate(90, middle), center);\n        if (angle > 1) {\n            p1.rotate(180 - angle, middle);\n            p2.rotate(180 - angle, middle);\n            center.rotate(180 - angle, middle);\n        }\n    }\n    const pathData = `\n     M ${sourcePoint.x} ${sourcePoint.y}\n     Q ${p1.x} ${p1.y} ${center.x} ${center.y}\n     Q ${p2.x} ${p2.y} ${targetPoint.x} ${targetPoint.y}\n  `;\n    return options.raw ? Path.parse(pathData) : pathData;\n};\n//# sourceMappingURL=loop.js.map","import { Point, Path } from '@antv/x6-geometry';\nexport const rounded = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    const path = new Path();\n    path.appendSegment(Path.createSegment('M', sourcePoint));\n    const f13 = 1 / 3;\n    const f23 = 2 / 3;\n    const radius = options.radius || 10;\n    let prevDistance;\n    let nextDistance;\n    for (let i = 0, ii = routePoints.length; i < ii; i += 1) {\n        const curr = Point.create(routePoints[i]);\n        const prev = routePoints[i - 1] || sourcePoint;\n        const next = routePoints[i + 1] || targetPoint;\n        prevDistance = nextDistance || curr.distance(prev) / 2;\n        nextDistance = curr.distance(next) / 2;\n        const startMove = -Math.min(radius, prevDistance);\n        const endMove = -Math.min(radius, nextDistance);\n        const roundedStart = curr.clone().move(prev, startMove).round();\n        const roundedEnd = curr.clone().move(next, endMove).round();\n        const control1 = new Point(f13 * roundedStart.x + f23 * curr.x, f23 * curr.y + f13 * roundedStart.y);\n        const control2 = new Point(f13 * roundedEnd.x + f23 * curr.x, f23 * curr.y + f13 * roundedEnd.y);\n        path.appendSegment(Path.createSegment('L', roundedStart));\n        path.appendSegment(Path.createSegment('C', control1, control2, roundedEnd));\n    }\n    path.appendSegment(Path.createSegment('L', targetPoint));\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=rounded.js.map","import { Curve, Path } from '@antv/x6-geometry';\nexport const smooth = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    let path;\n    let direction = options.direction;\n    if (routePoints && routePoints.length !== 0) {\n        const points = [sourcePoint, ...routePoints, targetPoint];\n        const curves = Curve.throughPoints(points);\n        path = new Path(curves);\n    }\n    else {\n        // If we have no route, use a default cubic bezier curve, cubic bezier\n        // requires two control points, the control points have `x` midway\n        // between source and target. This produces an S-like curve.\n        path = new Path();\n        path.appendSegment(Path.createSegment('M', sourcePoint));\n        if (!direction) {\n            direction =\n                Math.abs(sourcePoint.x - targetPoint.x) >=\n                    Math.abs(sourcePoint.y - targetPoint.y)\n                    ? 'H'\n                    : 'V';\n        }\n        if (direction === 'H') {\n            const controlPointX = (sourcePoint.x + targetPoint.x) / 2;\n            path.appendSegment(Path.createSegment('C', controlPointX, sourcePoint.y, controlPointX, targetPoint.y, targetPoint.x, targetPoint.y));\n        }\n        else {\n            const controlPointY = (sourcePoint.y + targetPoint.y) / 2;\n            path.appendSegment(Path.createSegment('C', sourcePoint.x, controlPointY, targetPoint.x, controlPointY, targetPoint.x, targetPoint.y));\n        }\n    }\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=smooth.js.map","/* eslint-disable no-underscore-dangle */\nimport { Point, Line, Path } from '@antv/x6-geometry';\n// takes care of math. error for case when jump is too close to end of line\nconst CLOSE_PROXIMITY_PADDING = 1;\nconst F13 = 1 / 3;\nconst F23 = 2 / 3;\nfunction setupUpdating(view) {\n    let updateList = view.graph._jumpOverUpdateList;\n    // first time setup for this paper\n    if (updateList == null) {\n        updateList = view.graph._jumpOverUpdateList = [];\n        view.graph.on('cell:mouseup', () => {\n            const list = view.graph._jumpOverUpdateList;\n            // add timeout to wait for the target node to be connected\n            // fix https://github.com/antvis/X6/issues/3387\n            setTimeout(() => {\n                for (let i = 0; i < list.length; i += 1) {\n                    list[i].update();\n                }\n            });\n        });\n        view.graph.on('model:reseted', () => {\n            updateList = view.graph._jumpOverUpdateList = [];\n        });\n    }\n    // add this link to a list so it can be updated when some other link is updated\n    if (updateList.indexOf(view) < 0) {\n        updateList.push(view);\n        // watch for change of connector type or removal of link itself\n        // to remove the link from a list of jump over connectors\n        const clean = () => updateList.splice(updateList.indexOf(view), 1);\n        view.cell.once('change:connector', clean);\n        view.cell.once('removed', clean);\n    }\n}\nfunction createLines(sourcePoint, targetPoint, route = []) {\n    const points = [sourcePoint, ...route, targetPoint];\n    const lines = [];\n    points.forEach((point, idx) => {\n        const next = points[idx + 1];\n        if (next != null) {\n            lines.push(new Line(point, next));\n        }\n    });\n    return lines;\n}\nfunction findLineIntersections(line, crossCheckLines) {\n    const intersections = [];\n    crossCheckLines.forEach((crossCheckLine) => {\n        const intersection = line.intersectsWithLine(crossCheckLine);\n        if (intersection) {\n            intersections.push(intersection);\n        }\n    });\n    return intersections;\n}\nfunction getDistence(p1, p2) {\n    return new Line(p1, p2).squaredLength();\n}\n/**\n * Split input line into multiple based on intersection points.\n */\nfunction createJumps(line, intersections, jumpSize) {\n    return intersections.reduce((memo, point, idx) => {\n        // skipping points that were merged with the previous line\n        // to make bigger arc over multiple lines that are close to each other\n        if (skippedPoints.includes(point)) {\n            return memo;\n        }\n        // always grab the last line from buffer and modify it\n        const lastLine = memo.pop() || line;\n        // calculate start and end of jump by moving by a given size of jump\n        const jumpStart = Point.create(point).move(lastLine.start, -jumpSize);\n        let jumpEnd = Point.create(point).move(lastLine.start, +jumpSize);\n        // now try to look at the next intersection point\n        const nextPoint = intersections[idx + 1];\n        if (nextPoint != null) {\n            const distance = jumpEnd.distance(nextPoint);\n            if (distance <= jumpSize) {\n                // next point is close enough, move the jump end by this\n                // difference and mark the next point to be skipped\n                jumpEnd = nextPoint.move(lastLine.start, distance);\n                skippedPoints.push(nextPoint);\n            }\n        }\n        else {\n            // this block is inside of `else` as an optimization so the distance is\n            // not calculated when we know there are no other intersection points\n            const endDistance = jumpStart.distance(lastLine.end);\n            // if the end is too close to possible jump, draw remaining line instead of a jump\n            if (endDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n                memo.push(lastLine);\n                return memo;\n            }\n        }\n        const startDistance = jumpEnd.distance(lastLine.start);\n        if (startDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n            // if the start of line is too close to jump, draw that line instead of a jump\n            memo.push(lastLine);\n            return memo;\n        }\n        // finally create a jump line\n        const jumpLine = new Line(jumpStart, jumpEnd);\n        // it's just simple line but with a `isJump` property\n        jumppedLines.push(jumpLine);\n        memo.push(new Line(lastLine.start, jumpStart), jumpLine, new Line(jumpEnd, lastLine.end));\n        return memo;\n    }, []);\n}\nfunction buildPath(lines, jumpSize, jumpType, radius) {\n    const path = new Path();\n    let segment;\n    // first move to the start of a first line\n    segment = Path.createSegment('M', lines[0].start);\n    path.appendSegment(segment);\n    lines.forEach((line, index) => {\n        if (jumppedLines.includes(line)) {\n            let angle;\n            let diff;\n            let control1;\n            let control2;\n            if (jumpType === 'arc') {\n                // approximates semicircle with 2 curves\n                angle = -90;\n                // determine rotation of arc based on difference between points\n                diff = line.start.diff(line.end);\n                // make sure the arc always points up (or right)\n                const xAxisRotate = diff.x < 0 || (diff.x === 0 && diff.y < 0);\n                if (xAxisRotate) {\n                    angle += 180;\n                }\n                const center = line.getCenter();\n                const centerLine = new Line(center, line.end).rotate(angle, center);\n                let halfLine;\n                // first half\n                halfLine = new Line(line.start, center);\n                control1 = halfLine.pointAt(2 / 3).rotate(angle, line.start);\n                control2 = centerLine.pointAt(1 / 3).rotate(-angle, centerLine.end);\n                segment = Path.createSegment('C', control1, control2, centerLine.end);\n                path.appendSegment(segment);\n                // second half\n                halfLine = new Line(center, line.end);\n                control1 = centerLine.pointAt(1 / 3).rotate(angle, centerLine.end);\n                control2 = halfLine.pointAt(1 / 3).rotate(-angle, line.end);\n                segment = Path.createSegment('C', control1, control2, line.end);\n                path.appendSegment(segment);\n            }\n            else if (jumpType === 'gap') {\n                segment = Path.createSegment('M', line.end);\n                path.appendSegment(segment);\n            }\n            else if (jumpType === 'cubic') {\n                // approximates semicircle with 1 curve\n                angle = line.start.theta(line.end);\n                const xOffset = jumpSize * 0.6;\n                let yOffset = jumpSize * 1.35;\n                // determine rotation of arc based on difference between points\n                diff = line.start.diff(line.end);\n                // make sure the arc always points up (or right)\n                const xAxisRotate = diff.x < 0 || (diff.x === 0 && diff.y < 0);\n                if (xAxisRotate) {\n                    yOffset *= -1;\n                }\n                control1 = new Point(line.start.x + xOffset, line.start.y + yOffset).rotate(angle, line.start);\n                control2 = new Point(line.end.x - xOffset, line.end.y + yOffset).rotate(angle, line.end);\n                segment = Path.createSegment('C', control1, control2, line.end);\n                path.appendSegment(segment);\n            }\n        }\n        else {\n            const nextLine = lines[index + 1];\n            if (radius === 0 || !nextLine || jumppedLines.includes(nextLine)) {\n                segment = Path.createSegment('L', line.end);\n                path.appendSegment(segment);\n            }\n            else {\n                buildRoundedSegment(radius, path, line.end, line.start, nextLine.end);\n            }\n        }\n    });\n    return path;\n}\nfunction buildRoundedSegment(offset, path, curr, prev, next) {\n    const prevDistance = curr.distance(prev) / 2;\n    const nextDistance = curr.distance(next) / 2;\n    const startMove = -Math.min(offset, prevDistance);\n    const endMove = -Math.min(offset, nextDistance);\n    const roundedStart = curr.clone().move(prev, startMove).round();\n    const roundedEnd = curr.clone().move(next, endMove).round();\n    const control1 = new Point(F13 * roundedStart.x + F23 * curr.x, F23 * curr.y + F13 * roundedStart.y);\n    const control2 = new Point(F13 * roundedEnd.x + F23 * curr.x, F23 * curr.y + F13 * roundedEnd.y);\n    let segment;\n    segment = Path.createSegment('L', roundedStart);\n    path.appendSegment(segment);\n    segment = Path.createSegment('C', control1, control2, roundedEnd);\n    path.appendSegment(segment);\n}\nlet jumppedLines;\nlet skippedPoints;\nexport const jumpover = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    jumppedLines = [];\n    skippedPoints = [];\n    setupUpdating(this);\n    const jumpSize = options.size || 5;\n    const jumpType = options.type || 'arc';\n    const radius = options.radius || 0;\n    // list of connector types not to jump over.\n    const ignoreConnectors = options.ignoreConnectors || ['smooth'];\n    const graph = this.graph;\n    const model = graph.model;\n    const allLinks = model.getEdges();\n    // there is just one link, draw it directly\n    if (allLinks.length === 1) {\n        return buildPath(createLines(sourcePoint, targetPoint, routePoints), jumpSize, jumpType, radius);\n    }\n    const edge = this.cell;\n    const thisIndex = allLinks.indexOf(edge);\n    const defaultConnector = graph.options.connecting.connector || {};\n    // not all links are meant to be jumped over.\n    const edges = allLinks.filter((link, idx) => {\n        const connector = link.getConnector() || defaultConnector;\n        // avoid jumping over links with connector type listed in `ignored connectors`.\n        if (ignoreConnectors.includes(connector.name)) {\n            return false;\n        }\n        // filter out links that are above this one and  have the same connector type\n        // otherwise there would double hoops for each intersection\n        if (idx > thisIndex) {\n            return connector.name !== 'jumpover';\n        }\n        return true;\n    });\n    // find views for all links\n    const linkViews = edges.map((edge) => {\n        return graph.findViewByCell(edge);\n    });\n    // create lines for this link\n    const thisLines = createLines(sourcePoint, targetPoint, routePoints);\n    // create lines for all other links\n    const linkLines = linkViews.map((linkView) => {\n        if (linkView == null) {\n            return [];\n        }\n        if (linkView === this) {\n            return thisLines;\n        }\n        return createLines(linkView.sourcePoint, linkView.targetPoint, linkView.routePoints);\n    });\n    // transform lines for this link by splitting with jump lines at\n    // points of intersection with other links\n    const jumpingLines = [];\n    thisLines.forEach((line) => {\n        // iterate all links and grab the intersections with this line\n        // these are then sorted by distance so the line can be split more easily\n        const intersections = edges\n            .reduce((memo, link, i) => {\n            // don't intersection with itself\n            if (link !== edge) {\n                const lineIntersections = findLineIntersections(line, linkLines[i]);\n                memo.push(...lineIntersections);\n            }\n            return memo;\n        }, [])\n            .sort((a, b) => getDistence(line.start, a) - getDistence(line.start, b));\n        if (intersections.length > 0) {\n            // split the line based on found intersection points\n            jumpingLines.push(...createJumps(line, intersections, jumpSize));\n        }\n        else {\n            // without any intersection the line goes uninterrupted\n            jumpingLines.push(line);\n        }\n    });\n    const path = buildPath(jumpingLines, jumpSize, jumpType, radius);\n    jumppedLines = [];\n    skippedPoints = [];\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=jumpover.js.map","import { Registry } from '../registry';\nimport * as connectors from './main';\nexport var Connector;\n(function (Connector) {\n    Connector.presets = connectors;\n    Connector.registry = Registry.create({\n        type: 'connector',\n    });\n    Connector.registry.register(Connector.presets, true);\n})(Connector || (Connector = {}));\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ObjectExt, Basecoat } from '@antv/x6-common';\nexport class Store extends Basecoat {\n    constructor(data = {}) {\n        super();\n        this.pending = false;\n        this.changing = false;\n        this.data = {};\n        this.mutate(ObjectExt.cloneDeep(data));\n        this.changed = {};\n    }\n    mutate(data, options = {}) {\n        const unset = options.unset === true;\n        const silent = options.silent === true;\n        const changes = [];\n        const changing = this.changing;\n        this.changing = true;\n        if (!changing) {\n            this.previous = ObjectExt.cloneDeep(this.data);\n            this.changed = {};\n        }\n        const current = this.data;\n        const previous = this.previous;\n        const changed = this.changed;\n        Object.keys(data).forEach((k) => {\n            const key = k;\n            const newValue = data[key];\n            if (!ObjectExt.isEqual(current[key], newValue)) {\n                changes.push(key);\n            }\n            if (!ObjectExt.isEqual(previous[key], newValue)) {\n                changed[key] = newValue;\n            }\n            else {\n                delete changed[key];\n            }\n            if (unset) {\n                delete current[key];\n            }\n            else {\n                current[key] = newValue;\n            }\n        });\n        if (!silent && changes.length > 0) {\n            this.pending = true;\n            this.pendingOptions = options;\n            changes.forEach((key) => {\n                this.emit('change:*', {\n                    key,\n                    options,\n                    store: this,\n                    current: current[key],\n                    previous: previous[key],\n                });\n            });\n        }\n        if (changing) {\n            return this;\n        }\n        if (!silent) {\n            // Changes can be recursively nested within `\"change\"` events.\n            while (this.pending) {\n                this.pending = false;\n                this.emit('changed', {\n                    current,\n                    previous,\n                    store: this,\n                    options: this.pendingOptions,\n                });\n            }\n        }\n        this.pending = false;\n        this.changing = false;\n        this.pendingOptions = null;\n        return this;\n    }\n    get(key, defaultValue) {\n        if (key == null) {\n            return this.data;\n        }\n        const ret = this.data[key];\n        return ret == null ? defaultValue : ret;\n    }\n    getPrevious(key) {\n        if (this.previous) {\n            const ret = this.previous[key];\n            return ret == null ? undefined : ret;\n        }\n        return undefined;\n    }\n    set(key, value, options) {\n        if (key != null) {\n            if (typeof key === 'object') {\n                this.mutate(key, value);\n            }\n            else {\n                this.mutate({ [key]: value }, options);\n            }\n        }\n        return this;\n    }\n    remove(key, options) {\n        const empty = undefined;\n        const subset = {};\n        let opts;\n        if (typeof key === 'string') {\n            subset[key] = empty;\n            opts = options;\n        }\n        else if (Array.isArray(key)) {\n            key.forEach((k) => (subset[k] = empty));\n            opts = options;\n        }\n        else {\n            // eslint-disable-next-line\n            for (const key in this.data) {\n                subset[key] = empty;\n            }\n            opts = key;\n        }\n        this.mutate(subset, Object.assign(Object.assign({}, opts), { unset: true }));\n        return this;\n    }\n    getByPath(path) {\n        return ObjectExt.getByPath(this.data, path, '/');\n    }\n    setByPath(path, value, options = {}) {\n        const delim = '/';\n        const pathArray = Array.isArray(path) ? [...path] : path.split(delim);\n        const pathString = Array.isArray(path) ? path.join(delim) : path;\n        const property = pathArray[0];\n        const pathArrayLength = pathArray.length;\n        options.propertyPath = pathString;\n        options.propertyValue = value;\n        options.propertyPathArray = pathArray;\n        if (pathArrayLength === 1) {\n            this.set(property, value, options);\n        }\n        else {\n            const update = {};\n            let diver = update;\n            let nextKey = property;\n            // Initialize the nested object. Subobjects are either arrays or objects.\n            // An empty array is created if the sub-key is an integer. Otherwise, an\n            // empty object is created.\n            for (let i = 1; i < pathArrayLength; i += 1) {\n                const key = pathArray[i];\n                const isArrayIndex = Number.isFinite(Number(key));\n                diver = diver[nextKey] = isArrayIndex ? [] : {};\n                nextKey = key;\n            }\n            // Fills update with the `value` on `path`.\n            ObjectExt.setByPath(update, pathArray, value, delim);\n            const data = ObjectExt.cloneDeep(this.data);\n            // If rewrite mode enabled, we replace value referenced by path with the\n            // new one (we don't merge).\n            if (options.rewrite) {\n                ObjectExt.unsetByPath(data, path, delim);\n            }\n            const merged = ObjectExt.merge(data, update);\n            this.set(property, merged[property], options);\n        }\n        return this;\n    }\n    removeByPath(path, options) {\n        const keys = Array.isArray(path) ? path : path.split('/');\n        const key = keys[0];\n        if (keys.length === 1) {\n            this.remove(key, options);\n        }\n        else {\n            const paths = keys.slice(1);\n            const prop = ObjectExt.cloneDeep(this.get(key));\n            if (prop) {\n                ObjectExt.unsetByPath(prop, paths);\n            }\n            this.set(key, prop, options);\n        }\n        return this;\n    }\n    hasChanged(key) {\n        if (key == null) {\n            return Object.keys(this.changed).length > 0;\n        }\n        return key in this.changed;\n    }\n    /**\n     * Returns an object containing all the data that have changed,\n     * or `null` if there are no changes. Useful for determining what\n     * parts of a view need to be updated.\n     */\n    getChanges(diff) {\n        if (diff == null) {\n            return this.hasChanged() ? ObjectExt.cloneDeep(this.changed) : null;\n        }\n        const old = this.changing ? this.previous : this.data;\n        const changed = {};\n        let hasChanged;\n        // eslint-disable-next-line\n        for (const key in diff) {\n            const val = diff[key];\n            if (!ObjectExt.isEqual(old[key], val)) {\n                changed[key] = val;\n                hasChanged = true;\n            }\n        }\n        return hasChanged ? ObjectExt.cloneDeep(changed) : null;\n    }\n    /**\n     * Returns a copy of the store's `data` object.\n     */\n    toJSON() {\n        return ObjectExt.cloneDeep(this.data);\n    }\n    clone() {\n        const constructor = this.constructor;\n        return new constructor(this.data);\n    }\n    dispose() {\n        this.off();\n        this.data = {};\n        this.previous = {};\n        this.changed = {};\n        this.pending = false;\n        this.changing = false;\n        this.pendingOptions = null;\n        this.trigger('disposed', { store: this });\n    }\n}\n__decorate([\n    Basecoat.dispose()\n], Store.prototype, \"dispose\", null);\n//# sourceMappingURL=store.js.map","import { ObjectExt, Timing, Interp } from '@antv/x6-common';\nexport class Animation {\n    constructor(cell) {\n        this.cell = cell;\n        this.ids = {};\n        this.cache = {};\n    }\n    get() {\n        return Object.keys(this.ids);\n    }\n    start(path, targetValue, options = {}, delim = '/') {\n        const startValue = this.cell.getPropByPath(path);\n        const localOptions = ObjectExt.defaults(options, Animation.defaultOptions);\n        const timing = this.getTiming(localOptions.timing);\n        const interpolate = this.getInterp(localOptions.interp, startValue, targetValue);\n        let startTime = 0;\n        const key = Array.isArray(path) ? path.join(delim) : path;\n        const paths = Array.isArray(path) ? path : path.split(delim);\n        const iterate = () => {\n            const now = new Date().getTime();\n            if (startTime === 0) {\n                startTime = now;\n            }\n            const elaspe = now - startTime;\n            let progress = elaspe / localOptions.duration;\n            if (progress < 1) {\n                this.ids[key] = requestAnimationFrame(iterate);\n            }\n            else {\n                progress = 1;\n            }\n            const currentValue = interpolate(timing(progress));\n            this.cell.setPropByPath(paths, currentValue);\n            if (options.progress) {\n                options.progress(Object.assign({ progress, currentValue }, this.getArgs(key)));\n            }\n            if (progress === 1) {\n                this.cell.notify('transition:complete', this.getArgs(key));\n                options.complete && options.complete(this.getArgs(key));\n                this.cell.notify('transition:finish', this.getArgs(key));\n                options.finish && options.finish(this.getArgs(key));\n                this.clean(key);\n            }\n        };\n        setTimeout(() => {\n            this.stop(path, undefined, delim);\n            this.cache[key] = { startValue, targetValue, options: localOptions };\n            this.ids[key] = requestAnimationFrame(iterate);\n            this.cell.notify('transition:start', this.getArgs(key));\n            options.start && options.start(this.getArgs(key));\n        }, options.delay);\n        return this.stop.bind(this, path, delim, options);\n    }\n    stop(path, options = {}, delim = '/') {\n        const paths = Array.isArray(path) ? path : path.split(delim);\n        Object.keys(this.ids)\n            .filter((key) => ObjectExt.isEqual(paths, key.split(delim).slice(0, paths.length)))\n            .forEach((key) => {\n            cancelAnimationFrame(this.ids[key]);\n            const data = this.cache[key];\n            const commonArgs = this.getArgs(key);\n            const localOptions = Object.assign(Object.assign({}, data.options), options);\n            const jumpedToEnd = localOptions.jumpedToEnd;\n            if (jumpedToEnd && data.targetValue != null) {\n                this.cell.setPropByPath(key, data.targetValue);\n                this.cell.notify('transition:end', Object.assign({}, commonArgs));\n                this.cell.notify('transition:complete', Object.assign({}, commonArgs));\n                localOptions.complete && localOptions.complete(Object.assign({}, commonArgs));\n            }\n            const stopArgs = Object.assign({ jumpedToEnd }, commonArgs);\n            this.cell.notify('transition:stop', Object.assign({}, stopArgs));\n            localOptions.stop && localOptions.stop(Object.assign({}, stopArgs));\n            this.cell.notify('transition:finish', Object.assign({}, commonArgs));\n            localOptions.finish && localOptions.finish(Object.assign({}, commonArgs));\n            this.clean(key);\n        });\n        return this;\n    }\n    clean(key) {\n        delete this.ids[key];\n        delete this.cache[key];\n    }\n    getTiming(timing) {\n        return typeof timing === 'string' ? Timing[timing] : timing;\n    }\n    getInterp(interp, startValue, targetValue) {\n        if (interp) {\n            return interp(startValue, targetValue);\n        }\n        if (typeof targetValue === 'number') {\n            return Interp.number(startValue, targetValue);\n        }\n        if (typeof targetValue === 'string') {\n            if (targetValue[0] === '#') {\n                return Interp.color(startValue, targetValue);\n            }\n            return Interp.unit(startValue, targetValue);\n        }\n        return Interp.object(startValue, targetValue);\n    }\n    getArgs(key) {\n        const data = this.cache[key];\n        return {\n            path: key,\n            startValue: data.startValue,\n            targetValue: data.targetValue,\n            cell: this.cell,\n        };\n    }\n}\n(function (Animation) {\n    Animation.defaultOptions = {\n        delay: 10,\n        duration: 100,\n        timing: 'linear',\n    };\n})(Animation || (Animation = {}));\n//# sourceMappingURL=animation.js.map","/* eslint-disable no-underscore-dangle */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ArrayExt, StringExt, ObjectExt, FunctionExt, Basecoat, } from '@antv/x6-common';\nimport { Rectangle, Point } from '@antv/x6-geometry';\nimport { Attr } from '../registry';\nimport { Store } from './store';\nimport { Animation } from './animation';\nexport class Cell extends Basecoat {\n    static config(presets) {\n        const { markup, propHooks, attrHooks } = presets, others = __rest(presets, [\"markup\", \"propHooks\", \"attrHooks\"]);\n        if (markup != null) {\n            this.markup = markup;\n        }\n        if (propHooks) {\n            this.propHooks = this.propHooks.slice();\n            if (Array.isArray(propHooks)) {\n                this.propHooks.push(...propHooks);\n            }\n            else if (typeof propHooks === 'function') {\n                this.propHooks.push(propHooks);\n            }\n            else {\n                Object.values(propHooks).forEach((hook) => {\n                    if (typeof hook === 'function') {\n                        this.propHooks.push(hook);\n                    }\n                });\n            }\n        }\n        if (attrHooks) {\n            this.attrHooks = Object.assign(Object.assign({}, this.attrHooks), attrHooks);\n        }\n        this.defaults = ObjectExt.merge({}, this.defaults, others);\n    }\n    static getMarkup() {\n        return this.markup;\n    }\n    static getDefaults(raw) {\n        return (raw ? this.defaults : ObjectExt.cloneDeep(this.defaults));\n    }\n    static getAttrHooks() {\n        return this.attrHooks;\n    }\n    static applyPropHooks(cell, metadata) {\n        return this.propHooks.reduce((memo, hook) => {\n            return hook ? FunctionExt.call(hook, cell, memo) : memo;\n        }, metadata);\n    }\n    // #endregion\n    get [Symbol.toStringTag]() {\n        return Cell.toStringTag;\n    }\n    constructor(metadata = {}) {\n        super();\n        const ctor = this.constructor;\n        const defaults = ctor.getDefaults(true);\n        const props = ObjectExt.merge({}, this.preprocess(defaults), this.preprocess(metadata));\n        this.id = props.id || StringExt.uuid();\n        this.store = new Store(props);\n        this.animation = new Animation(this);\n        this.setup();\n        this.init();\n        this.postprocess(metadata);\n    }\n    init() { }\n    // #region model\n    get model() {\n        return this._model;\n    }\n    set model(model) {\n        if (this._model !== model) {\n            this._model = model;\n        }\n    }\n    // #endregion\n    preprocess(metadata, ignoreIdCheck) {\n        const id = metadata.id;\n        const ctor = this.constructor;\n        const props = ctor.applyPropHooks(this, metadata);\n        if (id == null && ignoreIdCheck !== true) {\n            props.id = StringExt.uuid();\n        }\n        return props;\n    }\n    postprocess(metadata) { } // eslint-disable-line\n    setup() {\n        this.store.on('change:*', (metadata) => {\n            const { key, current, previous, options } = metadata;\n            this.notify('change:*', {\n                key,\n                options,\n                current,\n                previous,\n                cell: this,\n            });\n            this.notify(`change:${key}`, {\n                options,\n                current,\n                previous,\n                cell: this,\n            });\n            const type = key;\n            if (type === 'source' || type === 'target') {\n                this.notify(`change:terminal`, {\n                    type,\n                    current,\n                    previous,\n                    options,\n                    cell: this,\n                });\n            }\n        });\n        this.store.on('changed', ({ options }) => this.notify('changed', { options, cell: this }));\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        const model = this.model;\n        if (model) {\n            model.notify(`cell:${name}`, args);\n            if (this.isNode()) {\n                model.notify(`node:${name}`, Object.assign(Object.assign({}, args), { node: this }));\n            }\n            else if (this.isEdge()) {\n                model.notify(`edge:${name}`, Object.assign(Object.assign({}, args), { edge: this }));\n            }\n        }\n        return this;\n    }\n    isNode() {\n        return false;\n    }\n    isEdge() {\n        return false;\n    }\n    isSameStore(cell) {\n        return this.store === cell.store;\n    }\n    get view() {\n        return this.store.get('view');\n    }\n    get shape() {\n        return this.store.get('shape', '');\n    }\n    getProp(key, defaultValue) {\n        if (key == null) {\n            return this.store.get();\n        }\n        return this.store.get(key, defaultValue);\n    }\n    setProp(key, value, options) {\n        if (typeof key === 'string') {\n            this.store.set(key, value, options);\n        }\n        else {\n            const props = this.preprocess(key, true);\n            this.store.set(ObjectExt.merge({}, this.getProp(), props), value);\n            this.postprocess(key);\n        }\n        return this;\n    }\n    removeProp(key, options) {\n        if (typeof key === 'string' || Array.isArray(key)) {\n            this.store.removeByPath(key, options);\n        }\n        else {\n            this.store.remove(options);\n        }\n        return this;\n    }\n    hasChanged(key) {\n        return key == null ? this.store.hasChanged() : this.store.hasChanged(key);\n    }\n    getPropByPath(path) {\n        return this.store.getByPath(path);\n    }\n    setPropByPath(path, value, options = {}) {\n        if (this.model) {\n            // update inner reference\n            if (path === 'children') {\n                this._children = value\n                    ? value\n                        .map((id) => this.model.getCell(id))\n                        .filter((child) => child != null)\n                    : null;\n            }\n            else if (path === 'parent') {\n                this._parent = value ? this.model.getCell(value) : null;\n            }\n        }\n        this.store.setByPath(path, value, options);\n        return this;\n    }\n    removePropByPath(path, options = {}) {\n        const paths = Array.isArray(path) ? path : path.split('/');\n        // Once a property is removed from the `attrs` the CellView will\n        // recognize a `dirty` flag and re-render itself in order to remove\n        // the attribute from SVGElement.\n        if (paths[0] === 'attrs') {\n            options.dirty = true;\n        }\n        this.store.removeByPath(paths, options);\n        return this;\n    }\n    prop(key, value, options) {\n        if (key == null) {\n            return this.getProp();\n        }\n        if (typeof key === 'string' || Array.isArray(key)) {\n            if (arguments.length === 1) {\n                return this.getPropByPath(key);\n            }\n            if (value == null) {\n                return this.removePropByPath(key, options || {});\n            }\n            return this.setPropByPath(key, value, options || {});\n        }\n        return this.setProp(key, value || {});\n    }\n    previous(name) {\n        return this.store.getPrevious(name);\n    }\n    // #endregion\n    // #region zIndex\n    get zIndex() {\n        return this.getZIndex();\n    }\n    set zIndex(z) {\n        if (z == null) {\n            this.removeZIndex();\n        }\n        else {\n            this.setZIndex(z);\n        }\n    }\n    getZIndex() {\n        return this.store.get('zIndex');\n    }\n    setZIndex(z, options = {}) {\n        this.store.set('zIndex', z, options);\n        return this;\n    }\n    removeZIndex(options = {}) {\n        this.store.remove('zIndex', options);\n        return this;\n    }\n    toFront(options = {}) {\n        const model = this.model;\n        if (model) {\n            let z = model.getMaxZIndex();\n            let cells;\n            if (options.deep) {\n                cells = this.getDescendants({ deep: true, breadthFirst: true });\n                cells.unshift(this);\n            }\n            else {\n                cells = [this];\n            }\n            z = z - cells.length + 1;\n            const count = model.total();\n            let changed = model.indexOf(this) !== count - cells.length;\n            if (!changed) {\n                changed = cells.some((cell, index) => cell.getZIndex() !== z + index);\n            }\n            if (changed) {\n                this.batchUpdate('to-front', () => {\n                    z += cells.length;\n                    cells.forEach((cell, index) => {\n                        cell.setZIndex(z + index, options);\n                    });\n                });\n            }\n        }\n        return this;\n    }\n    toBack(options = {}) {\n        const model = this.model;\n        if (model) {\n            let z = model.getMinZIndex();\n            let cells;\n            if (options.deep) {\n                cells = this.getDescendants({ deep: true, breadthFirst: true });\n                cells.unshift(this);\n            }\n            else {\n                cells = [this];\n            }\n            let changed = model.indexOf(this) !== 0;\n            if (!changed) {\n                changed = cells.some((cell, index) => cell.getZIndex() !== z + index);\n            }\n            if (changed) {\n                this.batchUpdate('to-back', () => {\n                    z -= cells.length;\n                    cells.forEach((cell, index) => {\n                        cell.setZIndex(z + index, options);\n                    });\n                });\n            }\n        }\n        return this;\n    }\n    // #endregion\n    // #region markup\n    get markup() {\n        return this.getMarkup();\n    }\n    set markup(value) {\n        if (value == null) {\n            this.removeMarkup();\n        }\n        else {\n            this.setMarkup(value);\n        }\n    }\n    getMarkup() {\n        let markup = this.store.get('markup');\n        if (markup == null) {\n            const ctor = this.constructor;\n            markup = ctor.getMarkup();\n        }\n        return markup;\n    }\n    setMarkup(markup, options = {}) {\n        this.store.set('markup', markup, options);\n        return this;\n    }\n    removeMarkup(options = {}) {\n        this.store.remove('markup', options);\n        return this;\n    }\n    // #endregion\n    // #region attrs\n    get attrs() {\n        return this.getAttrs();\n    }\n    set attrs(value) {\n        if (value == null) {\n            this.removeAttrs();\n        }\n        else {\n            this.setAttrs(value);\n        }\n    }\n    getAttrs() {\n        const result = this.store.get('attrs');\n        return result ? Object.assign({}, result) : {};\n    }\n    setAttrs(attrs, options = {}) {\n        if (attrs == null) {\n            this.removeAttrs(options);\n        }\n        else {\n            const set = (attrs) => this.store.set('attrs', attrs, options);\n            if (options.overwrite === true) {\n                set(attrs);\n            }\n            else {\n                const prev = this.getAttrs();\n                if (options.deep === false) {\n                    set(Object.assign(Object.assign({}, prev), attrs));\n                }\n                else {\n                    set(ObjectExt.merge({}, prev, attrs));\n                }\n            }\n        }\n        return this;\n    }\n    replaceAttrs(attrs, options = {}) {\n        return this.setAttrs(attrs, Object.assign(Object.assign({}, options), { overwrite: true }));\n    }\n    updateAttrs(attrs, options = {}) {\n        return this.setAttrs(attrs, Object.assign(Object.assign({}, options), { deep: false }));\n    }\n    removeAttrs(options = {}) {\n        this.store.remove('attrs', options);\n        return this;\n    }\n    getAttrDefinition(attrName) {\n        if (!attrName) {\n            return null;\n        }\n        const ctor = this.constructor;\n        const hooks = ctor.getAttrHooks() || {};\n        let definition = hooks[attrName] || Attr.registry.get(attrName);\n        if (!definition) {\n            const name = StringExt.camelCase(attrName);\n            definition = hooks[name] || Attr.registry.get(name);\n        }\n        return definition || null;\n    }\n    getAttrByPath(path) {\n        if (path == null || path === '') {\n            return this.getAttrs();\n        }\n        return this.getPropByPath(this.prefixAttrPath(path));\n    }\n    setAttrByPath(path, value, options = {}) {\n        this.setPropByPath(this.prefixAttrPath(path), value, options);\n        return this;\n    }\n    removeAttrByPath(path, options = {}) {\n        this.removePropByPath(this.prefixAttrPath(path), options);\n        return this;\n    }\n    prefixAttrPath(path) {\n        return Array.isArray(path) ? ['attrs'].concat(path) : `attrs/${path}`;\n    }\n    attr(path, value, options) {\n        if (path == null) {\n            return this.getAttrByPath();\n        }\n        if (typeof path === 'string' || Array.isArray(path)) {\n            if (arguments.length === 1) {\n                return this.getAttrByPath(path);\n            }\n            if (value == null) {\n                return this.removeAttrByPath(path, options || {});\n            }\n            return this.setAttrByPath(path, value, options || {});\n        }\n        return this.setAttrs(path, (value || {}));\n    }\n    // #endregion\n    // #region visible\n    get visible() {\n        return this.isVisible();\n    }\n    set visible(value) {\n        this.setVisible(value);\n    }\n    setVisible(visible, options = {}) {\n        this.store.set('visible', visible, options);\n        return this;\n    }\n    isVisible() {\n        return this.store.get('visible') !== false;\n    }\n    show(options = {}) {\n        if (!this.isVisible()) {\n            this.setVisible(true, options);\n        }\n        return this;\n    }\n    hide(options = {}) {\n        if (this.isVisible()) {\n            this.setVisible(false, options);\n        }\n        return this;\n    }\n    toggleVisible(isVisible, options = {}) {\n        const visible = typeof isVisible === 'boolean' ? isVisible : !this.isVisible();\n        const localOptions = typeof isVisible === 'boolean' ? options : isVisible;\n        if (visible) {\n            this.show(localOptions);\n        }\n        else {\n            this.hide(localOptions);\n        }\n        return this;\n    }\n    // #endregion\n    // #region data\n    get data() {\n        return this.getData();\n    }\n    set data(val) {\n        this.setData(val);\n    }\n    getData() {\n        return this.store.get('data');\n    }\n    setData(data, options = {}) {\n        if (data == null) {\n            this.removeData(options);\n        }\n        else {\n            const set = (data) => this.store.set('data', data, options);\n            if (options.overwrite === true) {\n                set(data);\n            }\n            else {\n                const prev = this.getData();\n                if (options.deep === false) {\n                    set(typeof data === 'object' ? Object.assign(Object.assign({}, prev), data) : data);\n                }\n                else {\n                    set(ObjectExt.merge({}, prev, data));\n                }\n            }\n        }\n        return this;\n    }\n    replaceData(data, options = {}) {\n        return this.setData(data, Object.assign(Object.assign({}, options), { overwrite: true }));\n    }\n    updateData(data, options = {}) {\n        return this.setData(data, Object.assign(Object.assign({}, options), { deep: false }));\n    }\n    removeData(options = {}) {\n        this.store.remove('data', options);\n        return this;\n    }\n    // #endregion\n    // #region parent children\n    get parent() {\n        return this.getParent();\n    }\n    get children() {\n        return this.getChildren();\n    }\n    getParentId() {\n        return this.store.get('parent');\n    }\n    getParent() {\n        const parentId = this.getParentId();\n        if (parentId && this.model) {\n            const parent = this.model.getCell(parentId);\n            this._parent = parent;\n            return parent;\n        }\n        return null;\n    }\n    getChildren() {\n        const childrenIds = this.store.get('children');\n        if (childrenIds && childrenIds.length && this.model) {\n            const children = childrenIds\n                .map((id) => { var _a; return (_a = this.model) === null || _a === void 0 ? void 0 : _a.getCell(id); })\n                .filter((cell) => cell != null);\n            this._children = children;\n            return [...children];\n        }\n        return null;\n    }\n    hasParent() {\n        return this.parent != null;\n    }\n    isParentOf(child) {\n        return child != null && child.getParent() === this;\n    }\n    isChildOf(parent) {\n        return parent != null && this.getParent() === parent;\n    }\n    eachChild(iterator, context) {\n        if (this.children) {\n            this.children.forEach(iterator, context);\n        }\n        return this;\n    }\n    filterChild(filter, context) {\n        return this.children ? this.children.filter(filter, context) : [];\n    }\n    getChildCount() {\n        return this.children == null ? 0 : this.children.length;\n    }\n    getChildIndex(child) {\n        return this.children == null ? -1 : this.children.indexOf(child);\n    }\n    getChildAt(index) {\n        return this.children != null && index >= 0 ? this.children[index] : null;\n    }\n    getAncestors(options = {}) {\n        const ancestors = [];\n        let parent = this.getParent();\n        while (parent) {\n            ancestors.push(parent);\n            parent = options.deep !== false ? parent.getParent() : null;\n        }\n        return ancestors;\n    }\n    getDescendants(options = {}) {\n        if (options.deep !== false) {\n            // breadth first\n            if (options.breadthFirst) {\n                const cells = [];\n                const queue = this.getChildren() || [];\n                while (queue.length > 0) {\n                    const parent = queue.shift();\n                    const children = parent.getChildren();\n                    cells.push(parent);\n                    if (children) {\n                        queue.push(...children);\n                    }\n                }\n                return cells;\n            }\n            // depth first\n            {\n                const cells = this.getChildren() || [];\n                cells.forEach((cell) => {\n                    cells.push(...cell.getDescendants(options));\n                });\n                return cells;\n            }\n        }\n        return this.getChildren() || [];\n    }\n    isDescendantOf(ancestor, options = {}) {\n        if (ancestor == null) {\n            return false;\n        }\n        if (options.deep !== false) {\n            let current = this.getParent();\n            while (current) {\n                if (current === ancestor) {\n                    return true;\n                }\n                current = current.getParent();\n            }\n            return false;\n        }\n        return this.isChildOf(ancestor);\n    }\n    isAncestorOf(descendant, options = {}) {\n        if (descendant == null) {\n            return false;\n        }\n        return descendant.isDescendantOf(this, options);\n    }\n    contains(cell) {\n        return this.isAncestorOf(cell);\n    }\n    getCommonAncestor(...cells) {\n        return Cell.getCommonAncestor(this, ...cells);\n    }\n    setParent(parent, options = {}) {\n        this._parent = parent;\n        if (parent) {\n            this.store.set('parent', parent.id, options);\n        }\n        else {\n            this.store.remove('parent', options);\n        }\n        return this;\n    }\n    setChildren(children, options = {}) {\n        this._children = children;\n        if (children != null) {\n            this.store.set('children', children.map((child) => child.id), options);\n        }\n        else {\n            this.store.remove('children', options);\n        }\n        return this;\n    }\n    unembed(child, options = {}) {\n        const children = this.children;\n        if (children != null && child != null) {\n            const index = this.getChildIndex(child);\n            if (index !== -1) {\n                children.splice(index, 1);\n                child.setParent(null, options);\n                this.setChildren(children, options);\n            }\n        }\n        return this;\n    }\n    embed(child, options = {}) {\n        child.addTo(this, options);\n        return this;\n    }\n    addTo(target, options = {}) {\n        if (Cell.isCell(target)) {\n            target.addChild(this, options);\n        }\n        else {\n            target.addCell(this, options);\n        }\n        return this;\n    }\n    insertTo(parent, index, options = {}) {\n        parent.insertChild(this, index, options);\n        return this;\n    }\n    addChild(child, options = {}) {\n        return this.insertChild(child, undefined, options);\n    }\n    insertChild(child, index, options = {}) {\n        if (child != null && child !== this) {\n            const oldParent = child.getParent();\n            const changed = this !== oldParent;\n            let pos = index;\n            if (pos == null) {\n                pos = this.getChildCount();\n                if (!changed) {\n                    pos -= 1;\n                }\n            }\n            // remove from old parent\n            if (oldParent) {\n                const children = oldParent.getChildren();\n                if (children) {\n                    const index = children.indexOf(child);\n                    if (index >= 0) {\n                        child.setParent(null, options);\n                        children.splice(index, 1);\n                        oldParent.setChildren(children, options);\n                    }\n                }\n            }\n            let children = this.children;\n            if (children == null) {\n                children = [];\n                children.push(child);\n            }\n            else {\n                children.splice(pos, 0, child);\n            }\n            child.setParent(this, options);\n            this.setChildren(children, options);\n            if (changed && this.model) {\n                const incomings = this.model.getIncomingEdges(this);\n                const outgoings = this.model.getOutgoingEdges(this);\n                if (incomings) {\n                    incomings.forEach((edge) => edge.updateParent(options));\n                }\n                if (outgoings) {\n                    outgoings.forEach((edge) => edge.updateParent(options));\n                }\n            }\n            if (this.model) {\n                this.model.addCell(child, options);\n            }\n        }\n        return this;\n    }\n    removeFromParent(options = {}) {\n        const parent = this.getParent();\n        if (parent != null) {\n            const index = parent.getChildIndex(this);\n            parent.removeChildAt(index, options);\n        }\n        return this;\n    }\n    removeChild(child, options = {}) {\n        const index = this.getChildIndex(child);\n        return this.removeChildAt(index, options);\n    }\n    removeChildAt(index, options = {}) {\n        const child = this.getChildAt(index);\n        const children = this.children;\n        if (children != null && child != null) {\n            this.unembed(child, options);\n            child.remove(options);\n        }\n        return child;\n    }\n    remove(options = {}) {\n        this.batchUpdate('remove', () => {\n            const parent = this.getParent();\n            if (parent) {\n                parent.removeChild(this, options);\n            }\n            if (options.deep !== false) {\n                this.eachChild((child) => child.remove(options));\n            }\n            if (this.model) {\n                this.model.removeCell(this, options);\n            }\n        });\n        return this;\n    }\n    transition(path, target, options = {}, delim = '/') {\n        return this.animation.start(path, target, options, delim);\n    }\n    stopTransition(path, options, delim = '/') {\n        this.animation.stop(path, options, delim);\n        return this;\n    }\n    getTransitions() {\n        return this.animation.get();\n    }\n    // #endregion\n    // #region transform\n    // eslint-disable-next-line\n    translate(tx, ty, options) {\n        return this;\n    }\n    scale(sx, // eslint-disable-line\n    sy, // eslint-disable-line\n    origin, // eslint-disable-line\n    options) {\n        return this;\n    }\n    addTools(items, obj, options) {\n        const toolItems = Array.isArray(items) ? items : [items];\n        const name = typeof obj === 'string' ? obj : null;\n        const config = typeof obj === 'object' ? obj : typeof options === 'object' ? options : {};\n        if (config.reset) {\n            return this.setTools({ name, items: toolItems, local: config.local }, config);\n        }\n        let tools = ObjectExt.cloneDeep(this.getTools());\n        if (tools == null || name == null || tools.name === name) {\n            if (tools == null) {\n                tools = {};\n            }\n            if (!tools.items) {\n                tools.items = [];\n            }\n            tools.name = name;\n            tools.items = [...tools.items, ...toolItems];\n            return this.setTools(Object.assign({}, tools), config);\n        }\n    }\n    setTools(tools, options = {}) {\n        if (tools == null) {\n            this.removeTools();\n        }\n        else {\n            this.store.set('tools', Cell.normalizeTools(tools), options);\n        }\n        return this;\n    }\n    getTools() {\n        return this.store.get('tools');\n    }\n    removeTools(options = {}) {\n        this.store.remove('tools', options);\n        return this;\n    }\n    hasTools(name) {\n        const tools = this.getTools();\n        if (tools == null) {\n            return false;\n        }\n        if (name == null) {\n            return true;\n        }\n        return tools.name === name;\n    }\n    hasTool(name) {\n        const tools = this.getTools();\n        if (tools == null) {\n            return false;\n        }\n        return tools.items.some((item) => typeof item === 'string' ? item === name : item.name === name);\n    }\n    removeTool(nameOrIndex, options = {}) {\n        const tools = ObjectExt.cloneDeep(this.getTools());\n        if (tools) {\n            let updated = false;\n            const items = tools.items.slice();\n            const remove = (index) => {\n                items.splice(index, 1);\n                updated = true;\n            };\n            if (typeof nameOrIndex === 'number') {\n                remove(nameOrIndex);\n            }\n            else {\n                for (let i = items.length - 1; i >= 0; i -= 1) {\n                    const item = items[i];\n                    const exist = typeof item === 'string'\n                        ? item === nameOrIndex\n                        : item.name === nameOrIndex;\n                    if (exist) {\n                        remove(i);\n                    }\n                }\n            }\n            if (updated) {\n                tools.items = items;\n                this.setTools(tools, options);\n            }\n        }\n        return this;\n    }\n    // #endregion\n    // #region common\n    // eslint-disable-next-line\n    getBBox(options) {\n        return new Rectangle();\n    }\n    // eslint-disable-next-line\n    getConnectionPoint(edge, type) {\n        return new Point();\n    }\n    toJSON(options = {}) {\n        const props = Object.assign({}, this.store.get());\n        const toString = Object.prototype.toString;\n        const cellType = this.isNode() ? 'node' : this.isEdge() ? 'edge' : 'cell';\n        if (!props.shape) {\n            const ctor = this.constructor;\n            throw new Error(`Unable to serialize ${cellType} missing \"shape\" prop, check the ${cellType} \"${ctor.name || toString.call(ctor)}\"`);\n        }\n        const ctor = this.constructor;\n        const diff = options.diff === true;\n        const attrs = props.attrs || {};\n        const presets = ctor.getDefaults(true);\n        // When `options.diff` is `true`, we should process the custom options,\n        // such as `width`, `height` etc. to ensure the comparing work correctly.\n        const defaults = diff ? this.preprocess(presets, true) : presets;\n        const defaultAttrs = defaults.attrs || {};\n        const finalAttrs = {};\n        Object.entries(props).forEach(([key, val]) => {\n            if (val != null &&\n                !Array.isArray(val) &&\n                typeof val === 'object' &&\n                !ObjectExt.isPlainObject(val)) {\n                throw new Error(`Can only serialize ${cellType} with plain-object props, but got a \"${toString.call(val)}\" type of key \"${key}\" on ${cellType} \"${this.id}\"`);\n            }\n            if (key !== 'attrs' && key !== 'shape' && diff) {\n                const preset = defaults[key];\n                if (ObjectExt.isEqual(val, preset)) {\n                    delete props[key];\n                }\n            }\n        });\n        Object.keys(attrs).forEach((key) => {\n            const attr = attrs[key];\n            const defaultAttr = defaultAttrs[key];\n            Object.keys(attr).forEach((name) => {\n                const value = attr[name];\n                const defaultValue = defaultAttr ? defaultAttr[name] : null;\n                if (value != null &&\n                    typeof value === 'object' &&\n                    !Array.isArray(value)) {\n                    Object.keys(value).forEach((subName) => {\n                        const subValue = value[subName];\n                        if (defaultAttr == null ||\n                            defaultValue == null ||\n                            !ObjectExt.isObject(defaultValue) ||\n                            !ObjectExt.isEqual(defaultValue[subName], subValue)) {\n                            if (finalAttrs[key] == null) {\n                                finalAttrs[key] = {};\n                            }\n                            if (finalAttrs[key][name] == null) {\n                                finalAttrs[key][name] = {};\n                            }\n                            const tmp = finalAttrs[key][name];\n                            tmp[subName] = subValue;\n                        }\n                    });\n                }\n                else if (defaultAttr == null ||\n                    !ObjectExt.isEqual(defaultValue, value)) {\n                    // `value` is not an object, default attribute with `key` does not\n                    // exist or it is different than the attribute value set on the cell.\n                    if (finalAttrs[key] == null) {\n                        finalAttrs[key] = {};\n                    }\n                    finalAttrs[key][name] = value;\n                }\n            });\n        });\n        const finalProps = Object.assign(Object.assign({}, props), { attrs: ObjectExt.isEmpty(finalAttrs) ? undefined : finalAttrs });\n        if (finalProps.attrs == null) {\n            delete finalProps.attrs;\n        }\n        const ret = finalProps;\n        if (ret.angle === 0) {\n            delete ret.angle;\n        }\n        return ObjectExt.cloneDeep(ret);\n    }\n    clone(options = {}) {\n        if (!options.deep) {\n            const data = Object.assign({}, this.store.get());\n            if (!options.keepId) {\n                delete data.id;\n            }\n            delete data.parent;\n            delete data.children;\n            const ctor = this.constructor;\n            return new ctor(data); // eslint-disable-line new-cap\n        }\n        // Deep cloning. Clone the cell itself and all its children.\n        const map = Cell.deepClone(this);\n        return map[this.id];\n    }\n    findView(graph) {\n        return graph.findViewByCell(this);\n    }\n    // #endregion\n    // #region batch\n    startBatch(name, data = {}, model = this.model) {\n        this.notify('batch:start', { name, data, cell: this });\n        if (model) {\n            model.startBatch(name, Object.assign(Object.assign({}, data), { cell: this }));\n        }\n        return this;\n    }\n    stopBatch(name, data = {}, model = this.model) {\n        if (model) {\n            model.stopBatch(name, Object.assign(Object.assign({}, data), { cell: this }));\n        }\n        this.notify('batch:stop', { name, data, cell: this });\n        return this;\n    }\n    batchUpdate(name, execute, data) {\n        // The model is null after cell was removed(remove batch).\n        // So we should temp save model to trigger pairing batch event.\n        const model = this.model;\n        this.startBatch(name, data, model);\n        const result = execute();\n        this.stopBatch(name, data, model);\n        return result;\n    }\n    // #endregion\n    // #region IDisposable\n    dispose() {\n        this.removeFromParent();\n        this.store.dispose();\n    }\n}\nCell.defaults = {};\nCell.attrHooks = {};\nCell.propHooks = [];\n__decorate([\n    Basecoat.dispose()\n], Cell.prototype, \"dispose\", null);\n(function (Cell) {\n    function normalizeTools(raw) {\n        if (typeof raw === 'string') {\n            return { items: [raw] };\n        }\n        if (Array.isArray(raw)) {\n            return { items: raw };\n        }\n        if (raw.items) {\n            return raw;\n        }\n        return {\n            items: [raw],\n        };\n    }\n    Cell.normalizeTools = normalizeTools;\n})(Cell || (Cell = {}));\n(function (Cell) {\n    Cell.toStringTag = `X6.${Cell.name}`;\n    function isCell(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Cell) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const cell = instance;\n        if ((tag == null || tag === Cell.toStringTag) &&\n            typeof cell.isNode === 'function' &&\n            typeof cell.isEdge === 'function' &&\n            typeof cell.prop === 'function' &&\n            typeof cell.attr === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Cell.isCell = isCell;\n})(Cell || (Cell = {}));\n(function (Cell) {\n    function getCommonAncestor(...cells) {\n        const ancestors = cells\n            .filter((cell) => cell != null)\n            .map((cell) => cell.getAncestors())\n            .sort((a, b) => {\n            return a.length - b.length;\n        });\n        const first = ancestors.shift();\n        return (first.find((cell) => ancestors.every((item) => item.includes(cell))) ||\n            null);\n    }\n    Cell.getCommonAncestor = getCommonAncestor;\n    function getCellsBBox(cells, options = {}) {\n        let bbox = null;\n        for (let i = 0, ii = cells.length; i < ii; i += 1) {\n            const cell = cells[i];\n            let rect = cell.getBBox(options);\n            if (rect) {\n                if (cell.isNode()) {\n                    const angle = cell.getAngle();\n                    if (angle != null && angle !== 0) {\n                        rect = rect.bbox(angle);\n                    }\n                }\n                bbox = bbox == null ? rect : bbox.union(rect);\n            }\n        }\n        return bbox;\n    }\n    Cell.getCellsBBox = getCellsBBox;\n    function deepClone(cell) {\n        const cells = [cell, ...cell.getDescendants({ deep: true })];\n        return Cell.cloneCells(cells);\n    }\n    Cell.deepClone = deepClone;\n    function cloneCells(cells) {\n        const inputs = ArrayExt.uniq(cells);\n        const cloneMap = inputs.reduce((map, cell) => {\n            map[cell.id] = cell.clone();\n            return map;\n        }, {});\n        inputs.forEach((cell) => {\n            const clone = cloneMap[cell.id];\n            if (clone.isEdge()) {\n                const sourceId = clone.getSourceCellId();\n                const targetId = clone.getTargetCellId();\n                if (sourceId && cloneMap[sourceId]) {\n                    // Source is a node and the node is among the clones.\n                    // Then update the source of the cloned edge.\n                    clone.setSource(Object.assign(Object.assign({}, clone.getSource()), { cell: cloneMap[sourceId].id }));\n                }\n                if (targetId && cloneMap[targetId]) {\n                    // Target is a node and the node is among the clones.\n                    // Then update the target of the cloned edge.\n                    clone.setTarget(Object.assign(Object.assign({}, clone.getTarget()), { cell: cloneMap[targetId].id }));\n                }\n            }\n            // Find the parent of the original cell\n            const parent = cell.getParent();\n            if (parent && cloneMap[parent.id]) {\n                clone.setParent(cloneMap[parent.id]);\n            }\n            // Find the children of the original cell\n            const children = cell.getChildren();\n            if (children && children.length) {\n                const embeds = children.reduce((memo, child) => {\n                    // Embedded cells that are not being cloned can not be carried\n                    // over with other embedded cells.\n                    if (cloneMap[child.id]) {\n                        memo.push(cloneMap[child.id]);\n                    }\n                    return memo;\n                }, []);\n                if (embeds.length > 0) {\n                    clone.setChildren(embeds);\n                }\n            }\n        });\n        return cloneMap;\n    }\n    Cell.cloneCells = cloneCells;\n})(Cell || (Cell = {}));\n(function (Cell) {\n    Cell.config({\n        propHooks(_a) {\n            var { tools } = _a, metadata = __rest(_a, [\"tools\"]);\n            if (tools) {\n                metadata.tools = Cell.normalizeTools(tools);\n            }\n            return metadata;\n        },\n    });\n})(Cell || (Cell = {}));\n//# sourceMappingURL=cell.js.map","export var ShareRegistry;\n(function (ShareRegistry) {\n    let edgeRegistry;\n    let nodeRegistry;\n    function exist(name, isNode) {\n        return isNode\n            ? edgeRegistry != null && edgeRegistry.exist(name)\n            : nodeRegistry != null && nodeRegistry.exist(name);\n    }\n    ShareRegistry.exist = exist;\n    function setEdgeRegistry(registry) {\n        edgeRegistry = registry;\n    }\n    ShareRegistry.setEdgeRegistry = setEdgeRegistry;\n    function setNodeRegistry(registry) {\n        nodeRegistry = registry;\n    }\n    ShareRegistry.setNodeRegistry = setNodeRegistry;\n})(ShareRegistry || (ShareRegistry = {}));\n//# sourceMappingURL=registry.js.map","import { ObjectExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { PortLayout, PortLabelLayout } from '../registry';\nexport class PortManager {\n    constructor(data) {\n        this.ports = [];\n        this.groups = {};\n        this.init(ObjectExt.cloneDeep(data));\n    }\n    getPorts() {\n        return this.ports;\n    }\n    getGroup(groupName) {\n        return groupName != null ? this.groups[groupName] : null;\n    }\n    getPortsByGroup(groupName) {\n        return this.ports.filter((p) => p.group === groupName || (p.group == null && groupName == null));\n    }\n    getPortsLayoutByGroup(groupName, elemBBox) {\n        const ports = this.getPortsByGroup(groupName);\n        const group = groupName ? this.getGroup(groupName) : null;\n        const groupPosition = group ? group.position : null;\n        const groupPositionName = groupPosition ? groupPosition.name : null;\n        let layoutFn;\n        if (groupPositionName != null) {\n            const fn = PortLayout.registry.get(groupPositionName);\n            if (fn == null) {\n                return PortLayout.registry.onNotFound(groupPositionName);\n            }\n            layoutFn = fn;\n        }\n        else {\n            layoutFn = PortLayout.presets.left;\n        }\n        const portsArgs = ports.map((port) => (port && port.position && port.position.args) || {});\n        const groupArgs = (groupPosition && groupPosition.args) || {};\n        const layouts = layoutFn(portsArgs, elemBBox, groupArgs);\n        return layouts.map((portLayout, index) => {\n            const port = ports[index];\n            return {\n                portLayout,\n                portId: port.id,\n                portSize: port.size,\n                portAttrs: port.attrs,\n                labelSize: port.label.size,\n                labelLayout: this.getPortLabelLayout(port, Point.create(portLayout.position), elemBBox),\n            };\n        });\n    }\n    init(data) {\n        const { groups, items } = data;\n        if (groups != null) {\n            Object.keys(groups).forEach((key) => {\n                this.groups[key] = this.parseGroup(groups[key]);\n            });\n        }\n        if (Array.isArray(items)) {\n            items.forEach((item) => {\n                this.ports.push(this.parsePort(item));\n            });\n        }\n    }\n    parseGroup(group) {\n        return Object.assign(Object.assign({}, group), { label: this.getLabel(group, true), position: this.getPortPosition(group.position, true) });\n    }\n    parsePort(port) {\n        const result = Object.assign({}, port);\n        const group = this.getGroup(port.group) || {};\n        result.markup = result.markup || group.markup;\n        result.attrs = ObjectExt.merge({}, group.attrs, result.attrs);\n        result.position = this.createPosition(group, result);\n        result.label = ObjectExt.merge({}, group.label, this.getLabel(result));\n        result.zIndex = this.getZIndex(group, result);\n        result.size = Object.assign(Object.assign({}, group.size), result.size);\n        return result;\n    }\n    getZIndex(group, port) {\n        if (typeof port.zIndex === 'number') {\n            return port.zIndex;\n        }\n        if (typeof group.zIndex === 'number' || group.zIndex === 'auto') {\n            return group.zIndex;\n        }\n        return 'auto';\n    }\n    createPosition(group, port) {\n        return ObjectExt.merge({\n            name: 'left',\n            args: {},\n        }, group.position, { args: port.args });\n    }\n    getPortPosition(position, setDefault = false) {\n        if (position == null) {\n            if (setDefault) {\n                return { name: 'left', args: {} };\n            }\n        }\n        else {\n            if (typeof position === 'string') {\n                return {\n                    name: position,\n                    args: {},\n                };\n            }\n            if (Array.isArray(position)) {\n                return {\n                    name: 'absolute',\n                    args: { x: position[0], y: position[1] },\n                };\n            }\n            if (typeof position === 'object') {\n                return position;\n            }\n        }\n        return { args: {} };\n    }\n    getPortLabelPosition(position, setDefault = false) {\n        if (position == null) {\n            if (setDefault) {\n                return { name: 'left', args: {} };\n            }\n        }\n        else {\n            if (typeof position === 'string') {\n                return {\n                    name: position,\n                    args: {},\n                };\n            }\n            if (typeof position === 'object') {\n                return position;\n            }\n        }\n        return { args: {} };\n    }\n    getLabel(item, setDefaults = false) {\n        const label = item.label || {};\n        label.position = this.getPortLabelPosition(label.position, setDefaults);\n        return label;\n    }\n    getPortLabelLayout(port, portPosition, elemBBox) {\n        const name = port.label.position.name || 'left';\n        const args = port.label.position.args || {};\n        const layoutFn = PortLabelLayout.registry.get(name) || PortLabelLayout.presets.left;\n        if (layoutFn) {\n            return layoutFn(portPosition, elemBBox, args);\n        }\n        return null;\n    }\n}\n//# sourceMappingURL=port.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Point, Rectangle, Angle } from '@antv/x6-geometry';\nimport { StringExt, ObjectExt, NumberExt, Interp, } from '@antv/x6-common';\nimport { Registry } from '../registry/registry';\nimport { Markup } from '../view/markup';\nimport { Cell } from './cell';\nimport { ShareRegistry } from './registry';\nimport { PortManager } from './port';\nexport class Node extends Cell {\n    get [Symbol.toStringTag]() {\n        return Node.toStringTag;\n    }\n    constructor(metadata = {}) {\n        super(metadata);\n        this.initPorts();\n    }\n    preprocess(metadata, ignoreIdCheck) {\n        const { x, y, width, height } = metadata, others = __rest(metadata, [\"x\", \"y\", \"width\", \"height\"]);\n        if (x != null || y != null) {\n            const position = others.position;\n            others.position = Object.assign(Object.assign({}, position), { x: x != null ? x : position ? position.x : 0, y: y != null ? y : position ? position.y : 0 });\n        }\n        if (width != null || height != null) {\n            const size = others.size;\n            others.size = Object.assign(Object.assign({}, size), { width: width != null ? width : size ? size.width : 0, height: height != null ? height : size ? size.height : 0 });\n        }\n        return super.preprocess(others, ignoreIdCheck);\n    }\n    isNode() {\n        return true;\n    }\n    size(width, height, options) {\n        if (width === undefined) {\n            return this.getSize();\n        }\n        if (typeof width === 'number') {\n            return this.setSize(width, height, options);\n        }\n        return this.setSize(width, height);\n    }\n    getSize() {\n        const size = this.store.get('size');\n        return size ? Object.assign({}, size) : { width: 1, height: 1 };\n    }\n    setSize(width, height, options) {\n        if (typeof width === 'object') {\n            this.resize(width.width, width.height, height);\n        }\n        else {\n            this.resize(width, height, options);\n        }\n        return this;\n    }\n    resize(width, height, options = {}) {\n        this.startBatch('resize', options);\n        const direction = options.direction;\n        if (direction) {\n            const currentSize = this.getSize();\n            switch (direction) {\n                case 'left':\n                case 'right':\n                    // Don't change height when resizing horizontally.\n                    height = currentSize.height; // eslint-disable-line\n                    break;\n                case 'top':\n                case 'bottom':\n                    // Don't change width when resizing vertically.\n                    width = currentSize.width; // eslint-disable-line\n                    break;\n                default:\n                    break;\n            }\n            const map = {\n                right: 0,\n                'top-right': 0,\n                top: 1,\n                'top-left': 1,\n                left: 2,\n                'bottom-left': 2,\n                bottom: 3,\n                'bottom-right': 3,\n            };\n            let quadrant = map[direction];\n            const angle = Angle.normalize(this.getAngle() || 0);\n            if (options.absolute) {\n                // We are taking the node's rotation into account\n                quadrant += Math.floor((angle + 45) / 90);\n                quadrant %= 4;\n            }\n            // This is a rectangle in size of the un-rotated node.\n            const bbox = this.getBBox();\n            // Pick the corner point on the node, which meant to stay on its\n            // place before and after the rotation.\n            let fixedPoint;\n            if (quadrant === 0) {\n                fixedPoint = bbox.getBottomLeft();\n            }\n            else if (quadrant === 1) {\n                fixedPoint = bbox.getCorner();\n            }\n            else if (quadrant === 2) {\n                fixedPoint = bbox.getTopRight();\n            }\n            else {\n                fixedPoint = bbox.getOrigin();\n            }\n            // Find an image of the previous indent point. This is the position,\n            // where is the point actually located on the screen.\n            const imageFixedPoint = fixedPoint\n                .clone()\n                .rotate(-angle, bbox.getCenter());\n            // Every point on the element rotates around a circle with the centre of\n            // rotation in the middle of the element while the whole element is being\n            // rotated. That means that the distance from a point in the corner of\n            // the element (supposed its always rect) to the center of the element\n            // doesn't change during the rotation and therefore it equals to a\n            // distance on un-rotated element.\n            // We can find the distance as DISTANCE = (ELEMENTWIDTH/2)^2 + (ELEMENTHEIGHT/2)^2)^0.5.\n            const radius = Math.sqrt(width * width + height * height) / 2;\n            // Now we are looking for an angle between x-axis and the line starting\n            // at image of fixed point and ending at the center of the element.\n            // We call this angle `alpha`.\n            // The image of a fixed point is located in n-th quadrant. For each\n            // quadrant passed going anti-clockwise we have to add 90 degrees.\n            // Note that the first quadrant has index 0.\n            //\n            // 3 | 2\n            // --c-- Quadrant positions around the element's center `c`\n            // 0 | 1\n            //\n            let alpha = (quadrant * Math.PI) / 2;\n            // Add an angle between the beginning of the current quadrant (line\n            // parallel with x-axis or y-axis going through the center of the\n            // element) and line crossing the indent of the fixed point and the\n            // center of the element. This is the angle we need but on the\n            // un-rotated element.\n            alpha += Math.atan(quadrant % 2 === 0 ? height / width : width / height);\n            // Lastly we have to deduct the original angle the element was rotated\n            // by and that's it.\n            alpha -= Angle.toRad(angle);\n            // With this angle and distance we can easily calculate the centre of\n            // the un-rotated element.\n            // Note that fromPolar constructor accepts an angle in radians.\n            const center = Point.fromPolar(radius, alpha, imageFixedPoint);\n            // The top left corner on the un-rotated element has to be half a width\n            // on the left and half a height to the top from the center. This will\n            // be the origin of rectangle we were looking for.\n            const origin = center.clone().translate(width / -2, height / -2);\n            this.store.set('size', { width, height }, options);\n            this.setPosition(origin.x, origin.y, options);\n        }\n        else {\n            this.store.set('size', { width, height }, options);\n        }\n        this.stopBatch('resize', options);\n        return this;\n    }\n    scale(sx, sy, origin, options = {}) {\n        const scaledBBox = this.getBBox().scale(sx, sy, origin == null ? undefined : origin);\n        this.startBatch('scale', options);\n        this.setPosition(scaledBBox.x, scaledBBox.y, options);\n        this.resize(scaledBBox.width, scaledBBox.height, options);\n        this.stopBatch('scale');\n        return this;\n    }\n    position(arg0, arg1, arg2) {\n        if (typeof arg0 === 'number') {\n            return this.setPosition(arg0, arg1, arg2);\n        }\n        return this.getPosition(arg0);\n    }\n    getPosition(options = {}) {\n        if (options.relative) {\n            const parent = this.getParent();\n            if (parent != null && parent.isNode()) {\n                const currentPosition = this.getPosition();\n                const parentPosition = parent.getPosition();\n                return {\n                    x: currentPosition.x - parentPosition.x,\n                    y: currentPosition.y - parentPosition.y,\n                };\n            }\n        }\n        const pos = this.store.get('position');\n        return pos ? Object.assign({}, pos) : { x: 0, y: 0 };\n    }\n    setPosition(arg0, arg1, arg2 = {}) {\n        let x;\n        let y;\n        let options;\n        if (typeof arg0 === 'object') {\n            x = arg0.x;\n            y = arg0.y;\n            options = arg1 || {};\n        }\n        else {\n            x = arg0;\n            y = arg1;\n            options = arg2 || {};\n        }\n        if (options.relative) {\n            const parent = this.getParent();\n            if (parent != null && parent.isNode()) {\n                const parentPosition = parent.getPosition();\n                x += parentPosition.x;\n                y += parentPosition.y;\n            }\n        }\n        if (options.deep) {\n            const currentPosition = this.getPosition();\n            this.translate(x - currentPosition.x, y - currentPosition.y, options);\n        }\n        else {\n            this.store.set('position', { x, y }, options);\n        }\n        return this;\n    }\n    translate(tx = 0, ty = 0, options = {}) {\n        if (tx === 0 && ty === 0) {\n            return this;\n        }\n        // Pass the initiator of the translation.\n        options.translateBy = options.translateBy || this.id;\n        const position = this.getPosition();\n        if (options.restrict != null && options.translateBy === this.id) {\n            // We are restricting the translation for the element itself only. We get\n            // the bounding box of the element including all its embeds.\n            // All embeds have to be translated the exact same way as the element.\n            const bbox = this.getBBox({ deep: true });\n            const ra = options.restrict;\n            // - - - - - - - - - - - - -> ra.x + ra.width\n            // - - - -> position.x      |\n            // -> bbox.x\n            //                ▓▓▓▓▓▓▓   |\n            //         ░░░░░░░▓▓▓▓▓▓▓\n            //         ░░░░░░░░░        |\n            //   ▓▓▓▓▓▓▓▓░░░░░░░\n            //   ▓▓▓▓▓▓▓▓               |\n            //   <-dx->                     | restricted area right border\n            //         <-width->        |   ░ translated element\n            //   <- - bbox.width - ->       ▓ embedded element\n            const dx = position.x - bbox.x;\n            const dy = position.y - bbox.y;\n            // Find the maximal/minimal coordinates that the element can be translated\n            // while complies the restrictions.\n            const x = Math.max(ra.x + dx, Math.min(ra.x + ra.width + dx - bbox.width, position.x + tx));\n            const y = Math.max(ra.y + dy, Math.min(ra.y + ra.height + dy - bbox.height, position.y + ty));\n            // recalculate the translation taking the restrictions into account.\n            tx = x - position.x; // eslint-disable-line\n            ty = y - position.y; // eslint-disable-line\n        }\n        const translatedPosition = {\n            x: position.x + tx,\n            y: position.y + ty,\n        };\n        // To find out by how much an element was translated in event\n        // 'change:position' handlers.\n        options.tx = tx;\n        options.ty = ty;\n        if (options.transition) {\n            if (typeof options.transition !== 'object') {\n                options.transition = {};\n            }\n            this.transition('position', translatedPosition, Object.assign(Object.assign({}, options.transition), { interp: Interp.object }));\n            this.eachChild((child) => {\n                var _a;\n                const excluded = (_a = options.exclude) === null || _a === void 0 ? void 0 : _a.includes(child);\n                if (!excluded) {\n                    child.translate(tx, ty, options);\n                }\n            });\n        }\n        else {\n            this.startBatch('translate', options);\n            this.store.set('position', translatedPosition, options);\n            this.eachChild((child) => {\n                var _a;\n                const excluded = (_a = options.exclude) === null || _a === void 0 ? void 0 : _a.includes(child);\n                if (!excluded) {\n                    child.translate(tx, ty, options);\n                }\n            });\n            this.stopBatch('translate', options);\n        }\n        return this;\n    }\n    angle(val, options) {\n        if (val == null) {\n            return this.getAngle();\n        }\n        return this.rotate(val, options);\n    }\n    getAngle() {\n        return this.store.get('angle', 0);\n    }\n    rotate(angle, options = {}) {\n        const currentAngle = this.getAngle();\n        if (options.center) {\n            const size = this.getSize();\n            const position = this.getPosition();\n            const center = this.getBBox().getCenter();\n            center.rotate(currentAngle - angle, options.center);\n            const dx = center.x - size.width / 2 - position.x;\n            const dy = center.y - size.height / 2 - position.y;\n            this.startBatch('rotate', { angle, options });\n            this.setPosition(position.x + dx, position.y + dy, options);\n            this.rotate(angle, Object.assign(Object.assign({}, options), { center: null }));\n            this.stopBatch('rotate');\n        }\n        else {\n            this.store.set('angle', options.absolute ? angle : (currentAngle + angle) % 360, options);\n        }\n        return this;\n    }\n    // #endregion\n    // #region common\n    getBBox(options = {}) {\n        if (options.deep) {\n            const cells = this.getDescendants({ deep: true, breadthFirst: true });\n            cells.push(this);\n            return Cell.getCellsBBox(cells);\n        }\n        return Rectangle.fromPositionAndSize(this.getPosition(), this.getSize());\n    }\n    getConnectionPoint(edge, type) {\n        const bbox = this.getBBox();\n        const center = bbox.getCenter();\n        const terminal = edge.getTerminal(type);\n        if (terminal == null) {\n            return center;\n        }\n        const portId = terminal.port;\n        if (!portId || !this.hasPort(portId)) {\n            return center;\n        }\n        const port = this.getPort(portId);\n        if (!port || !port.group) {\n            return center;\n        }\n        const layouts = this.getPortsPosition(port.group);\n        const position = layouts[portId].position;\n        const portCenter = Point.create(position).translate(bbox.getOrigin());\n        const angle = this.getAngle();\n        if (angle) {\n            portCenter.rotate(-angle, center);\n        }\n        return portCenter;\n    }\n    /**\n     * Sets cell's size and position based on the children bbox and given padding.\n     */\n    fit(options = {}) {\n        const children = this.getChildren() || [];\n        const embeds = children.filter((cell) => cell.isNode());\n        if (embeds.length === 0) {\n            return this;\n        }\n        this.startBatch('fit-embeds', options);\n        if (options.deep) {\n            embeds.forEach((cell) => cell.fit(options));\n        }\n        let { x, y, width, height } = Cell.getCellsBBox(embeds);\n        const padding = NumberExt.normalizeSides(options.padding);\n        x -= padding.left;\n        y -= padding.top;\n        width += padding.left + padding.right;\n        height += padding.bottom + padding.top;\n        this.store.set({\n            position: { x, y },\n            size: { width, height },\n        }, options);\n        this.stopBatch('fit-embeds');\n        return this;\n    }\n    // #endregion\n    // #region ports\n    get portContainerMarkup() {\n        return this.getPortContainerMarkup();\n    }\n    set portContainerMarkup(markup) {\n        this.setPortContainerMarkup(markup);\n    }\n    getDefaultPortContainerMarkup() {\n        return (this.store.get('defaultPortContainerMarkup') ||\n            Markup.getPortContainerMarkup());\n    }\n    getPortContainerMarkup() {\n        return (this.store.get('portContainerMarkup') ||\n            this.getDefaultPortContainerMarkup());\n    }\n    setPortContainerMarkup(markup, options = {}) {\n        this.store.set('portContainerMarkup', Markup.clone(markup), options);\n        return this;\n    }\n    get portMarkup() {\n        return this.getPortMarkup();\n    }\n    set portMarkup(markup) {\n        this.setPortMarkup(markup);\n    }\n    getDefaultPortMarkup() {\n        return this.store.get('defaultPortMarkup') || Markup.getPortMarkup();\n    }\n    getPortMarkup() {\n        return this.store.get('portMarkup') || this.getDefaultPortMarkup();\n    }\n    setPortMarkup(markup, options = {}) {\n        this.store.set('portMarkup', Markup.clone(markup), options);\n        return this;\n    }\n    get portLabelMarkup() {\n        return this.getPortLabelMarkup();\n    }\n    set portLabelMarkup(markup) {\n        this.setPortLabelMarkup(markup);\n    }\n    getDefaultPortLabelMarkup() {\n        return (this.store.get('defaultPortLabelMarkup') || Markup.getPortLabelMarkup());\n    }\n    getPortLabelMarkup() {\n        return this.store.get('portLabelMarkup') || this.getDefaultPortLabelMarkup();\n    }\n    setPortLabelMarkup(markup, options = {}) {\n        this.store.set('portLabelMarkup', Markup.clone(markup), options);\n        return this;\n    }\n    get ports() {\n        const res = this.store.get('ports', { items: [] });\n        if (res.items == null) {\n            res.items = [];\n        }\n        return res;\n    }\n    getPorts() {\n        return ObjectExt.cloneDeep(this.ports.items);\n    }\n    getPortsByGroup(groupName) {\n        return this.getPorts().filter((port) => port.group === groupName);\n    }\n    getPort(portId) {\n        return ObjectExt.cloneDeep(this.ports.items.find((port) => port.id && port.id === portId));\n    }\n    getPortAt(index) {\n        return this.ports.items[index] || null;\n    }\n    hasPorts() {\n        return this.ports.items.length > 0;\n    }\n    hasPort(portId) {\n        return this.getPortIndex(portId) !== -1;\n    }\n    getPortIndex(port) {\n        const portId = typeof port === 'string' ? port : port.id;\n        return portId != null\n            ? this.ports.items.findIndex((item) => item.id === portId)\n            : -1;\n    }\n    getPortsPosition(groupName) {\n        const size = this.getSize();\n        const layouts = this.port.getPortsLayoutByGroup(groupName, new Rectangle(0, 0, size.width, size.height));\n        return layouts.reduce((memo, item) => {\n            const layout = item.portLayout;\n            memo[item.portId] = {\n                position: Object.assign({}, layout.position),\n                angle: layout.angle || 0,\n            };\n            return memo;\n        }, {});\n    }\n    getPortProp(portId, path) {\n        return this.getPropByPath(this.prefixPortPath(portId, path));\n    }\n    setPortProp(portId, arg1, arg2, arg3) {\n        if (typeof arg1 === 'string' || Array.isArray(arg1)) {\n            const path = this.prefixPortPath(portId, arg1);\n            const value = arg2;\n            return this.setPropByPath(path, value, arg3);\n        }\n        const path = this.prefixPortPath(portId);\n        const value = arg1;\n        return this.setPropByPath(path, value, arg2);\n    }\n    removePortProp(portId, path, options) {\n        if (typeof path === 'string' || Array.isArray(path)) {\n            return this.removePropByPath(this.prefixPortPath(portId, path), options);\n        }\n        return this.removePropByPath(this.prefixPortPath(portId), path);\n    }\n    portProp(portId, path, value, options) {\n        if (path == null) {\n            return this.getPortProp(portId);\n        }\n        if (typeof path === 'string' || Array.isArray(path)) {\n            if (arguments.length === 2) {\n                return this.getPortProp(portId, path);\n            }\n            if (value == null) {\n                return this.removePortProp(portId, path, options);\n            }\n            return this.setPortProp(portId, path, value, options);\n        }\n        return this.setPortProp(portId, path, value);\n    }\n    prefixPortPath(portId, path) {\n        const index = this.getPortIndex(portId);\n        if (index === -1) {\n            throw new Error(`Unable to find port with id: \"${portId}\"`);\n        }\n        if (path == null || path === '') {\n            return ['ports', 'items', `${index}`];\n        }\n        if (Array.isArray(path)) {\n            return ['ports', 'items', `${index}`, ...path];\n        }\n        return `ports/items/${index}/${path}`;\n    }\n    addPort(port, options) {\n        const ports = [...this.ports.items];\n        ports.push(port);\n        this.setPropByPath('ports/items', ports, options);\n        return this;\n    }\n    addPorts(ports, options) {\n        this.setPropByPath('ports/items', [...this.ports.items, ...ports], options);\n        return this;\n    }\n    insertPort(index, port, options) {\n        const ports = [...this.ports.items];\n        ports.splice(index, 0, port);\n        this.setPropByPath('ports/items', ports, options);\n        return this;\n    }\n    removePort(port, options = {}) {\n        return this.removePortAt(this.getPortIndex(port), options);\n    }\n    removePortAt(index, options = {}) {\n        if (index >= 0) {\n            const ports = [...this.ports.items];\n            ports.splice(index, 1);\n            options.rewrite = true;\n            this.setPropByPath('ports/items', ports, options);\n        }\n        return this;\n    }\n    removePorts(portsForRemoval, opt) {\n        let options;\n        if (Array.isArray(portsForRemoval)) {\n            options = opt || {};\n            if (portsForRemoval.length) {\n                options.rewrite = true;\n                const currentPorts = [...this.ports.items];\n                const remainingPorts = currentPorts.filter((cp) => !portsForRemoval.some((p) => {\n                    const id = typeof p === 'string' ? p : p.id;\n                    return cp.id === id;\n                }));\n                this.setPropByPath('ports/items', remainingPorts, options);\n            }\n        }\n        else {\n            options = portsForRemoval || {};\n            options.rewrite = true;\n            this.setPropByPath('ports/items', [], options);\n        }\n        return this;\n    }\n    getParsedPorts() {\n        return this.port.getPorts();\n    }\n    getParsedGroups() {\n        return this.port.groups;\n    }\n    getPortsLayoutByGroup(groupName, bbox) {\n        return this.port.getPortsLayoutByGroup(groupName, bbox);\n    }\n    initPorts() {\n        this.updatePortData();\n        this.on('change:ports', () => {\n            this.processRemovedPort();\n            this.updatePortData();\n        });\n    }\n    processRemovedPort() {\n        const current = this.ports;\n        const currentItemsMap = {};\n        current.items.forEach((item) => {\n            if (item.id) {\n                currentItemsMap[item.id] = true;\n            }\n        });\n        const removed = {};\n        const previous = this.store.getPrevious('ports') || {\n            items: [],\n        };\n        previous.items.forEach((item) => {\n            if (item.id && !currentItemsMap[item.id]) {\n                removed[item.id] = true;\n            }\n        });\n        const model = this.model;\n        if (model && !ObjectExt.isEmpty(removed)) {\n            const incomings = model.getConnectedEdges(this, { incoming: true });\n            incomings.forEach((edge) => {\n                const portId = edge.getTargetPortId();\n                if (portId && removed[portId]) {\n                    edge.remove();\n                }\n            });\n            const outgoings = model.getConnectedEdges(this, { outgoing: true });\n            outgoings.forEach((edge) => {\n                const portId = edge.getSourcePortId();\n                if (portId && removed[portId]) {\n                    edge.remove();\n                }\n            });\n        }\n    }\n    validatePorts() {\n        const ids = {};\n        const errors = [];\n        this.ports.items.forEach((p) => {\n            if (typeof p !== 'object') {\n                errors.push(`Invalid port ${p}.`);\n            }\n            if (p.id == null) {\n                p.id = this.generatePortId();\n            }\n            if (ids[p.id]) {\n                errors.push('Duplicitied port id.');\n            }\n            ids[p.id] = true;\n        });\n        return errors;\n    }\n    generatePortId() {\n        return StringExt.uuid();\n    }\n    updatePortData() {\n        const err = this.validatePorts();\n        if (err.length > 0) {\n            this.store.set('ports', this.store.getPrevious('ports'));\n            throw new Error(err.join(' '));\n        }\n        const prev = this.port ? this.port.getPorts() : null;\n        this.port = new PortManager(this.ports);\n        const curr = this.port.getPorts();\n        const added = prev\n            ? curr.filter((item) => {\n                if (!prev.find((prevPort) => prevPort.id === item.id)) {\n                    return item;\n                }\n                return null;\n            })\n            : [...curr];\n        const removed = prev\n            ? prev.filter((item) => {\n                if (!curr.find((curPort) => curPort.id === item.id)) {\n                    return item;\n                }\n                return null;\n            })\n            : [];\n        if (added.length > 0) {\n            this.notify('ports:added', { added, cell: this, node: this });\n        }\n        if (removed.length > 0) {\n            this.notify('ports:removed', { removed, cell: this, node: this });\n        }\n    }\n}\nNode.defaults = {\n    angle: 0,\n    position: { x: 0, y: 0 },\n    size: { width: 1, height: 1 },\n};\n(function (Node) {\n    Node.toStringTag = `X6.${Node.name}`;\n    function isNode(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Node) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const node = instance;\n        if ((tag == null || tag === Node.toStringTag) &&\n            typeof node.isNode === 'function' &&\n            typeof node.isEdge === 'function' &&\n            typeof node.prop === 'function' &&\n            typeof node.attr === 'function' &&\n            typeof node.size === 'function' &&\n            typeof node.position === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Node.isNode = isNode;\n})(Node || (Node = {}));\n(function (Node) {\n    Node.config({\n        propHooks(_a) {\n            var { ports } = _a, metadata = __rest(_a, [\"ports\"]);\n            if (ports) {\n                metadata.ports = Array.isArray(ports) ? { items: ports } : ports;\n            }\n            return metadata;\n        },\n    });\n})(Node || (Node = {}));\n(function (Node) {\n    Node.registry = Registry.create({\n        type: 'node',\n        process(shape, options) {\n            if (ShareRegistry.exist(shape, true)) {\n                throw new Error(`Node with name '${shape}' was registered by anthor Edge`);\n            }\n            if (typeof options === 'function') {\n                options.config({ shape });\n                return options;\n            }\n            let parent = Node;\n            const { inherit } = options, config = __rest(options, [\"inherit\"]);\n            if (inherit) {\n                if (typeof inherit === 'string') {\n                    const base = this.get(inherit);\n                    if (base == null) {\n                        this.onNotFound(inherit, 'inherited');\n                    }\n                    else {\n                        parent = base;\n                    }\n                }\n                else {\n                    parent = inherit;\n                }\n            }\n            if (config.constructorName == null) {\n                config.constructorName = shape;\n            }\n            const ctor = parent.define.call(parent, config);\n            ctor.config({ shape });\n            return ctor;\n        },\n    });\n    ShareRegistry.setNodeRegistry(Node.registry);\n})(Node || (Node = {}));\n(function (Node) {\n    let counter = 0;\n    function getClassName(name) {\n        if (name) {\n            return StringExt.pascalCase(name);\n        }\n        counter += 1;\n        return `CustomNode${counter}`;\n    }\n    function define(config) {\n        const { constructorName, overwrite } = config, others = __rest(config, [\"constructorName\", \"overwrite\"]);\n        const ctor = ObjectExt.createClass(getClassName(constructorName || others.shape), this);\n        ctor.config(others);\n        if (others.shape) {\n            Node.registry.register(others.shape, ctor, overwrite);\n        }\n        return ctor;\n    }\n    Node.define = define;\n    function create(options) {\n        const shape = options.shape || 'rect';\n        const Ctor = Node.registry.get(shape);\n        if (Ctor) {\n            return new Ctor(options);\n        }\n        return Node.registry.onNotFound(shape);\n    }\n    Node.create = create;\n})(Node || (Node = {}));\n//# sourceMappingURL=node.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt, StringExt } from '@antv/x6-common';\nimport { Point, Polyline } from '@antv/x6-geometry';\nimport { Registry } from '../registry/registry';\nimport { Markup } from '../view/markup';\nimport { ShareRegistry } from './registry';\nimport { Cell } from './cell';\nexport class Edge extends Cell {\n    get [Symbol.toStringTag]() {\n        return Edge.toStringTag;\n    }\n    constructor(metadata = {}) {\n        super(metadata);\n    }\n    preprocess(metadata, ignoreIdCheck) {\n        const { source, sourceCell, sourcePort, sourcePoint, target, targetCell, targetPort, targetPoint } = metadata, others = __rest(metadata, [\"source\", \"sourceCell\", \"sourcePort\", \"sourcePoint\", \"target\", \"targetCell\", \"targetPort\", \"targetPoint\"]);\n        const data = others;\n        const isValidId = (val) => typeof val === 'string' || typeof val === 'number';\n        if (source != null) {\n            if (Cell.isCell(source)) {\n                data.source = { cell: source.id };\n            }\n            else if (isValidId(source)) {\n                data.source = { cell: source };\n            }\n            else if (Point.isPoint(source)) {\n                data.source = source.toJSON();\n            }\n            else if (Array.isArray(source)) {\n                data.source = { x: source[0], y: source[1] };\n            }\n            else {\n                const cell = source.cell;\n                if (Cell.isCell(cell)) {\n                    data.source = Object.assign(Object.assign({}, source), { cell: cell.id });\n                }\n                else {\n                    data.source = source;\n                }\n            }\n        }\n        if (sourceCell != null || sourcePort != null) {\n            let terminal = data.source;\n            if (sourceCell != null) {\n                const id = isValidId(sourceCell) ? sourceCell : sourceCell.id;\n                if (terminal) {\n                    terminal.cell = id;\n                }\n                else {\n                    terminal = data.source = { cell: id };\n                }\n            }\n            if (sourcePort != null && terminal) {\n                terminal.port = sourcePort;\n            }\n        }\n        else if (sourcePoint != null) {\n            data.source = Point.create(sourcePoint).toJSON();\n        }\n        if (target != null) {\n            if (Cell.isCell(target)) {\n                data.target = { cell: target.id };\n            }\n            else if (isValidId(target)) {\n                data.target = { cell: target };\n            }\n            else if (Point.isPoint(target)) {\n                data.target = target.toJSON();\n            }\n            else if (Array.isArray(target)) {\n                data.target = { x: target[0], y: target[1] };\n            }\n            else {\n                const cell = target.cell;\n                if (Cell.isCell(cell)) {\n                    data.target = Object.assign(Object.assign({}, target), { cell: cell.id });\n                }\n                else {\n                    data.target = target;\n                }\n            }\n        }\n        if (targetCell != null || targetPort != null) {\n            let terminal = data.target;\n            if (targetCell != null) {\n                const id = isValidId(targetCell) ? targetCell : targetCell.id;\n                if (terminal) {\n                    terminal.cell = id;\n                }\n                else {\n                    terminal = data.target = { cell: id };\n                }\n            }\n            if (targetPort != null && terminal) {\n                terminal.port = targetPort;\n            }\n        }\n        else if (targetPoint != null) {\n            data.target = Point.create(targetPoint).toJSON();\n        }\n        return super.preprocess(data, ignoreIdCheck);\n    }\n    setup() {\n        super.setup();\n        this.on('change:labels', (args) => this.onLabelsChanged(args));\n        this.on('change:vertices', (args) => this.onVertexsChanged(args));\n    }\n    isEdge() {\n        return true;\n    }\n    // #region terminal\n    disconnect(options = {}) {\n        this.store.set({\n            source: { x: 0, y: 0 },\n            target: { x: 0, y: 0 },\n        }, options);\n        return this;\n    }\n    get source() {\n        return this.getSource();\n    }\n    set source(data) {\n        this.setSource(data);\n    }\n    getSource() {\n        return this.getTerminal('source');\n    }\n    getSourceCellId() {\n        return this.source.cell;\n    }\n    getSourcePortId() {\n        return this.source.port;\n    }\n    setSource(source, args, options = {}) {\n        return this.setTerminal('source', source, args, options);\n    }\n    get target() {\n        return this.getTarget();\n    }\n    set target(data) {\n        this.setTarget(data);\n    }\n    getTarget() {\n        return this.getTerminal('target');\n    }\n    getTargetCellId() {\n        return this.target.cell;\n    }\n    getTargetPortId() {\n        return this.target.port;\n    }\n    setTarget(target, args, options = {}) {\n        return this.setTerminal('target', target, args, options);\n    }\n    getTerminal(type) {\n        return Object.assign({}, this.store.get(type));\n    }\n    setTerminal(type, terminal, args, options = {}) {\n        // `terminal` is a cell\n        if (Cell.isCell(terminal)) {\n            this.store.set(type, ObjectExt.merge({}, args, { cell: terminal.id }), options);\n            return this;\n        }\n        // `terminal` is a point-like object\n        const p = terminal;\n        if (Point.isPoint(terminal) || (p.x != null && p.y != null)) {\n            this.store.set(type, ObjectExt.merge({}, args, { x: p.x, y: p.y }), options);\n            return this;\n        }\n        // `terminal` is an object\n        this.store.set(type, ObjectExt.cloneDeep(terminal), options);\n        return this;\n    }\n    getSourcePoint() {\n        return this.getTerminalPoint('source');\n    }\n    getTargetPoint() {\n        return this.getTerminalPoint('target');\n    }\n    getTerminalPoint(type) {\n        const terminal = this[type];\n        if (Point.isPointLike(terminal)) {\n            return Point.create(terminal);\n        }\n        const cell = this.getTerminalCell(type);\n        if (cell) {\n            return cell.getConnectionPoint(this, type);\n        }\n        return new Point();\n    }\n    getSourceCell() {\n        return this.getTerminalCell('source');\n    }\n    getTargetCell() {\n        return this.getTerminalCell('target');\n    }\n    getTerminalCell(type) {\n        if (this.model) {\n            const cellId = type === 'source' ? this.getSourceCellId() : this.getTargetCellId();\n            if (cellId) {\n                return this.model.getCell(cellId);\n            }\n        }\n        return null;\n    }\n    getSourceNode() {\n        return this.getTerminalNode('source');\n    }\n    getTargetNode() {\n        return this.getTerminalNode('target');\n    }\n    getTerminalNode(type) {\n        let cell = this; // eslint-disable-line\n        const visited = {};\n        while (cell && cell.isEdge()) {\n            if (visited[cell.id]) {\n                return null;\n            }\n            visited[cell.id] = true;\n            cell = cell.getTerminalCell(type);\n        }\n        return cell && cell.isNode() ? cell : null;\n    }\n    // #endregion\n    // #region router\n    get router() {\n        return this.getRouter();\n    }\n    set router(data) {\n        if (data == null) {\n            this.removeRouter();\n        }\n        else {\n            this.setRouter(data);\n        }\n    }\n    getRouter() {\n        return this.store.get('router');\n    }\n    setRouter(name, args, options) {\n        if (typeof name === 'object') {\n            this.store.set('router', name, args);\n        }\n        else {\n            this.store.set('router', { name, args }, options);\n        }\n        return this;\n    }\n    removeRouter(options = {}) {\n        this.store.remove('router', options);\n        return this;\n    }\n    // #endregion\n    // #region connector\n    get connector() {\n        return this.getConnector();\n    }\n    set connector(data) {\n        if (data == null) {\n            this.removeConnector();\n        }\n        else {\n            this.setConnector(data);\n        }\n    }\n    getConnector() {\n        return this.store.get('connector');\n    }\n    setConnector(name, args, options) {\n        if (typeof name === 'object') {\n            this.store.set('connector', name, args);\n        }\n        else {\n            this.store.set('connector', { name, args }, options);\n        }\n        return this;\n    }\n    removeConnector(options = {}) {\n        return this.store.remove('connector', options);\n    }\n    // #endregion\n    // #region labels\n    getDefaultLabel() {\n        const ctor = this.constructor;\n        const defaults = this.store.get('defaultLabel') || ctor.defaultLabel || {};\n        return ObjectExt.cloneDeep(defaults);\n    }\n    get labels() {\n        return this.getLabels();\n    }\n    set labels(labels) {\n        this.setLabels(labels);\n    }\n    getLabels() {\n        return [...this.store.get('labels', [])].map((item) => this.parseLabel(item));\n    }\n    setLabels(labels, options = {}) {\n        this.store.set('labels', Array.isArray(labels) ? labels : [labels], options);\n        return this;\n    }\n    insertLabel(label, index, options = {}) {\n        const labels = this.getLabels();\n        const len = labels.length;\n        let idx = index != null && Number.isFinite(index) ? index : len;\n        if (idx < 0) {\n            idx = len + idx + 1;\n        }\n        labels.splice(idx, 0, this.parseLabel(label));\n        return this.setLabels(labels, options);\n    }\n    appendLabel(label, options = {}) {\n        return this.insertLabel(label, -1, options);\n    }\n    getLabelAt(index) {\n        const labels = this.getLabels();\n        if (index != null && Number.isFinite(index)) {\n            return this.parseLabel(labels[index]);\n        }\n        return null;\n    }\n    setLabelAt(index, label, options = {}) {\n        if (index != null && Number.isFinite(index)) {\n            const labels = this.getLabels();\n            labels[index] = this.parseLabel(label);\n            this.setLabels(labels, options);\n        }\n        return this;\n    }\n    removeLabelAt(index, options = {}) {\n        const labels = this.getLabels();\n        const idx = index != null && Number.isFinite(index) ? index : -1;\n        const removed = labels.splice(idx, 1);\n        this.setLabels(labels, options);\n        return removed.length ? removed[0] : null;\n    }\n    parseLabel(label) {\n        if (typeof label === 'string') {\n            const ctor = this.constructor;\n            return ctor.parseStringLabel(label);\n        }\n        return label;\n    }\n    onLabelsChanged({ previous, current, }) {\n        const added = previous && current\n            ? current.filter((label1) => {\n                if (!previous.find((label2) => label1 === label2 || ObjectExt.isEqual(label1, label2))) {\n                    return label1;\n                }\n                return null;\n            })\n            : current\n                ? [...current]\n                : [];\n        const removed = previous && current\n            ? previous.filter((label1) => {\n                if (!current.find((label2) => label1 === label2 || ObjectExt.isEqual(label1, label2))) {\n                    return label1;\n                }\n                return null;\n            })\n            : previous\n                ? [...previous]\n                : [];\n        if (added.length > 0) {\n            this.notify('labels:added', { added, cell: this, edge: this });\n        }\n        if (removed.length > 0) {\n            this.notify('labels:removed', { removed, cell: this, edge: this });\n        }\n    }\n    // #endregion\n    // #region vertices\n    get vertices() {\n        return this.getVertices();\n    }\n    set vertices(vertices) {\n        this.setVertices(vertices);\n    }\n    getVertices() {\n        return [...this.store.get('vertices', [])];\n    }\n    setVertices(vertices, options = {}) {\n        const points = Array.isArray(vertices) ? vertices : [vertices];\n        this.store.set('vertices', points.map((p) => Point.toJSON(p)), options);\n        return this;\n    }\n    insertVertex(vertice, index, options = {}) {\n        const vertices = this.getVertices();\n        const len = vertices.length;\n        let idx = index != null && Number.isFinite(index) ? index : len;\n        if (idx < 0) {\n            idx = len + idx + 1;\n        }\n        vertices.splice(idx, 0, Point.toJSON(vertice));\n        return this.setVertices(vertices, options);\n    }\n    appendVertex(vertex, options = {}) {\n        return this.insertVertex(vertex, -1, options);\n    }\n    getVertexAt(index) {\n        if (index != null && Number.isFinite(index)) {\n            const vertices = this.getVertices();\n            return vertices[index];\n        }\n        return null;\n    }\n    setVertexAt(index, vertice, options = {}) {\n        if (index != null && Number.isFinite(index)) {\n            const vertices = this.getVertices();\n            vertices[index] = vertice;\n            this.setVertices(vertices, options);\n        }\n        return this;\n    }\n    removeVertexAt(index, options = {}) {\n        const vertices = this.getVertices();\n        const idx = index != null && Number.isFinite(index) ? index : -1;\n        vertices.splice(idx, 1);\n        return this.setVertices(vertices, options);\n    }\n    onVertexsChanged({ previous, current, }) {\n        const added = previous && current\n            ? current.filter((p1) => {\n                if (!previous.find((p2) => Point.equals(p1, p2))) {\n                    return p1;\n                }\n                return null;\n            })\n            : current\n                ? [...current]\n                : [];\n        const removed = previous && current\n            ? previous.filter((p1) => {\n                if (!current.find((p2) => Point.equals(p1, p2))) {\n                    return p1;\n                }\n                return null;\n            })\n            : previous\n                ? [...previous]\n                : [];\n        if (added.length > 0) {\n            this.notify('vertexs:added', { added, cell: this, edge: this });\n        }\n        if (removed.length > 0) {\n            this.notify('vertexs:removed', { removed, cell: this, edge: this });\n        }\n    }\n    // #endregion\n    // #region markup\n    getDefaultMarkup() {\n        return this.store.get('defaultMarkup') || Markup.getEdgeMarkup();\n    }\n    getMarkup() {\n        return super.getMarkup() || this.getDefaultMarkup();\n    }\n    // #endregion\n    // #region transform\n    /**\n     * Translate the edge vertices (and source and target if they are points)\n     * by `tx` pixels in the x-axis and `ty` pixels in the y-axis.\n     */\n    translate(tx, ty, options = {}) {\n        options.translateBy = options.translateBy || this.id;\n        options.tx = tx;\n        options.ty = ty;\n        return this.applyToPoints((p) => ({\n            x: (p.x || 0) + tx,\n            y: (p.y || 0) + ty,\n        }), options);\n    }\n    /**\n     * Scales the edge's points (vertices) relative to the given origin.\n     */\n    scale(sx, sy, origin, options = {}) {\n        return this.applyToPoints((p) => {\n            return Point.create(p).scale(sx, sy, origin).toJSON();\n        }, options);\n    }\n    applyToPoints(worker, options = {}) {\n        const attrs = {};\n        const source = this.getSource();\n        const target = this.getTarget();\n        if (Point.isPointLike(source)) {\n            attrs.source = worker(source);\n        }\n        if (Point.isPointLike(target)) {\n            attrs.target = worker(target);\n        }\n        const vertices = this.getVertices();\n        if (vertices.length > 0) {\n            attrs.vertices = vertices.map(worker);\n        }\n        this.store.set(attrs, options);\n        return this;\n    }\n    // #endregion\n    // #region common\n    getBBox() {\n        return this.getPolyline().bbox();\n    }\n    getConnectionPoint() {\n        return this.getPolyline().pointAt(0.5);\n    }\n    getPolyline() {\n        const points = [\n            this.getSourcePoint(),\n            ...this.getVertices().map((vertice) => Point.create(vertice)),\n            this.getTargetPoint(),\n        ];\n        return new Polyline(points);\n    }\n    updateParent(options) {\n        let newParent = null;\n        const source = this.getSourceCell();\n        const target = this.getTargetCell();\n        const prevParent = this.getParent();\n        if (source && target) {\n            if (source === target || source.isDescendantOf(target)) {\n                newParent = target;\n            }\n            else if (target.isDescendantOf(source)) {\n                newParent = source;\n            }\n            else {\n                newParent = Cell.getCommonAncestor(source, target);\n            }\n        }\n        // Unembeds the edge if source and target has no common\n        // ancestor or common ancestor changed\n        if (prevParent && newParent && newParent.id !== prevParent.id) {\n            prevParent.unembed(this, options);\n        }\n        // Embeds the edge if source and target are not same\n        if (newParent && (!prevParent || prevParent.id !== newParent.id)) {\n            newParent.embed(this, options);\n        }\n        return newParent;\n    }\n    hasLoop(options = {}) {\n        const source = this.getSource();\n        const target = this.getTarget();\n        const sourceId = source.cell;\n        const targetId = target.cell;\n        if (!sourceId || !targetId) {\n            return false;\n        }\n        let loop = sourceId === targetId;\n        // Note that there in the deep mode a edge can have a loop,\n        // even if it connects only a parent and its embed.\n        // A loop \"target equals source\" is valid in both shallow and deep mode.\n        // eslint-disable-next-line\n        if (!loop && options.deep && this._model) {\n            const sourceCell = this.getSourceCell();\n            const targetCell = this.getTargetCell();\n            if (sourceCell && targetCell) {\n                loop =\n                    sourceCell.isAncestorOf(targetCell, options) ||\n                        targetCell.isAncestorOf(sourceCell, options);\n            }\n        }\n        return loop;\n    }\n    getFragmentAncestor() {\n        const cells = [this, this.getSourceNode(), this.getTargetNode()].filter((item) => item != null);\n        return this.getCommonAncestor(...cells);\n    }\n    isFragmentDescendantOf(cell) {\n        const ancestor = this.getFragmentAncestor();\n        return (!!ancestor && (ancestor.id === cell.id || ancestor.isDescendantOf(cell)));\n    }\n}\nEdge.defaults = {};\n(function (Edge) {\n    function equalTerminals(a, b) {\n        const a1 = a;\n        const b1 = b;\n        if (a1.cell === b1.cell) {\n            return a1.port === b1.port || (a1.port == null && b1.port == null);\n        }\n        return false;\n    }\n    Edge.equalTerminals = equalTerminals;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    Edge.defaultLabel = {\n        markup: [\n            {\n                tagName: 'rect',\n                selector: 'body',\n            },\n            {\n                tagName: 'text',\n                selector: 'label',\n            },\n        ],\n        attrs: {\n            text: {\n                fill: '#000',\n                fontSize: 14,\n                textAnchor: 'middle',\n                textVerticalAnchor: 'middle',\n                pointerEvents: 'none',\n            },\n            rect: {\n                ref: 'label',\n                fill: '#fff',\n                rx: 3,\n                ry: 3,\n                refWidth: 1,\n                refHeight: 1,\n                refX: 0,\n                refY: 0,\n            },\n        },\n        position: {\n            distance: 0.5,\n        },\n    };\n    function parseStringLabel(text) {\n        return {\n            attrs: { label: { text } },\n        };\n    }\n    Edge.parseStringLabel = parseStringLabel;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    Edge.toStringTag = `X6.${Edge.name}`;\n    function isEdge(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Edge) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const edge = instance;\n        if ((tag == null || tag === Edge.toStringTag) &&\n            typeof edge.isNode === 'function' &&\n            typeof edge.isEdge === 'function' &&\n            typeof edge.prop === 'function' &&\n            typeof edge.attr === 'function' &&\n            typeof edge.disconnect === 'function' &&\n            typeof edge.getSource === 'function' &&\n            typeof edge.getTarget === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Edge.isEdge = isEdge;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    Edge.registry = Registry.create({\n        type: 'edge',\n        process(shape, options) {\n            if (ShareRegistry.exist(shape, false)) {\n                throw new Error(`Edge with name '${shape}' was registered by anthor Node`);\n            }\n            if (typeof options === 'function') {\n                options.config({ shape });\n                return options;\n            }\n            let parent = Edge;\n            // default inherit from 'dege'\n            const { inherit = 'edge' } = options, others = __rest(options, [\"inherit\"]);\n            if (typeof inherit === 'string') {\n                const base = this.get(inherit || 'edge');\n                if (base == null && inherit) {\n                    this.onNotFound(inherit, 'inherited');\n                }\n                else {\n                    parent = base;\n                }\n            }\n            else {\n                parent = inherit;\n            }\n            if (others.constructorName == null) {\n                others.constructorName = shape;\n            }\n            const ctor = parent.define.call(parent, others);\n            ctor.config({ shape });\n            return ctor;\n        },\n    });\n    ShareRegistry.setEdgeRegistry(Edge.registry);\n})(Edge || (Edge = {}));\n(function (Edge) {\n    let counter = 0;\n    function getClassName(name) {\n        if (name) {\n            return StringExt.pascalCase(name);\n        }\n        counter += 1;\n        return `CustomEdge${counter}`;\n    }\n    function define(config) {\n        const { constructorName, overwrite } = config, others = __rest(config, [\"constructorName\", \"overwrite\"]);\n        const ctor = ObjectExt.createClass(getClassName(constructorName || others.shape), this);\n        ctor.config(others);\n        if (others.shape) {\n            Edge.registry.register(others.shape, ctor, overwrite);\n        }\n        return ctor;\n    }\n    Edge.define = define;\n    function create(options) {\n        const shape = options.shape || 'edge';\n        const Ctor = Edge.registry.get(shape);\n        if (Ctor) {\n            return new Ctor(options);\n        }\n        return Edge.registry.onNotFound(shape);\n    }\n    Edge.create = create;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    const shape = 'basic.edge';\n    Edge.config({\n        shape,\n        propHooks(metadata) {\n            const { label, vertices } = metadata, others = __rest(metadata, [\"label\", \"vertices\"]);\n            if (label) {\n                if (others.labels == null) {\n                    others.labels = [];\n                }\n                const formated = typeof label === 'string' ? Edge.parseStringLabel(label) : label;\n                others.labels.push(formated);\n            }\n            if (vertices) {\n                if (Array.isArray(vertices)) {\n                    others.vertices = vertices.map((item) => Point.create(item).toJSON());\n                }\n            }\n            return others;\n        },\n    });\n    Edge.registry.register(shape, Edge);\n})(Edge || (Edge = {}));\n//# sourceMappingURL=edge.js.map","import { ArrayExt, Basecoat } from '@antv/x6-common';\nexport class Collection extends Basecoat {\n    constructor(cells, options = {}) {\n        super();\n        this.length = 0;\n        this.comparator = options.comparator || 'zIndex';\n        this.clean();\n        if (cells) {\n            this.reset(cells, { silent: true });\n        }\n    }\n    toJSON() {\n        return this.cells.map((cell) => cell.toJSON());\n    }\n    add(cells, index, options) {\n        let localIndex;\n        let localOptions;\n        if (typeof index === 'number') {\n            localIndex = index;\n            localOptions = Object.assign({ merge: false }, options);\n        }\n        else {\n            localIndex = this.length;\n            localOptions = Object.assign({ merge: false }, index);\n        }\n        if (localIndex > this.length) {\n            localIndex = this.length;\n        }\n        if (localIndex < 0) {\n            localIndex += this.length + 1;\n        }\n        const entities = Array.isArray(cells) ? cells : [cells];\n        const sortable = this.comparator &&\n            typeof index !== 'number' &&\n            localOptions.sort !== false;\n        const sortAttr = this.comparator || null;\n        let sort = false;\n        const added = [];\n        const merged = [];\n        entities.forEach((cell) => {\n            const existing = this.get(cell);\n            if (existing) {\n                if (localOptions.merge && !cell.isSameStore(existing)) {\n                    existing.setProp(cell.getProp(), options); // merge\n                    merged.push(existing);\n                    if (sortable && !sort) {\n                        if (sortAttr == null || typeof sortAttr === 'function') {\n                            sort = existing.hasChanged();\n                        }\n                        else if (typeof sortAttr === 'string') {\n                            sort = existing.hasChanged(sortAttr);\n                        }\n                        else {\n                            sort = sortAttr.some((key) => existing.hasChanged(key));\n                        }\n                    }\n                }\n            }\n            else {\n                added.push(cell);\n                this.reference(cell);\n            }\n        });\n        if (added.length) {\n            if (sortable) {\n                sort = true;\n            }\n            this.cells.splice(localIndex, 0, ...added);\n            this.length = this.cells.length;\n        }\n        if (sort) {\n            this.sort({ silent: true });\n        }\n        if (!localOptions.silent) {\n            added.forEach((cell, i) => {\n                const args = {\n                    cell,\n                    index: localIndex + i,\n                    options: localOptions,\n                };\n                this.trigger('added', args);\n                if (!localOptions.dryrun) {\n                    cell.notify('added', Object.assign({}, args));\n                }\n            });\n            if (sort) {\n                this.trigger('sorted');\n            }\n            if (added.length || merged.length) {\n                this.trigger('updated', {\n                    added,\n                    merged,\n                    removed: [],\n                    options: localOptions,\n                });\n            }\n        }\n        return this;\n    }\n    remove(cells, options = {}) {\n        const arr = Array.isArray(cells) ? cells : [cells];\n        const removed = this.removeCells(arr, options);\n        if (!options.silent && removed.length > 0) {\n            this.trigger('updated', {\n                options,\n                removed,\n                added: [],\n                merged: [],\n            });\n        }\n        return Array.isArray(cells) ? removed : removed[0];\n    }\n    removeCells(cells, options) {\n        const removed = [];\n        for (let i = 0; i < cells.length; i += 1) {\n            const cell = this.get(cells[i]);\n            if (cell == null) {\n                continue;\n            }\n            const index = this.cells.indexOf(cell);\n            this.cells.splice(index, 1);\n            this.length -= 1;\n            delete this.map[cell.id];\n            removed.push(cell);\n            this.unreference(cell);\n            if (!options.dryrun) {\n                cell.remove();\n            }\n            if (!options.silent) {\n                this.trigger('removed', { cell, index, options });\n                if (!options.dryrun) {\n                    cell.notify('removed', { cell, index, options });\n                }\n            }\n        }\n        return removed;\n    }\n    reset(cells, options = {}) {\n        const previous = this.cells.slice();\n        previous.forEach((cell) => this.unreference(cell));\n        this.clean();\n        this.add(cells, Object.assign({ silent: true }, options));\n        if (!options.silent) {\n            const current = this.cells.slice();\n            this.trigger('reseted', {\n                options,\n                previous,\n                current,\n            });\n            const added = [];\n            const removed = [];\n            current.forEach((a) => {\n                const exist = previous.some((b) => b.id === a.id);\n                if (!exist) {\n                    added.push(a);\n                }\n            });\n            previous.forEach((a) => {\n                const exist = current.some((b) => b.id === a.id);\n                if (!exist) {\n                    removed.push(a);\n                }\n            });\n            this.trigger('updated', { options, added, removed, merged: [] });\n        }\n        return this;\n    }\n    push(cell, options) {\n        return this.add(cell, this.length, options);\n    }\n    pop(options) {\n        const cell = this.at(this.length - 1);\n        return this.remove(cell, options);\n    }\n    unshift(cell, options) {\n        return this.add(cell, 0, options);\n    }\n    shift(options) {\n        const cell = this.at(0);\n        return this.remove(cell, options);\n    }\n    get(cell) {\n        if (cell == null) {\n            return null;\n        }\n        const id = typeof cell === 'string' || typeof cell === 'number' ? cell : cell.id;\n        return this.map[id] || null;\n    }\n    has(cell) {\n        return this.get(cell) != null;\n    }\n    at(index) {\n        if (index < 0) {\n            index += this.length; // eslint-disable-line\n        }\n        return this.cells[index] || null;\n    }\n    first() {\n        return this.at(0);\n    }\n    last() {\n        return this.at(-1);\n    }\n    indexOf(cell) {\n        return this.cells.indexOf(cell);\n    }\n    toArray() {\n        return this.cells.slice();\n    }\n    sort(options = {}) {\n        if (this.comparator != null) {\n            this.cells = ArrayExt.sortBy(this.cells, this.comparator);\n            if (!options.silent) {\n                this.trigger('sorted');\n            }\n        }\n        return this;\n    }\n    clone() {\n        const constructor = this.constructor;\n        return new constructor(this.cells.slice(), {\n            comparator: this.comparator,\n        });\n    }\n    reference(cell) {\n        this.map[cell.id] = cell;\n        cell.on('*', this.notifyCellEvent, this);\n    }\n    unreference(cell) {\n        cell.off('*', this.notifyCellEvent, this);\n        delete this.map[cell.id];\n    }\n    notifyCellEvent(name, args) {\n        const cell = args.cell;\n        this.trigger(`cell:${name}`, args);\n        if (cell) {\n            if (cell.isNode()) {\n                this.trigger(`node:${name}`, Object.assign(Object.assign({}, args), { node: cell }));\n            }\n            else if (cell.isEdge()) {\n                this.trigger(`edge:${name}`, Object.assign(Object.assign({}, args), { edge: cell }));\n            }\n        }\n    }\n    clean() {\n        this.length = 0;\n        this.cells = [];\n        this.map = {};\n    }\n}\n//# sourceMappingURL=collection.js.map","import { FunctionExt, Dijkstra, Basecoat } from '@antv/x6-common';\nimport { Rectangle } from '@antv/x6-geometry';\nimport { Cell } from './cell';\nimport { Edge } from './edge';\nimport { Node } from './node';\nimport { Collection } from './collection';\nexport class Model extends Basecoat {\n    get [Symbol.toStringTag]() {\n        return Model.toStringTag;\n    }\n    constructor(cells = []) {\n        super();\n        this.batches = {};\n        this.addings = new WeakMap();\n        this.nodes = {};\n        this.edges = {};\n        this.outgoings = {};\n        this.incomings = {};\n        this.collection = new Collection(cells);\n        this.setup();\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        const graph = this.graph;\n        if (graph) {\n            if (name === 'sorted' || name === 'reseted' || name === 'updated') {\n                graph.trigger(`model:${name}`, args);\n            }\n            else {\n                graph.trigger(name, args);\n            }\n        }\n        return this;\n    }\n    setup() {\n        const collection = this.collection;\n        collection.on('sorted', () => this.notify('sorted', null));\n        collection.on('updated', (args) => this.notify('updated', args));\n        collection.on('cell:change:zIndex', () => this.sortOnChangeZ());\n        collection.on('added', ({ cell }) => {\n            this.onCellAdded(cell);\n        });\n        collection.on('removed', (args) => {\n            const cell = args.cell;\n            this.onCellRemoved(cell, args.options);\n            // Should trigger remove-event manually after cell was removed.\n            this.notify('cell:removed', args);\n            if (cell.isNode()) {\n                this.notify('node:removed', Object.assign(Object.assign({}, args), { node: cell }));\n            }\n            else if (cell.isEdge()) {\n                this.notify('edge:removed', Object.assign(Object.assign({}, args), { edge: cell }));\n            }\n        });\n        collection.on('reseted', (args) => {\n            this.onReset(args.current);\n            this.notify('reseted', args);\n        });\n        collection.on('edge:change:source', ({ edge }) => this.onEdgeTerminalChanged(edge, 'source'));\n        collection.on('edge:change:target', ({ edge }) => {\n            this.onEdgeTerminalChanged(edge, 'target');\n        });\n    }\n    sortOnChangeZ() {\n        this.collection.sort();\n    }\n    onCellAdded(cell) {\n        const cellId = cell.id;\n        if (cell.isEdge()) {\n            // Auto update edge's parent\n            cell.updateParent();\n            this.edges[cellId] = true;\n            this.onEdgeTerminalChanged(cell, 'source');\n            this.onEdgeTerminalChanged(cell, 'target');\n        }\n        else {\n            this.nodes[cellId] = true;\n        }\n    }\n    onCellRemoved(cell, options) {\n        const cellId = cell.id;\n        if (cell.isEdge()) {\n            delete this.edges[cellId];\n            const source = cell.getSource();\n            const target = cell.getTarget();\n            if (source && source.cell) {\n                const cache = this.outgoings[source.cell];\n                const index = cache ? cache.indexOf(cellId) : -1;\n                if (index >= 0) {\n                    cache.splice(index, 1);\n                    if (cache.length === 0) {\n                        delete this.outgoings[source.cell];\n                    }\n                }\n            }\n            if (target && target.cell) {\n                const cache = this.incomings[target.cell];\n                const index = cache ? cache.indexOf(cellId) : -1;\n                if (index >= 0) {\n                    cache.splice(index, 1);\n                    if (cache.length === 0) {\n                        delete this.incomings[target.cell];\n                    }\n                }\n            }\n        }\n        else {\n            delete this.nodes[cellId];\n        }\n        if (!options.clear) {\n            if (options.disconnectEdges) {\n                this.disconnectConnectedEdges(cell, options);\n            }\n            else {\n                this.removeConnectedEdges(cell, options);\n            }\n        }\n        if (cell.model === this) {\n            cell.model = null;\n        }\n    }\n    onReset(cells) {\n        this.nodes = {};\n        this.edges = {};\n        this.outgoings = {};\n        this.incomings = {};\n        cells.forEach((cell) => this.onCellAdded(cell));\n    }\n    onEdgeTerminalChanged(edge, type) {\n        const ref = type === 'source' ? this.outgoings : this.incomings;\n        const prev = edge.previous(type);\n        if (prev && prev.cell) {\n            const cellId = Cell.isCell(prev.cell) ? prev.cell.id : prev.cell;\n            const cache = ref[cellId];\n            const index = cache ? cache.indexOf(edge.id) : -1;\n            if (index >= 0) {\n                cache.splice(index, 1);\n                if (cache.length === 0) {\n                    delete ref[cellId];\n                }\n            }\n        }\n        const terminal = edge.getTerminal(type);\n        if (terminal && terminal.cell) {\n            const terminalId = Cell.isCell(terminal.cell)\n                ? terminal.cell.id\n                : terminal.cell;\n            const cache = ref[terminalId] || [];\n            const index = cache.indexOf(edge.id);\n            if (index === -1) {\n                cache.push(edge.id);\n            }\n            ref[terminalId] = cache;\n        }\n    }\n    prepareCell(cell, options) {\n        if (!cell.model && (!options || !options.dryrun)) {\n            cell.model = this;\n        }\n        if (cell.zIndex == null) {\n            cell.setZIndex(this.getMaxZIndex() + 1, { silent: true });\n        }\n        return cell;\n    }\n    resetCells(cells, options = {}) {\n        // Do not update model at this time. Because if we just update the graph\n        // with the same json-data, the edge will reference to the old nodes.\n        cells.map((cell) => this.prepareCell(cell, Object.assign(Object.assign({}, options), { dryrun: true })));\n        this.collection.reset(cells, options);\n        // Update model and trigger edge update it's references\n        cells.map((cell) => this.prepareCell(cell, { options }));\n        return this;\n    }\n    clear(options = {}) {\n        const raw = this.getCells();\n        if (raw.length === 0) {\n            return this;\n        }\n        const localOptions = Object.assign(Object.assign({}, options), { clear: true });\n        this.batchUpdate('clear', () => {\n            // The nodes come after the edges.\n            const cells = raw.sort((a, b) => {\n                const v1 = a.isEdge() ? 1 : 2;\n                const v2 = b.isEdge() ? 1 : 2;\n                return v1 - v2;\n            });\n            while (cells.length > 0) {\n                // Note that all the edges are removed first, so it's safe to\n                // remove the nodes without removing the connected edges first.\n                const cell = cells.shift();\n                if (cell) {\n                    cell.remove(localOptions);\n                }\n            }\n        }, localOptions);\n        return this;\n    }\n    addNode(metadata, options = {}) {\n        const node = Node.isNode(metadata) ? metadata : this.createNode(metadata);\n        this.addCell(node, options);\n        return node;\n    }\n    updateNode(metadata, options = {}) {\n        const node = this.createNode(metadata);\n        const prop = node.getProp();\n        node.dispose();\n        return this.updateCell(prop, options);\n    }\n    createNode(metadata) {\n        return Node.create(metadata);\n    }\n    addEdge(metadata, options = {}) {\n        const edge = Edge.isEdge(metadata) ? metadata : this.createEdge(metadata);\n        this.addCell(edge, options);\n        return edge;\n    }\n    createEdge(metadata) {\n        return Edge.create(metadata);\n    }\n    updateEdge(metadata, options = {}) {\n        const edge = this.createEdge(metadata);\n        const prop = edge.getProp();\n        edge.dispose();\n        return this.updateCell(prop, options);\n    }\n    addCell(cell, options = {}) {\n        if (Array.isArray(cell)) {\n            return this.addCells(cell, options);\n        }\n        if (!this.collection.has(cell) && !this.addings.has(cell)) {\n            this.addings.set(cell, true);\n            this.collection.add(this.prepareCell(cell, options), options);\n            cell.eachChild((child) => this.addCell(child, options));\n            this.addings.delete(cell);\n        }\n        return this;\n    }\n    addCells(cells, options = {}) {\n        const count = cells.length;\n        if (count === 0) {\n            return this;\n        }\n        const localOptions = Object.assign(Object.assign({}, options), { position: count - 1, maxPosition: count - 1 });\n        this.startBatch('add', Object.assign(Object.assign({}, localOptions), { cells }));\n        cells.forEach((cell) => {\n            this.addCell(cell, localOptions);\n            localOptions.position -= 1;\n        });\n        this.stopBatch('add', Object.assign(Object.assign({}, localOptions), { cells }));\n        return this;\n    }\n    updateCell(prop, options = {}) {\n        const existing = prop.id && this.getCell(prop.id);\n        if (existing) {\n            return this.batchUpdate('update', () => {\n                Object.entries(prop).forEach(([key, val]) => existing.setProp(key, val, options));\n                return true;\n            }, prop);\n        }\n        return false;\n    }\n    removeCell(obj, options = {}) {\n        const cell = typeof obj === 'string' ? this.getCell(obj) : obj;\n        if (cell && this.has(cell)) {\n            return this.collection.remove(cell, options);\n        }\n        return null;\n    }\n    updateCellId(cell, newId) {\n        if (cell.id === newId)\n            return;\n        this.startBatch('update', { id: newId });\n        cell.prop('id', newId);\n        const newCell = cell.clone({ keepId: true });\n        this.addCell(newCell);\n        // update connected edge terminal\n        const edges = this.getConnectedEdges(cell);\n        edges.forEach((edge) => {\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (sourceCell === cell) {\n                edge.setSource(Object.assign(Object.assign({}, edge.getSource()), { cell: newId }));\n            }\n            if (targetCell === cell) {\n                edge.setTarget(Object.assign(Object.assign({}, edge.getTarget()), { cell: newId }));\n            }\n        });\n        this.removeCell(cell);\n        this.stopBatch('update', { id: newId });\n        return newCell;\n    }\n    removeCells(cells, options = {}) {\n        if (cells.length) {\n            return this.batchUpdate('remove', () => {\n                return cells.map((cell) => this.removeCell(cell, options));\n            });\n        }\n        return [];\n    }\n    removeConnectedEdges(cell, options = {}) {\n        const edges = this.getConnectedEdges(cell);\n        edges.forEach((edge) => {\n            edge.remove(options);\n        });\n        return edges;\n    }\n    disconnectConnectedEdges(cell, options = {}) {\n        const cellId = typeof cell === 'string' ? cell : cell.id;\n        this.getConnectedEdges(cell).forEach((edge) => {\n            const sourceCellId = edge.getSourceCellId();\n            const targetCellId = edge.getTargetCellId();\n            if (sourceCellId === cellId) {\n                edge.setSource({ x: 0, y: 0 }, options);\n            }\n            if (targetCellId === cellId) {\n                edge.setTarget({ x: 0, y: 0 }, options);\n            }\n        });\n    }\n    has(obj) {\n        return this.collection.has(obj);\n    }\n    total() {\n        return this.collection.length;\n    }\n    indexOf(cell) {\n        return this.collection.indexOf(cell);\n    }\n    /**\n     * Returns a cell from the graph by its id.\n     */\n    getCell(id) {\n        return this.collection.get(id);\n    }\n    /**\n     * Returns all the nodes and edges in the graph.\n     */\n    getCells() {\n        return this.collection.toArray();\n    }\n    /**\n     * Returns the first cell (node or edge) in the graph. The first cell is\n     * defined as the cell with the lowest `zIndex`.\n     */\n    getFirstCell() {\n        return this.collection.first();\n    }\n    /**\n     * Returns the last cell (node or edge) in the graph. The last cell is\n     * defined as the cell with the highest `zIndex`.\n     */\n    getLastCell() {\n        return this.collection.last();\n    }\n    /**\n     * Returns the lowest `zIndex` value in the graph.\n     */\n    getMinZIndex() {\n        const first = this.collection.first();\n        return first ? first.getZIndex() || 0 : 0;\n    }\n    /**\n     * Returns the highest `zIndex` value in the graph.\n     */\n    getMaxZIndex() {\n        const last = this.collection.last();\n        return last ? last.getZIndex() || 0 : 0;\n    }\n    getCellsFromCache(cache) {\n        return cache\n            ? Object.keys(cache)\n                .map((id) => this.getCell(id))\n                .filter((cell) => cell != null)\n            : [];\n    }\n    /**\n     * Returns all the nodes in the graph.\n     */\n    getNodes() {\n        return this.getCellsFromCache(this.nodes);\n    }\n    /**\n     * Returns all the edges in the graph.\n     */\n    getEdges() {\n        return this.getCellsFromCache(this.edges);\n    }\n    /**\n     * Returns all outgoing edges for the node.\n     */\n    getOutgoingEdges(cell) {\n        const cellId = typeof cell === 'string' ? cell : cell.id;\n        const cellIds = this.outgoings[cellId];\n        return cellIds\n            ? cellIds\n                .map((id) => this.getCell(id))\n                .filter((cell) => cell && cell.isEdge())\n            : null;\n    }\n    /**\n     * Returns all incoming edges for the node.\n     */\n    getIncomingEdges(cell) {\n        const cellId = typeof cell === 'string' ? cell : cell.id;\n        const cellIds = this.incomings[cellId];\n        return cellIds\n            ? cellIds\n                .map((id) => this.getCell(id))\n                .filter((cell) => cell && cell.isEdge())\n            : null;\n    }\n    /**\n     * Returns edges connected with cell.\n     */\n    getConnectedEdges(cell, options = {}) {\n        const result = [];\n        const node = typeof cell === 'string' ? this.getCell(cell) : cell;\n        if (node == null) {\n            return result;\n        }\n        const cache = {};\n        const indirect = options.indirect;\n        let incoming = options.incoming;\n        let outgoing = options.outgoing;\n        if (incoming == null && outgoing == null) {\n            incoming = outgoing = true;\n        }\n        const collect = (cell, isOutgoing) => {\n            const edges = isOutgoing\n                ? this.getOutgoingEdges(cell)\n                : this.getIncomingEdges(cell);\n            if (edges != null) {\n                edges.forEach((edge) => {\n                    if (cache[edge.id]) {\n                        return;\n                    }\n                    result.push(edge);\n                    cache[edge.id] = true;\n                    if (indirect) {\n                        if (incoming) {\n                            collect(edge, false);\n                        }\n                        if (outgoing) {\n                            collect(edge, true);\n                        }\n                    }\n                });\n            }\n            if (indirect && cell.isEdge()) {\n                const terminal = isOutgoing\n                    ? cell.getTargetCell()\n                    : cell.getSourceCell();\n                if (terminal && terminal.isEdge()) {\n                    if (!cache[terminal.id]) {\n                        result.push(terminal);\n                        collect(terminal, isOutgoing);\n                    }\n                }\n            }\n        };\n        if (outgoing) {\n            collect(node, true);\n        }\n        if (incoming) {\n            collect(node, false);\n        }\n        if (options.deep) {\n            const descendants = node.getDescendants({ deep: true });\n            const embedsCache = {};\n            descendants.forEach((cell) => {\n                if (cell.isNode()) {\n                    embedsCache[cell.id] = true;\n                }\n            });\n            const collectSub = (cell, isOutgoing) => {\n                const edges = isOutgoing\n                    ? this.getOutgoingEdges(cell.id)\n                    : this.getIncomingEdges(cell.id);\n                if (edges != null) {\n                    edges.forEach((edge) => {\n                        if (!cache[edge.id]) {\n                            const sourceCell = edge.getSourceCell();\n                            const targetCell = edge.getTargetCell();\n                            if (!options.enclosed &&\n                                sourceCell &&\n                                embedsCache[sourceCell.id] &&\n                                targetCell &&\n                                embedsCache[targetCell.id]) {\n                                return;\n                            }\n                            result.push(edge);\n                            cache[edge.id] = true;\n                        }\n                    });\n                }\n            };\n            descendants.forEach((cell) => {\n                if (cell.isEdge()) {\n                    return;\n                }\n                if (outgoing) {\n                    collectSub(cell, true);\n                }\n                if (incoming) {\n                    collectSub(cell, false);\n                }\n            });\n        }\n        return result;\n    }\n    isBoundary(cell, isOrigin) {\n        const node = typeof cell === 'string' ? this.getCell(cell) : cell;\n        const arr = isOrigin\n            ? this.getIncomingEdges(node)\n            : this.getOutgoingEdges(node);\n        return arr == null || arr.length === 0;\n    }\n    getBoundaryNodes(isOrigin) {\n        const result = [];\n        Object.keys(this.nodes).forEach((nodeId) => {\n            if (this.isBoundary(nodeId, isOrigin)) {\n                const node = this.getCell(nodeId);\n                if (node) {\n                    result.push(node);\n                }\n            }\n        });\n        return result;\n    }\n    /**\n     * Returns an array of all the roots of the graph.\n     */\n    getRoots() {\n        return this.getBoundaryNodes(true);\n    }\n    /**\n     * Returns an array of all the leafs of the graph.\n     */\n    getLeafs() {\n        return this.getBoundaryNodes(false);\n    }\n    /**\n     * Returns `true` if the node is a root node, i.e. there is no edges\n     * coming to the node.\n     */\n    isRoot(cell) {\n        return this.isBoundary(cell, true);\n    }\n    /**\n     * Returns `true` if the node is a leaf node, i.e. there is no edges\n     * going out from the node.\n     */\n    isLeaf(cell) {\n        return this.isBoundary(cell, false);\n    }\n    /**\n     * Returns all the neighbors of node in the graph. Neighbors are all\n     * the nodes connected to node via either incoming or outgoing edge.\n     */\n    getNeighbors(cell, options = {}) {\n        let incoming = options.incoming;\n        let outgoing = options.outgoing;\n        if (incoming == null && outgoing == null) {\n            incoming = outgoing = true;\n        }\n        const edges = this.getConnectedEdges(cell, options);\n        const map = edges.reduce((memo, edge) => {\n            const hasLoop = edge.hasLoop(options);\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (incoming &&\n                sourceCell &&\n                sourceCell.isNode() &&\n                !memo[sourceCell.id]) {\n                if (hasLoop ||\n                    (sourceCell !== cell &&\n                        (!options.deep || !sourceCell.isDescendantOf(cell)))) {\n                    memo[sourceCell.id] = sourceCell;\n                }\n            }\n            if (outgoing &&\n                targetCell &&\n                targetCell.isNode() &&\n                !memo[targetCell.id]) {\n                if (hasLoop ||\n                    (targetCell !== cell &&\n                        (!options.deep || !targetCell.isDescendantOf(cell)))) {\n                    memo[targetCell.id] = targetCell;\n                }\n            }\n            return memo;\n        }, {});\n        if (cell.isEdge()) {\n            if (incoming) {\n                const sourceCell = cell.getSourceCell();\n                if (sourceCell && sourceCell.isNode() && !map[sourceCell.id]) {\n                    map[sourceCell.id] = sourceCell;\n                }\n            }\n            if (outgoing) {\n                const targetCell = cell.getTargetCell();\n                if (targetCell && targetCell.isNode() && !map[targetCell.id]) {\n                    map[targetCell.id] = targetCell;\n                }\n            }\n        }\n        return Object.keys(map).map((id) => map[id]);\n    }\n    /**\n     * Returns `true` if `cell2` is a neighbor of `cell1`.\n     */\n    isNeighbor(cell1, cell2, options = {}) {\n        let incoming = options.incoming;\n        let outgoing = options.outgoing;\n        if (incoming == null && outgoing == null) {\n            incoming = outgoing = true;\n        }\n        return this.getConnectedEdges(cell1, options).some((edge) => {\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (incoming && sourceCell && sourceCell.id === cell2.id) {\n                return true;\n            }\n            if (outgoing && targetCell && targetCell.id === cell2.id) {\n                return true;\n            }\n            return false;\n        });\n    }\n    getSuccessors(cell, options = {}) {\n        const successors = [];\n        this.search(cell, (curr, distance) => {\n            if (curr !== cell && this.matchDistance(distance, options.distance)) {\n                successors.push(curr);\n            }\n        }, Object.assign(Object.assign({}, options), { outgoing: true }));\n        return successors;\n    }\n    /**\n     * Returns `true` if `cell2` is a successor of `cell1`.\n     */\n    isSuccessor(cell1, cell2, options = {}) {\n        let result = false;\n        this.search(cell1, (curr, distance) => {\n            if (curr === cell2 &&\n                curr !== cell1 &&\n                this.matchDistance(distance, options.distance)) {\n                result = true;\n                return false;\n            }\n        }, Object.assign(Object.assign({}, options), { outgoing: true }));\n        return result;\n    }\n    getPredecessors(cell, options = {}) {\n        const predecessors = [];\n        this.search(cell, (curr, distance) => {\n            if (curr !== cell && this.matchDistance(distance, options.distance)) {\n                predecessors.push(curr);\n            }\n        }, Object.assign(Object.assign({}, options), { incoming: true }));\n        return predecessors;\n    }\n    /**\n     * Returns `true` if `cell2` is a predecessor of `cell1`.\n     */\n    isPredecessor(cell1, cell2, options = {}) {\n        let result = false;\n        this.search(cell1, (curr, distance) => {\n            if (curr === cell2 &&\n                curr !== cell1 &&\n                this.matchDistance(distance, options.distance)) {\n                result = true;\n                return false;\n            }\n        }, Object.assign(Object.assign({}, options), { incoming: true }));\n        return result;\n    }\n    matchDistance(distance, preset) {\n        if (preset == null) {\n            return true;\n        }\n        if (typeof preset === 'function') {\n            return preset(distance);\n        }\n        if (Array.isArray(preset) && preset.includes(distance)) {\n            return true;\n        }\n        return distance === preset;\n    }\n    /**\n     * Returns the common ancestor of the passed cells.\n     */\n    getCommonAncestor(...cells) {\n        const arr = [];\n        cells.forEach((item) => {\n            if (item) {\n                if (Array.isArray(item)) {\n                    arr.push(...item);\n                }\n                else {\n                    arr.push(item);\n                }\n            }\n        });\n        return Cell.getCommonAncestor(...arr);\n    }\n    /**\n     * Returns an array of cells that result from finding nodes/edges that\n     * are connected to any of the cells in the cells array. This function\n     * loops over cells and if the current cell is a edge, it collects its\n     * source/target nodes; if it is an node, it collects its incoming and\n     * outgoing edges if both the edge terminal (source/target) are in the\n     * cells array.\n     */\n    getSubGraph(cells, options = {}) {\n        const subgraph = [];\n        const cache = {};\n        const nodes = [];\n        const edges = [];\n        const collect = (cell) => {\n            if (!cache[cell.id]) {\n                subgraph.push(cell);\n                cache[cell.id] = cell;\n                if (cell.isEdge()) {\n                    edges.push(cell);\n                }\n                if (cell.isNode()) {\n                    nodes.push(cell);\n                }\n            }\n        };\n        cells.forEach((cell) => {\n            collect(cell);\n            if (options.deep) {\n                const descendants = cell.getDescendants({ deep: true });\n                descendants.forEach((descendant) => collect(descendant));\n            }\n        });\n        edges.forEach((edge) => {\n            // For edges, include their source & target\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (sourceCell && !cache[sourceCell.id]) {\n                subgraph.push(sourceCell);\n                cache[sourceCell.id] = sourceCell;\n                if (sourceCell.isNode()) {\n                    nodes.push(sourceCell);\n                }\n            }\n            if (targetCell && !cache[targetCell.id]) {\n                subgraph.push(targetCell);\n                cache[targetCell.id] = targetCell;\n                if (targetCell.isNode()) {\n                    nodes.push(targetCell);\n                }\n            }\n        });\n        nodes.forEach((node) => {\n            // For nodes, include their connected edges if their source/target\n            // is in the subgraph.\n            const edges = this.getConnectedEdges(node, options);\n            edges.forEach((edge) => {\n                const sourceCell = edge.getSourceCell();\n                const targetCell = edge.getTargetCell();\n                if (!cache[edge.id] &&\n                    sourceCell &&\n                    cache[sourceCell.id] &&\n                    targetCell &&\n                    cache[targetCell.id]) {\n                    subgraph.push(edge);\n                    cache[edge.id] = edge;\n                }\n            });\n        });\n        return subgraph;\n    }\n    /**\n     * Clones the whole subgraph (including all the connected links whose\n     * source/target is in the subgraph). If `options.deep` is `true`, also\n     * take into account all the embedded cells of all the subgraph cells.\n     *\n     * Returns a map of the form: { [original cell ID]: [clone] }.\n     */\n    cloneSubGraph(cells, options = {}) {\n        const subgraph = this.getSubGraph(cells, options);\n        return this.cloneCells(subgraph);\n    }\n    cloneCells(cells) {\n        return Cell.cloneCells(cells);\n    }\n    getNodesFromPoint(x, y) {\n        const p = typeof x === 'number' ? { x, y: y || 0 } : x;\n        return this.getNodes().filter((node) => {\n            return node.getBBox().containsPoint(p);\n        });\n    }\n    getNodesInArea(x, y, w, h, options) {\n        const rect = typeof x === 'number'\n            ? new Rectangle(x, y, w, h)\n            : Rectangle.create(x);\n        const opts = typeof x === 'number' ? options : y;\n        const strict = opts && opts.strict;\n        return this.getNodes().filter((node) => {\n            const bbox = node.getBBox();\n            return strict ? rect.containsRect(bbox) : rect.isIntersectWithRect(bbox);\n        });\n    }\n    getEdgesInArea(x, y, w, h, options) {\n        const rect = typeof x === 'number'\n            ? new Rectangle(x, y, w, h)\n            : Rectangle.create(x);\n        const opts = typeof x === 'number' ? options : y;\n        const strict = opts && opts.strict;\n        return this.getEdges().filter((edge) => {\n            const bbox = edge.getBBox();\n            if (bbox.width === 0) {\n                bbox.inflate(1, 0);\n            }\n            else if (bbox.height === 0) {\n                bbox.inflate(0, 1);\n            }\n            return strict ? rect.containsRect(bbox) : rect.isIntersectWithRect(bbox);\n        });\n    }\n    getNodesUnderNode(node, options = {}) {\n        const bbox = node.getBBox();\n        const nodes = options.by == null || options.by === 'bbox'\n            ? this.getNodesInArea(bbox)\n            : this.getNodesFromPoint(bbox[options.by]);\n        return nodes.filter((curr) => node.id !== curr.id && !curr.isDescendantOf(node));\n    }\n    /**\n     * Returns the bounding box that surrounds all cells in the graph.\n     */\n    getAllCellsBBox() {\n        return this.getCellsBBox(this.getCells());\n    }\n    /**\n     * Returns the bounding box that surrounds all the given cells.\n     */\n    getCellsBBox(cells, options = {}) {\n        return Cell.getCellsBBox(cells, options);\n    }\n    // #region search\n    search(cell, iterator, options = {}) {\n        if (options.breadthFirst) {\n            this.breadthFirstSearch(cell, iterator, options);\n        }\n        else {\n            this.depthFirstSearch(cell, iterator, options);\n        }\n    }\n    breadthFirstSearch(cell, iterator, options = {}) {\n        const queue = [];\n        const visited = {};\n        const distance = {};\n        queue.push(cell);\n        distance[cell.id] = 0;\n        while (queue.length > 0) {\n            const next = queue.shift();\n            if (next == null || visited[next.id]) {\n                continue;\n            }\n            visited[next.id] = true;\n            if (FunctionExt.call(iterator, this, next, distance[next.id]) === false) {\n                continue;\n            }\n            const neighbors = this.getNeighbors(next, options);\n            neighbors.forEach((neighbor) => {\n                distance[neighbor.id] = distance[next.id] + 1;\n                queue.push(neighbor);\n            });\n        }\n    }\n    depthFirstSearch(cell, iterator, options = {}) {\n        const queue = [];\n        const visited = {};\n        const distance = {};\n        queue.push(cell);\n        distance[cell.id] = 0;\n        while (queue.length > 0) {\n            const next = queue.pop();\n            if (next == null || visited[next.id]) {\n                continue;\n            }\n            visited[next.id] = true;\n            if (FunctionExt.call(iterator, this, next, distance[next.id]) === false) {\n                continue;\n            }\n            const neighbors = this.getNeighbors(next, options);\n            const lastIndex = queue.length;\n            neighbors.forEach((neighbor) => {\n                distance[neighbor.id] = distance[next.id] + 1;\n                queue.splice(lastIndex, 0, neighbor);\n            });\n        }\n    }\n    // #endregion\n    // #region shortest path\n    /** *\n     * Returns an array of IDs of nodes on the shortest\n     * path between source and target.\n     */\n    getShortestPath(source, target, options = {}) {\n        const adjacencyList = {};\n        this.getEdges().forEach((edge) => {\n            const sourceId = edge.getSourceCellId();\n            const targetId = edge.getTargetCellId();\n            if (sourceId && targetId) {\n                if (!adjacencyList[sourceId]) {\n                    adjacencyList[sourceId] = [];\n                }\n                if (!adjacencyList[targetId]) {\n                    adjacencyList[targetId] = [];\n                }\n                adjacencyList[sourceId].push(targetId);\n                if (!options.directed) {\n                    adjacencyList[targetId].push(sourceId);\n                }\n            }\n        });\n        const sourceId = typeof source === 'string' ? source : source.id;\n        const previous = Dijkstra.run(adjacencyList, sourceId, options.weight);\n        const path = [];\n        let targetId = typeof target === 'string' ? target : target.id;\n        if (previous[targetId]) {\n            path.push(targetId);\n        }\n        while ((targetId = previous[targetId])) {\n            path.unshift(targetId);\n        }\n        return path;\n    }\n    // #endregion\n    // #region transform\n    /**\n     * Translate all cells in the graph by `tx` and `ty` pixels.\n     */\n    translate(tx, ty, options) {\n        this.getCells()\n            .filter((cell) => !cell.hasParent())\n            .forEach((cell) => cell.translate(tx, ty, options));\n        return this;\n    }\n    resize(width, height, options) {\n        return this.resizeCells(width, height, this.getCells(), options);\n    }\n    resizeCells(width, height, cells, options = {}) {\n        const bbox = this.getCellsBBox(cells);\n        if (bbox) {\n            const sx = Math.max(width / bbox.width, 0);\n            const sy = Math.max(height / bbox.height, 0);\n            const origin = bbox.getOrigin();\n            cells.forEach((cell) => cell.scale(sx, sy, origin, options));\n        }\n        return this;\n    }\n    // #endregion\n    // #region serialize/deserialize\n    toJSON(options = {}) {\n        return Model.toJSON(this.getCells(), options);\n    }\n    parseJSON(data) {\n        return Model.fromJSON(data);\n    }\n    fromJSON(data, options = {}) {\n        const cells = this.parseJSON(data);\n        this.resetCells(cells, options);\n        return this;\n    }\n    // #endregion\n    // #region batch\n    startBatch(name, data = {}) {\n        this.batches[name] = (this.batches[name] || 0) + 1;\n        this.notify('batch:start', { name, data });\n        return this;\n    }\n    stopBatch(name, data = {}) {\n        this.batches[name] = (this.batches[name] || 0) - 1;\n        this.notify('batch:stop', { name, data });\n        return this;\n    }\n    batchUpdate(name, execute, data = {}) {\n        this.startBatch(name, data);\n        const result = execute();\n        this.stopBatch(name, data);\n        return result;\n    }\n    hasActiveBatch(name = Object.keys(this.batches)) {\n        const names = Array.isArray(name) ? name : [name];\n        return names.some((batch) => this.batches[batch] > 0);\n    }\n}\n(function (Model) {\n    Model.toStringTag = `X6.${Model.name}`;\n    function isModel(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Model) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const model = instance;\n        if ((tag == null || tag === Model.toStringTag) &&\n            typeof model.addNode === 'function' &&\n            typeof model.addEdge === 'function' &&\n            model.collection != null) {\n            return true;\n        }\n        return false;\n    }\n    Model.isModel = isModel;\n})(Model || (Model = {}));\n(function (Model) {\n    function toJSON(cells, options = {}) {\n        return {\n            cells: cells.map((cell) => cell.toJSON(options)),\n        };\n    }\n    Model.toJSON = toJSON;\n    function fromJSON(data) {\n        const cells = [];\n        if (Array.isArray(data)) {\n            cells.push(...data);\n        }\n        else {\n            if (data.cells) {\n                cells.push(...data.cells);\n            }\n            if (data.nodes) {\n                data.nodes.forEach((node) => {\n                    if (node.shape == null) {\n                        node.shape = 'rect';\n                    }\n                    cells.push(node);\n                });\n            }\n            if (data.edges) {\n                data.edges.forEach((edge) => {\n                    if (edge.shape == null) {\n                        edge.shape = 'edge';\n                    }\n                    cells.push(edge);\n                });\n            }\n        }\n        return cells.map((cell) => {\n            const type = cell.shape;\n            if (type) {\n                if (Node.registry.exist(type)) {\n                    return Node.create(cell);\n                }\n                if (Edge.registry.exist(type)) {\n                    return Edge.create(cell);\n                }\n            }\n            throw new Error('The `shape` should be specified when creating a node/edge instance');\n        });\n    }\n    Model.fromJSON = fromJSON;\n})(Model || (Model = {}));\n//# sourceMappingURL=model.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Node } from '../model';\nexport class Base extends Node {\n    get label() {\n        return this.getLabel();\n    }\n    set label(val) {\n        this.setLabel(val);\n    }\n    getLabel() {\n        return this.getAttrByPath('text/text');\n    }\n    setLabel(label, options) {\n        if (label == null) {\n            this.removeLabel();\n        }\n        else {\n            this.setAttrByPath('text/text', label, options);\n        }\n        return this;\n    }\n    removeLabel() {\n        this.removeAttrByPath('text/text');\n        return this;\n    }\n}\n(function (Base) {\n    Base.bodyAttr = {\n        fill: '#ffffff',\n        stroke: '#333333',\n        strokeWidth: 2,\n    };\n    Base.labelAttr = {\n        fontSize: 14,\n        fill: '#000000',\n        refX: 0.5,\n        refY: 0.5,\n        textAnchor: 'middle',\n        textVerticalAnchor: 'middle',\n        fontFamily: 'Arial, helvetica, sans-serif',\n    };\n    Base.config({\n        attrs: { text: Object.assign({}, Base.labelAttr) },\n        propHooks(metadata) {\n            const { label } = metadata, others = __rest(metadata, [\"label\"]);\n            if (label) {\n                ObjectExt.setByPath(others, 'attrs/text/text', label);\n            }\n            return others;\n        },\n        visible: true,\n    });\n})(Base || (Base = {}));\n//# sourceMappingURL=base.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport function getMarkup(tagName, selector = 'body') {\n    return [\n        {\n            tagName,\n            selector,\n        },\n        {\n            tagName: 'text',\n            selector: 'label',\n        },\n    ];\n}\nexport function getImageUrlHook(attrName = 'xlink:href') {\n    const hook = (metadata) => {\n        const { imageUrl, imageWidth, imageHeight } = metadata, others = __rest(metadata, [\"imageUrl\", \"imageWidth\", \"imageHeight\"]);\n        if (imageUrl != null || imageWidth != null || imageHeight != null) {\n            const apply = () => {\n                if (others.attrs) {\n                    const image = others.attrs.image;\n                    if (imageUrl != null) {\n                        image[attrName] = imageUrl;\n                    }\n                    if (imageWidth != null) {\n                        image.width = imageWidth;\n                    }\n                    if (imageHeight != null) {\n                        image.height = imageHeight;\n                    }\n                    others.attrs.image = image;\n                }\n            };\n            if (others.attrs) {\n                if (others.attrs.image == null) {\n                    others.attrs.image = {};\n                }\n                apply();\n            }\n            else {\n                others.attrs = {\n                    image: {},\n                };\n                apply();\n            }\n        }\n        return others;\n    };\n    return hook;\n}\nexport function createShape(shape, config, options = {}) {\n    const defaults = {\n        constructorName: shape,\n        markup: getMarkup(shape, options.selector),\n        attrs: {\n            [shape]: Object.assign({}, Base.bodyAttr),\n        },\n    };\n    const base = options.parent || Base;\n    return base.define(ObjectExt.merge(defaults, config, { shape }));\n}\n//# sourceMappingURL=util.js.map","import { createShape } from './util';\nexport const Rect = createShape('rect', {\n    attrs: {\n        body: {\n            refWidth: '100%',\n            refHeight: '100%',\n        },\n    },\n});\n//# sourceMappingURL=rect.js.map","import { Edge as EdgeBase } from '../model/edge';\nexport const Edge = EdgeBase.define({\n    shape: 'edge',\n    markup: [\n        {\n            tagName: 'path',\n            selector: 'wrap',\n            groupSelector: 'lines',\n            attrs: {\n                fill: 'none',\n                cursor: 'pointer',\n                stroke: 'transparent',\n                strokeLinecap: 'round',\n            },\n        },\n        {\n            tagName: 'path',\n            selector: 'line',\n            groupSelector: 'lines',\n            attrs: {\n                fill: 'none',\n                pointerEvents: 'none',\n            },\n        },\n    ],\n    attrs: {\n        lines: {\n            connection: true,\n            strokeLinejoin: 'round',\n        },\n        wrap: {\n            strokeWidth: 10,\n        },\n        line: {\n            stroke: '#333',\n            strokeWidth: 2,\n            targetMarker: 'classic',\n        },\n    },\n});\n//# sourceMappingURL=edge.js.map","import { createShape } from './util';\nexport const Ellipse = createShape('ellipse', {\n    attrs: {\n        body: {\n            refCx: '50%',\n            refCy: '50%',\n            refRx: '50%',\n            refRy: '50%',\n        },\n    },\n});\n//# sourceMappingURL=ellipse.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Point } from '@antv/x6-geometry';\nimport { ObjectExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport class Poly extends Base {\n    get points() {\n        return this.getPoints();\n    }\n    set points(pts) {\n        this.setPoints(pts);\n    }\n    getPoints() {\n        return this.getAttrByPath('body/refPoints');\n    }\n    setPoints(points, options) {\n        if (points == null) {\n            this.removePoints();\n        }\n        else {\n            this.setAttrByPath('body/refPoints', Poly.pointsToString(points), options);\n        }\n        return this;\n    }\n    removePoints() {\n        this.removeAttrByPath('body/refPoints');\n        return this;\n    }\n}\n(function (Poly) {\n    function pointsToString(points) {\n        return typeof points === 'string'\n            ? points\n            : points\n                .map((p) => {\n                if (Array.isArray(p)) {\n                    return p.join(',');\n                }\n                if (Point.isPointLike(p)) {\n                    return `${p.x}, ${p.y}`;\n                }\n                return '';\n            })\n                .join(' ');\n    }\n    Poly.pointsToString = pointsToString;\n    Poly.config({\n        propHooks(metadata) {\n            const { points } = metadata, others = __rest(metadata, [\"points\"]);\n            if (points) {\n                const data = pointsToString(points);\n                if (data) {\n                    ObjectExt.setByPath(others, 'attrs/body/refPoints', data);\n                }\n            }\n            return others;\n        },\n    });\n})(Poly || (Poly = {}));\n//# sourceMappingURL=poly.js.map","import { Poly } from './poly';\nimport { createShape } from './util';\nexport const Polygon = createShape('polygon', {}, { parent: Poly });\n//# sourceMappingURL=polygon.js.map","import { Poly } from './poly';\nimport { createShape } from './util';\nexport const Polyline = createShape('polyline', {}, { parent: Poly });\n//# sourceMappingURL=polyline.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport const Path = Base.define({\n    shape: 'path',\n    markup: [\n        {\n            tagName: 'rect',\n            selector: 'bg',\n        },\n        {\n            tagName: 'path',\n            selector: 'body',\n        },\n        {\n            tagName: 'text',\n            selector: 'label',\n        },\n    ],\n    attrs: {\n        bg: {\n            refWidth: '100%',\n            refHeight: '100%',\n            fill: 'none',\n            stroke: 'none',\n            pointerEvents: 'all',\n        },\n        body: {\n            fill: 'none',\n            stroke: '#000',\n            strokeWidth: 2,\n        },\n    },\n    propHooks(metadata) {\n        const { path } = metadata, others = __rest(metadata, [\"path\"]);\n        if (path) {\n            ObjectExt.setByPath(others, 'attrs/body/refD', path);\n        }\n        return others;\n    },\n});\n//# sourceMappingURL=path.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Platform, Dom, FunctionExt, ObjectExt } from '@antv/x6-common';\nimport { Attr } from '../registry';\nimport { Base } from './base';\nexport const TextBlock = Base.define({\n    shape: 'text-block',\n    markup: [\n        {\n            tagName: 'rect',\n            selector: 'body',\n        },\n        Platform.SUPPORT_FOREIGNOBJECT\n            ? {\n                tagName: 'foreignObject',\n                selector: 'foreignObject',\n                children: [\n                    {\n                        tagName: 'div',\n                        ns: Dom.ns.xhtml,\n                        selector: 'label',\n                        style: {\n                            width: '100%',\n                            height: '100%',\n                            position: 'static',\n                            backgroundColor: 'transparent',\n                            textAlign: 'center',\n                            margin: 0,\n                            padding: '0px 5px',\n                            boxSizing: 'border-box',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                        },\n                    },\n                ],\n            }\n            : {\n                tagName: 'text',\n                selector: 'label',\n                attrs: {\n                    textAnchor: 'middle',\n                },\n            },\n    ],\n    attrs: {\n        body: Object.assign(Object.assign({}, Base.bodyAttr), { refWidth: '100%', refHeight: '100%' }),\n        foreignObject: {\n            refWidth: '100%',\n            refHeight: '100%',\n        },\n        label: {\n            style: {\n                fontSize: 14,\n            },\n        },\n    },\n    propHooks(metadata) {\n        const { text } = metadata, others = __rest(metadata, [\"text\"]);\n        if (text) {\n            ObjectExt.setByPath(others, 'attrs/label/text', text);\n        }\n        return others;\n    },\n    attrHooks: {\n        text: {\n            set(text, { cell, view, refBBox, elem, attrs }) {\n                if (elem instanceof HTMLElement) {\n                    elem.textContent = text;\n                }\n                else {\n                    // No foreign object\n                    const style = attrs.style || {};\n                    const wrapValue = { text, width: -5, height: '100%' };\n                    const wrapAttrs = Object.assign({ textVerticalAnchor: 'middle' }, style);\n                    const textWrap = Attr.presets.textWrap;\n                    FunctionExt.call(textWrap.set, this, wrapValue, {\n                        cell,\n                        view,\n                        elem,\n                        refBBox,\n                        attrs: wrapAttrs,\n                    });\n                    return { fill: style.color || null };\n                }\n            },\n            position(text, { refBBox, elem }) {\n                if (elem instanceof SVGElement) {\n                    return refBBox.getCenter();\n                }\n            },\n        },\n    },\n});\n//# sourceMappingURL=text-block.js.map","import { getImageUrlHook, createShape } from './util';\nexport const Image = createShape('image', {\n    attrs: {\n        image: {\n            refWidth: '100%',\n            refHeight: '100%',\n        },\n    },\n    propHooks: getImageUrlHook(),\n}, {\n    selector: 'image',\n});\n//# sourceMappingURL=image.js.map","import { createShape } from './util';\nexport const Circle = createShape('circle', {\n    attrs: {\n        body: {\n            refCx: '50%',\n            refCy: '50%',\n            refR: '50%',\n        },\n    },\n});\n//# sourceMappingURL=circle.js.map","import { ArrayExt, FunctionExt, Dom } from '@antv/x6-common';\nimport { Rectangle, Point, GeometryUtil } from '@antv/x6-geometry';\nimport { Config } from '../config';\nimport { Cell } from '../model/cell';\nimport { CellView } from './cell';\nimport { Markup } from './markup';\nexport class NodeView extends CellView {\n    constructor() {\n        super(...arguments);\n        this.portsCache = {};\n        // #endregion\n    }\n    get [Symbol.toStringTag]() {\n        return NodeView.toStringTag;\n    }\n    getContainerClassName() {\n        const classList = [\n            super.getContainerClassName(),\n            this.prefixClassName('node'),\n        ];\n        if (!this.can('nodeMovable')) {\n            classList.push(this.prefixClassName('node-immovable'));\n        }\n        return classList.join(' ');\n    }\n    updateClassName(e) {\n        const target = e.target;\n        if (target.hasAttribute('magnet')) {\n            // port\n            const className = this.prefixClassName('port-unconnectable');\n            if (this.can('magnetConnectable')) {\n                Dom.removeClass(target, className);\n            }\n            else {\n                Dom.addClass(target, className);\n            }\n        }\n        else {\n            // node\n            const className = this.prefixClassName('node-immovable');\n            if (this.can('nodeMovable')) {\n                this.removeClass(className);\n            }\n            else {\n                this.addClass(className);\n            }\n        }\n    }\n    isNodeView() {\n        return true;\n    }\n    confirmUpdate(flag, options = {}) {\n        let ret = flag;\n        if (this.hasAction(ret, 'ports')) {\n            this.removePorts();\n            this.cleanPortsCache();\n        }\n        if (this.hasAction(ret, 'render')) {\n            this.render();\n            ret = this.removeAction(ret, [\n                'render',\n                'update',\n                'resize',\n                'translate',\n                'rotate',\n                'ports',\n                'tools',\n            ]);\n        }\n        else {\n            ret = this.handleAction(ret, 'resize', () => this.resize(), 'update');\n            ret = this.handleAction(ret, 'update', () => this.update(), \n            // `update()` will render ports when useCSSSelectors are enabled\n            Config.useCSSSelector ? 'ports' : null);\n            ret = this.handleAction(ret, 'translate', () => this.translate());\n            ret = this.handleAction(ret, 'rotate', () => this.rotate());\n            ret = this.handleAction(ret, 'ports', () => this.renderPorts());\n            ret = this.handleAction(ret, 'tools', () => {\n                if (this.getFlag('tools') === flag) {\n                    this.renderTools();\n                }\n                else {\n                    this.updateTools(options);\n                }\n            });\n        }\n        return ret;\n    }\n    update(partialAttrs) {\n        this.cleanCache();\n        // When CSS selector strings are used, make sure no rule matches port nodes.\n        if (Config.useCSSSelector) {\n            this.removePorts();\n        }\n        const node = this.cell;\n        const size = node.getSize();\n        const attrs = node.getAttrs();\n        this.updateAttrs(this.container, attrs, {\n            attrs: partialAttrs === attrs ? null : partialAttrs,\n            rootBBox: new Rectangle(0, 0, size.width, size.height),\n            selectors: this.selectors,\n        });\n        if (Config.useCSSSelector) {\n            this.renderPorts();\n        }\n    }\n    renderMarkup() {\n        const markup = this.cell.markup;\n        if (markup) {\n            if (typeof markup === 'string') {\n                throw new TypeError('Not support string markup.');\n            }\n            return this.renderJSONMarkup(markup);\n        }\n        throw new TypeError('Invalid node markup.');\n    }\n    renderJSONMarkup(markup) {\n        const ret = this.parseJSONMarkup(markup, this.container);\n        this.selectors = ret.selectors;\n        this.container.appendChild(ret.fragment);\n    }\n    render() {\n        this.empty();\n        this.renderMarkup();\n        this.resize();\n        this.updateTransform();\n        if (!Config.useCSSSelector) {\n            this.renderPorts();\n        }\n        this.renderTools();\n        return this;\n    }\n    resize() {\n        if (this.cell.getAngle()) {\n            this.rotate();\n        }\n        this.update();\n    }\n    translate() {\n        this.updateTransform();\n    }\n    rotate() {\n        this.updateTransform();\n    }\n    getTranslationString() {\n        const position = this.cell.getPosition();\n        return `translate(${position.x},${position.y})`;\n    }\n    getRotationString() {\n        const angle = this.cell.getAngle();\n        if (angle) {\n            const size = this.cell.getSize();\n            return `rotate(${angle},${size.width / 2},${size.height / 2})`;\n        }\n    }\n    updateTransform() {\n        let transform = this.getTranslationString();\n        const rot = this.getRotationString();\n        if (rot) {\n            transform += ` ${rot}`;\n        }\n        this.container.setAttribute('transform', transform);\n    }\n    // #region ports\n    findPortElem(portId, selector) {\n        const cache = portId ? this.portsCache[portId] : null;\n        if (!cache) {\n            return null;\n        }\n        const portRoot = cache.portContentElement;\n        const portSelectors = cache.portContentSelectors || {};\n        return this.findOne(selector, portRoot, portSelectors);\n    }\n    cleanPortsCache() {\n        this.portsCache = {};\n    }\n    removePorts() {\n        Object.values(this.portsCache).forEach((cached) => {\n            Dom.remove(cached.portElement);\n        });\n    }\n    renderPorts() {\n        const container = this.container;\n        // References to rendered elements without z-index\n        const references = [];\n        container.childNodes.forEach((child) => {\n            references.push(child);\n        });\n        const parsedPorts = this.cell.getParsedPorts();\n        const portsGropsByZ = ArrayExt.groupBy(parsedPorts, 'zIndex');\n        const autoZIndexKey = 'auto';\n        // render non-z first\n        if (portsGropsByZ[autoZIndexKey]) {\n            portsGropsByZ[autoZIndexKey].forEach((port) => {\n                const portElement = this.getPortElement(port);\n                container.append(portElement);\n                references.push(portElement);\n            });\n        }\n        Object.keys(portsGropsByZ).forEach((key) => {\n            if (key !== autoZIndexKey) {\n                const zIndex = parseInt(key, 10);\n                this.appendPorts(portsGropsByZ[key], zIndex, references);\n            }\n        });\n        this.updatePorts();\n    }\n    appendPorts(ports, zIndex, refs) {\n        const elems = ports.map((p) => this.getPortElement(p));\n        if (refs[zIndex] || zIndex < 0) {\n            Dom.before(refs[Math.max(zIndex, 0)], elems);\n        }\n        else {\n            Dom.append(this.container, elems);\n        }\n    }\n    getPortElement(port) {\n        const cached = this.portsCache[port.id];\n        if (cached) {\n            return cached.portElement;\n        }\n        return this.createPortElement(port);\n    }\n    createPortElement(port) {\n        let renderResult = Markup.renderMarkup(this.cell.getPortContainerMarkup());\n        const portElement = renderResult.elem;\n        if (portElement == null) {\n            throw new Error('Invalid port container markup.');\n        }\n        renderResult = Markup.renderMarkup(this.getPortMarkup(port));\n        const portContentElement = renderResult.elem;\n        const portContentSelectors = renderResult.selectors;\n        if (portContentElement == null) {\n            throw new Error('Invalid port markup.');\n        }\n        this.setAttrs({\n            port: port.id,\n            'port-group': port.group,\n        }, portContentElement);\n        let portClass = 'x6-port';\n        if (port.group) {\n            portClass += ` x6-port-${port.group}`;\n        }\n        Dom.addClass(portElement, portClass);\n        Dom.addClass(portElement, 'x6-port');\n        Dom.addClass(portContentElement, 'x6-port-body');\n        portElement.appendChild(portContentElement);\n        let portSelectors = portContentSelectors;\n        let portLabelElement;\n        let portLabelSelectors;\n        const existLabel = this.existPortLabel(port);\n        if (existLabel) {\n            renderResult = Markup.renderMarkup(this.getPortLabelMarkup(port.label));\n            portLabelElement = renderResult.elem;\n            portLabelSelectors = renderResult.selectors;\n            if (portLabelElement == null) {\n                throw new Error('Invalid port label markup.');\n            }\n            if (portContentSelectors && portLabelSelectors) {\n                // eslint-disable-next-line\n                for (const key in portLabelSelectors) {\n                    if (portContentSelectors[key] && key !== this.rootSelector) {\n                        throw new Error('Selectors within port must be unique.');\n                    }\n                }\n                portSelectors = Object.assign(Object.assign({}, portContentSelectors), portLabelSelectors);\n            }\n            Dom.addClass(portLabelElement, 'x6-port-label');\n            portElement.appendChild(portLabelElement);\n        }\n        this.portsCache[port.id] = {\n            portElement,\n            portSelectors,\n            portLabelElement,\n            portLabelSelectors,\n            portContentElement,\n            portContentSelectors,\n        };\n        if (this.graph.options.onPortRendered) {\n            this.graph.options.onPortRendered({\n                port,\n                node: this.cell,\n                container: portElement,\n                selectors: portSelectors,\n                labelContainer: portLabelElement,\n                labelSelectors: portLabelSelectors,\n                contentContainer: portContentElement,\n                contentSelectors: portContentSelectors,\n            });\n        }\n        return portElement;\n    }\n    updatePorts() {\n        const groups = this.cell.getParsedGroups();\n        const groupList = Object.keys(groups);\n        if (groupList.length === 0) {\n            this.updatePortGroup();\n        }\n        else {\n            groupList.forEach((groupName) => this.updatePortGroup(groupName));\n        }\n    }\n    updatePortGroup(groupName) {\n        const bbox = Rectangle.fromSize(this.cell.getSize());\n        const metrics = this.cell.getPortsLayoutByGroup(groupName, bbox);\n        for (let i = 0, n = metrics.length; i < n; i += 1) {\n            const metric = metrics[i];\n            const portId = metric.portId;\n            const cached = this.portsCache[portId] || {};\n            const portLayout = metric.portLayout;\n            this.applyPortTransform(cached.portElement, portLayout);\n            if (metric.portAttrs != null) {\n                const options = {\n                    selectors: cached.portSelectors || {},\n                };\n                if (metric.portSize) {\n                    options.rootBBox = Rectangle.fromSize(metric.portSize);\n                }\n                this.updateAttrs(cached.portElement, metric.portAttrs, options);\n            }\n            const labelLayout = metric.labelLayout;\n            if (labelLayout && cached.portLabelElement) {\n                this.applyPortTransform(cached.portLabelElement, labelLayout, -(portLayout.angle || 0));\n                if (labelLayout.attrs) {\n                    const options = {\n                        selectors: cached.portLabelSelectors || {},\n                    };\n                    if (metric.labelSize) {\n                        options.rootBBox = Rectangle.fromSize(metric.labelSize);\n                    }\n                    this.updateAttrs(cached.portLabelElement, labelLayout.attrs, options);\n                }\n            }\n        }\n    }\n    applyPortTransform(element, layout, initialAngle = 0) {\n        const angle = layout.angle;\n        const position = layout.position;\n        const matrix = Dom.createSVGMatrix()\n            .rotate(initialAngle)\n            .translate(position.x || 0, position.y || 0)\n            .rotate(angle || 0);\n        Dom.transform(element, matrix, { absolute: true });\n    }\n    getPortMarkup(port) {\n        return port.markup || this.cell.portMarkup;\n    }\n    getPortLabelMarkup(label) {\n        return label.markup || this.cell.portLabelMarkup;\n    }\n    existPortLabel(port) {\n        return port.attrs && port.attrs.text;\n    }\n    getEventArgs(e, x, y) {\n        const view = this; // eslint-disable-line\n        const node = view.cell;\n        const cell = node;\n        if (x == null || y == null) {\n            return { e, view, node, cell };\n        }\n        return { e, x, y, view, node, cell };\n    }\n    getPortEventArgs(e, port, pos) {\n        const view = this; // eslint-disable-line\n        const node = view.cell;\n        const cell = node;\n        if (pos) {\n            return {\n                e,\n                x: pos.x,\n                y: pos.y,\n                view,\n                node,\n                cell,\n                port,\n            };\n        }\n        return { e, view, node, cell, port };\n    }\n    notifyMouseDown(e, x, y) {\n        super.onMouseDown(e, x, y);\n        this.notify('node:mousedown', this.getEventArgs(e, x, y));\n    }\n    notifyMouseMove(e, x, y) {\n        super.onMouseMove(e, x, y);\n        this.notify('node:mousemove', this.getEventArgs(e, x, y));\n    }\n    notifyMouseUp(e, x, y) {\n        super.onMouseUp(e, x, y);\n        this.notify('node:mouseup', this.getEventArgs(e, x, y));\n    }\n    notifyPortEvent(name, e, pos) {\n        const port = this.findAttr('port', e.target);\n        if (port) {\n            const originType = e.type;\n            if (name === 'node:port:mouseenter') {\n                e.type = 'mouseenter';\n            }\n            else if (name === 'node:port:mouseleave') {\n                e.type = 'mouseleave';\n            }\n            this.notify(name, this.getPortEventArgs(e, port, pos));\n            e.type = originType;\n        }\n    }\n    onClick(e, x, y) {\n        super.onClick(e, x, y);\n        this.notify('node:click', this.getEventArgs(e, x, y));\n        this.notifyPortEvent('node:port:click', e, { x, y });\n    }\n    onDblClick(e, x, y) {\n        super.onDblClick(e, x, y);\n        this.notify('node:dblclick', this.getEventArgs(e, x, y));\n        this.notifyPortEvent('node:port:dblclick', e, { x, y });\n    }\n    onContextMenu(e, x, y) {\n        super.onContextMenu(e, x, y);\n        this.notify('node:contextmenu', this.getEventArgs(e, x, y));\n        this.notifyPortEvent('node:port:contextmenu', e, { x, y });\n    }\n    onMouseDown(e, x, y) {\n        if (this.isPropagationStopped(e)) {\n            return;\n        }\n        this.notifyMouseDown(e, x, y);\n        this.notifyPortEvent('node:port:mousedown', e, { x, y });\n        this.startNodeDragging(e, x, y);\n    }\n    onMouseMove(e, x, y) {\n        const data = this.getEventData(e);\n        const action = data.action;\n        if (action === 'magnet') {\n            this.dragMagnet(e, x, y);\n        }\n        else {\n            if (action === 'move') {\n                const meta = data;\n                const view = meta.targetView || this;\n                view.dragNode(e, x, y);\n                view.notify('node:moving', {\n                    e,\n                    x,\n                    y,\n                    view,\n                    cell: view.cell,\n                    node: view.cell,\n                });\n            }\n            this.notifyMouseMove(e, x, y);\n            this.notifyPortEvent('node:port:mousemove', e, { x, y });\n        }\n        this.setEventData(e, data);\n    }\n    onMouseUp(e, x, y) {\n        const data = this.getEventData(e);\n        const action = data.action;\n        if (action === 'magnet') {\n            this.stopMagnetDragging(e, x, y);\n        }\n        else {\n            this.notifyMouseUp(e, x, y);\n            this.notifyPortEvent('node:port:mouseup', e, { x, y });\n            if (action === 'move') {\n                const meta = data;\n                const view = meta.targetView || this;\n                view.stopNodeDragging(e, x, y);\n            }\n        }\n        const magnet = data.targetMagnet;\n        if (magnet) {\n            this.onMagnetClick(e, magnet, x, y);\n        }\n        this.checkMouseleave(e);\n    }\n    onMouseOver(e) {\n        super.onMouseOver(e);\n        this.notify('node:mouseover', this.getEventArgs(e));\n        // mock mouseenter event,so we can get correct trigger time when move mouse from node to port\n        // wo also need to change e.type for use get correct event args\n        this.notifyPortEvent('node:port:mouseenter', e);\n        this.notifyPortEvent('node:port:mouseover', e);\n    }\n    onMouseOut(e) {\n        super.onMouseOut(e);\n        this.notify('node:mouseout', this.getEventArgs(e));\n        // mock mouseleave event,so we can get correct trigger time when move mouse from port to node\n        // wo also need to change e.type for use get correct event args\n        this.notifyPortEvent('node:port:mouseleave', e);\n        this.notifyPortEvent('node:port:mouseout', e);\n    }\n    onMouseEnter(e) {\n        this.updateClassName(e);\n        super.onMouseEnter(e);\n        this.notify('node:mouseenter', this.getEventArgs(e));\n    }\n    onMouseLeave(e) {\n        super.onMouseLeave(e);\n        this.notify('node:mouseleave', this.getEventArgs(e));\n    }\n    onMouseWheel(e, x, y, delta) {\n        super.onMouseWheel(e, x, y, delta);\n        this.notify('node:mousewheel', Object.assign({ delta }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetClick(e, magnet, x, y) {\n        const graph = this.graph;\n        const count = graph.view.getMouseMovedCount(e);\n        if (count > graph.options.clickThreshold) {\n            return;\n        }\n        this.notify('node:magnet:click', Object.assign({ magnet }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetDblClick(e, magnet, x, y) {\n        this.notify('node:magnet:dblclick', Object.assign({ magnet }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetContextMenu(e, magnet, x, y) {\n        this.notify('node:magnet:contextmenu', Object.assign({ magnet }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetMouseDown(e, magnet, x, y) {\n        this.startMagnetDragging(e, x, y);\n    }\n    onCustomEvent(e, name, x, y) {\n        this.notify('node:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n        super.onCustomEvent(e, name, x, y);\n    }\n    prepareEmbedding(e) {\n        const graph = this.graph;\n        const data = this.getEventData(e);\n        const node = data.cell || this.cell;\n        const view = graph.findViewByCell(node);\n        const localPoint = graph.snapToGrid(e.clientX, e.clientY);\n        this.notify('node:embed', {\n            e,\n            node,\n            view,\n            cell: node,\n            x: localPoint.x,\n            y: localPoint.y,\n            currentParent: node.getParent(),\n        });\n    }\n    processEmbedding(e, data) {\n        const cell = data.cell || this.cell;\n        const graph = data.graph || this.graph;\n        const options = graph.options.embedding;\n        const findParent = options.findParent;\n        let candidates = typeof findParent === 'function'\n            ? FunctionExt.call(findParent, graph, {\n                view: this,\n                node: this.cell,\n            }).filter((c) => {\n                return (Cell.isCell(c) &&\n                    this.cell.id !== c.id &&\n                    !c.isDescendantOf(this.cell));\n            })\n            : graph.model.getNodesUnderNode(cell, {\n                by: findParent,\n            });\n        // Picks the node with the highest `z` index\n        if (options.frontOnly) {\n            if (candidates.length > 0) {\n                const zIndexMap = ArrayExt.groupBy(candidates, 'zIndex');\n                const maxZIndex = ArrayExt.max(Object.keys(zIndexMap).map((z) => parseInt(z, 10)));\n                if (maxZIndex) {\n                    candidates = zIndexMap[maxZIndex];\n                }\n            }\n        }\n        // Filter the nodes which is invisiable\n        candidates = candidates.filter((candidate) => candidate.visible);\n        let newCandidateView = null;\n        const prevCandidateView = data.candidateEmbedView;\n        const validateEmbeding = options.validate;\n        for (let i = candidates.length - 1; i >= 0; i -= 1) {\n            const candidate = candidates[i];\n            if (prevCandidateView && prevCandidateView.cell.id === candidate.id) {\n                // candidate remains the same\n                newCandidateView = prevCandidateView;\n                break;\n            }\n            else {\n                const view = candidate.findView(graph);\n                if (FunctionExt.call(validateEmbeding, graph, {\n                    child: this.cell,\n                    parent: view.cell,\n                    childView: this,\n                    parentView: view,\n                })) {\n                    // flip to the new candidate\n                    newCandidateView = view;\n                    break;\n                }\n            }\n        }\n        this.clearEmbedding(data);\n        if (newCandidateView) {\n            newCandidateView.highlight(null, { type: 'embedding' });\n        }\n        data.candidateEmbedView = newCandidateView;\n        const localPoint = graph.snapToGrid(e.clientX, e.clientY);\n        this.notify('node:embedding', {\n            e,\n            cell,\n            node: cell,\n            view: graph.findViewByCell(cell),\n            x: localPoint.x,\n            y: localPoint.y,\n            currentParent: cell.getParent(),\n            candidateParent: newCandidateView ? newCandidateView.cell : null,\n        });\n    }\n    clearEmbedding(data) {\n        const candidateView = data.candidateEmbedView;\n        if (candidateView) {\n            candidateView.unhighlight(null, { type: 'embedding' });\n            data.candidateEmbedView = null;\n        }\n    }\n    finalizeEmbedding(e, data) {\n        this.graph.startBatch('embedding');\n        const cell = data.cell || this.cell;\n        const graph = data.graph || this.graph;\n        const view = graph.findViewByCell(cell);\n        const parent = cell.getParent();\n        const candidateView = data.candidateEmbedView;\n        if (candidateView) {\n            // Candidate view is chosen to become the parent of the node.\n            candidateView.unhighlight(null, { type: 'embedding' });\n            data.candidateEmbedView = null;\n            if (parent == null || parent.id !== candidateView.cell.id) {\n                candidateView.cell.insertChild(cell, undefined, { ui: true });\n            }\n        }\n        else if (parent) {\n            parent.unembed(cell, { ui: true });\n        }\n        graph.model.getConnectedEdges(cell, { deep: true }).forEach((edge) => {\n            edge.updateParent({ ui: true });\n        });\n        if (view && candidateView) {\n            const localPoint = graph.snapToGrid(e.clientX, e.clientY);\n            view.notify('node:embedded', {\n                e,\n                cell,\n                x: localPoint.x,\n                y: localPoint.y,\n                node: cell,\n                view: graph.findViewByCell(cell),\n                previousParent: parent,\n                currentParent: cell.getParent(),\n            });\n        }\n        this.graph.stopBatch('embedding');\n    }\n    getDelegatedView() {\n        let cell = this.cell;\n        let view = this; // eslint-disable-line\n        while (view) {\n            if (cell.isEdge()) {\n                break;\n            }\n            if (!cell.hasParent() || view.can('stopDelegateOnDragging')) {\n                return view;\n            }\n            cell = cell.getParent();\n            view = this.graph.findViewByCell(cell);\n        }\n        return null;\n    }\n    validateMagnet(cellView, magnet, e) {\n        if (magnet.getAttribute('magnet') !== 'passive') {\n            const validate = this.graph.options.connecting.validateMagnet;\n            if (validate) {\n                return FunctionExt.call(validate, this.graph, {\n                    e,\n                    magnet,\n                    view: cellView,\n                    cell: cellView.cell,\n                });\n            }\n            return true;\n        }\n        return false;\n    }\n    startMagnetDragging(e, x, y) {\n        if (!this.can('magnetConnectable')) {\n            return;\n        }\n        e.stopPropagation();\n        const magnet = e.currentTarget;\n        const graph = this.graph;\n        this.setEventData(e, {\n            targetMagnet: magnet,\n        });\n        if (this.validateMagnet(this, magnet, e)) {\n            if (graph.options.magnetThreshold <= 0) {\n                this.startConnectting(e, magnet, x, y);\n            }\n            this.setEventData(e, {\n                action: 'magnet',\n            });\n            this.stopPropagation(e);\n        }\n        else {\n            this.onMouseDown(e, x, y);\n        }\n        graph.view.delegateDragEvents(e, this);\n    }\n    startConnectting(e, magnet, x, y) {\n        this.graph.model.startBatch('add-edge');\n        const edgeView = this.createEdgeFromMagnet(magnet, x, y);\n        edgeView.setEventData(e, edgeView.prepareArrowheadDragging('target', {\n            x,\n            y,\n            isNewEdge: true,\n            fallbackAction: 'remove',\n        }));\n        this.setEventData(e, { edgeView });\n        edgeView.notifyMouseDown(e, x, y);\n    }\n    getDefaultEdge(sourceView, sourceMagnet) {\n        let edge;\n        const create = this.graph.options.connecting.createEdge;\n        if (create) {\n            edge = FunctionExt.call(create, this.graph, {\n                sourceMagnet,\n                sourceView,\n                sourceCell: sourceView.cell,\n            });\n        }\n        return edge;\n    }\n    createEdgeFromMagnet(magnet, x, y) {\n        const graph = this.graph;\n        const model = graph.model;\n        const edge = this.getDefaultEdge(this, magnet);\n        edge.setSource(Object.assign(Object.assign({}, edge.getSource()), this.getEdgeTerminal(magnet, x, y, edge, 'source')));\n        edge.setTarget(Object.assign(Object.assign({}, edge.getTarget()), { x, y }));\n        edge.addTo(model, { async: false, ui: true });\n        return edge.findView(graph);\n    }\n    dragMagnet(e, x, y) {\n        const data = this.getEventData(e);\n        const edgeView = data.edgeView;\n        if (edgeView) {\n            edgeView.onMouseMove(e, x, y);\n            this.autoScrollGraph(e.clientX, e.clientY);\n        }\n        else {\n            const graph = this.graph;\n            const magnetThreshold = graph.options.magnetThreshold;\n            const currentTarget = this.getEventTarget(e);\n            const targetMagnet = data.targetMagnet;\n            // magnetThreshold when the pointer leaves the magnet\n            if (magnetThreshold === 'onleave') {\n                if (targetMagnet === currentTarget ||\n                    targetMagnet.contains(currentTarget)) {\n                    return;\n                }\n                // eslint-disable-next-line no-lonely-if\n            }\n            else {\n                // magnetThreshold defined as a number of movements\n                if (graph.view.getMouseMovedCount(e) <= magnetThreshold) {\n                    return;\n                }\n            }\n            this.startConnectting(e, targetMagnet, x, y);\n        }\n    }\n    stopMagnetDragging(e, x, y) {\n        const data = this.eventData(e);\n        const edgeView = data.edgeView;\n        if (edgeView) {\n            edgeView.onMouseUp(e, x, y);\n            this.graph.model.stopBatch('add-edge');\n        }\n    }\n    notifyUnhandledMouseDown(e, x, y) {\n        this.notify('node:unhandled:mousedown', {\n            e,\n            x,\n            y,\n            view: this,\n            cell: this.cell,\n            node: this.cell,\n        });\n    }\n    notifyNodeMove(name, e, x, y, cell) {\n        let cells = [cell];\n        const selection = this.graph.getPlugin('selection');\n        if (selection && selection.isSelectionMovable()) {\n            const selectedCells = selection.getSelectedCells();\n            if (selectedCells.includes(cell)) {\n                cells = selectedCells.filter((c) => c.isNode());\n            }\n        }\n        cells.forEach((c) => {\n            this.notify(name, {\n                e,\n                x,\n                y,\n                cell: c,\n                node: c,\n                view: c.findView(this.graph),\n            });\n        });\n    }\n    getRestrictArea(view) {\n        const restrict = this.graph.options.translating.restrict;\n        const area = typeof restrict === 'function'\n            ? FunctionExt.call(restrict, this.graph, view)\n            : restrict;\n        if (typeof area === 'number') {\n            return this.graph.transform.getGraphArea().inflate(area);\n        }\n        if (area === true) {\n            return this.graph.transform.getGraphArea();\n        }\n        return area || null;\n    }\n    startNodeDragging(e, x, y) {\n        const targetView = this.getDelegatedView();\n        if (targetView == null || !targetView.can('nodeMovable')) {\n            return this.notifyUnhandledMouseDown(e, x, y);\n        }\n        this.setEventData(e, {\n            targetView,\n            action: 'move',\n        });\n        const position = Point.create(targetView.cell.getPosition());\n        targetView.setEventData(e, {\n            moving: false,\n            offset: position.diff(x, y),\n            restrict: this.getRestrictArea(targetView),\n        });\n    }\n    dragNode(e, x, y) {\n        const node = this.cell;\n        const graph = this.graph;\n        const gridSize = graph.getGridSize();\n        const data = this.getEventData(e);\n        const offset = data.offset;\n        const restrict = data.restrict;\n        if (!data.moving) {\n            data.moving = true;\n            this.addClass('node-moving');\n            this.notifyNodeMove('node:move', e, x, y, this.cell);\n        }\n        this.autoScrollGraph(e.clientX, e.clientY);\n        const posX = GeometryUtil.snapToGrid(x + offset.x, gridSize);\n        const posY = GeometryUtil.snapToGrid(y + offset.y, gridSize);\n        node.setPosition(posX, posY, {\n            restrict,\n            deep: true,\n            ui: true,\n        });\n        if (graph.options.embedding.enabled) {\n            if (!data.embedding) {\n                this.prepareEmbedding(e);\n                data.embedding = true;\n            }\n            this.processEmbedding(e, data);\n        }\n    }\n    stopNodeDragging(e, x, y) {\n        const data = this.getEventData(e);\n        if (data.embedding) {\n            this.finalizeEmbedding(e, data);\n        }\n        if (data.moving) {\n            this.removeClass('node-moving');\n            this.notifyNodeMove('node:moved', e, x, y, this.cell);\n        }\n        data.moving = false;\n        data.embedding = false;\n    }\n    // eslint-disable-next-line\n    autoScrollGraph(x, y) {\n        const scroller = this.graph.getPlugin('scroller');\n        if (scroller) {\n            scroller.autoScroll(x, y);\n        }\n    }\n}\n(function (NodeView) {\n    NodeView.toStringTag = `X6.${NodeView.name}`;\n    function isNodeView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof NodeView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === NodeView.toStringTag) &&\n            typeof view.isNodeView === 'function' &&\n            typeof view.isEdgeView === 'function' &&\n            typeof view.confirmUpdate === 'function' &&\n            typeof view.update === 'function' &&\n            typeof view.findPortElem === 'function' &&\n            typeof view.resize === 'function' &&\n            typeof view.rotate === 'function' &&\n            typeof view.translate === 'function') {\n            return true;\n        }\n        return false;\n    }\n    NodeView.isNodeView = isNodeView;\n})(NodeView || (NodeView = {}));\nNodeView.config({\n    isSvgElement: true,\n    priority: 0,\n    bootstrap: ['render'],\n    actions: {\n        view: ['render'],\n        markup: ['render'],\n        attrs: ['update'],\n        size: ['resize', 'ports', 'tools'],\n        angle: ['rotate', 'tools'],\n        position: ['translate', 'tools'],\n        ports: ['ports'],\n        tools: ['tools'],\n    },\n});\nNodeView.registry.register('node', NodeView, true);\n//# sourceMappingURL=node.js.map","import { Rectangle, Polyline, Point, Angle, Path, Line, } from '@antv/x6-geometry';\nimport { ObjectExt, NumberExt, FunctionExt, Dom, Vector, } from '@antv/x6-common';\nimport { Router, Connector, NodeAnchor, EdgeAnchor, ConnectionPoint, } from '../registry';\nimport { Edge } from '../model/edge';\nimport { CellView } from './cell';\nimport { NodeView } from './node';\nexport class EdgeView extends CellView {\n    constructor() {\n        super(...arguments);\n        this.POINT_ROUNDING = 2;\n        // #endregion\n    }\n    get [Symbol.toStringTag]() {\n        return EdgeView.toStringTag;\n    }\n    getContainerClassName() {\n        return [super.getContainerClassName(), this.prefixClassName('edge')].join(' ');\n    }\n    get sourceBBox() {\n        const sourceView = this.sourceView;\n        if (!sourceView) {\n            const sourceDef = this.cell.getSource();\n            return new Rectangle(sourceDef.x, sourceDef.y);\n        }\n        const sourceMagnet = this.sourceMagnet;\n        if (sourceView.isEdgeElement(sourceMagnet)) {\n            return new Rectangle(this.sourceAnchor.x, this.sourceAnchor.y);\n        }\n        return sourceView.getBBoxOfElement(sourceMagnet || sourceView.container);\n    }\n    get targetBBox() {\n        const targetView = this.targetView;\n        if (!targetView) {\n            const targetDef = this.cell.getTarget();\n            return new Rectangle(targetDef.x, targetDef.y);\n        }\n        const targetMagnet = this.targetMagnet;\n        if (targetView.isEdgeElement(targetMagnet)) {\n            return new Rectangle(this.targetAnchor.x, this.targetAnchor.y);\n        }\n        return targetView.getBBoxOfElement(targetMagnet || targetView.container);\n    }\n    isEdgeView() {\n        return true;\n    }\n    confirmUpdate(flag, options = {}) {\n        let ref = flag;\n        if (this.hasAction(ref, 'source')) {\n            if (!this.updateTerminalProperties('source')) {\n                return ref;\n            }\n            ref = this.removeAction(ref, 'source');\n        }\n        if (this.hasAction(ref, 'target')) {\n            if (!this.updateTerminalProperties('target')) {\n                return ref;\n            }\n            ref = this.removeAction(ref, 'target');\n        }\n        if (this.hasAction(ref, 'render')) {\n            this.render();\n            ref = this.removeAction(ref, ['render', 'update', 'labels', 'tools']);\n            return ref;\n        }\n        ref = this.handleAction(ref, 'update', () => this.update(options));\n        ref = this.handleAction(ref, 'labels', () => this.onLabelsChange(options));\n        ref = this.handleAction(ref, 'tools', () => this.renderTools());\n        return ref;\n    }\n    // #region render\n    render() {\n        this.empty();\n        this.renderMarkup();\n        this.labelContainer = null;\n        this.renderLabels();\n        this.update();\n        this.renderTools();\n        return this;\n    }\n    renderMarkup() {\n        const markup = this.cell.markup;\n        if (markup) {\n            if (typeof markup === 'string') {\n                throw new TypeError('Not support string markup.');\n            }\n            return this.renderJSONMarkup(markup);\n        }\n        throw new TypeError('Invalid edge markup.');\n    }\n    renderJSONMarkup(markup) {\n        const ret = this.parseJSONMarkup(markup, this.container);\n        this.selectors = ret.selectors;\n        this.container.append(ret.fragment);\n    }\n    customizeLabels() {\n        if (this.labelContainer) {\n            const edge = this.cell;\n            const labels = edge.labels;\n            for (let i = 0, n = labels.length; i < n; i += 1) {\n                const label = labels[i];\n                const container = this.labelCache[i];\n                const selectors = this.labelSelectors[i];\n                const onEdgeLabelRendered = this.graph.options.onEdgeLabelRendered;\n                if (onEdgeLabelRendered) {\n                    onEdgeLabelRendered({\n                        edge,\n                        label,\n                        container,\n                        selectors,\n                    });\n                }\n            }\n        }\n    }\n    renderLabels() {\n        const edge = this.cell;\n        const labels = edge.getLabels();\n        const count = labels.length;\n        let container = this.labelContainer;\n        this.labelCache = {};\n        this.labelSelectors = {};\n        if (count <= 0) {\n            if (container && container.parentNode) {\n                container.parentNode.removeChild(container);\n            }\n            return this;\n        }\n        if (container) {\n            this.empty(container);\n        }\n        else {\n            container = Dom.createSvgElement('g');\n            this.addClass(this.prefixClassName('edge-labels'), container);\n            this.labelContainer = container;\n        }\n        for (let i = 0, ii = labels.length; i < ii; i += 1) {\n            const label = labels[i];\n            const normalized = this.normalizeLabelMarkup(this.parseLabelMarkup(label.markup));\n            let labelNode;\n            let selectors;\n            if (normalized) {\n                labelNode = normalized.node;\n                selectors = normalized.selectors;\n            }\n            else {\n                const defaultLabel = edge.getDefaultLabel();\n                const normalized = this.normalizeLabelMarkup(this.parseLabelMarkup(defaultLabel.markup));\n                labelNode = normalized.node;\n                selectors = normalized.selectors;\n            }\n            labelNode.setAttribute('data-index', `${i}`);\n            container.appendChild(labelNode);\n            const rootSelector = this.rootSelector;\n            if (selectors[rootSelector]) {\n                throw new Error('Ambiguous label root selector.');\n            }\n            selectors[rootSelector] = labelNode;\n            this.labelCache[i] = labelNode;\n            this.labelSelectors[i] = selectors;\n        }\n        if (container.parentNode == null) {\n            this.container.appendChild(container);\n        }\n        this.updateLabels();\n        this.customizeLabels();\n        return this;\n    }\n    onLabelsChange(options = {}) {\n        if (this.shouldRerenderLabels(options)) {\n            this.renderLabels();\n        }\n        else {\n            this.updateLabels();\n        }\n        this.updateLabelPositions();\n    }\n    shouldRerenderLabels(options = {}) {\n        const previousLabels = this.cell.previous('labels');\n        if (previousLabels == null) {\n            return true;\n        }\n        // Here is an optimization for cases when we know, that change does\n        // not require re-rendering of all labels.\n        if ('propertyPathArray' in options && 'propertyValue' in options) {\n            // The label is setting by `prop()` method\n            const pathArray = options.propertyPathArray || [];\n            const pathLength = pathArray.length;\n            if (pathLength > 1) {\n                // We are changing a single label here e.g. 'labels/0/position'\n                const index = pathArray[1];\n                if (previousLabels[index]) {\n                    if (pathLength === 2) {\n                        // We are changing the entire label. Need to check if the\n                        // markup is also being changed.\n                        return (typeof options.propertyValue === 'object' &&\n                            ObjectExt.has(options.propertyValue, 'markup'));\n                    }\n                    // We are changing a label property but not the markup\n                    if (pathArray[2] !== 'markup') {\n                        return false;\n                    }\n                }\n            }\n        }\n        return true;\n    }\n    parseLabelMarkup(markup) {\n        if (markup) {\n            if (typeof markup === 'string') {\n                return this.parseLabelStringMarkup(markup);\n            }\n            return this.parseJSONMarkup(markup);\n        }\n        return null;\n    }\n    parseLabelStringMarkup(labelMarkup) {\n        const children = Vector.createVectors(labelMarkup);\n        const fragment = document.createDocumentFragment();\n        for (let i = 0, n = children.length; i < n; i += 1) {\n            const currentChild = children[i].node;\n            fragment.appendChild(currentChild);\n        }\n        return { fragment, selectors: {} };\n    }\n    normalizeLabelMarkup(markup) {\n        if (markup == null) {\n            return;\n        }\n        const fragment = markup.fragment;\n        if (!(fragment instanceof DocumentFragment) || !fragment.hasChildNodes()) {\n            throw new Error('Invalid label markup.');\n        }\n        let vel;\n        const childNodes = fragment.childNodes;\n        if (childNodes.length > 1 || childNodes[0].nodeName.toUpperCase() !== 'G') {\n            vel = Vector.create('g').append(fragment);\n        }\n        else {\n            vel = Vector.create(childNodes[0]);\n        }\n        vel.addClass(this.prefixClassName('edge-label'));\n        return {\n            node: vel.node,\n            selectors: markup.selectors,\n        };\n    }\n    updateLabels() {\n        if (this.labelContainer) {\n            const edge = this.cell;\n            const labels = edge.labels;\n            const canLabelMove = this.can('edgeLabelMovable');\n            const defaultLabel = edge.getDefaultLabel();\n            for (let i = 0, n = labels.length; i < n; i += 1) {\n                const elem = this.labelCache[i];\n                const selectors = this.labelSelectors[i];\n                elem.setAttribute('cursor', canLabelMove ? 'move' : 'default');\n                const label = labels[i];\n                const attrs = ObjectExt.merge({}, defaultLabel.attrs, label.attrs);\n                this.updateAttrs(elem, attrs, {\n                    selectors,\n                    rootBBox: label.size ? Rectangle.fromSize(label.size) : undefined,\n                });\n            }\n        }\n    }\n    renderTools() {\n        const tools = this.cell.getTools();\n        this.addTools(tools);\n        return this;\n    }\n    // #endregion\n    // #region updating\n    update(options = {}) {\n        this.cleanCache();\n        this.updateConnection(options);\n        const attrs = this.cell.getAttrs();\n        if (attrs != null) {\n            this.updateAttrs(this.container, attrs, {\n                selectors: this.selectors,\n            });\n        }\n        this.updateLabelPositions();\n        this.updateTools(options);\n        return this;\n    }\n    removeRedundantLinearVertices(options = {}) {\n        const edge = this.cell;\n        const vertices = edge.getVertices();\n        const routePoints = [this.sourceAnchor, ...vertices, this.targetAnchor];\n        const rawCount = routePoints.length;\n        // Puts the route points into a polyline and try to simplify.\n        const polyline = new Polyline(routePoints);\n        polyline.simplify({ threshold: 0.01 });\n        const simplifiedPoints = polyline.points.map((point) => point.toJSON());\n        const simplifiedCount = simplifiedPoints.length;\n        // If simplification did not remove any redundant vertices.\n        if (rawCount === simplifiedCount) {\n            return 0;\n        }\n        // Sets simplified polyline points as edge vertices.\n        // Removes first and last polyline points again (source/target anchors).\n        edge.setVertices(simplifiedPoints.slice(1, simplifiedCount - 1), options);\n        return rawCount - simplifiedCount;\n    }\n    getTerminalView(type) {\n        switch (type) {\n            case 'source':\n                return this.sourceView || null;\n            case 'target':\n                return this.targetView || null;\n            default:\n                throw new Error(`Unknown terminal type '${type}'`);\n        }\n    }\n    getTerminalAnchor(type) {\n        switch (type) {\n            case 'source':\n                return Point.create(this.sourceAnchor);\n            case 'target':\n                return Point.create(this.targetAnchor);\n            default:\n                throw new Error(`Unknown terminal type '${type}'`);\n        }\n    }\n    getTerminalConnectionPoint(type) {\n        switch (type) {\n            case 'source':\n                return Point.create(this.sourcePoint);\n            case 'target':\n                return Point.create(this.targetPoint);\n            default:\n                throw new Error(`Unknown terminal type '${type}'`);\n        }\n    }\n    getTerminalMagnet(type, options = {}) {\n        switch (type) {\n            case 'source': {\n                if (options.raw) {\n                    return this.sourceMagnet;\n                }\n                const sourceView = this.sourceView;\n                if (!sourceView) {\n                    return null;\n                }\n                return this.sourceMagnet || sourceView.container;\n            }\n            case 'target': {\n                if (options.raw) {\n                    return this.targetMagnet;\n                }\n                const targetView = this.targetView;\n                if (!targetView) {\n                    return null;\n                }\n                return this.targetMagnet || targetView.container;\n            }\n            default: {\n                throw new Error(`Unknown terminal type '${type}'`);\n            }\n        }\n    }\n    updateConnection(options = {}) {\n        const edge = this.cell;\n        // The edge is being translated by an ancestor that will shift\n        // source, target and vertices by an equal distance.\n        // todo isFragmentDescendantOf is invalid\n        if (options.translateBy &&\n            edge.isFragmentDescendantOf(options.translateBy)) {\n            const tx = options.tx || 0;\n            const ty = options.ty || 0;\n            this.routePoints = new Polyline(this.routePoints).translate(tx, ty).points;\n            this.translateConnectionPoints(tx, ty);\n            this.path.translate(tx, ty);\n        }\n        else {\n            const vertices = edge.getVertices();\n            // 1. Find anchor points\n            const anchors = this.findAnchors(vertices);\n            this.sourceAnchor = anchors.source;\n            this.targetAnchor = anchors.target;\n            // 2. Find route points\n            this.routePoints = this.findRoutePoints(vertices);\n            // 3. Find connection points\n            const connectionPoints = this.findConnectionPoints(this.routePoints, this.sourceAnchor, this.targetAnchor);\n            this.sourcePoint = connectionPoints.source;\n            this.targetPoint = connectionPoints.target;\n            // 4. Find Marker Connection Point\n            const markerPoints = this.findMarkerPoints(this.routePoints, this.sourcePoint, this.targetPoint);\n            // 5. Make path\n            this.path = this.findPath(this.routePoints, markerPoints.source || this.sourcePoint, markerPoints.target || this.targetPoint);\n        }\n        this.cleanCache();\n    }\n    findAnchors(vertices) {\n        const edge = this.cell;\n        const source = edge.source;\n        const target = edge.target;\n        const firstVertex = vertices[0];\n        const lastVertex = vertices[vertices.length - 1];\n        if (target.priority && !source.priority) {\n            // Reversed order\n            return this.findAnchorsOrdered('target', lastVertex, 'source', firstVertex);\n        }\n        // Usual order\n        return this.findAnchorsOrdered('source', firstVertex, 'target', lastVertex);\n    }\n    findAnchorsOrdered(firstType, firstPoint, secondType, secondPoint) {\n        let firstAnchor;\n        let secondAnchor;\n        const edge = this.cell;\n        const firstTerminal = edge[firstType];\n        const secondTerminal = edge[secondType];\n        const firstView = this.getTerminalView(firstType);\n        const secondView = this.getTerminalView(secondType);\n        const firstMagnet = this.getTerminalMagnet(firstType);\n        const secondMagnet = this.getTerminalMagnet(secondType);\n        if (firstView) {\n            let firstRef;\n            if (firstPoint) {\n                firstRef = Point.create(firstPoint);\n            }\n            else if (secondView) {\n                firstRef = secondMagnet;\n            }\n            else {\n                firstRef = Point.create(secondTerminal);\n            }\n            firstAnchor = this.getAnchor(firstTerminal.anchor, firstView, firstMagnet, firstRef, firstType);\n        }\n        else {\n            firstAnchor = Point.create(firstTerminal);\n        }\n        if (secondView) {\n            const secondRef = Point.create(secondPoint || firstAnchor);\n            secondAnchor = this.getAnchor(secondTerminal.anchor, secondView, secondMagnet, secondRef, secondType);\n        }\n        else {\n            secondAnchor = Point.isPointLike(secondTerminal)\n                ? Point.create(secondTerminal)\n                : new Point();\n        }\n        return {\n            [firstType]: firstAnchor,\n            [secondType]: secondAnchor,\n        };\n    }\n    getAnchor(def, cellView, magnet, ref, terminalType) {\n        const isEdge = cellView.isEdgeElement(magnet);\n        const connecting = this.graph.options.connecting;\n        let config = typeof def === 'string' ? { name: def } : def;\n        if (!config) {\n            const defaults = isEdge\n                ? (terminalType === 'source'\n                    ? connecting.sourceEdgeAnchor\n                    : connecting.targetEdgeAnchor) || connecting.edgeAnchor\n                : (terminalType === 'source'\n                    ? connecting.sourceAnchor\n                    : connecting.targetAnchor) || connecting.anchor;\n            config = typeof defaults === 'string' ? { name: defaults } : defaults;\n        }\n        if (!config) {\n            throw new Error(`Anchor should be specified.`);\n        }\n        let anchor;\n        const name = config.name;\n        if (isEdge) {\n            const fn = EdgeAnchor.registry.get(name);\n            if (typeof fn !== 'function') {\n                return EdgeAnchor.registry.onNotFound(name);\n            }\n            anchor = FunctionExt.call(fn, this, cellView, magnet, ref, config.args || {}, terminalType);\n        }\n        else {\n            const fn = NodeAnchor.registry.get(name);\n            if (typeof fn !== 'function') {\n                return NodeAnchor.registry.onNotFound(name);\n            }\n            anchor = FunctionExt.call(fn, this, cellView, magnet, ref, config.args || {}, terminalType);\n        }\n        return anchor ? anchor.round(this.POINT_ROUNDING) : new Point();\n    }\n    findRoutePoints(vertices = []) {\n        const defaultRouter = this.graph.options.connecting.router || Router.presets.normal;\n        const router = this.cell.getRouter() || defaultRouter;\n        let routePoints;\n        if (typeof router === 'function') {\n            routePoints = FunctionExt.call(router, this, vertices, {}, this);\n        }\n        else {\n            const name = typeof router === 'string' ? router : router.name;\n            const args = typeof router === 'string' ? {} : router.args || {};\n            const fn = name ? Router.registry.get(name) : Router.presets.normal;\n            if (typeof fn !== 'function') {\n                return Router.registry.onNotFound(name);\n            }\n            routePoints = FunctionExt.call(fn, this, vertices, args, this);\n        }\n        return routePoints == null\n            ? vertices.map((p) => Point.create(p))\n            : routePoints.map((p) => Point.create(p));\n    }\n    findConnectionPoints(routePoints, sourceAnchor, targetAnchor) {\n        const edge = this.cell;\n        const connecting = this.graph.options.connecting;\n        const sourceTerminal = edge.getSource();\n        const targetTerminal = edge.getTarget();\n        const sourceView = this.sourceView;\n        const targetView = this.targetView;\n        const firstRoutePoint = routePoints[0];\n        const lastRoutePoint = routePoints[routePoints.length - 1];\n        // source\n        let sourcePoint;\n        if (sourceView && !sourceView.isEdgeElement(this.sourceMagnet)) {\n            const sourceMagnet = this.sourceMagnet || sourceView.container;\n            const sourcePointRef = firstRoutePoint || targetAnchor;\n            const sourceLine = new Line(sourcePointRef, sourceAnchor);\n            const connectionPointDef = sourceTerminal.connectionPoint ||\n                connecting.sourceConnectionPoint ||\n                connecting.connectionPoint;\n            sourcePoint = this.getConnectionPoint(connectionPointDef, sourceView, sourceMagnet, sourceLine, 'source');\n        }\n        else {\n            sourcePoint = sourceAnchor;\n        }\n        // target\n        let targetPoint;\n        if (targetView && !targetView.isEdgeElement(this.targetMagnet)) {\n            const targetMagnet = this.targetMagnet || targetView.container;\n            const targetConnectionPointDef = targetTerminal.connectionPoint ||\n                connecting.targetConnectionPoint ||\n                connecting.connectionPoint;\n            const targetPointRef = lastRoutePoint || sourceAnchor;\n            const targetLine = new Line(targetPointRef, targetAnchor);\n            targetPoint = this.getConnectionPoint(targetConnectionPointDef, targetView, targetMagnet, targetLine, 'target');\n        }\n        else {\n            targetPoint = targetAnchor;\n        }\n        return {\n            source: sourcePoint,\n            target: targetPoint,\n        };\n    }\n    getConnectionPoint(def, view, magnet, line, endType) {\n        const anchor = line.end;\n        if (def == null) {\n            return anchor;\n        }\n        const name = typeof def === 'string' ? def : def.name;\n        const args = typeof def === 'string' ? {} : def.args;\n        const fn = ConnectionPoint.registry.get(name);\n        if (typeof fn !== 'function') {\n            return ConnectionPoint.registry.onNotFound(name);\n        }\n        const connectionPoint = FunctionExt.call(fn, this, line, view, magnet, args || {}, endType);\n        return connectionPoint ? connectionPoint.round(this.POINT_ROUNDING) : anchor;\n    }\n    findMarkerPoints(routePoints, sourcePoint, targetPoint) {\n        const getLineWidth = (type) => {\n            const attrs = this.cell.getAttrs();\n            const keys = Object.keys(attrs);\n            for (let i = 0, l = keys.length; i < l; i += 1) {\n                const attr = attrs[keys[i]];\n                if (attr[`${type}Marker`] || attr[`${type}-marker`]) {\n                    const strokeWidth = attr.strokeWidth || attr['stroke-width'];\n                    if (strokeWidth) {\n                        return parseFloat(strokeWidth);\n                    }\n                    break;\n                }\n            }\n            return null;\n        };\n        const firstRoutePoint = routePoints[0];\n        const lastRoutePoint = routePoints[routePoints.length - 1];\n        let sourceMarkerPoint;\n        let targetMarkerPoint;\n        const sourceStrokeWidth = getLineWidth('source');\n        if (sourceStrokeWidth) {\n            sourceMarkerPoint = sourcePoint\n                .clone()\n                .move(firstRoutePoint || targetPoint, -sourceStrokeWidth);\n        }\n        const targetStrokeWidth = getLineWidth('target');\n        if (targetStrokeWidth) {\n            targetMarkerPoint = targetPoint\n                .clone()\n                .move(lastRoutePoint || sourcePoint, -targetStrokeWidth);\n        }\n        this.sourceMarkerPoint = sourceMarkerPoint || sourcePoint.clone();\n        this.targetMarkerPoint = targetMarkerPoint || targetPoint.clone();\n        return {\n            source: sourceMarkerPoint,\n            target: targetMarkerPoint,\n        };\n    }\n    findPath(routePoints, sourcePoint, targetPoint) {\n        const def = this.cell.getConnector() || this.graph.options.connecting.connector;\n        let name;\n        let args;\n        let fn;\n        if (typeof def === 'string') {\n            name = def;\n        }\n        else {\n            name = def.name;\n            args = def.args;\n        }\n        if (name) {\n            const method = Connector.registry.get(name);\n            if (typeof method !== 'function') {\n                return Connector.registry.onNotFound(name);\n            }\n            fn = method;\n        }\n        else {\n            fn = Connector.presets.normal;\n        }\n        const path = FunctionExt.call(fn, this, sourcePoint, targetPoint, routePoints, Object.assign(Object.assign({}, args), { raw: true }), this);\n        return typeof path === 'string' ? Path.parse(path) : path;\n    }\n    translateConnectionPoints(tx, ty) {\n        this.sourcePoint.translate(tx, ty);\n        this.targetPoint.translate(tx, ty);\n        this.sourceAnchor.translate(tx, ty);\n        this.targetAnchor.translate(tx, ty);\n        this.sourceMarkerPoint.translate(tx, ty);\n        this.targetMarkerPoint.translate(tx, ty);\n    }\n    updateLabelPositions() {\n        if (this.labelContainer == null) {\n            return this;\n        }\n        const path = this.path;\n        if (!path) {\n            return this;\n        }\n        const edge = this.cell;\n        const labels = edge.getLabels();\n        if (labels.length === 0) {\n            return this;\n        }\n        const defaultLabel = edge.getDefaultLabel();\n        const defaultPosition = this.normalizeLabelPosition(defaultLabel.position);\n        for (let i = 0, ii = labels.length; i < ii; i += 1) {\n            const label = labels[i];\n            const labelNode = this.labelCache[i];\n            if (!labelNode) {\n                continue;\n            }\n            const labelPosition = this.normalizeLabelPosition(label.position);\n            const pos = ObjectExt.merge({}, defaultPosition, labelPosition);\n            const matrix = this.getLabelTransformationMatrix(pos);\n            labelNode.setAttribute('transform', Dom.matrixToTransformString(matrix));\n        }\n        return this;\n    }\n    updateTerminalProperties(type) {\n        const edge = this.cell;\n        const graph = this.graph;\n        const terminal = edge[type];\n        const nodeId = terminal && terminal.cell;\n        const viewKey = `${type}View`;\n        // terminal is a point\n        if (!nodeId) {\n            this[viewKey] = null;\n            this.updateTerminalMagnet(type);\n            return true;\n        }\n        const terminalCell = graph.getCellById(nodeId);\n        if (!terminalCell) {\n            throw new Error(`Edge's ${type} node with id \"${nodeId}\" not exists`);\n        }\n        const endView = terminalCell.findView(graph);\n        if (!endView) {\n            return false;\n        }\n        this[viewKey] = endView;\n        this.updateTerminalMagnet(type);\n        return true;\n    }\n    updateTerminalMagnet(type) {\n        const propName = `${type}Magnet`;\n        const terminalView = this.getTerminalView(type);\n        if (terminalView) {\n            let magnet = terminalView.getMagnetFromEdgeTerminal(this.cell[type]);\n            if (magnet === terminalView.container) {\n                magnet = null;\n            }\n            this[propName] = magnet;\n        }\n        else {\n            this[propName] = null;\n        }\n    }\n    getLabelPositionAngle(idx) {\n        const label = this.cell.getLabelAt(idx);\n        if (label && label.position && typeof label.position === 'object') {\n            return label.position.angle || 0;\n        }\n        return 0;\n    }\n    getLabelPositionArgs(idx) {\n        const label = this.cell.getLabelAt(idx);\n        if (label && label.position && typeof label.position === 'object') {\n            return label.position.options;\n        }\n    }\n    getDefaultLabelPositionArgs() {\n        const defaultLabel = this.cell.getDefaultLabel();\n        if (defaultLabel &&\n            defaultLabel.position &&\n            typeof defaultLabel.position === 'object') {\n            return defaultLabel.position.options;\n        }\n    }\n    mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs) {\n        if (labelPositionArgs === null) {\n            return null;\n        }\n        if (labelPositionArgs === undefined) {\n            if (defaultLabelPositionArgs === null) {\n                return null;\n            }\n            return defaultLabelPositionArgs;\n        }\n        return ObjectExt.merge({}, defaultLabelPositionArgs, labelPositionArgs);\n    }\n    // #endregion\n    getConnection() {\n        return this.path != null ? this.path.clone() : null;\n    }\n    getConnectionPathData() {\n        if (this.path == null) {\n            return '';\n        }\n        const cache = this.cache.pathCache;\n        if (!ObjectExt.has(cache, 'data')) {\n            cache.data = this.path.serialize();\n        }\n        return cache.data || '';\n    }\n    getConnectionSubdivisions() {\n        if (this.path == null) {\n            return null;\n        }\n        const cache = this.cache.pathCache;\n        if (!ObjectExt.has(cache, 'segmentSubdivisions')) {\n            cache.segmentSubdivisions = this.path.getSegmentSubdivisions();\n        }\n        return cache.segmentSubdivisions;\n    }\n    getConnectionLength() {\n        if (this.path == null) {\n            return 0;\n        }\n        const cache = this.cache.pathCache;\n        if (!ObjectExt.has(cache, 'length')) {\n            cache.length = this.path.length({\n                segmentSubdivisions: this.getConnectionSubdivisions(),\n            });\n        }\n        return cache.length;\n    }\n    getPointAtLength(length) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.pointAtLength(length, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getPointAtRatio(ratio) {\n        if (this.path == null) {\n            return null;\n        }\n        if (NumberExt.isPercentage(ratio)) {\n            // eslint-disable-next-line\n            ratio = parseFloat(ratio) / 100;\n        }\n        return this.path.pointAt(ratio, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getTangentAtLength(length) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.tangentAtLength(length, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getTangentAtRatio(ratio) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.tangentAt(ratio, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getClosestPoint(point) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.closestPoint(point, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getClosestPointLength(point) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.closestPointLength(point, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getClosestPointRatio(point) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.closestPointNormalizedLength(point, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getLabelPosition(x, y, p3, p4) {\n        const pos = { distance: 0 };\n        // normalize data from the two possible signatures\n        let angle = 0;\n        let options;\n        if (typeof p3 === 'number') {\n            angle = p3;\n            options = p4;\n        }\n        else {\n            options = p3;\n        }\n        if (options != null) {\n            pos.options = options;\n        }\n        // identify distance/offset settings\n        const isOffsetAbsolute = options && options.absoluteOffset;\n        const isDistanceRelative = !(options && options.absoluteDistance);\n        const isDistanceAbsoluteReverse = options && options.absoluteDistance && options.reverseDistance;\n        // find closest point t\n        const path = this.path;\n        const pathOptions = {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        };\n        const labelPoint = new Point(x, y);\n        const t = path.closestPointT(labelPoint, pathOptions);\n        // distance\n        const totalLength = this.getConnectionLength() || 0;\n        let labelDistance = path.lengthAtT(t, pathOptions);\n        if (isDistanceRelative) {\n            labelDistance = totalLength > 0 ? labelDistance / totalLength : 0;\n        }\n        if (isDistanceAbsoluteReverse) {\n            // fix for end point (-0 => 1)\n            labelDistance = -1 * (totalLength - labelDistance) || 1;\n        }\n        pos.distance = labelDistance;\n        // offset\n        // use absolute offset if:\n        // - options.absoluteOffset is true,\n        // - options.absoluteOffset is not true but there is no tangent\n        let tangent;\n        if (!isOffsetAbsolute)\n            tangent = path.tangentAtT(t);\n        let labelOffset;\n        if (tangent) {\n            labelOffset = tangent.pointOffset(labelPoint);\n        }\n        else {\n            const closestPoint = path.pointAtT(t);\n            const labelOffsetDiff = labelPoint.diff(closestPoint);\n            labelOffset = { x: labelOffsetDiff.x, y: labelOffsetDiff.y };\n        }\n        pos.offset = labelOffset;\n        pos.angle = angle;\n        return pos;\n    }\n    normalizeLabelPosition(pos) {\n        if (typeof pos === 'number') {\n            return { distance: pos };\n        }\n        return pos;\n    }\n    getLabelTransformationMatrix(labelPosition) {\n        const pos = this.normalizeLabelPosition(labelPosition);\n        const options = pos.options || {};\n        const labelAngle = pos.angle || 0;\n        const labelDistance = pos.distance;\n        const isDistanceRelative = labelDistance > 0 && labelDistance <= 1;\n        let labelOffset = 0;\n        const offsetCoord = { x: 0, y: 0 };\n        const offset = pos.offset;\n        if (offset) {\n            if (typeof offset === 'number') {\n                labelOffset = offset;\n            }\n            else {\n                if (offset.x != null) {\n                    offsetCoord.x = offset.x;\n                }\n                if (offset.y != null) {\n                    offsetCoord.y = offset.y;\n                }\n            }\n        }\n        const isOffsetAbsolute = offsetCoord.x !== 0 || offsetCoord.y !== 0 || labelOffset === 0;\n        const isKeepGradient = options.keepGradient;\n        const isEnsureLegibility = options.ensureLegibility;\n        const path = this.path;\n        const pathOpt = { segmentSubdivisions: this.getConnectionSubdivisions() };\n        const distance = isDistanceRelative\n            ? labelDistance * this.getConnectionLength()\n            : labelDistance;\n        const tangent = path.tangentAtLength(distance, pathOpt);\n        let translation;\n        let angle = labelAngle;\n        if (tangent) {\n            if (isOffsetAbsolute) {\n                translation = tangent.start;\n                translation.translate(offsetCoord);\n            }\n            else {\n                const normal = tangent.clone();\n                normal.rotate(-90, tangent.start);\n                normal.setLength(labelOffset);\n                translation = normal.end;\n            }\n            if (isKeepGradient) {\n                angle = tangent.angle() + labelAngle;\n                if (isEnsureLegibility) {\n                    angle = Angle.normalize(((angle + 90) % 180) - 90);\n                }\n            }\n        }\n        else {\n            // fallback - the connection has zero length\n            translation = path.start;\n            if (isOffsetAbsolute) {\n                translation.translate(offsetCoord);\n            }\n        }\n        return Dom.createSVGMatrix()\n            .translate(translation.x, translation.y)\n            .rotate(angle);\n    }\n    getVertexIndex(x, y) {\n        const edge = this.cell;\n        const vertices = edge.getVertices();\n        const vertexLength = this.getClosestPointLength(new Point(x, y));\n        let index = 0;\n        if (vertexLength != null) {\n            for (const ii = vertices.length; index < ii; index += 1) {\n                const currentVertex = vertices[index];\n                const currentLength = this.getClosestPointLength(currentVertex);\n                if (currentLength != null && vertexLength < currentLength) {\n                    break;\n                }\n            }\n        }\n        return index;\n    }\n    getEventArgs(e, x, y) {\n        const view = this; // eslint-disable-line\n        const edge = view.cell;\n        const cell = edge;\n        if (x == null || y == null) {\n            return { e, view, edge, cell };\n        }\n        return { e, x, y, view, edge, cell };\n    }\n    notifyUnhandledMouseDown(e, x, y) {\n        this.notify('edge:unhandled:mousedown', {\n            e,\n            x,\n            y,\n            view: this,\n            cell: this.cell,\n            edge: this.cell,\n        });\n    }\n    notifyMouseDown(e, x, y) {\n        super.onMouseDown(e, x, y);\n        this.notify('edge:mousedown', this.getEventArgs(e, x, y));\n    }\n    notifyMouseMove(e, x, y) {\n        super.onMouseMove(e, x, y);\n        this.notify('edge:mousemove', this.getEventArgs(e, x, y));\n    }\n    notifyMouseUp(e, x, y) {\n        super.onMouseUp(e, x, y);\n        this.notify('edge:mouseup', this.getEventArgs(e, x, y));\n    }\n    onClick(e, x, y) {\n        super.onClick(e, x, y);\n        this.notify('edge:click', this.getEventArgs(e, x, y));\n    }\n    onDblClick(e, x, y) {\n        super.onDblClick(e, x, y);\n        this.notify('edge:dblclick', this.getEventArgs(e, x, y));\n    }\n    onContextMenu(e, x, y) {\n        super.onContextMenu(e, x, y);\n        this.notify('edge:contextmenu', this.getEventArgs(e, x, y));\n    }\n    onMouseDown(e, x, y) {\n        this.notifyMouseDown(e, x, y);\n        this.startEdgeDragging(e, x, y);\n    }\n    onMouseMove(e, x, y) {\n        const data = this.getEventData(e);\n        switch (data.action) {\n            case 'drag-label': {\n                this.dragLabel(e, x, y);\n                break;\n            }\n            case 'drag-arrowhead': {\n                this.dragArrowhead(e, x, y);\n                break;\n            }\n            case 'drag-edge': {\n                this.dragEdge(e, x, y);\n                break;\n            }\n            default:\n                break;\n        }\n        this.notifyMouseMove(e, x, y);\n        return data;\n    }\n    onMouseUp(e, x, y) {\n        const data = this.getEventData(e);\n        switch (data.action) {\n            case 'drag-label': {\n                this.stopLabelDragging(e, x, y);\n                break;\n            }\n            case 'drag-arrowhead': {\n                this.stopArrowheadDragging(e, x, y);\n                break;\n            }\n            case 'drag-edge': {\n                this.stopEdgeDragging(e, x, y);\n                break;\n            }\n            default:\n                break;\n        }\n        this.notifyMouseUp(e, x, y);\n        this.checkMouseleave(e);\n        return data;\n    }\n    onMouseOver(e) {\n        super.onMouseOver(e);\n        this.notify('edge:mouseover', this.getEventArgs(e));\n    }\n    onMouseOut(e) {\n        super.onMouseOut(e);\n        this.notify('edge:mouseout', this.getEventArgs(e));\n    }\n    onMouseEnter(e) {\n        super.onMouseEnter(e);\n        this.notify('edge:mouseenter', this.getEventArgs(e));\n    }\n    onMouseLeave(e) {\n        super.onMouseLeave(e);\n        this.notify('edge:mouseleave', this.getEventArgs(e));\n    }\n    onMouseWheel(e, x, y, delta) {\n        super.onMouseWheel(e, x, y, delta);\n        this.notify('edge:mousewheel', Object.assign({ delta }, this.getEventArgs(e, x, y)));\n    }\n    onCustomEvent(e, name, x, y) {\n        // For default edge tool\n        const tool = Dom.findParentByClass(e.target, 'edge-tool', this.container);\n        if (tool) {\n            e.stopPropagation(); // no further action to be executed\n            if (this.can('useEdgeTools')) {\n                if (name === 'edge:remove') {\n                    this.cell.remove({ ui: true });\n                    return;\n                }\n                this.notify('edge:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n            }\n            this.notifyMouseDown(e, x, y);\n        }\n        else {\n            this.notify('edge:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n            super.onCustomEvent(e, name, x, y);\n        }\n    }\n    onLabelMouseDown(e, x, y) {\n        this.notifyMouseDown(e, x, y);\n        this.startLabelDragging(e, x, y);\n        const stopPropagation = this.getEventData(e).stopPropagation;\n        if (stopPropagation) {\n            e.stopPropagation();\n        }\n    }\n    // #region drag edge\n    startEdgeDragging(e, x, y) {\n        if (!this.can('edgeMovable')) {\n            this.notifyUnhandledMouseDown(e, x, y);\n            return;\n        }\n        this.setEventData(e, {\n            x,\n            y,\n            moving: false,\n            action: 'drag-edge',\n        });\n    }\n    dragEdge(e, x, y) {\n        const data = this.getEventData(e);\n        if (!data.moving) {\n            data.moving = true;\n            this.addClass('edge-moving');\n            this.notify('edge:move', {\n                e,\n                x,\n                y,\n                view: this,\n                cell: this.cell,\n                edge: this.cell,\n            });\n        }\n        this.cell.translate(x - data.x, y - data.y, { ui: true });\n        this.setEventData(e, { x, y });\n        this.notify('edge:moving', {\n            e,\n            x,\n            y,\n            view: this,\n            cell: this.cell,\n            edge: this.cell,\n        });\n    }\n    stopEdgeDragging(e, x, y) {\n        const data = this.getEventData(e);\n        if (data.moving) {\n            this.removeClass('edge-moving');\n            this.notify('edge:moved', {\n                e,\n                x,\n                y,\n                view: this,\n                cell: this.cell,\n                edge: this.cell,\n            });\n        }\n        data.moving = false;\n    }\n    // #endregion\n    // #region drag arrowhead\n    prepareArrowheadDragging(type, options) {\n        const magnet = this.getTerminalMagnet(type);\n        const data = {\n            action: 'drag-arrowhead',\n            x: options.x,\n            y: options.y,\n            isNewEdge: options.isNewEdge === true,\n            terminalType: type,\n            initialMagnet: magnet,\n            initialTerminal: ObjectExt.clone(this.cell[type]),\n            fallbackAction: options.fallbackAction || 'revert',\n            getValidateConnectionArgs: this.createValidateConnectionArgs(type),\n            options: options.options,\n        };\n        this.beforeArrowheadDragging(data);\n        return data;\n    }\n    createValidateConnectionArgs(type) {\n        const args = [];\n        args[4] = type;\n        args[5] = this;\n        let opposite;\n        let i = 0;\n        let j = 0;\n        if (type === 'source') {\n            i = 2;\n            opposite = 'target';\n        }\n        else {\n            j = 2;\n            opposite = 'source';\n        }\n        const terminal = this.cell[opposite];\n        const cellId = terminal.cell;\n        if (cellId) {\n            let magnet;\n            const view = (args[i] = this.graph.findViewByCell(cellId));\n            if (view) {\n                magnet = view.getMagnetFromEdgeTerminal(terminal);\n                if (magnet === view.container) {\n                    magnet = undefined;\n                }\n            }\n            args[i + 1] = magnet;\n        }\n        return (cellView, magnet) => {\n            args[j] = cellView;\n            args[j + 1] = cellView.container === magnet ? undefined : magnet;\n            return args;\n        };\n    }\n    beforeArrowheadDragging(data) {\n        data.zIndex = this.cell.zIndex;\n        this.cell.toFront();\n        const style = this.container.style;\n        data.pointerEvents = style.pointerEvents;\n        style.pointerEvents = 'none';\n        if (this.graph.options.connecting.highlight) {\n            this.highlightAvailableMagnets(data);\n        }\n    }\n    afterArrowheadDragging(data) {\n        if (data.zIndex != null) {\n            this.cell.setZIndex(data.zIndex, { ui: true });\n            data.zIndex = null;\n        }\n        const container = this.container;\n        container.style.pointerEvents = data.pointerEvents || '';\n        if (this.graph.options.connecting.highlight) {\n            this.unhighlightAvailableMagnets(data);\n        }\n    }\n    validateConnection(sourceView, sourceMagnet, targetView, targetMagnet, terminalType, edgeView, candidateTerminal) {\n        const options = this.graph.options.connecting;\n        const allowLoop = options.allowLoop;\n        const allowNode = options.allowNode;\n        const allowEdge = options.allowEdge;\n        const allowPort = options.allowPort;\n        const allowMulti = options.allowMulti;\n        const validate = options.validateConnection;\n        const edge = edgeView ? edgeView.cell : null;\n        const terminalView = terminalType === 'target' ? targetView : sourceView;\n        const terminalMagnet = terminalType === 'target' ? targetMagnet : sourceMagnet;\n        let valid = true;\n        const doValidate = (validate) => {\n            const sourcePort = terminalType === 'source'\n                ? candidateTerminal\n                    ? candidateTerminal.port\n                    : null\n                : edge\n                    ? edge.getSourcePortId()\n                    : null;\n            const targetPort = terminalType === 'target'\n                ? candidateTerminal\n                    ? candidateTerminal.port\n                    : null\n                : edge\n                    ? edge.getTargetPortId()\n                    : null;\n            return FunctionExt.call(validate, this.graph, {\n                edge,\n                edgeView,\n                sourceView,\n                targetView,\n                sourcePort,\n                targetPort,\n                sourceMagnet,\n                targetMagnet,\n                sourceCell: sourceView ? sourceView.cell : null,\n                targetCell: targetView ? targetView.cell : null,\n                type: terminalType,\n            });\n        };\n        if (allowLoop != null) {\n            if (typeof allowLoop === 'boolean') {\n                if (!allowLoop && sourceView === targetView) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowLoop);\n            }\n        }\n        if (valid && allowPort != null) {\n            if (typeof allowPort === 'boolean') {\n                if (!allowPort && terminalMagnet) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowPort);\n            }\n        }\n        if (valid && allowEdge != null) {\n            if (typeof allowEdge === 'boolean') {\n                if (!allowEdge && EdgeView.isEdgeView(terminalView)) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowEdge);\n            }\n        }\n        // When judging nodes, the influence of the ports should be excluded,\n        // because the ports and nodes have the same terminalView\n        if (valid && allowNode != null && terminalMagnet == null) {\n            if (typeof allowNode === 'boolean') {\n                if (!allowNode && NodeView.isNodeView(terminalView)) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowNode);\n            }\n        }\n        if (valid && allowMulti != null && edgeView) {\n            const edge = edgeView.cell;\n            const source = terminalType === 'source'\n                ? candidateTerminal\n                : edge.getSource();\n            const target = terminalType === 'target'\n                ? candidateTerminal\n                : edge.getTarget();\n            const terminalCell = candidateTerminal\n                ? this.graph.getCellById(candidateTerminal.cell)\n                : null;\n            if (source && target && source.cell && target.cell && terminalCell) {\n                if (typeof allowMulti === 'function') {\n                    valid = doValidate(allowMulti);\n                }\n                else {\n                    const connectedEdges = this.graph.model.getConnectedEdges(terminalCell, {\n                        outgoing: terminalType === 'source',\n                        incoming: terminalType === 'target',\n                    });\n                    if (connectedEdges.length) {\n                        if (allowMulti === 'withPort') {\n                            const exist = connectedEdges.some((link) => {\n                                const s = link.getSource();\n                                const t = link.getTarget();\n                                return (s &&\n                                    t &&\n                                    s.cell === source.cell &&\n                                    t.cell === target.cell &&\n                                    s.port != null &&\n                                    s.port === source.port &&\n                                    t.port != null &&\n                                    t.port === target.port);\n                            });\n                            if (exist) {\n                                valid = false;\n                            }\n                        }\n                        else if (!allowMulti) {\n                            const exist = connectedEdges.some((link) => {\n                                const s = link.getSource();\n                                const t = link.getTarget();\n                                return (s && t && s.cell === source.cell && t.cell === target.cell);\n                            });\n                            if (exist) {\n                                valid = false;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (valid && validate != null) {\n            valid = doValidate(validate);\n        }\n        return valid;\n    }\n    allowConnectToBlank(edge) {\n        const graph = this.graph;\n        const options = graph.options.connecting;\n        const allowBlank = options.allowBlank;\n        if (typeof allowBlank !== 'function') {\n            return !!allowBlank;\n        }\n        const edgeView = graph.findViewByCell(edge);\n        const sourceCell = edge.getSourceCell();\n        const targetCell = edge.getTargetCell();\n        const sourceView = graph.findViewByCell(sourceCell);\n        const targetView = graph.findViewByCell(targetCell);\n        return FunctionExt.call(allowBlank, graph, {\n            edge,\n            edgeView,\n            sourceCell,\n            targetCell,\n            sourceView,\n            targetView,\n            sourcePort: edge.getSourcePortId(),\n            targetPort: edge.getTargetPortId(),\n            sourceMagnet: edgeView.sourceMagnet,\n            targetMagnet: edgeView.targetMagnet,\n        });\n    }\n    validateEdge(edge, type, initialTerminal) {\n        const graph = this.graph;\n        if (!this.allowConnectToBlank(edge)) {\n            const sourceId = edge.getSourceCellId();\n            const targetId = edge.getTargetCellId();\n            if (!(sourceId && targetId)) {\n                return false;\n            }\n        }\n        const validate = graph.options.connecting.validateEdge;\n        if (validate) {\n            return FunctionExt.call(validate, graph, {\n                edge,\n                type,\n                previous: initialTerminal,\n            });\n        }\n        return true;\n    }\n    arrowheadDragging(target, x, y, data) {\n        data.x = x;\n        data.y = y;\n        // Checking views right under the pointer\n        if (data.currentTarget !== target) {\n            // Unhighlight the previous view under pointer if there was one.\n            if (data.currentMagnet && data.currentView) {\n                data.currentView.unhighlight(data.currentMagnet, {\n                    type: 'magnetAdsorbed',\n                });\n            }\n            data.currentView = this.graph.findViewByElem(target);\n            if (data.currentView) {\n                // If we found a view that is under the pointer, we need to find\n                // the closest magnet based on the real target element of the event.\n                data.currentMagnet = data.currentView.findMagnet(target);\n                if (data.currentMagnet &&\n                    this.validateConnection(...data.getValidateConnectionArgs(data.currentView, data.currentMagnet), data.currentView.getEdgeTerminal(data.currentMagnet, x, y, this.cell, data.terminalType))) {\n                    data.currentView.highlight(data.currentMagnet, {\n                        type: 'magnetAdsorbed',\n                    });\n                }\n                else {\n                    // This type of connection is not valid. Disregard this magnet.\n                    data.currentMagnet = null;\n                }\n            }\n            else {\n                // Make sure we'll unset previous magnet.\n                data.currentMagnet = null;\n            }\n        }\n        data.currentTarget = target;\n        this.cell.prop(data.terminalType, { x, y }, Object.assign(Object.assign({}, data.options), { ui: true }));\n    }\n    arrowheadDragged(data, x, y) {\n        const view = data.currentView;\n        const magnet = data.currentMagnet;\n        if (!magnet || !view) {\n            return;\n        }\n        view.unhighlight(magnet, { type: 'magnetAdsorbed' });\n        const type = data.terminalType;\n        const terminal = view.getEdgeTerminal(magnet, x, y, this.cell, type);\n        this.cell.setTerminal(type, terminal, { ui: true });\n    }\n    snapArrowhead(x, y, data) {\n        const graph = this.graph;\n        const { snap, allowEdge } = graph.options.connecting;\n        const radius = (typeof snap === 'object' && snap.radius) || 50;\n        const views = graph.renderer.findViewsInArea({\n            x: x - radius,\n            y: y - radius,\n            width: 2 * radius,\n            height: 2 * radius,\n        }, { nodeOnly: true });\n        if (allowEdge) {\n            const edgeViews = graph.renderer\n                .findEdgeViewsFromPoint({ x, y }, radius)\n                .filter((view) => {\n                return view !== this;\n            });\n            views.push(...edgeViews);\n        }\n        const prevView = data.closestView || null;\n        const prevMagnet = data.closestMagnet || null;\n        data.closestView = null;\n        data.closestMagnet = null;\n        let distance;\n        let minDistance = Number.MAX_SAFE_INTEGER;\n        const pos = new Point(x, y);\n        views.forEach((view) => {\n            if (view.container.getAttribute('magnet') !== 'false') {\n                if (view.isNodeView()) {\n                    distance = view.cell.getBBox().getCenter().distance(pos);\n                }\n                else if (view.isEdgeView()) {\n                    const point = view.getClosestPoint(pos);\n                    if (point) {\n                        distance = point.distance(pos);\n                    }\n                    else {\n                        distance = Number.MAX_SAFE_INTEGER;\n                    }\n                }\n                if (distance < radius && distance < minDistance) {\n                    if (prevMagnet === view.container ||\n                        this.validateConnection(...data.getValidateConnectionArgs(view, null), view.getEdgeTerminal(view.container, x, y, this.cell, data.terminalType))) {\n                        minDistance = distance;\n                        data.closestView = view;\n                        data.closestMagnet = view.container;\n                    }\n                }\n            }\n            view.container.querySelectorAll('[magnet]').forEach((magnet) => {\n                if (magnet.getAttribute('magnet') !== 'false') {\n                    const bbox = view.getBBoxOfElement(magnet);\n                    distance = pos.distance(bbox.getCenter());\n                    if (distance < radius && distance < minDistance) {\n                        if (prevMagnet === magnet ||\n                            this.validateConnection(...data.getValidateConnectionArgs(view, magnet), view.getEdgeTerminal(magnet, x, y, this.cell, data.terminalType))) {\n                            minDistance = distance;\n                            data.closestView = view;\n                            data.closestMagnet = magnet;\n                        }\n                    }\n                }\n            });\n        });\n        let terminal;\n        const type = data.terminalType;\n        const closestView = data.closestView;\n        const closestMagnet = data.closestMagnet;\n        const changed = prevMagnet !== closestMagnet;\n        if (prevView && changed) {\n            prevView.unhighlight(prevMagnet, {\n                type: 'magnetAdsorbed',\n            });\n        }\n        if (closestView) {\n            if (!changed) {\n                return;\n            }\n            closestView.highlight(closestMagnet, {\n                type: 'magnetAdsorbed',\n            });\n            terminal = closestView.getEdgeTerminal(closestMagnet, x, y, this.cell, type);\n        }\n        else {\n            terminal = { x, y };\n        }\n        this.cell.setTerminal(type, terminal, {}, Object.assign(Object.assign({}, data.options), { ui: true }));\n    }\n    snapArrowheadEnd(data) {\n        // Finish off link snapping.\n        // Everything except view unhighlighting was already done on pointermove.\n        const closestView = data.closestView;\n        const closestMagnet = data.closestMagnet;\n        if (closestView && closestMagnet) {\n            closestView.unhighlight(closestMagnet, {\n                type: 'magnetAdsorbed',\n            });\n            data.currentMagnet = closestView.findMagnet(closestMagnet);\n        }\n        data.closestView = null;\n        data.closestMagnet = null;\n    }\n    finishEmbedding(data) {\n        // Resets parent of the edge if embedding is enabled\n        if (this.graph.options.embedding.enabled && this.cell.updateParent()) {\n            // Make sure we don't reverse to the original 'z' index\n            data.zIndex = null;\n        }\n    }\n    fallbackConnection(data) {\n        switch (data.fallbackAction) {\n            case 'remove':\n                this.cell.remove({ ui: true });\n                break;\n            case 'revert':\n            default:\n                this.cell.prop(data.terminalType, data.initialTerminal, {\n                    ui: true,\n                });\n                break;\n        }\n    }\n    notifyConnectionEvent(data, e) {\n        const terminalType = data.terminalType;\n        const initialTerminal = data.initialTerminal;\n        const currentTerminal = this.cell[terminalType];\n        const changed = currentTerminal && !Edge.equalTerminals(initialTerminal, currentTerminal);\n        if (changed) {\n            const graph = this.graph;\n            const previous = initialTerminal;\n            const previousCell = previous.cell\n                ? graph.getCellById(previous.cell)\n                : null;\n            const previousPort = previous.port;\n            const previousView = previousCell\n                ? graph.findViewByCell(previousCell)\n                : null;\n            const previousPoint = previousCell || data.isNewEdge\n                ? null\n                : Point.create(initialTerminal).toJSON();\n            const current = currentTerminal;\n            const currentCell = current.cell ? graph.getCellById(current.cell) : null;\n            const currentPort = current.port;\n            const currentView = currentCell ? graph.findViewByCell(currentCell) : null;\n            const currentPoint = currentCell\n                ? null\n                : Point.create(currentTerminal).toJSON();\n            this.notify('edge:connected', {\n                e,\n                previousCell,\n                previousPort,\n                previousView,\n                previousPoint,\n                currentCell,\n                currentView,\n                currentPort,\n                currentPoint,\n                previousMagnet: data.initialMagnet,\n                currentMagnet: data.currentMagnet,\n                edge: this.cell,\n                view: this,\n                type: terminalType,\n                isNew: data.isNewEdge,\n            });\n        }\n    }\n    highlightAvailableMagnets(data) {\n        const graph = this.graph;\n        const cells = graph.model.getCells();\n        data.marked = {};\n        for (let i = 0, ii = cells.length; i < ii; i += 1) {\n            const view = graph.findViewByCell(cells[i]);\n            // Prevent highlighting new edge\n            // Close https://github.com/antvis/X6/issues/2853\n            if (!view || view.cell.id === this.cell.id) {\n                continue;\n            }\n            const magnets = Array.prototype.slice.call(view.container.querySelectorAll('[magnet]'));\n            if (view.container.getAttribute('magnet') !== 'false') {\n                magnets.push(view.container);\n            }\n            const availableMagnets = magnets.filter((magnet) => this.validateConnection(...data.getValidateConnectionArgs(view, magnet), view.getEdgeTerminal(magnet, data.x, data.y, this.cell, data.terminalType)));\n            if (availableMagnets.length > 0) {\n                // highlight all available magnets\n                for (let j = 0, jj = availableMagnets.length; j < jj; j += 1) {\n                    view.highlight(availableMagnets[j], { type: 'magnetAvailable' });\n                }\n                // highlight the entire view\n                view.highlight(null, { type: 'nodeAvailable' });\n                data.marked[view.cell.id] = availableMagnets;\n            }\n        }\n    }\n    unhighlightAvailableMagnets(data) {\n        const marked = data.marked || {};\n        Object.keys(marked).forEach((id) => {\n            const view = this.graph.findViewByCell(id);\n            if (view) {\n                const magnets = marked[id];\n                magnets.forEach((magnet) => {\n                    view.unhighlight(magnet, { type: 'magnetAvailable' });\n                });\n                view.unhighlight(null, { type: 'nodeAvailable' });\n            }\n        });\n        data.marked = null;\n    }\n    startArrowheadDragging(e, x, y) {\n        if (!this.can('arrowheadMovable')) {\n            this.notifyUnhandledMouseDown(e, x, y);\n            return;\n        }\n        const elem = e.target;\n        const type = elem.getAttribute('data-terminal');\n        const data = this.prepareArrowheadDragging(type, { x, y });\n        this.setEventData(e, data);\n    }\n    dragArrowhead(e, x, y) {\n        const data = this.getEventData(e);\n        if (this.graph.options.connecting.snap) {\n            this.snapArrowhead(x, y, data);\n        }\n        else {\n            this.arrowheadDragging(this.getEventTarget(e), x, y, data);\n        }\n    }\n    stopArrowheadDragging(e, x, y) {\n        const graph = this.graph;\n        const data = this.getEventData(e);\n        if (graph.options.connecting.snap) {\n            this.snapArrowheadEnd(data);\n        }\n        else {\n            this.arrowheadDragged(data, x, y);\n        }\n        const valid = this.validateEdge(this.cell, data.terminalType, data.initialTerminal);\n        if (valid) {\n            this.finishEmbedding(data);\n            this.notifyConnectionEvent(data, e);\n        }\n        else {\n            // If the changed edge is not allowed, revert to its previous state.\n            this.fallbackConnection(data);\n        }\n        this.afterArrowheadDragging(data);\n    }\n    // #endregion\n    // #region drag lable\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    startLabelDragging(e, x, y) {\n        if (this.can('edgeLabelMovable')) {\n            const target = e.currentTarget;\n            const index = parseInt(target.getAttribute('data-index'), 10);\n            const positionAngle = this.getLabelPositionAngle(index);\n            const labelPositionArgs = this.getLabelPositionArgs(index);\n            const defaultLabelPositionArgs = this.getDefaultLabelPositionArgs();\n            const positionArgs = this.mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs);\n            this.setEventData(e, {\n                index,\n                positionAngle,\n                positionArgs,\n                stopPropagation: true,\n                action: 'drag-label',\n            });\n        }\n        else {\n            // If labels can't be dragged no default action is triggered.\n            this.setEventData(e, { stopPropagation: true });\n        }\n        this.graph.view.delegateDragEvents(e, this);\n    }\n    dragLabel(e, x, y) {\n        const data = this.getEventData(e);\n        const originLabel = this.cell.getLabelAt(data.index);\n        const label = ObjectExt.merge({}, originLabel, {\n            position: this.getLabelPosition(x, y, data.positionAngle, data.positionArgs),\n        });\n        this.cell.setLabelAt(data.index, label);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    stopLabelDragging(e, x, y) { }\n}\n(function (EdgeView) {\n    EdgeView.toStringTag = `X6.${EdgeView.name}`;\n    function isEdgeView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof EdgeView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === EdgeView.toStringTag) &&\n            typeof view.isNodeView === 'function' &&\n            typeof view.isEdgeView === 'function' &&\n            typeof view.confirmUpdate === 'function' &&\n            typeof view.update === 'function' &&\n            typeof view.getConnection === 'function') {\n            return true;\n        }\n        return false;\n    }\n    EdgeView.isEdgeView = isEdgeView;\n})(EdgeView || (EdgeView = {}));\nEdgeView.config({\n    isSvgElement: true,\n    priority: 1,\n    bootstrap: ['render', 'source', 'target'],\n    actions: {\n        view: ['render'],\n        markup: ['render'],\n        attrs: ['update'],\n        source: ['source', 'update'],\n        target: ['target', 'update'],\n        router: ['update'],\n        connector: ['update'],\n        labels: ['labels'],\n        defaultLabel: ['labels'],\n        tools: ['tools'],\n        vertices: ['vertices', 'update'],\n    },\n});\nEdgeView.registry.register('edge', EdgeView, true);\n//# sourceMappingURL=edge.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom, FunctionExt } from '@antv/x6-common';\nimport { Cell } from '../model';\nimport { Config } from '../config';\nimport { View, Markup } from '../view';\nexport class GraphView extends View {\n    get options() {\n        return this.graph.options;\n    }\n    constructor(graph) {\n        super();\n        this.graph = graph;\n        const { selectors, fragment } = Markup.parseJSONMarkup(GraphView.markup);\n        this.background = selectors.background;\n        this.grid = selectors.grid;\n        this.svg = selectors.svg;\n        this.defs = selectors.defs;\n        this.viewport = selectors.viewport;\n        this.primer = selectors.primer;\n        this.stage = selectors.stage;\n        this.decorator = selectors.decorator;\n        this.overlay = selectors.overlay;\n        this.container = this.options.container;\n        this.restore = GraphView.snapshoot(this.container);\n        Dom.addClass(this.container, this.prefixClassName('graph'));\n        Dom.append(this.container, fragment);\n        this.delegateEvents();\n    }\n    delegateEvents() {\n        const ctor = this.constructor;\n        super.delegateEvents(ctor.events);\n        return this;\n    }\n    /**\n     * Guard the specified event. If the event is not interesting, it\n     * returns `true`, otherwise returns `false`.\n     */\n    guard(e, view) {\n        // handled as `contextmenu` type\n        if (e.type === 'mousedown' && e.button === 2) {\n            return true;\n        }\n        if (this.options.guard && this.options.guard(e, view)) {\n            return true;\n        }\n        if (e.data && e.data.guarded !== undefined) {\n            return e.data.guarded;\n        }\n        if (view && view.cell && Cell.isCell(view.cell)) {\n            return false;\n        }\n        if (this.svg === e.target ||\n            this.container === e.target ||\n            this.svg.contains(e.target)) {\n            return false;\n        }\n        return true;\n    }\n    findView(elem) {\n        return this.graph.findViewByElem(elem);\n    }\n    onDblClick(evt) {\n        if (this.options.preventDefaultDblClick) {\n            evt.preventDefault();\n        }\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        if (view) {\n            view.onDblClick(e, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:dblclick', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n    }\n    onClick(evt) {\n        if (this.getMouseMovedCount(evt) <= this.options.clickThreshold) {\n            const e = this.normalizeEvent(evt);\n            const view = this.findView(e.target);\n            if (this.guard(e, view)) {\n                return;\n            }\n            const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n            if (view) {\n                view.onClick(e, localPoint.x, localPoint.y);\n            }\n            else {\n                this.graph.trigger('blank:click', {\n                    e,\n                    x: localPoint.x,\n                    y: localPoint.y,\n                });\n            }\n        }\n    }\n    isPreventDefaultContextMenu(view) {\n        let preventDefaultContextMenu = this.options.preventDefaultContextMenu;\n        if (typeof preventDefaultContextMenu === 'function') {\n            preventDefaultContextMenu = FunctionExt.call(preventDefaultContextMenu, this.graph, { view });\n        }\n        return preventDefaultContextMenu;\n    }\n    onContextMenu(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.isPreventDefaultContextMenu(view)) {\n            evt.preventDefault();\n        }\n        if (this.guard(e, view)) {\n            return;\n        }\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        if (view) {\n            view.onContextMenu(e, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:contextmenu', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n    }\n    delegateDragEvents(e, view) {\n        if (e.data == null) {\n            e.data = {};\n        }\n        this.setEventData(e, {\n            currentView: view || null,\n            mouseMovedCount: 0,\n            startPosition: {\n                x: e.clientX,\n                y: e.clientY,\n            },\n        });\n        const ctor = this.constructor;\n        this.delegateDocumentEvents(ctor.documentEvents, e.data);\n        this.undelegateEvents();\n    }\n    getMouseMovedCount(e) {\n        const data = this.getEventData(e);\n        return data.mouseMovedCount || 0;\n    }\n    onMouseDown(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        if (this.options.preventDefaultMouseDown) {\n            evt.preventDefault();\n        }\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        if (view) {\n            view.onMouseDown(e, localPoint.x, localPoint.y);\n        }\n        else {\n            if (this.options.preventDefaultBlankAction &&\n                ['touchstart'].includes(e.type)) {\n                evt.preventDefault();\n            }\n            this.graph.trigger('blank:mousedown', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n        this.delegateDragEvents(e, view);\n    }\n    onMouseMove(evt) {\n        const data = this.getEventData(evt);\n        const startPosition = data.startPosition;\n        if (startPosition &&\n            startPosition.x === evt.clientX &&\n            startPosition.y === evt.clientY) {\n            return;\n        }\n        if (data.mouseMovedCount == null) {\n            data.mouseMovedCount = 0;\n        }\n        data.mouseMovedCount += 1;\n        const mouseMovedCount = data.mouseMovedCount;\n        if (mouseMovedCount <= this.options.moveThreshold) {\n            return;\n        }\n        const e = this.normalizeEvent(evt);\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        const view = data.currentView;\n        if (view) {\n            view.onMouseMove(e, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:mousemove', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n        this.setEventData(e, data);\n    }\n    onMouseUp(e) {\n        this.undelegateDocumentEvents();\n        const normalized = this.normalizeEvent(e);\n        const localPoint = this.graph.snapToGrid(normalized.clientX, normalized.clientY);\n        const data = this.getEventData(e);\n        const view = data.currentView;\n        if (view) {\n            view.onMouseUp(normalized, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:mouseup', {\n                e: normalized,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n        if (!e.isPropagationStopped()) {\n            const ev = new Dom.EventObject(e, {\n                type: 'click',\n                data: e.data,\n            });\n            this.onClick(ev);\n        }\n        e.stopImmediatePropagation();\n        this.delegateEvents();\n    }\n    onMouseOver(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        if (view) {\n            view.onMouseOver(e);\n        }\n        else {\n            // prevent border of paper from triggering this\n            if (this.container === e.target) {\n                return;\n            }\n            this.graph.trigger('blank:mouseover', { e });\n        }\n    }\n    onMouseOut(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        if (view) {\n            view.onMouseOut(e);\n        }\n        else {\n            if (this.container === e.target) {\n                return;\n            }\n            this.graph.trigger('blank:mouseout', { e });\n        }\n    }\n    onMouseEnter(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const relatedView = this.graph.findViewByElem(e.relatedTarget);\n        if (view) {\n            if (relatedView === view) {\n                // mouse moved from tool to view\n                return;\n            }\n            view.onMouseEnter(e);\n        }\n        else {\n            if (relatedView) {\n                return;\n            }\n            this.graph.trigger('graph:mouseenter', { e });\n        }\n    }\n    onMouseLeave(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const relatedView = this.graph.findViewByElem(e.relatedTarget);\n        if (view) {\n            if (relatedView === view) {\n                // mouse moved from view to tool\n                return;\n            }\n            view.onMouseLeave(e);\n        }\n        else {\n            if (relatedView) {\n                return;\n            }\n            this.graph.trigger('graph:mouseleave', { e });\n        }\n    }\n    onMouseWheel(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const originalEvent = e.originalEvent;\n        const localPoint = this.graph.snapToGrid(originalEvent.clientX, originalEvent.clientY);\n        const delta = Math.max(-1, Math.min(1, originalEvent.wheelDelta || -originalEvent.detail));\n        if (view) {\n            view.onMouseWheel(e, localPoint.x, localPoint.y, delta);\n        }\n        else {\n            this.graph.trigger('blank:mousewheel', {\n                e,\n                delta,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n    }\n    onCustomEvent(evt) {\n        const elem = evt.currentTarget;\n        const event = elem.getAttribute('event') || elem.getAttribute('data-event');\n        if (event) {\n            const view = this.findView(elem);\n            if (view) {\n                const e = this.normalizeEvent(evt);\n                if (this.guard(e, view)) {\n                    return;\n                }\n                const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n                view.onCustomEvent(e, event, localPoint.x, localPoint.y);\n            }\n        }\n    }\n    handleMagnetEvent(evt, handler) {\n        const magnetElem = evt.currentTarget;\n        const magnetValue = magnetElem.getAttribute('magnet');\n        if (magnetValue && magnetValue.toLowerCase() !== 'false') {\n            const view = this.findView(magnetElem);\n            if (view) {\n                const e = this.normalizeEvent(evt);\n                if (this.guard(e, view)) {\n                    return;\n                }\n                const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n                FunctionExt.call(handler, this.graph, view, e, magnetElem, localPoint.x, localPoint.y);\n            }\n        }\n    }\n    onMagnetMouseDown(e) {\n        this.handleMagnetEvent(e, (view, e, magnet, x, y) => {\n            view.onMagnetMouseDown(e, magnet, x, y);\n        });\n    }\n    onMagnetDblClick(e) {\n        this.handleMagnetEvent(e, (view, e, magnet, x, y) => {\n            view.onMagnetDblClick(e, magnet, x, y);\n        });\n    }\n    onMagnetContextMenu(e) {\n        const view = this.findView(e.target);\n        if (this.isPreventDefaultContextMenu(view)) {\n            e.preventDefault();\n        }\n        this.handleMagnetEvent(e, (view, e, magnet, x, y) => {\n            view.onMagnetContextMenu(e, magnet, x, y);\n        });\n    }\n    onLabelMouseDown(evt) {\n        const labelNode = evt.currentTarget;\n        const view = this.findView(labelNode);\n        if (view) {\n            const e = this.normalizeEvent(evt);\n            if (this.guard(e, view)) {\n                return;\n            }\n            const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n            view.onLabelMouseDown(e, localPoint.x, localPoint.y);\n        }\n    }\n    onImageDragStart() {\n        // This is the only way to prevent image dragging in Firefox that works.\n        // Setting -moz-user-select: none, draggable=\"false\" attribute or\n        // user-drag: none didn't help.\n        return false;\n    }\n    dispose() {\n        this.undelegateEvents();\n        this.undelegateDocumentEvents();\n        this.restore();\n        this.restore = () => { };\n    }\n}\n__decorate([\n    View.dispose()\n], GraphView.prototype, \"dispose\", null);\n(function (GraphView) {\n    const prefixCls = `${Config.prefixCls}-graph`;\n    GraphView.markup = [\n        {\n            ns: Dom.ns.xhtml,\n            tagName: 'div',\n            selector: 'background',\n            className: `${prefixCls}-background`,\n        },\n        {\n            ns: Dom.ns.xhtml,\n            tagName: 'div',\n            selector: 'grid',\n            className: `${prefixCls}-grid`,\n        },\n        {\n            ns: Dom.ns.svg,\n            tagName: 'svg',\n            selector: 'svg',\n            className: `${prefixCls}-svg`,\n            attrs: {\n                width: '100%',\n                height: '100%',\n                'xmlns:xlink': Dom.ns.xlink,\n            },\n            children: [\n                {\n                    tagName: 'defs',\n                    selector: 'defs',\n                },\n                {\n                    tagName: 'g',\n                    selector: 'viewport',\n                    className: `${prefixCls}-svg-viewport`,\n                    children: [\n                        {\n                            tagName: 'g',\n                            selector: 'primer',\n                            className: `${prefixCls}-svg-primer`,\n                        },\n                        {\n                            tagName: 'g',\n                            selector: 'stage',\n                            className: `${prefixCls}-svg-stage`,\n                        },\n                        {\n                            tagName: 'g',\n                            selector: 'decorator',\n                            className: `${prefixCls}-svg-decorator`,\n                        },\n                        {\n                            tagName: 'g',\n                            selector: 'overlay',\n                            className: `${prefixCls}-svg-overlay`,\n                        },\n                    ],\n                },\n            ],\n        },\n    ];\n    function snapshoot(elem) {\n        const cloned = elem.cloneNode();\n        elem.childNodes.forEach((child) => cloned.appendChild(child));\n        return () => {\n            // remove all children\n            Dom.empty(elem);\n            // remove all attributes\n            while (elem.attributes.length > 0) {\n                elem.removeAttribute(elem.attributes[0].name);\n            }\n            // restore attributes\n            for (let i = 0, l = cloned.attributes.length; i < l; i += 1) {\n                const attr = cloned.attributes[i];\n                elem.setAttribute(attr.name, attr.value);\n            }\n            // restore children\n            cloned.childNodes.forEach((child) => elem.appendChild(child));\n        };\n    }\n    GraphView.snapshoot = snapshoot;\n})(GraphView || (GraphView = {}));\n(function (GraphView) {\n    const prefixCls = Config.prefixCls;\n    GraphView.events = {\n        dblclick: 'onDblClick',\n        contextmenu: 'onContextMenu',\n        touchstart: 'onMouseDown',\n        mousedown: 'onMouseDown',\n        mouseover: 'onMouseOver',\n        mouseout: 'onMouseOut',\n        mouseenter: 'onMouseEnter',\n        mouseleave: 'onMouseLeave',\n        mousewheel: 'onMouseWheel',\n        DOMMouseScroll: 'onMouseWheel',\n        [`mouseenter  .${prefixCls}-cell`]: 'onMouseEnter',\n        [`mouseleave  .${prefixCls}-cell`]: 'onMouseLeave',\n        [`mouseenter  .${prefixCls}-cell-tools`]: 'onMouseEnter',\n        [`mouseleave  .${prefixCls}-cell-tools`]: 'onMouseLeave',\n        [`mousedown   .${prefixCls}-cell [event]`]: 'onCustomEvent',\n        [`touchstart  .${prefixCls}-cell [event]`]: 'onCustomEvent',\n        [`mousedown   .${prefixCls}-cell [data-event]`]: 'onCustomEvent',\n        [`touchstart  .${prefixCls}-cell [data-event]`]: 'onCustomEvent',\n        [`dblclick    .${prefixCls}-cell [magnet]`]: 'onMagnetDblClick',\n        [`contextmenu .${prefixCls}-cell [magnet]`]: 'onMagnetContextMenu',\n        [`mousedown   .${prefixCls}-cell [magnet]`]: 'onMagnetMouseDown',\n        [`touchstart  .${prefixCls}-cell [magnet]`]: 'onMagnetMouseDown',\n        [`dblclick    .${prefixCls}-cell [data-magnet]`]: 'onMagnetDblClick',\n        [`contextmenu .${prefixCls}-cell [data-magnet]`]: 'onMagnetContextMenu',\n        [`mousedown   .${prefixCls}-cell [data-magnet]`]: 'onMagnetMouseDown',\n        [`touchstart  .${prefixCls}-cell [data-magnet]`]: 'onMagnetMouseDown',\n        [`dragstart   .${prefixCls}-cell image`]: 'onImageDragStart',\n        [`mousedown   .${prefixCls}-edge .${prefixCls}-edge-label`]: 'onLabelMouseDown',\n        [`touchstart  .${prefixCls}-edge .${prefixCls}-edge-label`]: 'onLabelMouseDown',\n    };\n    GraphView.documentEvents = {\n        mousemove: 'onMouseMove',\n        touchmove: 'onMouseMove',\n        mouseup: 'onMouseUp',\n        touchend: 'onMouseUp',\n        touchcancel: 'onMouseUp',\n    };\n})(GraphView || (GraphView = {}));\n//# sourceMappingURL=view.js.map","/* eslint-disable */\n/**\n * Auto generated file, do not modify it!\n */\nexport const content = `.x6-graph {\n  position: relative;\n  overflow: hidden;\n  outline: none;\n  touch-action: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node.x6-node-immovable {\n  cursor: default;\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignObject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignObject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n.x6-cell-tool-editor {\n  position: relative;\n  display: inline-block;\n  min-height: 1em;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  text-align: center;\n  vertical-align: top;\n  overflow-wrap: normal;\n  outline: none;\n  transform-origin: 0 0;\n  -webkit-user-drag: none;\n}\n.x6-edge-tool-editor {\n  border: 1px solid #275fc5;\n  border-radius: 2px;\n}\n`;\n//# sourceMappingURL=raw.js.map","import { Disposable } from '@antv/x6-common';\nexport class Base extends Disposable {\n    get options() {\n        return this.graph.options;\n    }\n    get model() {\n        return this.graph.model;\n    }\n    get view() {\n        return this.graph.view;\n    }\n    constructor(graph) {\n        super();\n        this.graph = graph;\n        this.init();\n    }\n    init() { }\n}\n//# sourceMappingURL=base.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { CssLoader } from '@antv/x6-common';\nimport { Config } from '../config';\nimport { content } from '../style/raw';\nimport { Base } from './base';\nexport class CSSManager extends Base {\n    init() {\n        if (Config.autoInsertCSS) {\n            CssLoader.ensure('core', content);\n        }\n    }\n    dispose() {\n        CssLoader.clean('core');\n    }\n}\n__decorate([\n    CSSManager.dispose()\n], CSSManager.prototype, \"dispose\", null);\n//# sourceMappingURL=css.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Config } from '../config';\nimport { Edge as StandardEdge } from '../shape';\nexport var Options;\n(function (Options) {\n    function get(options) {\n        const { grid, panning, mousewheel, embedding } = options, others = __rest(options\n        // size\n        // ----\n        , [\"grid\", \"panning\", \"mousewheel\", \"embedding\"]);\n        // size\n        // ----\n        const container = options.container;\n        if (container != null) {\n            if (others.width == null) {\n                others.width = container.clientWidth;\n            }\n            if (others.height == null) {\n                others.height = container.clientHeight;\n            }\n        }\n        else {\n            throw new Error(`Ensure the container of the graph is specified and valid`);\n        }\n        const result = ObjectExt.merge({}, Options.defaults, others);\n        // grid\n        // ----\n        const defaultGrid = { size: 10, visible: false };\n        if (typeof grid === 'number') {\n            result.grid = { size: grid, visible: false };\n        }\n        else if (typeof grid === 'boolean') {\n            result.grid = Object.assign(Object.assign({}, defaultGrid), { visible: grid });\n        }\n        else {\n            result.grid = Object.assign(Object.assign({}, defaultGrid), grid);\n        }\n        // booleas\n        // -------\n        const booleas = [\n            'panning',\n            'mousewheel',\n            'embedding',\n        ];\n        booleas.forEach((key) => {\n            const val = options[key];\n            if (typeof val === 'boolean') {\n                result[key].enabled = val;\n            }\n            else {\n                result[key] = Object.assign(Object.assign({}, result[key]), val);\n            }\n        });\n        return result;\n    }\n    Options.get = get;\n})(Options || (Options = {}));\n(function (Options) {\n    Options.defaults = {\n        x: 0,\n        y: 0,\n        scaling: {\n            min: 0.01,\n            max: 16,\n        },\n        grid: {\n            size: 10,\n            visible: false,\n        },\n        background: false,\n        panning: {\n            enabled: false,\n            eventTypes: ['leftMouseDown'],\n        },\n        mousewheel: {\n            enabled: false,\n            factor: 1.2,\n            zoomAtMousePosition: true,\n        },\n        highlighting: {\n            default: {\n                name: 'stroke',\n                args: {\n                    padding: 3,\n                },\n            },\n            nodeAvailable: {\n                name: 'className',\n                args: {\n                    className: Config.prefix('available-node'),\n                },\n            },\n            magnetAvailable: {\n                name: 'className',\n                args: {\n                    className: Config.prefix('available-magnet'),\n                },\n            },\n        },\n        connecting: {\n            snap: false,\n            allowLoop: true,\n            allowNode: true,\n            allowEdge: false,\n            allowPort: true,\n            allowBlank: true,\n            allowMulti: true,\n            highlight: false,\n            anchor: 'center',\n            edgeAnchor: 'ratio',\n            connectionPoint: 'boundary',\n            router: 'normal',\n            connector: 'normal',\n            validateConnection({ type, sourceView, targetView }) {\n                const view = type === 'target' ? targetView : sourceView;\n                return view != null;\n            },\n            createEdge() {\n                return new StandardEdge();\n            },\n        },\n        translating: {\n            restrict: false,\n        },\n        embedding: {\n            enabled: false,\n            findParent: 'bbox',\n            frontOnly: true,\n            validate: () => true,\n        },\n        moveThreshold: 0,\n        clickThreshold: 0,\n        magnetThreshold: 0,\n        preventDefaultDblClick: true,\n        preventDefaultMouseDown: false,\n        preventDefaultContextMenu: true,\n        preventDefaultBlankAction: true,\n        interacting: {\n            edgeLabelMovable: false,\n        },\n        async: true,\n        virtual: false,\n        guard: () => false,\n    };\n})(Options || (Options = {}));\n//# sourceMappingURL=options.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Dom, Vector } from '@antv/x6-common';\nimport * as Registry from '../registry';\nimport { Base } from './base';\nexport class GridManager extends Base {\n    get elem() {\n        return this.view.grid;\n    }\n    get grid() {\n        return this.options.grid;\n    }\n    init() {\n        this.startListening();\n        this.draw(this.grid);\n    }\n    startListening() {\n        this.graph.on('scale', this.update, this);\n        this.graph.on('translate', this.update, this);\n    }\n    stopListening() {\n        this.graph.off('scale', this.update, this);\n        this.graph.off('translate', this.update, this);\n    }\n    setVisible(visible) {\n        if (this.grid.visible !== visible) {\n            this.grid.visible = visible;\n            this.update();\n        }\n    }\n    getGridSize() {\n        return this.grid.size;\n    }\n    setGridSize(size) {\n        this.grid.size = Math.max(size, 1);\n        this.update();\n    }\n    show() {\n        this.setVisible(true);\n        this.update();\n    }\n    hide() {\n        this.setVisible(false);\n        this.update();\n    }\n    clear() {\n        this.elem.style.backgroundImage = '';\n    }\n    draw(options) {\n        this.clear();\n        this.instance = null;\n        Object.assign(this.grid, options);\n        this.patterns = this.resolveGrid(options);\n        this.update();\n    }\n    update(options = {}) {\n        const gridSize = this.grid.size;\n        if (gridSize <= 1 || !this.grid.visible) {\n            return this.clear();\n        }\n        const ctm = this.graph.matrix();\n        const grid = this.getInstance();\n        const items = Array.isArray(options) ? options : [options];\n        this.patterns.forEach((settings, index) => {\n            const id = `pattern_${index}`;\n            const sx = ctm.a || 1;\n            const sy = ctm.d || 1;\n            const { update, markup } = settings, others = __rest(settings, [\"update\", \"markup\"]);\n            const options = Object.assign(Object.assign(Object.assign({}, others), items[index]), { sx,\n                sy, ox: ctm.e || 0, oy: ctm.f || 0, width: gridSize * sx, height: gridSize * sy });\n            if (!grid.has(id)) {\n                grid.add(id, Vector.create('pattern', { id, patternUnits: 'userSpaceOnUse' }, Vector.createVectors(markup)).node);\n            }\n            const patternElem = grid.get(id);\n            if (typeof update === 'function') {\n                update(patternElem.childNodes[0], options);\n            }\n            let x = options.ox % options.width;\n            if (x < 0) {\n                x += options.width;\n            }\n            let y = options.oy % options.height;\n            if (y < 0) {\n                y += options.height;\n            }\n            Dom.attr(patternElem, {\n                x,\n                y,\n                width: options.width,\n                height: options.height,\n            });\n        });\n        const base64 = new XMLSerializer().serializeToString(grid.root);\n        const url = `url(data:image/svg+xml;base64,${btoa(base64)})`;\n        this.elem.style.backgroundImage = url;\n    }\n    getInstance() {\n        if (!this.instance) {\n            this.instance = new Registry.Grid();\n        }\n        return this.instance;\n    }\n    resolveGrid(options) {\n        if (!options) {\n            return [];\n        }\n        const type = options.type;\n        if (type == null) {\n            return [\n                Object.assign(Object.assign({}, Registry.Grid.presets.dot), options.args),\n            ];\n        }\n        const items = Registry.Grid.registry.get(type);\n        if (items) {\n            let args = options.args || [];\n            if (!Array.isArray(args)) {\n                args = [args];\n            }\n            return Array.isArray(items)\n                ? items.map((item, index) => (Object.assign(Object.assign({}, item), args[index])))\n                : [Object.assign(Object.assign({}, items), args[0])];\n        }\n        return Registry.Grid.registry.onNotFound(type);\n    }\n    dispose() {\n        this.stopListening();\n        this.clear();\n    }\n}\n__decorate([\n    Base.dispose()\n], GridManager.prototype, \"dispose\", null);\n//# sourceMappingURL=grid.js.map","import { Dom, NumberExt } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { Base } from './base';\nimport { Util } from '../util';\nexport class TransformManager extends Base {\n    get container() {\n        return this.graph.view.container;\n    }\n    get viewport() {\n        return this.graph.view.viewport;\n    }\n    get stage() {\n        return this.graph.view.stage;\n    }\n    init() {\n        this.resize();\n    }\n    /**\n     * Returns the current transformation matrix of the graph.\n     */\n    getMatrix() {\n        const transform = this.viewport.getAttribute('transform');\n        if (transform !== this.viewportTransformString) {\n            // `getCTM`: top-left relative to the SVG element\n            // `getScreenCTM`: top-left relative to the document\n            this.viewportMatrix = this.viewport.getCTM();\n            this.viewportTransformString = transform;\n        }\n        // Clone the cached current transformation matrix.\n        // If no matrix previously stored the identity matrix is returned.\n        return Dom.createSVGMatrix(this.viewportMatrix);\n    }\n    /**\n     * Sets new transformation with the given `matrix`\n     */\n    setMatrix(matrix) {\n        const ctm = Dom.createSVGMatrix(matrix);\n        const transform = Dom.matrixToTransformString(ctm);\n        this.viewport.setAttribute('transform', transform);\n        this.viewportMatrix = ctm;\n        this.viewportTransformString = transform;\n    }\n    resize(width, height) {\n        let w = width === undefined ? this.options.width : width;\n        let h = height === undefined ? this.options.height : height;\n        this.options.width = w;\n        this.options.height = h;\n        if (typeof w === 'number') {\n            w = Math.round(w);\n        }\n        if (typeof h === 'number') {\n            h = Math.round(h);\n        }\n        this.container.style.width = w == null ? '' : `${w}px`;\n        this.container.style.height = h == null ? '' : `${h}px`;\n        const size = this.getComputedSize();\n        this.graph.trigger('resize', Object.assign({}, size));\n        return this;\n    }\n    getComputedSize() {\n        let w = this.options.width;\n        let h = this.options.height;\n        if (!NumberExt.isNumber(w)) {\n            w = this.container.clientWidth;\n        }\n        if (!NumberExt.isNumber(h)) {\n            h = this.container.clientHeight;\n        }\n        return { width: w, height: h };\n    }\n    getScale() {\n        return Dom.matrixToScale(this.getMatrix());\n    }\n    scale(sx, sy = sx, ox = 0, oy = 0) {\n        sx = this.clampScale(sx); // eslint-disable-line\n        sy = this.clampScale(sy); // eslint-disable-line\n        if (ox || oy) {\n            const ts = this.getTranslation();\n            const tx = ts.tx - ox * (sx - 1);\n            const ty = ts.ty - oy * (sy - 1);\n            if (tx !== ts.tx || ty !== ts.ty) {\n                this.translate(tx, ty);\n            }\n        }\n        const matrix = this.getMatrix();\n        matrix.a = sx;\n        matrix.d = sy;\n        this.setMatrix(matrix);\n        this.graph.trigger('scale', { sx, sy, ox, oy });\n        return this;\n    }\n    clampScale(scale) {\n        const range = this.graph.options.scaling;\n        return NumberExt.clamp(scale, range.min || 0.01, range.max || 16);\n    }\n    getZoom() {\n        return this.getScale().sx;\n    }\n    zoom(factor, options) {\n        options = options || {}; // eslint-disable-line\n        let sx = factor;\n        let sy = factor;\n        const scale = this.getScale();\n        const clientSize = this.getComputedSize();\n        let cx = clientSize.width / 2;\n        let cy = clientSize.height / 2;\n        if (!options.absolute) {\n            sx += scale.sx;\n            sy += scale.sy;\n        }\n        if (options.scaleGrid) {\n            sx = Math.round(sx / options.scaleGrid) * options.scaleGrid;\n            sy = Math.round(sy / options.scaleGrid) * options.scaleGrid;\n        }\n        if (options.maxScale) {\n            sx = Math.min(options.maxScale, sx);\n            sy = Math.min(options.maxScale, sy);\n        }\n        if (options.minScale) {\n            sx = Math.max(options.minScale, sx);\n            sy = Math.max(options.minScale, sy);\n        }\n        if (options.center) {\n            cx = options.center.x;\n            cy = options.center.y;\n        }\n        sx = this.clampScale(sx);\n        sy = this.clampScale(sy);\n        if (cx || cy) {\n            const ts = this.getTranslation();\n            const tx = cx - (cx - ts.tx) * (sx / scale.sx);\n            const ty = cy - (cy - ts.ty) * (sy / scale.sy);\n            if (tx !== ts.tx || ty !== ts.ty) {\n                this.translate(tx, ty);\n            }\n        }\n        this.scale(sx, sy);\n        return this;\n    }\n    getRotation() {\n        return Dom.matrixToRotation(this.getMatrix());\n    }\n    rotate(angle, cx, cy) {\n        if (cx == null || cy == null) {\n            const bbox = Util.getBBox(this.stage);\n            cx = bbox.width / 2; // eslint-disable-line\n            cy = bbox.height / 2; // eslint-disable-line\n        }\n        const ctm = this.getMatrix()\n            .translate(cx, cy)\n            .rotate(angle)\n            .translate(-cx, -cy);\n        this.setMatrix(ctm);\n        return this;\n    }\n    getTranslation() {\n        return Dom.matrixToTranslation(this.getMatrix());\n    }\n    translate(tx, ty) {\n        const matrix = this.getMatrix();\n        matrix.e = tx || 0;\n        matrix.f = ty || 0;\n        this.setMatrix(matrix);\n        const ts = this.getTranslation();\n        this.options.x = ts.tx;\n        this.options.y = ts.ty;\n        this.graph.trigger('translate', Object.assign({}, ts));\n        return this;\n    }\n    setOrigin(ox, oy) {\n        return this.translate(ox || 0, oy || 0);\n    }\n    fitToContent(gridWidth, gridHeight, padding, options) {\n        if (typeof gridWidth === 'object') {\n            const opts = gridWidth;\n            gridWidth = opts.gridWidth || 1; // eslint-disable-line\n            gridHeight = opts.gridHeight || 1; // eslint-disable-line\n            padding = opts.padding || 0; // eslint-disable-line\n            options = opts; // eslint-disable-line\n        }\n        else {\n            gridWidth = gridWidth || 1; // eslint-disable-line\n            gridHeight = gridHeight || 1; // eslint-disable-line\n            padding = padding || 0; // eslint-disable-line\n            if (options == null) {\n                options = {}; // eslint-disable-line\n            }\n        }\n        const paddings = NumberExt.normalizeSides(padding);\n        const border = options.border || 0;\n        const contentArea = options.contentArea\n            ? Rectangle.create(options.contentArea)\n            : this.getContentArea(options);\n        if (border > 0) {\n            contentArea.inflate(border);\n        }\n        const scale = this.getScale();\n        const translate = this.getTranslation();\n        const sx = scale.sx;\n        const sy = scale.sy;\n        contentArea.x *= sx;\n        contentArea.y *= sy;\n        contentArea.width *= sx;\n        contentArea.height *= sy;\n        let width = Math.max(Math.ceil((contentArea.width + contentArea.x) / gridWidth), 1) *\n            gridWidth;\n        let height = Math.max(Math.ceil((contentArea.height + contentArea.y) / gridHeight), 1) * gridHeight;\n        let tx = 0;\n        let ty = 0;\n        if ((options.allowNewOrigin === 'negative' && contentArea.x < 0) ||\n            (options.allowNewOrigin === 'positive' && contentArea.x >= 0) ||\n            options.allowNewOrigin === 'any') {\n            tx = Math.ceil(-contentArea.x / gridWidth) * gridWidth;\n            tx += paddings.left;\n            width += tx;\n        }\n        if ((options.allowNewOrigin === 'negative' && contentArea.y < 0) ||\n            (options.allowNewOrigin === 'positive' && contentArea.y >= 0) ||\n            options.allowNewOrigin === 'any') {\n            ty = Math.ceil(-contentArea.y / gridHeight) * gridHeight;\n            ty += paddings.top;\n            height += ty;\n        }\n        width += paddings.right;\n        height += paddings.bottom;\n        // Make sure the resulting width and height are greater than minimum.\n        width = Math.max(width, options.minWidth || 0);\n        height = Math.max(height, options.minHeight || 0);\n        // Make sure the resulting width and height are lesser than maximum.\n        width = Math.min(width, options.maxWidth || Number.MAX_SAFE_INTEGER);\n        height = Math.min(height, options.maxHeight || Number.MAX_SAFE_INTEGER);\n        const size = this.getComputedSize();\n        const sizeChanged = width !== size.width || height !== size.height;\n        const originChanged = tx !== translate.tx || ty !== translate.ty;\n        // Change the dimensions only if there is a size discrepency or an origin change\n        if (originChanged) {\n            this.translate(tx, ty);\n        }\n        if (sizeChanged) {\n            this.resize(width, height);\n        }\n        return new Rectangle(-tx / sx, -ty / sy, width / sx, height / sy);\n    }\n    scaleContentToFit(options = {}) {\n        this.scaleContentToFitImpl(options);\n    }\n    scaleContentToFitImpl(options = {}, translate = true) {\n        let contentBBox;\n        let contentLocalOrigin;\n        if (options.contentArea) {\n            const contentArea = options.contentArea;\n            contentBBox = this.graph.localToGraph(contentArea);\n            contentLocalOrigin = Point.create(contentArea);\n        }\n        else {\n            contentBBox = this.getContentBBox(options);\n            contentLocalOrigin = this.graph.graphToLocal(contentBBox);\n        }\n        if (!contentBBox.width || !contentBBox.height) {\n            return;\n        }\n        const padding = NumberExt.normalizeSides(options.padding);\n        const minScale = options.minScale || 0;\n        const maxScale = options.maxScale || Number.MAX_SAFE_INTEGER;\n        const minScaleX = options.minScaleX || minScale;\n        const maxScaleX = options.maxScaleX || maxScale;\n        const minScaleY = options.minScaleY || minScale;\n        const maxScaleY = options.maxScaleY || maxScale;\n        let fittingBox;\n        if (options.viewportArea) {\n            fittingBox = options.viewportArea;\n        }\n        else {\n            const computedSize = this.getComputedSize();\n            const currentTranslate = this.getTranslation();\n            fittingBox = {\n                x: currentTranslate.tx,\n                y: currentTranslate.ty,\n                width: computedSize.width,\n                height: computedSize.height,\n            };\n        }\n        fittingBox = Rectangle.create(fittingBox).moveAndExpand({\n            x: padding.left,\n            y: padding.top,\n            width: -padding.left - padding.right,\n            height: -padding.top - padding.bottom,\n        });\n        const currentScale = this.getScale();\n        let newSX = (fittingBox.width / contentBBox.width) * currentScale.sx;\n        let newSY = (fittingBox.height / contentBBox.height) * currentScale.sy;\n        if (options.preserveAspectRatio !== false) {\n            newSX = newSY = Math.min(newSX, newSY);\n        }\n        // snap scale to a grid\n        const gridSize = options.scaleGrid;\n        if (gridSize) {\n            newSX = gridSize * Math.floor(newSX / gridSize);\n            newSY = gridSize * Math.floor(newSY / gridSize);\n        }\n        // scale min/max boundaries\n        newSX = NumberExt.clamp(newSX, minScaleX, maxScaleX);\n        newSY = NumberExt.clamp(newSY, minScaleY, maxScaleY);\n        this.scale(newSX, newSY);\n        if (translate) {\n            const origin = this.options;\n            const newOX = fittingBox.x - contentLocalOrigin.x * newSX - origin.x;\n            const newOY = fittingBox.y - contentLocalOrigin.y * newSY - origin.y;\n            this.translate(newOX, newOY);\n        }\n    }\n    getContentArea(options = {}) {\n        // use geometry calc default\n        if (options.useCellGeometry !== false) {\n            return this.model.getAllCellsBBox() || new Rectangle();\n        }\n        return Util.getBBox(this.stage);\n    }\n    getContentBBox(options = {}) {\n        return this.graph.localToGraph(this.getContentArea(options));\n    }\n    getGraphArea() {\n        const rect = Rectangle.fromSize(this.getComputedSize());\n        return this.graph.graphToLocal(rect);\n    }\n    zoomToRect(rect, options = {}) {\n        const area = Rectangle.create(rect);\n        const graph = this.graph;\n        options.contentArea = area;\n        if (options.viewportArea == null) {\n            options.viewportArea = {\n                x: graph.options.x,\n                y: graph.options.y,\n                width: this.options.width,\n                height: this.options.height,\n            };\n        }\n        this.scaleContentToFitImpl(options, false);\n        const center = area.getCenter();\n        this.centerPoint(center.x, center.y);\n        return this;\n    }\n    zoomToFit(options = {}) {\n        return this.zoomToRect(this.getContentArea(options), options);\n    }\n    centerPoint(x, y) {\n        const clientSize = this.getComputedSize();\n        const scale = this.getScale();\n        const ts = this.getTranslation();\n        const cx = clientSize.width / 2;\n        const cy = clientSize.height / 2;\n        x = typeof x === 'number' ? x : cx; // eslint-disable-line\n        y = typeof y === 'number' ? y : cy; // eslint-disable-line\n        x = cx - x * scale.sx; // eslint-disable-line\n        y = cy - y * scale.sy; // eslint-disable-line\n        if (ts.tx !== x || ts.ty !== y) {\n            this.translate(x, y);\n        }\n    }\n    centerContent(options) {\n        const rect = this.graph.getContentArea(options);\n        const center = rect.getCenter();\n        this.centerPoint(center.x, center.y);\n    }\n    centerCell(cell) {\n        return this.positionCell(cell, 'center');\n    }\n    positionPoint(point, x, y) {\n        const clientSize = this.getComputedSize();\n        // eslint-disable-next-line\n        x = NumberExt.normalizePercentage(x, Math.max(0, clientSize.width));\n        if (x < 0) {\n            x = clientSize.width + x; // eslint-disable-line\n        }\n        // eslint-disable-next-line\n        y = NumberExt.normalizePercentage(y, Math.max(0, clientSize.height));\n        if (y < 0) {\n            y = clientSize.height + y; // eslint-disable-line\n        }\n        const ts = this.getTranslation();\n        const scale = this.getScale();\n        const dx = x - point.x * scale.sx;\n        const dy = y - point.y * scale.sy;\n        if (ts.tx !== dx || ts.ty !== dy) {\n            this.translate(dx, dy);\n        }\n    }\n    positionRect(rect, pos) {\n        const bbox = Rectangle.create(rect);\n        switch (pos) {\n            case 'center':\n                return this.positionPoint(bbox.getCenter(), '50%', '50%');\n            case 'top':\n                return this.positionPoint(bbox.getTopCenter(), '50%', 0);\n            case 'top-right':\n                return this.positionPoint(bbox.getTopRight(), '100%', 0);\n            case 'right':\n                return this.positionPoint(bbox.getRightMiddle(), '100%', '50%');\n            case 'bottom-right':\n                return this.positionPoint(bbox.getBottomRight(), '100%', '100%');\n            case 'bottom':\n                return this.positionPoint(bbox.getBottomCenter(), '50%', '100%');\n            case 'bottom-left':\n                return this.positionPoint(bbox.getBottomLeft(), 0, '100%');\n            case 'left':\n                return this.positionPoint(bbox.getLeftMiddle(), 0, '50%');\n            case 'top-left':\n                return this.positionPoint(bbox.getTopLeft(), 0, 0);\n            default:\n                return this;\n        }\n    }\n    positionCell(cell, pos) {\n        const bbox = cell.getBBox();\n        return this.positionRect(bbox, pos);\n    }\n    positionContent(pos, options) {\n        const rect = this.graph.getContentArea(options);\n        return this.positionRect(rect, pos);\n    }\n}\n//# sourceMappingURL=transform.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Rectangle } from '@antv/x6-geometry';\nimport { Background } from '../registry';\nimport { Base } from './base';\nexport class BackgroundManager extends Base {\n    get elem() {\n        return this.view.background;\n    }\n    init() {\n        this.startListening();\n        if (this.options.background) {\n            this.draw(this.options.background);\n        }\n    }\n    startListening() {\n        this.graph.on('scale', this.update, this);\n        this.graph.on('translate', this.update, this);\n    }\n    stopListening() {\n        this.graph.off('scale', this.update, this);\n        this.graph.off('translate', this.update, this);\n    }\n    updateBackgroundImage(options = {}) {\n        let backgroundSize = options.size || 'auto auto';\n        let backgroundPosition = options.position || 'center';\n        const scale = this.graph.transform.getScale();\n        const ts = this.graph.translate();\n        // backgroundPosition\n        if (typeof backgroundPosition === 'object') {\n            const x = ts.tx + scale.sx * (backgroundPosition.x || 0);\n            const y = ts.ty + scale.sy * (backgroundPosition.y || 0);\n            backgroundPosition = `${x}px ${y}px`;\n        }\n        // backgroundSize\n        if (typeof backgroundSize === 'object') {\n            backgroundSize = Rectangle.fromSize(backgroundSize).scale(scale.sx, scale.sy);\n            backgroundSize = `${backgroundSize.width}px ${backgroundSize.height}px`;\n        }\n        this.elem.style.backgroundSize = backgroundSize;\n        this.elem.style.backgroundPosition = backgroundPosition;\n    }\n    drawBackgroundImage(img, options = {}) {\n        if (!(img instanceof HTMLImageElement)) {\n            this.elem.style.backgroundImage = '';\n            return;\n        }\n        // draw multiple times to show the last image\n        const cache = this.optionsCache;\n        if (cache && cache.image !== options.image) {\n            return;\n        }\n        let uri;\n        const opacity = options.opacity;\n        const backgroundSize = options.size;\n        let backgroundRepeat = options.repeat || 'no-repeat';\n        const pattern = Background.registry.get(backgroundRepeat);\n        if (typeof pattern === 'function') {\n            const quality = options.quality || 1;\n            img.width *= quality;\n            img.height *= quality;\n            const canvas = pattern(img, options);\n            if (!(canvas instanceof HTMLCanvasElement)) {\n                throw new Error('Background pattern must return an HTML Canvas instance');\n            }\n            uri = canvas.toDataURL('image/png');\n            // `repeat` was changed in pattern function\n            if (options.repeat && backgroundRepeat !== options.repeat) {\n                backgroundRepeat = options.repeat;\n            }\n            else {\n                backgroundRepeat = 'repeat';\n            }\n            if (typeof backgroundSize === 'object') {\n                // recalculate the tile size if an object passed in\n                backgroundSize.width *= canvas.width / img.width;\n                backgroundSize.height *= canvas.height / img.height;\n            }\n            else if (backgroundSize === undefined) {\n                // calcule the tile size if no provided\n                options.size = {\n                    width: canvas.width / quality,\n                    height: canvas.height / quality,\n                };\n            }\n        }\n        else {\n            uri = img.src;\n            if (backgroundSize === undefined) {\n                options.size = {\n                    width: img.width,\n                    height: img.height,\n                };\n            }\n        }\n        if (cache != null &&\n            typeof options.size === 'object' &&\n            options.image === cache.image &&\n            options.repeat === cache.repeat &&\n            options.quality ===\n                cache.quality) {\n            cache.size = ObjectExt.clone(options.size);\n        }\n        const style = this.elem.style;\n        style.backgroundImage = `url(${uri})`;\n        style.backgroundRepeat = backgroundRepeat;\n        style.opacity = opacity == null || opacity >= 1 ? '' : `${opacity}`;\n        this.updateBackgroundImage(options);\n    }\n    updateBackgroundColor(color) {\n        this.elem.style.backgroundColor = color || '';\n    }\n    updateBackgroundOptions(options) {\n        this.graph.options.background = options;\n    }\n    update() {\n        if (this.optionsCache) {\n            this.updateBackgroundImage(this.optionsCache);\n        }\n    }\n    draw(options) {\n        const opts = options || {};\n        this.updateBackgroundOptions(options);\n        this.updateBackgroundColor(opts.color);\n        if (opts.image) {\n            this.optionsCache = ObjectExt.clone(opts);\n            const img = document.createElement('img');\n            img.onload = () => this.drawBackgroundImage(img, options);\n            img.setAttribute('crossorigin', 'anonymous');\n            img.src = opts.image;\n        }\n        else {\n            this.drawBackgroundImage(null);\n            this.optionsCache = null;\n        }\n    }\n    clear() {\n        this.draw();\n    }\n    dispose() {\n        this.clear();\n        this.stopListening();\n    }\n}\n__decorate([\n    Base.dispose()\n], BackgroundManager.prototype, \"dispose\", null);\n//# sourceMappingURL=background.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ModifierKey, Dom } from '@antv/x6-common';\nimport { Base } from './base';\nexport class PanningManager extends Base {\n    get widgetOptions() {\n        return this.options.panning;\n    }\n    get pannable() {\n        return this.widgetOptions && this.widgetOptions.enabled === true;\n    }\n    init() {\n        this.startListening();\n        this.updateClassName();\n    }\n    startListening() {\n        const eventTypes = this.widgetOptions.eventTypes;\n        if (!eventTypes) {\n            return;\n        }\n        if (eventTypes.includes('leftMouseDown')) {\n            this.graph.on('blank:mousedown', this.preparePanning, this);\n            this.graph.on('node:unhandled:mousedown', this.preparePanning, this);\n            this.graph.on('edge:unhandled:mousedown', this.preparePanning, this);\n        }\n        if (eventTypes.includes('rightMouseDown')) {\n            this.onRightMouseDown = this.onRightMouseDown.bind(this);\n            Dom.Event.on(this.graph.container, 'mousedown', this.onRightMouseDown);\n        }\n        if (eventTypes.includes('mouseWheel')) {\n            this.mousewheelHandle = new Dom.MouseWheelHandle(this.graph.container, this.onMouseWheel.bind(this), this.allowMouseWheel.bind(this));\n            this.mousewheelHandle.enable();\n        }\n    }\n    stopListening() {\n        const eventTypes = this.widgetOptions.eventTypes;\n        if (!eventTypes) {\n            return;\n        }\n        if (eventTypes.includes('leftMouseDown')) {\n            this.graph.off('blank:mousedown', this.preparePanning, this);\n            this.graph.off('node:unhandled:mousedown', this.preparePanning, this);\n            this.graph.off('edge:unhandled:mousedown', this.preparePanning, this);\n        }\n        if (eventTypes.includes('rightMouseDown')) {\n            Dom.Event.off(this.graph.container, 'mousedown', this.onRightMouseDown);\n        }\n        if (eventTypes.includes('mouseWheel')) {\n            if (this.mousewheelHandle) {\n                this.mousewheelHandle.disable();\n            }\n        }\n    }\n    preparePanning({ e }) {\n        const selection = this.graph.getPlugin('selection');\n        const allowRubberband = selection && selection.allowRubberband(e, true);\n        if (this.allowPanning(e, true) ||\n            (this.allowPanning(e) && !allowRubberband)) {\n            this.startPanning(e);\n        }\n    }\n    allowPanning(e, strict) {\n        return (this.pannable &&\n            ModifierKey.isMatch(e, this.widgetOptions.modifiers, strict));\n    }\n    startPanning(evt) {\n        const e = this.view.normalizeEvent(evt);\n        this.clientX = e.clientX;\n        this.clientY = e.clientY;\n        this.panning = true;\n        this.updateClassName();\n        Dom.Event.on(document.body, {\n            'mousemove.panning touchmove.panning': this.pan.bind(this),\n            'mouseup.panning touchend.panning': this.stopPanning.bind(this),\n            'mouseleave.panning': this.stopPanning.bind(this),\n        });\n        Dom.Event.on(window, 'mouseup.panning', this.stopPanning.bind(this));\n    }\n    pan(evt) {\n        const e = this.view.normalizeEvent(evt);\n        const dx = e.clientX - this.clientX;\n        const dy = e.clientY - this.clientY;\n        this.clientX = e.clientX;\n        this.clientY = e.clientY;\n        this.graph.translateBy(dx, dy);\n    }\n    // eslint-disable-next-line\n    stopPanning(e) {\n        this.panning = false;\n        this.updateClassName();\n        Dom.Event.off(document.body, '.panning');\n        Dom.Event.off(window, '.panning');\n    }\n    updateClassName() {\n        const container = this.view.container;\n        const panning = this.view.prefixClassName('graph-panning');\n        const pannable = this.view.prefixClassName('graph-pannable');\n        if (this.pannable) {\n            if (this.panning) {\n                Dom.addClass(container, panning);\n                Dom.removeClass(container, pannable);\n            }\n            else {\n                Dom.removeClass(container, panning);\n                Dom.addClass(container, pannable);\n            }\n        }\n        else {\n            Dom.removeClass(container, panning);\n            Dom.removeClass(container, pannable);\n        }\n    }\n    onRightMouseDown(e) {\n        if (e.button === 2 && this.allowPanning(e, true)) {\n            this.startPanning(e);\n        }\n    }\n    allowMouseWheel(e) {\n        return this.pannable && !e.ctrlKey;\n    }\n    onMouseWheel(e, deltaX, deltaY) {\n        if (!e.ctrlKey) {\n            this.graph.translateBy(-deltaX, -deltaY);\n        }\n    }\n    autoPanning(x, y) {\n        const buffer = 10;\n        const graphArea = this.graph.getGraphArea();\n        let dx = 0;\n        let dy = 0;\n        if (x <= graphArea.left + buffer) {\n            dx = -buffer;\n        }\n        if (y <= graphArea.top + buffer) {\n            dy = -buffer;\n        }\n        if (x >= graphArea.right - buffer) {\n            dx = buffer;\n        }\n        if (y >= graphArea.bottom - buffer) {\n            dy = buffer;\n        }\n        if (dx !== 0 || dy !== 0) {\n            this.graph.translateBy(-dx, -dy);\n        }\n    }\n    enablePanning() {\n        if (!this.pannable) {\n            this.widgetOptions.enabled = true;\n            this.updateClassName();\n        }\n    }\n    disablePanning() {\n        if (this.pannable) {\n            this.widgetOptions.enabled = false;\n            this.updateClassName();\n        }\n    }\n    dispose() {\n        this.stopListening();\n    }\n}\n__decorate([\n    Base.dispose()\n], PanningManager.prototype, \"dispose\", null);\n//# sourceMappingURL=panning.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ModifierKey, Dom, NumberExt, Disposable } from '@antv/x6-common';\nimport { Base } from './base';\nexport class MouseWheel extends Base {\n    constructor() {\n        super(...arguments);\n        this.cumulatedFactor = 1;\n    }\n    get widgetOptions() {\n        return this.options.mousewheel;\n    }\n    init() {\n        this.container = this.graph.container;\n        this.target = this.widgetOptions.global ? document : this.container;\n        this.mousewheelHandle = new Dom.MouseWheelHandle(this.target, this.onMouseWheel.bind(this), this.allowMouseWheel.bind(this));\n        if (this.widgetOptions.enabled) {\n            this.enable(true);\n        }\n    }\n    get disabled() {\n        return this.widgetOptions.enabled !== true;\n    }\n    enable(force) {\n        if (this.disabled || force) {\n            this.widgetOptions.enabled = true;\n            this.mousewheelHandle.enable();\n        }\n    }\n    disable() {\n        if (!this.disabled) {\n            this.widgetOptions.enabled = false;\n            this.mousewheelHandle.disable();\n        }\n    }\n    allowMouseWheel(e) {\n        const guard = this.widgetOptions.guard;\n        return ((guard == null || guard(e)) &&\n            ModifierKey.isMatch(e, this.widgetOptions.modifiers));\n    }\n    onMouseWheel(e) {\n        const guard = this.widgetOptions.guard;\n        if ((guard == null || guard(e)) &&\n            ModifierKey.isMatch(e, this.widgetOptions.modifiers)) {\n            const factor = this.widgetOptions.factor || 1.2;\n            if (this.currentScale == null) {\n                this.startPos = { x: e.clientX, y: e.clientY };\n                this.currentScale = this.graph.transform.getScale().sx;\n            }\n            const delta = e.deltaY;\n            if (delta < 0) {\n                // zoomin\n                // ------\n                // Switches to 1% zoom steps below 15%\n                if (this.currentScale < 0.15) {\n                    this.cumulatedFactor = (this.currentScale + 0.01) / this.currentScale;\n                }\n                else {\n                    // Uses to 5% zoom steps for better grid rendering in\n                    // webkit and to avoid rounding errors for zoom steps\n                    this.cumulatedFactor =\n                        Math.round(this.currentScale * factor * 20) / 20 / this.currentScale;\n                    if (this.cumulatedFactor === 1) {\n                        this.cumulatedFactor = 1.05;\n                    }\n                }\n            }\n            else {\n                // zoomout\n                // -------\n                // Switches to 1% zoom steps below 15%\n                if (this.currentScale <= 0.15) {\n                    this.cumulatedFactor = (this.currentScale - 0.01) / this.currentScale;\n                }\n                else {\n                    // Uses to 5% zoom steps for better grid rendering in\n                    // webkit and to avoid rounding errors for zoom steps\n                    this.cumulatedFactor =\n                        Math.round(this.currentScale * (1 / factor) * 20) /\n                            20 /\n                            this.currentScale;\n                    if (this.cumulatedFactor === 1) {\n                        this.cumulatedFactor = 0.95;\n                    }\n                }\n            }\n            this.cumulatedFactor = Math.max(0.01, Math.min(this.currentScale * this.cumulatedFactor, 160) /\n                this.currentScale);\n            const currentScale = this.currentScale;\n            let targetScale = this.graph.transform.clampScale(currentScale * this.cumulatedFactor);\n            const minScale = this.widgetOptions.minScale || Number.MIN_SAFE_INTEGER;\n            const maxScale = this.widgetOptions.maxScale || Number.MAX_SAFE_INTEGER;\n            targetScale = NumberExt.clamp(targetScale, minScale, maxScale);\n            if (targetScale !== currentScale) {\n                if (this.widgetOptions.zoomAtMousePosition) {\n                    const hasScroller = !!this.graph.getPlugin('scroller');\n                    const origin = hasScroller\n                        ? this.graph.clientToLocal(this.startPos)\n                        : this.graph.clientToGraph(this.startPos);\n                    this.graph.zoom(targetScale, {\n                        absolute: true,\n                        center: origin.clone(),\n                    });\n                }\n                else {\n                    this.graph.zoom(targetScale, { absolute: true });\n                }\n            }\n            this.currentScale = null;\n            this.cumulatedFactor = 1;\n        }\n    }\n    dispose() {\n        this.disable();\n    }\n}\n__decorate([\n    Disposable.dispose()\n], MouseWheel.prototype, \"dispose\", null);\n//# sourceMappingURL=mousewheel.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { FunctionExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport class VirtualRenderManager extends Base {\n    init() {\n        this.resetRenderArea = FunctionExt.throttle(this.resetRenderArea, 200, {\n            leading: true,\n        });\n        this.resetRenderArea();\n        this.startListening();\n    }\n    startListening() {\n        this.graph.on('translate', this.resetRenderArea, this);\n        this.graph.on('scale', this.resetRenderArea, this);\n        this.graph.on('resize', this.resetRenderArea, this);\n    }\n    stopListening() {\n        this.graph.off('translate', this.resetRenderArea, this);\n        this.graph.off('scale', this.resetRenderArea, this);\n        this.graph.off('resize', this.resetRenderArea, this);\n    }\n    enableVirtualRender() {\n        this.options.virtual = true;\n        this.resetRenderArea();\n    }\n    disableVirtualRender() {\n        this.options.virtual = false;\n        this.graph.renderer.setRenderArea(undefined);\n    }\n    resetRenderArea() {\n        if (this.options.virtual) {\n            const renderArea = this.graph.getGraphArea();\n            this.graph.renderer.setRenderArea(renderArea);\n        }\n    }\n    dispose() {\n        this.stopListening();\n    }\n}\n__decorate([\n    Base.dispose()\n], VirtualRenderManager.prototype, \"dispose\", null);\n//# sourceMappingURL=virtual-render.js.map","export class JobQueue {\n    constructor() {\n        this.isFlushing = false;\n        this.isFlushPending = false;\n        this.scheduleId = 0;\n        this.queue = [];\n        this.frameInterval = 33;\n        this.initialTime = Date.now();\n    }\n    queueJob(job) {\n        if (job.priority & JOB_PRIORITY.PRIOR) {\n            job.cb();\n        }\n        else {\n            const index = this.findInsertionIndex(job);\n            if (index >= 0) {\n                this.queue.splice(index, 0, job);\n            }\n        }\n    }\n    queueFlush() {\n        if (!this.isFlushing && !this.isFlushPending) {\n            this.isFlushPending = true;\n            this.scheduleJob();\n        }\n    }\n    queueFlushSync() {\n        if (!this.isFlushing && !this.isFlushPending) {\n            this.isFlushPending = true;\n            this.flushJobsSync();\n        }\n    }\n    clearJobs() {\n        this.queue.length = 0;\n        this.isFlushing = false;\n        this.isFlushPending = false;\n        this.cancelScheduleJob();\n    }\n    flushJobs() {\n        this.isFlushPending = false;\n        this.isFlushing = true;\n        const startTime = this.getCurrentTime();\n        let job;\n        while ((job = this.queue.shift())) {\n            job.cb();\n            if (this.getCurrentTime() - startTime >= this.frameInterval) {\n                break;\n            }\n        }\n        this.isFlushing = false;\n        if (this.queue.length) {\n            this.queueFlush();\n        }\n    }\n    flushJobsSync() {\n        this.isFlushPending = false;\n        this.isFlushing = true;\n        let job;\n        while ((job = this.queue.shift())) {\n            try {\n                job.cb();\n            }\n            catch (error) {\n                // eslint-disable-next-line\n                console.log(error);\n            }\n        }\n        this.isFlushing = false;\n    }\n    findInsertionIndex(job) {\n        let left = 0;\n        let ins = this.queue.length;\n        let right = ins - 1;\n        const priority = job.priority;\n        while (left <= right) {\n            const mid = ((right - left) >> 1) + left;\n            if (priority <= this.queue[mid].priority) {\n                left = mid + 1;\n            }\n            else {\n                ins = mid;\n                right = mid - 1;\n            }\n        }\n        return ins;\n    }\n    scheduleJob() {\n        if ('requestIdleCallback' in window) {\n            if (this.scheduleId) {\n                this.cancelScheduleJob();\n            }\n            this.scheduleId = window.requestIdleCallback(this.flushJobs.bind(this), {\n                timeout: 100,\n            });\n        }\n        else {\n            if (this.scheduleId) {\n                this.cancelScheduleJob();\n            }\n            this.scheduleId = window.setTimeout(this.flushJobs.bind(this));\n        }\n    }\n    cancelScheduleJob() {\n        if ('cancelIdleCallback' in window) {\n            if (this.scheduleId) {\n                window.cancelIdleCallback(this.scheduleId);\n            }\n            this.scheduleId = 0;\n        }\n        else {\n            if (this.scheduleId) {\n                clearTimeout(this.scheduleId);\n            }\n            this.scheduleId = 0;\n        }\n    }\n    getCurrentTime() {\n        const hasPerformanceNow = typeof performance === 'object' && typeof performance.now === 'function';\n        if (hasPerformanceNow) {\n            return performance.now();\n        }\n        return Date.now() - this.initialTime;\n    }\n}\nexport var JOB_PRIORITY;\n(function (JOB_PRIORITY) {\n    JOB_PRIORITY[JOB_PRIORITY[\"Update\"] = 2] = \"Update\";\n    JOB_PRIORITY[JOB_PRIORITY[\"RenderEdge\"] = 4] = \"RenderEdge\";\n    JOB_PRIORITY[JOB_PRIORITY[\"RenderNode\"] = 8] = \"RenderNode\";\n    JOB_PRIORITY[JOB_PRIORITY[\"PRIOR\"] = 1048576] = \"PRIOR\";\n})(JOB_PRIORITY || (JOB_PRIORITY = {}));\n// function findInsertionIndex(job: Job) {\n//   let start = 0\n//   for (let i = 0, len = queue.length; i < len; i += 1) {\n//     const j = queue[i]\n//     if (j.id === job.id) {\n//       console.log('xx', j.bit, job.bit)\n//     }\n//     if (j.id === job.id && (job.bit ^ (job.bit & j.bit)) === 0) {\n//       return -1\n//     }\n//     if (j.priority <= job.priority) {\n//       start += 1\n//     }\n//   }\n//   return start\n// }\n//# sourceMappingURL=queueJob.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom, Disposable, FunctionExt } from '@antv/x6-common';\nimport { CellView, NodeView, EdgeView } from '../view';\nimport { JobQueue, JOB_PRIORITY } from './queueJob';\nexport class Scheduler extends Disposable {\n    get model() {\n        return this.graph.model;\n    }\n    get container() {\n        return this.graph.view.stage;\n    }\n    constructor(graph) {\n        super();\n        this.views = {};\n        this.willRemoveViews = {};\n        this.queue = new JobQueue();\n        this.graph = graph;\n        this.init();\n    }\n    init() {\n        this.startListening();\n        this.renderViews(this.model.getCells());\n    }\n    startListening() {\n        this.model.on('reseted', this.onModelReseted, this);\n        this.model.on('cell:added', this.onCellAdded, this);\n        this.model.on('cell:removed', this.onCellRemoved, this);\n        this.model.on('cell:change:zIndex', this.onCellZIndexChanged, this);\n        this.model.on('cell:change:visible', this.onCellVisibleChanged, this);\n    }\n    stopListening() {\n        this.model.off('reseted', this.onModelReseted, this);\n        this.model.off('cell:added', this.onCellAdded, this);\n        this.model.off('cell:removed', this.onCellRemoved, this);\n        this.model.off('cell:change:zIndex', this.onCellZIndexChanged, this);\n        this.model.off('cell:change:visible', this.onCellVisibleChanged, this);\n    }\n    onModelReseted({ options }) {\n        this.queue.clearJobs();\n        this.removeZPivots();\n        this.resetViews();\n        const cells = this.model.getCells();\n        this.renderViews(cells, Object.assign(Object.assign({}, options), { queue: cells.map((cell) => cell.id) }));\n    }\n    onCellAdded({ cell, options }) {\n        this.renderViews([cell], options);\n    }\n    onCellRemoved({ cell }) {\n        this.removeViews([cell]);\n    }\n    onCellZIndexChanged({ cell, options, }) {\n        const viewItem = this.views[cell.id];\n        if (viewItem) {\n            this.requestViewUpdate(viewItem.view, Scheduler.FLAG_INSERT, options, JOB_PRIORITY.Update, true);\n        }\n    }\n    onCellVisibleChanged({ cell, current, }) {\n        this.toggleVisible(cell, !!current);\n    }\n    requestViewUpdate(view, flag, options = {}, priority = JOB_PRIORITY.Update, flush = true) {\n        const id = view.cell.id;\n        const viewItem = this.views[id];\n        if (!viewItem) {\n            return;\n        }\n        viewItem.flag = flag;\n        viewItem.options = options;\n        const priorAction = view.hasAction(flag, ['translate', 'resize', 'rotate']);\n        if (priorAction || options.async === false) {\n            priority = JOB_PRIORITY.PRIOR; // eslint-disable-line\n            flush = false; // eslint-disable-line\n        }\n        this.queue.queueJob({\n            id,\n            priority,\n            cb: () => {\n                this.renderViewInArea(view, flag, options);\n                const queue = options.queue;\n                if (queue) {\n                    const index = queue.indexOf(view.cell.id);\n                    if (index >= 0) {\n                        queue.splice(index, 1);\n                    }\n                    if (queue.length === 0) {\n                        this.graph.trigger('render:done');\n                    }\n                }\n            },\n        });\n        const effectedEdges = this.getEffectedEdges(view);\n        effectedEdges.forEach((edge) => {\n            this.requestViewUpdate(edge.view, edge.flag, options, priority, false);\n        });\n        if (flush) {\n            this.flush();\n        }\n    }\n    setRenderArea(area) {\n        this.renderArea = area;\n        this.flushWaitingViews();\n    }\n    isViewMounted(view) {\n        if (view == null) {\n            return false;\n        }\n        const viewItem = this.views[view.cell.id];\n        if (!viewItem) {\n            return false;\n        }\n        return viewItem.state === Scheduler.ViewState.MOUNTED;\n    }\n    renderViews(cells, options = {}) {\n        cells.sort((c1, c2) => {\n            if (c1.isNode() && c2.isEdge()) {\n                return -1;\n            }\n            return 0;\n        });\n        cells.forEach((cell) => {\n            const id = cell.id;\n            const views = this.views;\n            let flag = 0;\n            let viewItem = views[id];\n            if (viewItem) {\n                flag = Scheduler.FLAG_INSERT;\n            }\n            else {\n                const cellView = this.createCellView(cell);\n                if (cellView) {\n                    cellView.graph = this.graph;\n                    flag = Scheduler.FLAG_INSERT | cellView.getBootstrapFlag();\n                    viewItem = {\n                        view: cellView,\n                        flag,\n                        options,\n                        state: Scheduler.ViewState.CREATED,\n                    };\n                    this.views[id] = viewItem;\n                }\n            }\n            if (viewItem) {\n                this.requestViewUpdate(viewItem.view, flag, options, this.getRenderPriority(viewItem.view), false);\n            }\n        });\n        this.flush();\n    }\n    renderViewInArea(view, flag, options = {}) {\n        const cell = view.cell;\n        const id = cell.id;\n        const viewItem = this.views[id];\n        if (!viewItem) {\n            return;\n        }\n        let result = 0;\n        if (this.isUpdatable(view)) {\n            result = this.updateView(view, flag, options);\n            viewItem.flag = result;\n        }\n        else {\n            if (viewItem.state === Scheduler.ViewState.MOUNTED) {\n                result = this.updateView(view, flag, options);\n                viewItem.flag = result;\n            }\n            else {\n                viewItem.state = Scheduler.ViewState.WAITING;\n            }\n        }\n        if (result) {\n            if (cell.isEdge() &&\n                (result & view.getFlag(['source', 'target'])) === 0) {\n                this.queue.queueJob({\n                    id,\n                    priority: JOB_PRIORITY.RenderEdge,\n                    cb: () => {\n                        this.updateView(view, flag, options);\n                    },\n                });\n            }\n        }\n    }\n    removeViews(cells) {\n        cells.forEach((cell) => {\n            const id = cell.id;\n            const viewItem = this.views[id];\n            if (viewItem) {\n                this.willRemoveViews[id] = viewItem;\n                delete this.views[id];\n                this.queue.queueJob({\n                    id,\n                    priority: this.getRenderPriority(viewItem.view),\n                    cb: () => {\n                        this.removeView(viewItem.view);\n                    },\n                });\n            }\n        });\n        this.flush();\n    }\n    flush() {\n        this.graph.options.async\n            ? this.queue.queueFlush()\n            : this.queue.queueFlushSync();\n    }\n    flushWaitingViews() {\n        Object.values(this.views).forEach((viewItem) => {\n            if (viewItem && viewItem.state === Scheduler.ViewState.WAITING) {\n                const { view, flag, options } = viewItem;\n                this.requestViewUpdate(view, flag, options, this.getRenderPriority(view), false);\n            }\n        });\n        this.flush();\n    }\n    updateView(view, flag, options = {}) {\n        if (view == null) {\n            return 0;\n        }\n        if (CellView.isCellView(view)) {\n            if (flag & Scheduler.FLAG_REMOVE) {\n                this.removeView(view.cell);\n                return 0;\n            }\n            if (flag & Scheduler.FLAG_INSERT) {\n                this.insertView(view);\n                flag ^= Scheduler.FLAG_INSERT; // eslint-disable-line\n            }\n        }\n        if (!flag) {\n            return 0;\n        }\n        return view.confirmUpdate(flag, options);\n    }\n    insertView(view) {\n        const viewItem = this.views[view.cell.id];\n        if (viewItem) {\n            const zIndex = view.cell.getZIndex();\n            const pivot = this.addZPivot(zIndex);\n            this.container.insertBefore(view.container, pivot);\n            if (!view.cell.isVisible()) {\n                this.toggleVisible(view.cell, false);\n            }\n            viewItem.state = Scheduler.ViewState.MOUNTED;\n            this.graph.trigger('view:mounted', { view });\n        }\n    }\n    resetViews() {\n        this.willRemoveViews = Object.assign(Object.assign({}, this.views), this.willRemoveViews);\n        Object.values(this.willRemoveViews).forEach((viewItem) => {\n            if (viewItem) {\n                this.removeView(viewItem.view);\n            }\n        });\n        this.views = {};\n        this.willRemoveViews = {};\n    }\n    removeView(view) {\n        const cell = view.cell;\n        const viewItem = this.willRemoveViews[cell.id];\n        if (viewItem && view) {\n            viewItem.view.remove();\n            delete this.willRemoveViews[cell.id];\n            this.graph.trigger('view:unmounted', { view });\n        }\n    }\n    toggleVisible(cell, visible) {\n        const edges = this.model.getConnectedEdges(cell);\n        for (let i = 0, len = edges.length; i < len; i += 1) {\n            const edge = edges[i];\n            if (visible) {\n                const source = edge.getSourceCell();\n                const target = edge.getTargetCell();\n                if ((source && !source.isVisible()) ||\n                    (target && !target.isVisible())) {\n                    continue;\n                }\n                this.toggleVisible(edge, true);\n            }\n            else {\n                this.toggleVisible(edge, false);\n            }\n        }\n        const viewItem = this.views[cell.id];\n        if (viewItem) {\n            Dom.css(viewItem.view.container, {\n                display: visible ? 'unset' : 'none',\n            });\n        }\n    }\n    addZPivot(zIndex = 0) {\n        if (this.zPivots == null) {\n            this.zPivots = {};\n        }\n        const pivots = this.zPivots;\n        let pivot = pivots[zIndex];\n        if (pivot) {\n            return pivot;\n        }\n        pivot = pivots[zIndex] = document.createComment(`z-index:${zIndex + 1}`);\n        let neighborZ = -Infinity;\n        // eslint-disable-next-line\n        for (const key in pivots) {\n            const currentZ = +key;\n            if (currentZ < zIndex && currentZ > neighborZ) {\n                neighborZ = currentZ;\n                if (neighborZ === zIndex - 1) {\n                    continue;\n                }\n            }\n        }\n        const layer = this.container;\n        if (neighborZ !== -Infinity) {\n            const neighborPivot = pivots[neighborZ];\n            layer.insertBefore(pivot, neighborPivot.nextSibling);\n        }\n        else {\n            layer.insertBefore(pivot, layer.firstChild);\n        }\n        return pivot;\n    }\n    removeZPivots() {\n        if (this.zPivots) {\n            Object.values(this.zPivots).forEach((elem) => {\n                if (elem && elem.parentNode) {\n                    elem.parentNode.removeChild(elem);\n                }\n            });\n        }\n        this.zPivots = {};\n    }\n    createCellView(cell) {\n        const options = { graph: this.graph };\n        const createViewHook = this.graph.options.createCellView;\n        if (createViewHook) {\n            const ret = FunctionExt.call(createViewHook, this.graph, cell);\n            if (ret) {\n                return new ret(cell, options); // eslint-disable-line new-cap\n            }\n            if (ret === null) {\n                // null means not render\n                return null;\n            }\n        }\n        const view = cell.view;\n        if (view != null && typeof view === 'string') {\n            const def = CellView.registry.get(view);\n            if (def) {\n                return new def(cell, options); // eslint-disable-line new-cap\n            }\n            return CellView.registry.onNotFound(view);\n        }\n        if (cell.isNode()) {\n            return new NodeView(cell, options);\n        }\n        if (cell.isEdge()) {\n            return new EdgeView(cell, options);\n        }\n        return null;\n    }\n    getEffectedEdges(view) {\n        const effectedEdges = [];\n        const cell = view.cell;\n        const edges = this.model.getConnectedEdges(cell);\n        for (let i = 0, n = edges.length; i < n; i += 1) {\n            const edge = edges[i];\n            const viewItem = this.views[edge.id];\n            if (!viewItem) {\n                continue;\n            }\n            const edgeView = viewItem.view;\n            if (!this.isViewMounted(edgeView)) {\n                continue;\n            }\n            const flagLabels = ['update'];\n            if (edge.getTargetCell() === cell) {\n                flagLabels.push('target');\n            }\n            if (edge.getSourceCell() === cell) {\n                flagLabels.push('source');\n            }\n            effectedEdges.push({\n                id: edge.id,\n                view: edgeView,\n                flag: edgeView.getFlag(flagLabels),\n            });\n        }\n        return effectedEdges;\n    }\n    isUpdatable(view) {\n        if (view.isNodeView()) {\n            if (this.renderArea) {\n                return this.renderArea.isIntersectWithRect(view.cell.getBBox());\n            }\n            return true;\n        }\n        if (view.isEdgeView()) {\n            const edge = view.cell;\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (this.renderArea && sourceCell && targetCell) {\n                return (this.renderArea.isIntersectWithRect(sourceCell.getBBox()) ||\n                    this.renderArea.isIntersectWithRect(targetCell.getBBox()));\n            }\n        }\n        return true;\n    }\n    getRenderPriority(view) {\n        return view.cell.isNode()\n            ? JOB_PRIORITY.RenderNode\n            : JOB_PRIORITY.RenderEdge;\n    }\n    dispose() {\n        this.stopListening();\n    }\n}\n__decorate([\n    Disposable.dispose()\n], Scheduler.prototype, \"dispose\", null);\n(function (Scheduler) {\n    Scheduler.FLAG_INSERT = 1 << 30;\n    Scheduler.FLAG_REMOVE = 1 << 29;\n    Scheduler.FLAG_RENDER = (1 << 26) - 1;\n})(Scheduler || (Scheduler = {}));\n(function (Scheduler) {\n    let ViewState;\n    (function (ViewState) {\n        ViewState[ViewState[\"CREATED\"] = 0] = \"CREATED\";\n        ViewState[ViewState[\"MOUNTED\"] = 1] = \"MOUNTED\";\n        ViewState[ViewState[\"WAITING\"] = 2] = \"WAITING\";\n    })(ViewState = Scheduler.ViewState || (Scheduler.ViewState = {}));\n})(Scheduler || (Scheduler = {}));\n//# sourceMappingURL=scheduler.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Rectangle } from '@antv/x6-geometry';\nimport { Base } from '../graph/base';\nimport { Cell } from '../model';\nimport { Scheduler } from './scheduler';\nimport { Util } from '../util';\nexport class Renderer extends Base {\n    constructor() {\n        super(...arguments);\n        this.schedule = new Scheduler(this.graph);\n    }\n    requestViewUpdate(view, flag, options = {}) {\n        this.schedule.requestViewUpdate(view, flag, options);\n    }\n    isViewMounted(view) {\n        return this.schedule.isViewMounted(view);\n    }\n    setRenderArea(area) {\n        this.schedule.setRenderArea(area);\n    }\n    findViewByElem(elem) {\n        if (elem == null) {\n            return null;\n        }\n        const container = this.options.container;\n        const target = typeof elem === 'string'\n            ? container.querySelector(elem)\n            : elem instanceof Element\n                ? elem\n                : elem[0];\n        if (target) {\n            const id = this.graph.view.findAttr('data-cell-id', target);\n            if (id) {\n                const views = this.schedule.views;\n                if (views[id]) {\n                    return views[id].view;\n                }\n            }\n        }\n        return null;\n    }\n    findViewByCell(cell) {\n        if (cell == null) {\n            return null;\n        }\n        const id = Cell.isCell(cell) ? cell.id : cell;\n        const views = this.schedule.views;\n        if (views[id]) {\n            return views[id].view;\n        }\n        return null;\n    }\n    findViewsFromPoint(p) {\n        const ref = { x: p.x, y: p.y };\n        return this.model\n            .getCells()\n            .map((cell) => this.findViewByCell(cell))\n            .filter((view) => {\n            if (view != null) {\n                return Util.getBBox(view.container, {\n                    target: this.view.stage,\n                }).containsPoint(ref);\n            }\n            return false;\n        });\n    }\n    findEdgeViewsFromPoint(p, threshold = 5) {\n        return this.model\n            .getEdges()\n            .map((edge) => this.findViewByCell(edge))\n            .filter((view) => {\n            if (view != null) {\n                const point = view.getClosestPoint(p);\n                if (point) {\n                    return point.distance(p) <= threshold;\n                }\n            }\n            return false;\n        });\n    }\n    findViewsInArea(rect, options = {}) {\n        const area = Rectangle.create(rect);\n        return this.model\n            .getCells()\n            .map((cell) => this.findViewByCell(cell))\n            .filter((view) => {\n            if (view) {\n                if (options.nodeOnly && !view.isNodeView()) {\n                    return false;\n                }\n                const bbox = Util.getBBox(view.container, {\n                    target: this.view.stage,\n                });\n                if (bbox.width === 0) {\n                    bbox.inflate(1, 0);\n                }\n                else if (bbox.height === 0) {\n                    bbox.inflate(0, 1);\n                }\n                return options.strict\n                    ? area.containsRect(bbox)\n                    : area.isIntersectWithRect(bbox);\n            }\n            return false;\n        });\n    }\n    dispose() {\n        this.schedule.dispose();\n    }\n}\n__decorate([\n    Base.dispose()\n], Renderer.prototype, \"dispose\", null);\n//# sourceMappingURL=renderer.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { StringExt, Dom, Vector } from '@antv/x6-common';\nimport { Filter } from '../registry';\nimport { Markup } from '../view';\nimport { Base } from './base';\nexport class DefsManager extends Base {\n    get cid() {\n        return this.graph.view.cid;\n    }\n    get svg() {\n        return this.view.svg;\n    }\n    get defs() {\n        return this.view.defs;\n    }\n    isDefined(id) {\n        return this.svg.getElementById(id) != null;\n    }\n    filter(options) {\n        let filterId = options.id;\n        const name = options.name;\n        if (!filterId) {\n            filterId = `filter-${name}-${this.cid}-${StringExt.hashcode(JSON.stringify(options))}`;\n        }\n        if (!this.isDefined(filterId)) {\n            const fn = Filter.registry.get(name);\n            if (fn == null) {\n                return Filter.registry.onNotFound(name);\n            }\n            const markup = fn(options.args || {});\n            // Set the filter area to be 3x the bounding box of the cell\n            // and center the filter around the cell.\n            const attrs = Object.assign(Object.assign({ x: -1, y: -1, width: 3, height: 3, filterUnits: 'objectBoundingBox' }, options.attrs), { id: filterId });\n            Vector.create(Markup.sanitize(markup), attrs).appendTo(this.defs);\n        }\n        return filterId;\n    }\n    gradient(options) {\n        let id = options.id;\n        const type = options.type;\n        if (!id) {\n            id = `gradient-${type}-${this.cid}-${StringExt.hashcode(JSON.stringify(options))}`;\n        }\n        if (!this.isDefined(id)) {\n            const stops = options.stops;\n            const arr = stops.map((stop) => {\n                const opacity = stop.opacity != null && Number.isFinite(stop.opacity)\n                    ? stop.opacity\n                    : 1;\n                return `<stop offset=\"${stop.offset}\" stop-color=\"${stop.color}\" stop-opacity=\"${opacity}\"/>`;\n            });\n            const markup = `<${type}>${arr.join('')}</${type}>`;\n            const attrs = Object.assign({ id }, options.attrs);\n            Vector.create(markup, attrs).appendTo(this.defs);\n        }\n        return id;\n    }\n    marker(options) {\n        const { id, refX, refY, markerUnits, markerOrient, tagName, children } = options, attrs = __rest(options, [\"id\", \"refX\", \"refY\", \"markerUnits\", \"markerOrient\", \"tagName\", \"children\"]);\n        let markerId = id;\n        if (!markerId) {\n            markerId = `marker-${this.cid}-${StringExt.hashcode(JSON.stringify(options))}`;\n        }\n        if (!this.isDefined(markerId)) {\n            if (tagName !== 'path') {\n                // remove unnecessary d attribute inherit from standard edge.\n                delete attrs.d;\n            }\n            const pathMarker = Vector.create('marker', {\n                refX,\n                refY,\n                id: markerId,\n                overflow: 'visible',\n                orient: markerOrient != null ? markerOrient : 'auto',\n                markerUnits: markerUnits || 'userSpaceOnUse',\n            }, children\n                ? children.map((_a) => {\n                    var { tagName } = _a, other = __rest(_a, [\"tagName\"]);\n                    return Vector.create(`${tagName}` || 'path', Dom.kebablizeAttrs(Object.assign(Object.assign({}, attrs), other)));\n                })\n                : [Vector.create(tagName || 'path', Dom.kebablizeAttrs(attrs))]);\n            this.defs.appendChild(pathMarker.node);\n        }\n        return markerId;\n    }\n    remove(id) {\n        const elem = this.svg.getElementById(id);\n        if (elem && elem.parentNode) {\n            elem.parentNode.removeChild(elem);\n        }\n    }\n}\n//# sourceMappingURL=defs.js.map","import { Dom } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { Base } from './base';\nimport { Util } from '../util';\nexport class CoordManager extends Base {\n    getClientMatrix() {\n        return Dom.createSVGMatrix(this.view.stage.getScreenCTM());\n    }\n    /**\n     * Returns coordinates of the graph viewport, relative to the window.\n     */\n    getClientOffset() {\n        // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n        const rect = this.view.svg.getBoundingClientRect();\n        return new Point(rect.left, rect.top);\n    }\n    /**\n     * Returns coordinates of the graph viewport, relative to the document.\n     */\n    getPageOffset() {\n        // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n        return this.getClientOffset().translate(window.scrollX, window.scrollY);\n    }\n    snapToGrid(x, y) {\n        const p = typeof x === 'number'\n            ? this.clientToLocalPoint(x, y)\n            : this.clientToLocalPoint(x.x, x.y);\n        return p.snapToGrid(this.graph.getGridSize());\n    }\n    localToGraphPoint(x, y) {\n        const localPoint = Point.create(x, y);\n        return Util.transformPoint(localPoint, this.graph.matrix());\n    }\n    localToClientPoint(x, y) {\n        const localPoint = Point.create(x, y);\n        return Util.transformPoint(localPoint, this.getClientMatrix());\n    }\n    localToPagePoint(x, y) {\n        const p = typeof x === 'number'\n            ? this.localToGraphPoint(x, y)\n            : this.localToGraphPoint(x);\n        return p.translate(this.getPageOffset());\n    }\n    localToGraphRect(x, y, width, height) {\n        const localRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(localRect, this.graph.matrix());\n    }\n    localToClientRect(x, y, width, height) {\n        const localRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(localRect, this.getClientMatrix());\n    }\n    localToPageRect(x, y, width, height) {\n        const rect = typeof x === 'number'\n            ? this.localToGraphRect(x, y, width, height)\n            : this.localToGraphRect(x);\n        return rect.translate(this.getPageOffset());\n    }\n    graphToLocalPoint(x, y) {\n        const graphPoint = Point.create(x, y);\n        return Util.transformPoint(graphPoint, this.graph.matrix().inverse());\n    }\n    clientToLocalPoint(x, y) {\n        const clientPoint = Point.create(x, y);\n        return Util.transformPoint(clientPoint, this.getClientMatrix().inverse());\n    }\n    clientToGraphPoint(x, y) {\n        const clientPoint = Point.create(x, y);\n        return Util.transformPoint(clientPoint, this.graph.matrix().multiply(this.getClientMatrix().inverse()));\n    }\n    pageToLocalPoint(x, y) {\n        const pagePoint = Point.create(x, y);\n        const graphPoint = pagePoint.diff(this.getPageOffset());\n        return this.graphToLocalPoint(graphPoint);\n    }\n    graphToLocalRect(x, y, width, height) {\n        const graphRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(graphRect, this.graph.matrix().inverse());\n    }\n    clientToLocalRect(x, y, width, height) {\n        const clientRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(clientRect, this.getClientMatrix().inverse());\n    }\n    clientToGraphRect(x, y, width, height) {\n        const clientRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(clientRect, this.graph.matrix().multiply(this.getClientMatrix().inverse()));\n    }\n    pageToLocalRect(x, y, width, height) {\n        const graphRect = Rectangle.create(x, y, width, height);\n        const pageOffset = this.getPageOffset();\n        graphRect.x -= pageOffset.x;\n        graphRect.y -= pageOffset.y;\n        return this.graphToLocalRect(graphRect);\n    }\n}\n//# sourceMappingURL=coord.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom } from '@antv/x6-common';\nimport { Highlighter } from '../registry';\nimport { Base } from './base';\nexport class HighlightManager extends Base {\n    constructor() {\n        super(...arguments);\n        this.highlights = {};\n    }\n    init() {\n        this.startListening();\n    }\n    startListening() {\n        this.graph.on('cell:highlight', this.onCellHighlight, this);\n        this.graph.on('cell:unhighlight', this.onCellUnhighlight, this);\n    }\n    stopListening() {\n        this.graph.off('cell:highlight', this.onCellHighlight, this);\n        this.graph.off('cell:unhighlight', this.onCellUnhighlight, this);\n    }\n    onCellHighlight({ view: cellView, magnet, options = {}, }) {\n        const resolved = this.resolveHighlighter(options);\n        if (!resolved) {\n            return;\n        }\n        const key = this.getHighlighterId(magnet, resolved);\n        if (!this.highlights[key]) {\n            const highlighter = resolved.highlighter;\n            highlighter.highlight(cellView, magnet, Object.assign({}, resolved.args));\n            this.highlights[key] = {\n                cellView,\n                magnet,\n                highlighter,\n                args: resolved.args,\n            };\n        }\n    }\n    onCellUnhighlight({ magnet, options = {}, }) {\n        const resolved = this.resolveHighlighter(options);\n        if (!resolved) {\n            return;\n        }\n        const id = this.getHighlighterId(magnet, resolved);\n        this.unhighlight(id);\n    }\n    resolveHighlighter(options) {\n        const graphOptions = this.options;\n        let highlighterDef = options.highlighter;\n        if (highlighterDef == null) {\n            // check for built-in types\n            const type = options.type;\n            highlighterDef =\n                (type && graphOptions.highlighting[type]) ||\n                    graphOptions.highlighting.default;\n        }\n        if (highlighterDef == null) {\n            return null;\n        }\n        const def = typeof highlighterDef === 'string'\n            ? {\n                name: highlighterDef,\n            }\n            : highlighterDef;\n        const name = def.name;\n        const highlighter = Highlighter.registry.get(name);\n        if (highlighter == null) {\n            return Highlighter.registry.onNotFound(name);\n        }\n        Highlighter.check(name, highlighter);\n        return {\n            name,\n            highlighter,\n            args: def.args || {},\n        };\n    }\n    getHighlighterId(magnet, options) {\n        Dom.ensureId(magnet);\n        return options.name + magnet.id + JSON.stringify(options.args);\n    }\n    unhighlight(id) {\n        const highlight = this.highlights[id];\n        if (highlight) {\n            highlight.highlighter.unhighlight(highlight.cellView, highlight.magnet, highlight.args);\n            delete this.highlights[id];\n        }\n    }\n    dispose() {\n        Object.keys(this.highlights).forEach((id) => this.unhighlight(id));\n        this.stopListening();\n    }\n}\n__decorate([\n    HighlightManager.dispose()\n], HighlightManager.prototype, \"dispose\", null);\n//# sourceMappingURL=highlight.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { SizeSensor } from '@antv/x6-common';\nimport { Base } from './base';\nexport class SizeManager extends Base {\n    getScroller() {\n        const scroller = this.graph.getPlugin('scroller');\n        if (scroller && scroller.options.enabled) {\n            return scroller;\n        }\n        return null;\n    }\n    getContainer() {\n        const scroller = this.getScroller();\n        if (scroller) {\n            return scroller.container.parentElement;\n        }\n        return this.graph.container.parentElement;\n    }\n    getSensorTarget() {\n        const autoResize = this.options.autoResize;\n        if (autoResize) {\n            if (typeof autoResize === 'boolean') {\n                return this.getContainer();\n            }\n            return autoResize;\n        }\n    }\n    init() {\n        const autoResize = this.options.autoResize;\n        if (autoResize) {\n            const target = this.getSensorTarget();\n            if (target) {\n                SizeSensor.bind(target, () => {\n                    const width = target.offsetWidth;\n                    const height = target.offsetHeight;\n                    this.resize(width, height);\n                });\n            }\n        }\n    }\n    resize(width, height) {\n        const scroller = this.getScroller();\n        if (scroller) {\n            scroller.resize(width, height);\n        }\n        else {\n            this.graph.transform.resize(width, height);\n        }\n    }\n    dispose() {\n        SizeSensor.clear(this.graph.container);\n    }\n}\n__decorate([\n    Base.dispose()\n], SizeManager.prototype, \"dispose\", null);\n//# sourceMappingURL=size.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Basecoat } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { Model, Cell, Node, Edge } from '../model';\nimport { CellView } from '../view';\nimport * as Registry from '../registry';\nimport { GraphView } from './view';\nimport { CSSManager as Css } from './css';\nimport { Options as GraphOptions } from './options';\nimport { GridManager as Grid } from './grid';\nimport { TransformManager as Transform } from './transform';\nimport { BackgroundManager as Background } from './background';\nimport { PanningManager as Panning } from './panning';\nimport { MouseWheel as Wheel } from './mousewheel';\nimport { VirtualRenderManager as VirtualRender } from './virtual-render';\nimport { Renderer as ViewRenderer } from '../renderer';\nimport { DefsManager as Defs } from './defs';\nimport { CoordManager as Coord } from './coord';\nimport { HighlightManager as Highlight } from './highlight';\nimport { SizeManager as Size } from './size';\nexport class Graph extends Basecoat {\n    get container() {\n        return this.options.container;\n    }\n    get [Symbol.toStringTag]() {\n        return Graph.toStringTag;\n    }\n    constructor(options) {\n        super();\n        this.installedPlugins = new Set();\n        this.options = GraphOptions.get(options);\n        this.css = new Css(this);\n        this.view = new GraphView(this);\n        this.defs = new Defs(this);\n        this.coord = new Coord(this);\n        this.transform = new Transform(this);\n        this.highlight = new Highlight(this);\n        this.grid = new Grid(this);\n        this.background = new Background(this);\n        if (this.options.model) {\n            this.model = this.options.model;\n        }\n        else {\n            this.model = new Model();\n            this.model.graph = this;\n        }\n        this.renderer = new ViewRenderer(this);\n        this.panning = new Panning(this);\n        this.mousewheel = new Wheel(this);\n        this.virtualRender = new VirtualRender(this);\n        this.size = new Size(this);\n    }\n    // #region model\n    isNode(cell) {\n        return cell.isNode();\n    }\n    isEdge(cell) {\n        return cell.isEdge();\n    }\n    resetCells(cells, options = {}) {\n        this.model.resetCells(cells, options);\n        return this;\n    }\n    clearCells(options = {}) {\n        this.model.clear(options);\n        return this;\n    }\n    toJSON(options = {}) {\n        return this.model.toJSON(options);\n    }\n    parseJSON(data) {\n        return this.model.parseJSON(data);\n    }\n    fromJSON(data, options = {}) {\n        this.model.fromJSON(data, options);\n        return this;\n    }\n    getCellById(id) {\n        return this.model.getCell(id);\n    }\n    addNode(node, options = {}) {\n        return this.model.addNode(node, options);\n    }\n    addNodes(nodes, options = {}) {\n        return this.addCell(nodes.map((node) => (Node.isNode(node) ? node : this.createNode(node))), options);\n    }\n    createNode(metadata) {\n        return this.model.createNode(metadata);\n    }\n    removeNode(node, options = {}) {\n        return this.model.removeCell(node, options);\n    }\n    addEdge(edge, options = {}) {\n        return this.model.addEdge(edge, options);\n    }\n    addEdges(edges, options = {}) {\n        return this.addCell(edges.map((edge) => (Edge.isEdge(edge) ? edge : this.createEdge(edge))), options);\n    }\n    removeEdge(edge, options = {}) {\n        return this.model.removeCell(edge, options);\n    }\n    createEdge(metadata) {\n        return this.model.createEdge(metadata);\n    }\n    addCell(cell, options = {}) {\n        this.model.addCell(cell, options);\n        return this;\n    }\n    removeCell(cell, options = {}) {\n        return this.model.removeCell(cell, options);\n    }\n    removeCells(cells, options = {}) {\n        return this.model.removeCells(cells, options);\n    }\n    removeConnectedEdges(cell, options = {}) {\n        return this.model.removeConnectedEdges(cell, options);\n    }\n    disconnectConnectedEdges(cell, options = {}) {\n        this.model.disconnectConnectedEdges(cell, options);\n        return this;\n    }\n    hasCell(cell) {\n        return this.model.has(cell);\n    }\n    getCells() {\n        return this.model.getCells();\n    }\n    getCellCount() {\n        return this.model.total();\n    }\n    /**\n     * Returns all the nodes in the graph.\n     */\n    getNodes() {\n        return this.model.getNodes();\n    }\n    /**\n     * Returns all the edges in the graph.\n     */\n    getEdges() {\n        return this.model.getEdges();\n    }\n    /**\n     * Returns all outgoing edges for the node.\n     */\n    getOutgoingEdges(cell) {\n        return this.model.getOutgoingEdges(cell);\n    }\n    /**\n     * Returns all incoming edges for the node.\n     */\n    getIncomingEdges(cell) {\n        return this.model.getIncomingEdges(cell);\n    }\n    /**\n     * Returns edges connected with cell.\n     */\n    getConnectedEdges(cell, options = {}) {\n        return this.model.getConnectedEdges(cell, options);\n    }\n    /**\n     * Returns an array of all the roots of the graph.\n     */\n    getRootNodes() {\n        return this.model.getRoots();\n    }\n    /**\n     * Returns an array of all the leafs of the graph.\n     */\n    getLeafNodes() {\n        return this.model.getLeafs();\n    }\n    /**\n     * Returns `true` if the node is a root node, i.e.\n     * there is no  edges coming to the node.\n     */\n    isRootNode(cell) {\n        return this.model.isRoot(cell);\n    }\n    /**\n     * Returns `true` if the node is a leaf node, i.e.\n     * there is no edges going out from the node.\n     */\n    isLeafNode(cell) {\n        return this.model.isLeaf(cell);\n    }\n    /**\n     * Returns all the neighbors of node in the graph. Neighbors are all\n     * the nodes connected to node via either incoming or outgoing edge.\n     */\n    getNeighbors(cell, options = {}) {\n        return this.model.getNeighbors(cell, options);\n    }\n    /**\n     * Returns `true` if `cell2` is a neighbor of `cell1`.\n     */\n    isNeighbor(cell1, cell2, options = {}) {\n        return this.model.isNeighbor(cell1, cell2, options);\n    }\n    getSuccessors(cell, options = {}) {\n        return this.model.getSuccessors(cell, options);\n    }\n    /**\n     * Returns `true` if `cell2` is a successor of `cell1`.\n     */\n    isSuccessor(cell1, cell2, options = {}) {\n        return this.model.isSuccessor(cell1, cell2, options);\n    }\n    getPredecessors(cell, options = {}) {\n        return this.model.getPredecessors(cell, options);\n    }\n    /**\n     * Returns `true` if `cell2` is a predecessor of `cell1`.\n     */\n    isPredecessor(cell1, cell2, options = {}) {\n        return this.model.isPredecessor(cell1, cell2, options);\n    }\n    getCommonAncestor(...cells) {\n        return this.model.getCommonAncestor(...cells);\n    }\n    /**\n     * Returns an array of cells that result from finding nodes/edges that\n     * are connected to any of the cells in the cells array. This function\n     * loops over cells and if the current cell is a edge, it collects its\n     * source/target nodes; if it is an node, it collects its incoming and\n     * outgoing edges if both the edge terminal (source/target) are in the\n     * cells array.\n     */\n    getSubGraph(cells, options = {}) {\n        return this.model.getSubGraph(cells, options);\n    }\n    /**\n     * Clones the whole subgraph (including all the connected links whose\n     * source/target is in the subgraph). If `options.deep` is `true`, also\n     * take into account all the embedded cells of all the subgraph cells.\n     *\n     * Returns a map of the form: { [original cell ID]: [clone] }.\n     */\n    cloneSubGraph(cells, options = {}) {\n        return this.model.cloneSubGraph(cells, options);\n    }\n    cloneCells(cells) {\n        return this.model.cloneCells(cells);\n    }\n    getNodesFromPoint(x, y) {\n        return this.model.getNodesFromPoint(x, y);\n    }\n    getNodesInArea(x, y, w, h, options) {\n        return this.model.getNodesInArea(x, y, w, h, options);\n    }\n    getNodesUnderNode(node, options = {}) {\n        return this.model.getNodesUnderNode(node, options);\n    }\n    searchCell(cell, iterator, options = {}) {\n        this.model.search(cell, iterator, options);\n        return this;\n    }\n    /** *\n     * Returns an array of IDs of nodes on the shortest\n     * path between source and target.\n     */\n    getShortestPath(source, target, options = {}) {\n        return this.model.getShortestPath(source, target, options);\n    }\n    /**\n     * Returns the bounding box that surrounds all cells in the graph.\n     */\n    getAllCellsBBox() {\n        return this.model.getAllCellsBBox();\n    }\n    /**\n     * Returns the bounding box that surrounds all the given cells.\n     */\n    getCellsBBox(cells, options = {}) {\n        return this.model.getCellsBBox(cells, options);\n    }\n    startBatch(name, data = {}) {\n        this.model.startBatch(name, data);\n    }\n    stopBatch(name, data = {}) {\n        this.model.stopBatch(name, data);\n    }\n    batchUpdate(arg1, arg2, arg3) {\n        const name = typeof arg1 === 'string' ? arg1 : 'update';\n        const execute = typeof arg1 === 'string' ? arg2 : arg1;\n        const data = typeof arg2 === 'function' ? arg3 : arg2;\n        this.startBatch(name, data);\n        const result = execute();\n        this.stopBatch(name, data);\n        return result;\n    }\n    updateCellId(cell, newId) {\n        return this.model.updateCellId(cell, newId);\n    }\n    // #endregion\n    // #region view\n    findView(ref) {\n        if (Cell.isCell(ref)) {\n            return this.findViewByCell(ref);\n        }\n        return this.findViewByElem(ref);\n    }\n    findViews(ref) {\n        if (Rectangle.isRectangleLike(ref)) {\n            return this.findViewsInArea(ref);\n        }\n        if (Point.isPointLike(ref)) {\n            return this.findViewsFromPoint(ref);\n        }\n        return [];\n    }\n    findViewByCell(cell) {\n        return this.renderer.findViewByCell(cell);\n    }\n    findViewByElem(elem) {\n        return this.renderer.findViewByElem(elem);\n    }\n    findViewsFromPoint(x, y) {\n        const p = typeof x === 'number' ? { x, y: y } : x;\n        return this.renderer.findViewsFromPoint(p);\n    }\n    findViewsInArea(x, y, width, height, options) {\n        const rect = typeof x === 'number'\n            ? {\n                x,\n                y: y,\n                width: width,\n                height: height,\n            }\n            : x;\n        const localOptions = typeof x === 'number'\n            ? options\n            : y;\n        return this.renderer.findViewsInArea(rect, localOptions);\n    }\n    matrix(mat) {\n        if (typeof mat === 'undefined') {\n            return this.transform.getMatrix();\n        }\n        this.transform.setMatrix(mat);\n        return this;\n    }\n    resize(width, height) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.resize(width, height);\n        }\n        else {\n            this.transform.resize(width, height);\n        }\n        return this;\n    }\n    scale(sx, sy = sx, cx = 0, cy = 0) {\n        if (typeof sx === 'undefined') {\n            return this.transform.getScale();\n        }\n        this.transform.scale(sx, sy, cx, cy);\n        return this;\n    }\n    zoom(factor, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            if (typeof factor === 'undefined') {\n                return scroller.zoom();\n            }\n            scroller.zoom(factor, options);\n        }\n        else {\n            if (typeof factor === 'undefined') {\n                return this.transform.getZoom();\n            }\n            this.transform.zoom(factor, options);\n        }\n        return this;\n    }\n    zoomTo(factor, options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.zoom(factor, Object.assign(Object.assign({}, options), { absolute: true }));\n        }\n        else {\n            this.transform.zoom(factor, Object.assign(Object.assign({}, options), { absolute: true }));\n        }\n        return this;\n    }\n    zoomToRect(rect, options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.zoomToRect(rect, options);\n        }\n        else {\n            this.transform.zoomToRect(rect, options);\n        }\n        return this;\n    }\n    zoomToFit(options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.zoomToFit(options);\n        }\n        else {\n            this.transform.zoomToFit(options);\n        }\n        return this;\n    }\n    rotate(angle, cx, cy) {\n        if (typeof angle === 'undefined') {\n            return this.transform.getRotation();\n        }\n        this.transform.rotate(angle, cx, cy);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'undefined') {\n            return this.transform.getTranslation();\n        }\n        this.transform.translate(tx, ty);\n        return this;\n    }\n    translateBy(dx, dy) {\n        const ts = this.translate();\n        const tx = ts.tx + dx;\n        const ty = ts.ty + dy;\n        return this.translate(tx, ty);\n    }\n    getGraphArea() {\n        return this.transform.getGraphArea();\n    }\n    getContentArea(options = {}) {\n        return this.transform.getContentArea(options);\n    }\n    getContentBBox(options = {}) {\n        return this.transform.getContentBBox(options);\n    }\n    fitToContent(gridWidth, gridHeight, padding, options) {\n        return this.transform.fitToContent(gridWidth, gridHeight, padding, options);\n    }\n    scaleContentToFit(options = {}) {\n        this.transform.scaleContentToFit(options);\n        return this;\n    }\n    /**\n     * Position the center of graph to the center of the viewport.\n     */\n    center(options) {\n        return this.centerPoint(options);\n    }\n    centerPoint(x, y, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.centerPoint(x, y, options);\n        }\n        else {\n            this.transform.centerPoint(x, y);\n        }\n        return this;\n    }\n    centerContent(options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.centerContent(options);\n        }\n        else {\n            this.transform.centerContent(options);\n        }\n        return this;\n    }\n    centerCell(cell, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.centerCell(cell, options);\n        }\n        else {\n            this.transform.centerCell(cell);\n        }\n        return this;\n    }\n    positionPoint(point, x, y, options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionPoint(point, x, y, options);\n        }\n        else {\n            this.transform.positionPoint(point, x, y);\n        }\n        return this;\n    }\n    positionRect(rect, direction, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionRect(rect, direction, options);\n        }\n        else {\n            this.transform.positionRect(rect, direction);\n        }\n        return this;\n    }\n    positionCell(cell, direction, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionCell(cell, direction, options);\n        }\n        else {\n            this.transform.positionCell(cell, direction);\n        }\n        return this;\n    }\n    positionContent(pos, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionContent(pos, options);\n        }\n        else {\n            this.transform.positionContent(pos, options);\n        }\n        return this;\n    }\n    snapToGrid(x, y) {\n        return this.coord.snapToGrid(x, y);\n    }\n    pageToLocal(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.pageToLocalRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.pageToLocalRect(x, y, width, height);\n        }\n        return this.coord.pageToLocalPoint(x, y);\n    }\n    localToPage(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.localToPageRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.localToPageRect(x, y, width, height);\n        }\n        return this.coord.localToPagePoint(x, y);\n    }\n    clientToLocal(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.clientToLocalRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.clientToLocalRect(x, y, width, height);\n        }\n        return this.coord.clientToLocalPoint(x, y);\n    }\n    localToClient(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.localToClientRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.localToClientRect(x, y, width, height);\n        }\n        return this.coord.localToClientPoint(x, y);\n    }\n    localToGraph(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.localToGraphRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.localToGraphRect(x, y, width, height);\n        }\n        return this.coord.localToGraphPoint(x, y);\n    }\n    graphToLocal(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.graphToLocalRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.graphToLocalRect(x, y, width, height);\n        }\n        return this.coord.graphToLocalPoint(x, y);\n    }\n    clientToGraph(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.clientToGraphRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.clientToGraphRect(x, y, width, height);\n        }\n        return this.coord.clientToGraphPoint(x, y);\n    }\n    // #endregion\n    // #region defs\n    defineFilter(options) {\n        return this.defs.filter(options);\n    }\n    defineGradient(options) {\n        return this.defs.gradient(options);\n    }\n    defineMarker(options) {\n        return this.defs.marker(options);\n    }\n    // #endregion\n    // #region grid\n    getGridSize() {\n        return this.grid.getGridSize();\n    }\n    setGridSize(gridSize) {\n        this.grid.setGridSize(gridSize);\n        return this;\n    }\n    showGrid() {\n        this.grid.show();\n        return this;\n    }\n    hideGrid() {\n        this.grid.hide();\n        return this;\n    }\n    clearGrid() {\n        this.grid.clear();\n        return this;\n    }\n    drawGrid(options) {\n        this.grid.draw(options);\n        return this;\n    }\n    // #endregion\n    // #region background\n    updateBackground() {\n        this.background.update();\n        return this;\n    }\n    drawBackground(options, onGraph) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller != null && (this.options.background == null || !onGraph)) {\n            scroller.drawBackground(options, onGraph);\n        }\n        else {\n            this.background.draw(options);\n        }\n        return this;\n    }\n    clearBackground(onGraph) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller != null && (this.options.background == null || !onGraph)) {\n            scroller.clearBackground(onGraph);\n        }\n        else {\n            this.background.clear();\n        }\n        return this;\n    }\n    // #endregion\n    // #region virtual-render\n    enableVirtualRender() {\n        this.virtualRender.enableVirtualRender();\n        return this;\n    }\n    disableVirtualRender() {\n        this.virtualRender.disableVirtualRender();\n        return this;\n    }\n    // #endregion\n    // #region mousewheel\n    isMouseWheelEnabled() {\n        return !this.mousewheel.disabled;\n    }\n    enableMouseWheel() {\n        this.mousewheel.enable();\n        return this;\n    }\n    disableMouseWheel() {\n        this.mousewheel.disable();\n        return this;\n    }\n    toggleMouseWheel(enabled) {\n        if (enabled == null) {\n            if (this.isMouseWheelEnabled()) {\n                this.disableMouseWheel();\n            }\n            else {\n                this.enableMouseWheel();\n            }\n        }\n        else if (enabled) {\n            this.enableMouseWheel();\n        }\n        else {\n            this.disableMouseWheel();\n        }\n        return this;\n    }\n    // #endregion\n    // #region panning\n    isPannable() {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            return scroller.isPannable();\n        }\n        return this.panning.pannable;\n    }\n    enablePanning() {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.enablePanning();\n        }\n        else {\n            this.panning.enablePanning();\n        }\n        return this;\n    }\n    disablePanning() {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.disablePanning();\n        }\n        else {\n            this.panning.disablePanning();\n        }\n        return this;\n    }\n    togglePanning(pannable) {\n        if (pannable == null) {\n            if (this.isPannable()) {\n                this.disablePanning();\n            }\n            else {\n                this.enablePanning();\n            }\n        }\n        else if (pannable !== this.isPannable()) {\n            if (pannable) {\n                this.enablePanning();\n            }\n            else {\n                this.disablePanning();\n            }\n        }\n        return this;\n    }\n    // #endregion\n    // #region plugin\n    use(plugin, ...options) {\n        if (!this.installedPlugins.has(plugin)) {\n            this.installedPlugins.add(plugin);\n            plugin.init(this, ...options);\n        }\n        return this;\n    }\n    getPlugin(pluginName) {\n        return Array.from(this.installedPlugins).find((plugin) => plugin.name === pluginName);\n    }\n    getPlugins(pluginName) {\n        return Array.from(this.installedPlugins).filter((plugin) => pluginName.includes(plugin.name));\n    }\n    enablePlugins(plugins) {\n        let postPlugins = plugins;\n        if (!Array.isArray(postPlugins)) {\n            postPlugins = [postPlugins];\n        }\n        const aboutToChangePlugins = this.getPlugins(postPlugins);\n        aboutToChangePlugins === null || aboutToChangePlugins === void 0 ? void 0 : aboutToChangePlugins.forEach((plugin) => {\n            var _a;\n            (_a = plugin === null || plugin === void 0 ? void 0 : plugin.enable) === null || _a === void 0 ? void 0 : _a.call(plugin);\n        });\n        return this;\n    }\n    disablePlugins(plugins) {\n        let postPlugins = plugins;\n        if (!Array.isArray(postPlugins)) {\n            postPlugins = [postPlugins];\n        }\n        const aboutToChangePlugins = this.getPlugins(postPlugins);\n        aboutToChangePlugins === null || aboutToChangePlugins === void 0 ? void 0 : aboutToChangePlugins.forEach((plugin) => {\n            var _a;\n            (_a = plugin === null || plugin === void 0 ? void 0 : plugin.disable) === null || _a === void 0 ? void 0 : _a.call(plugin);\n        });\n        return this;\n    }\n    isPluginEnabled(pluginName) {\n        var _a;\n        const pluginIns = this.getPlugin(pluginName);\n        return (_a = pluginIns === null || pluginIns === void 0 ? void 0 : pluginIns.isEnabled) === null || _a === void 0 ? void 0 : _a.call(pluginIns);\n    }\n    disposePlugins(plugins) {\n        let postPlugins = plugins;\n        if (!Array.isArray(postPlugins)) {\n            postPlugins = [postPlugins];\n        }\n        const aboutToChangePlugins = this.getPlugins(postPlugins);\n        aboutToChangePlugins === null || aboutToChangePlugins === void 0 ? void 0 : aboutToChangePlugins.forEach((plugin) => {\n            plugin.dispose();\n        });\n        return this;\n    }\n    // #endregion\n    // #region dispose\n    dispose(clean = true) {\n        if (clean) {\n            this.clearCells();\n        }\n        this.off();\n        this.css.dispose();\n        this.defs.dispose();\n        this.grid.dispose();\n        this.coord.dispose();\n        this.transform.dispose();\n        this.highlight.dispose();\n        this.background.dispose();\n        this.mousewheel.dispose();\n        this.panning.dispose();\n        this.view.dispose();\n        this.renderer.dispose();\n        this.installedPlugins.forEach((plugin) => {\n            plugin.dispose();\n        });\n    }\n}\n__decorate([\n    Basecoat.dispose()\n], Graph.prototype, \"dispose\", null);\n(function (Graph) {\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    Graph.View = GraphView;\n    Graph.Renderer = ViewRenderer;\n    Graph.MouseWheel = Wheel;\n    Graph.DefsManager = Defs;\n    Graph.GridManager = Grid;\n    Graph.CoordManager = Coord;\n    Graph.TransformManager = Transform;\n    Graph.HighlightManager = Highlight;\n    Graph.BackgroundManager = Background;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    Graph.toStringTag = `X6.${Graph.name}`;\n    function isGraph(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Graph) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        if (tag == null || tag === Graph.toStringTag) {\n            return true;\n        }\n        return false;\n    }\n    Graph.isGraph = isGraph;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    function render(options, data) {\n        const graph = options instanceof HTMLElement\n            ? new Graph({ container: options })\n            : new Graph(options);\n        if (data != null) {\n            graph.fromJSON(data);\n        }\n        return graph;\n    }\n    Graph.render = render;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    Graph.registerNode = Node.registry.register;\n    Graph.registerEdge = Edge.registry.register;\n    Graph.registerView = CellView.registry.register;\n    Graph.registerAttr = Registry.Attr.registry.register;\n    Graph.registerGrid = Registry.Grid.registry.register;\n    Graph.registerFilter = Registry.Filter.registry.register;\n    Graph.registerNodeTool = Registry.NodeTool.registry.register;\n    Graph.registerEdgeTool = Registry.EdgeTool.registry.register;\n    Graph.registerBackground = Registry.Background.registry.register;\n    Graph.registerHighlighter = Registry.Highlighter.registry.register;\n    Graph.registerPortLayout = Registry.PortLayout.registry.register;\n    Graph.registerPortLabelLayout = Registry.PortLabelLayout.registry.register;\n    Graph.registerMarker = Registry.Marker.registry.register;\n    Graph.registerRouter = Registry.Router.registry.register;\n    Graph.registerConnector = Registry.Connector.registry.register;\n    Graph.registerAnchor = Registry.NodeAnchor.registry.register;\n    Graph.registerEdgeAnchor = Registry.EdgeAnchor.registry.register;\n    Graph.registerConnectionPoint = Registry.ConnectionPoint.registry.register;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    Graph.unregisterNode = Node.registry.unregister;\n    Graph.unregisterEdge = Edge.registry.unregister;\n    Graph.unregisterView = CellView.registry.unregister;\n    Graph.unregisterAttr = Registry.Attr.registry.unregister;\n    Graph.unregisterGrid = Registry.Grid.registry.unregister;\n    Graph.unregisterFilter = Registry.Filter.registry.unregister;\n    Graph.unregisterNodeTool = Registry.NodeTool.registry.unregister;\n    Graph.unregisterEdgeTool = Registry.EdgeTool.registry.unregister;\n    Graph.unregisterBackground = Registry.Background.registry.unregister;\n    Graph.unregisterHighlighter = Registry.Highlighter.registry.unregister;\n    Graph.unregisterPortLayout = Registry.PortLayout.registry.unregister;\n    Graph.unregisterPortLabelLayout = Registry.PortLabelLayout.registry.unregister;\n    Graph.unregisterMarker = Registry.Marker.registry.unregister;\n    Graph.unregisterRouter = Registry.Router.registry.unregister;\n    Graph.unregisterConnector = Registry.Connector.registry.unregister;\n    Graph.unregisterAnchor = Registry.NodeAnchor.registry.unregister;\n    Graph.unregisterEdgeAnchor = Registry.EdgeAnchor.registry.unregister;\n    Graph.unregisterConnectionPoint = Registry.ConnectionPoint.registry.unregister;\n})(Graph || (Graph = {}));\n//# sourceMappingURL=graph.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Dom } from '@antv/x6-common';\nimport { Markup } from '../view';\nimport { Node } from '../model/node';\nimport { NodeView } from '../view/node';\nimport { Graph } from '../graph/graph';\nexport class HTML extends Node {\n}\n(function (HTML) {\n    class View extends NodeView {\n        init() {\n            super.init();\n            this.cell.on('change:*', ({ key }) => {\n                const content = HTML.shapeMaps[this.cell.shape];\n                if (content) {\n                    const { effect } = content;\n                    if (!effect || effect.includes(key)) {\n                        this.renderHTMLComponent();\n                    }\n                }\n            });\n        }\n        confirmUpdate(flag) {\n            const ret = super.confirmUpdate(flag);\n            return this.handleAction(ret, View.action, () => this.renderHTMLComponent());\n        }\n        renderHTMLComponent() {\n            const container = this.selectors && this.selectors.foContent;\n            if (container) {\n                Dom.empty(container);\n                const content = HTML.shapeMaps[this.cell.shape];\n                if (!content) {\n                    return;\n                }\n                let { html } = content;\n                if (typeof html === 'function') {\n                    html = html(this.cell);\n                }\n                if (html) {\n                    if (typeof html === 'string') {\n                        container.innerHTML = html;\n                    }\n                    else {\n                        Dom.append(container, html);\n                    }\n                }\n            }\n        }\n    }\n    HTML.View = View;\n    (function (View) {\n        View.action = 'html';\n        View.config({\n            bootstrap: [View.action],\n            actions: {\n                html: View.action,\n            },\n        });\n        NodeView.registry.register('html-view', View, true);\n    })(View = HTML.View || (HTML.View = {}));\n})(HTML || (HTML = {}));\n(function (HTML) {\n    HTML.config({\n        view: 'html-view',\n        markup: [\n            {\n                tagName: 'rect',\n                selector: 'body',\n            },\n            Object.assign({}, Markup.getForeignObjectMarkup()),\n            {\n                tagName: 'text',\n                selector: 'label',\n            },\n        ],\n        attrs: {\n            body: {\n                fill: 'none',\n                stroke: 'none',\n                refWidth: '100%',\n                refHeight: '100%',\n            },\n            fo: {\n                refWidth: '100%',\n                refHeight: '100%',\n            },\n        },\n    });\n    Node.registry.register('html', HTML, true);\n})(HTML || (HTML = {}));\n(function (HTML) {\n    HTML.shapeMaps = {};\n    function register(config) {\n        const { shape, html, effect, inherit } = config, others = __rest(config, [\"shape\", \"html\", \"effect\", \"inherit\"]);\n        if (!shape) {\n            throw new Error('should specify shape in config');\n        }\n        HTML.shapeMaps[shape] = {\n            html,\n            effect,\n        };\n        Graph.registerNode(shape, Object.assign({ inherit: inherit || 'html' }, others), true);\n    }\n    HTML.register = register;\n})(HTML || (HTML = {}));\n//# sourceMappingURL=html.js.map","import request from '@/apis/request.wms'\r\n\r\n// 任务办理详情-业务对象信息\r\nexport function getListApi(data) {\r\n  return request({\r\n    url: '/wms/task/myAppliedTask',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\n// 拜访计划审批列表\r\nexport function getCustomVisitPlanTaskListApi(data) {\r\n  return request({\r\n    url: '/wms/customer/business/plan/approveList',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\n// 根据 businessKey 查询task信息info\r\nexport function getTaskInfoByBusinessKeyApi(data) {\r\n  return request({\r\n    url: '/wms/task/main/info/id',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\n// 获取工作流数据\r\nexport function getFlowData(data) {\r\n  return request({\r\n    url: `/flow-manager/app/rest/processIns/json/${data.id}`,\r\n    method: 'get',\r\n    data\r\n  })\r\n}\r\n\r\n// 获取工作流人员列表\r\nexport function getUserListApi(data) {\r\n  return request({\r\n    url: '/wms/approval/listApprover',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"container audit-wrapper\">\r\n    <!-- 左侧审批时间轴 -->\r\n    <div v-if=\"$route.query.type === 'edit' || $route.query.type === 'audit' || $route.query.type === 'auditHistory' \" class=\"fl time-line\">\r\n      <!-- 流程图当前视图 -->\r\n      <div class=\"active-img\">\r\n        <el-button type=\"success\" icon=\"el-icon-view\" @click=\"searchActiveX\">查看当前流程</el-button>\r\n      </div>\r\n      <task-time-line :time-lines=\"timeLines\" class=\"time-line\" />\r\n    </div>\r\n    <!-- 右侧表单插槽 -->\r\n    <div class=\"fr\" :style=\"{ 'width': $route.query.type ? 'calc(100% - 200px)' : '100%' }\">\r\n      <slot />\r\n    </div>\r\n    <!-- 流程跟踪图 -->\r\n    <el-dialog\r\n      :key=\"$route.query.processInstanceId\"\r\n      class=\"flow-dialog\"\r\n      title=\"流程跟踪图\"\r\n      :close-on-click-modal=\"false\"\r\n      width=\"1200px\"\r\n      append-to-body\r\n      :lock-scroll=\"false\"\r\n      :visible.sync=\"dialogVisible\"\r\n      :before-close=\"beforeClose\"\r\n      top=\"0\"\r\n    >\r\n      <div style=\"max-height: 90vh; overflow: auto;\">\r\n        <div id=\"container\" />\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog\r\n      title=\"查看人员\"\r\n      :close-on-click-modal=\"false\"\r\n      width=\"900px\"\r\n      append-to-body\r\n      :lock-scroll=\"false\"\r\n      :visible.sync=\"userDialogVisible\"\r\n      :before-close=\"userBeforeClose\"\r\n    >\r\n      <el-table ref=\"table\" v-loading=\"loading\" size=\"mini\" :data=\"list\" border stripe style=\"width: 100%\" row-key=\"id\">\r\n        <el-table-column align=\"center\" type=\"index\" label=\"序号\" />\r\n        <el-table-column prop=\"username\" label=\"登录名\" align=\"center\" />\r\n        <el-table-column prop=\"no\" :label=\"`工号`\" align=\"center\" />\r\n        <el-table-column prop=\"nickName\" :label=\"`姓名`\" align=\"center\" />\r\n        <el-table-column prop=\"companyName\" :label=\"`归属公司`\" align=\"center\" />\r\n        <el-table-column prop=\"officeName\" :label=\"`归属部门`\" align=\"center\" />\r\n        <el-table-column prop=\"email\" :label=\"`邮箱`\" align=\"center\" />\r\n        <el-table-column prop=\"mobile\" :label=\"`手机`\" align=\"center\" />\r\n        <el-table-column prop=\"phone\" :label=\"`电话`\" align=\"center\" />\r\n      </el-table>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TaskTimeLine from '@/components/AuditWrapper/TaskTimeLine'\r\nimport { taskTimeLineMixins } from '@/mixins/task'\r\nimport { Graph } from '@antv/x6'\r\nimport { getFlowData } from '@/apis/modules/dashboard/task-list.js'\r\nimport { getSubmitUserListApi, getUsersByRoleListApi } from '@/apis/modules/user'\r\n\r\nexport default {\r\n  name: 'AuditWrapperCom',\r\n  components: {\r\n    TaskTimeLine\r\n  },\r\n  mixins: [\r\n    taskTimeLineMixins\r\n  ],\r\n  props: {\r\n    isAudit: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    extraInfo: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      url: '',\r\n      srcList: [],\r\n      list: [],\r\n      loading: false,\r\n      userDialogVisible: false,\r\n      graph: null,\r\n      flowData: []\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initProcessTimeLine()\r\n    this.createGraph()\r\n  },\r\n  beforeDestroy() {\r\n    if (this.graph) {\r\n      this.graph.dispose()\r\n      this.graph = null\r\n    }\r\n    this.flowData = []\r\n  },\r\n  methods: {\r\n    createGraph() {\r\n      // 开始和结束的圆形节点\r\n      Graph.registerNode(\r\n        'event',\r\n        {\r\n          inherit: 'circle',\r\n          attrs: {\r\n            body: {\r\n              strokeWidth: 2,\r\n              stroke: '#5F95FF',\r\n              fill: '#FFF'\r\n            },\r\n            text: {\r\n              // refX: 10,\r\n              refY: 40\r\n            }\r\n          }\r\n        },\r\n        true,\r\n      )\r\n      Graph.registerNode(\r\n        'startEvent',\r\n        {\r\n          inherit: 'circle',\r\n          attrs: {\r\n            body: {\r\n              strokeWidth: 2,\r\n              stroke: 'rgb(88, 88, 88)',\r\n              fill: '#FFF'\r\n            },\r\n            text: {\r\n              // refX: 10,\r\n              refY: 30\r\n            }\r\n          }\r\n        },\r\n        true,\r\n      )\r\n\r\n      Graph.registerNode(\r\n        'endEvent',\r\n        {\r\n          inherit: 'circle',\r\n          attrs: {\r\n            body: {\r\n              strokeWidth: 3,\r\n              stroke: 'rgb(88, 88, 88)',\r\n              fill: '#FFF'\r\n            },\r\n            text: {\r\n              // refX: 10,\r\n              refY: 30\r\n            }\r\n          }\r\n        },\r\n        true,\r\n      )\r\n\r\n      // 普通节点\r\n      Graph.registerNode(\r\n        'activity',\r\n        {\r\n          inherit: 'rect',\r\n          markup: [\r\n            {\r\n              tagName: 'rect',\r\n              selector: 'body'\r\n            },\r\n            // {\r\n            //   tagName: 'image',\r\n            //   selector: 'img'\r\n            // },\r\n            {\r\n              tagName: 'text',\r\n              selector: 'label'\r\n            }\r\n          ],\r\n          attrs: {\r\n            body: {\r\n              rx: 6,\r\n              ry: 6,\r\n              stroke: 'rgb(88, 88, 88)',\r\n              fill: '#EFF4FF',\r\n              strokeWidth: 1\r\n              // event: 'node:showUser'\r\n            },\r\n            // img: {\r\n            //   x: 6,\r\n            //   y: 6,\r\n            //   width: 16,\r\n            //   height: 16,\r\n            //   'xlink:href': 'https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*pwLpRr7QPGwAAAAAAAAAAAAAARQnAQ',\r\n            //   event: 'node:showUser'\r\n            // },\r\n            label: {\r\n              fontSize: 10,\r\n              fill: '#262626'\r\n            }\r\n          }\r\n        },\r\n        true,\r\n      )\r\n      // 当前节点\r\n      Graph.registerNode(\r\n        'cur-activity',\r\n        {\r\n          inherit: 'rect',\r\n          markup: [\r\n            {\r\n              tagName: 'rect',\r\n              selector: 'body'\r\n            },\r\n            // {\r\n            //   tagName: 'image',\r\n            //   selector: 'img'\r\n            // },\r\n            {\r\n              tagName: 'text',\r\n              selector: 'label'\r\n            }\r\n          ],\r\n          attrs: {\r\n            body: {\r\n              rx: 6,\r\n              ry: 6,\r\n              stroke: '#f00',\r\n              fill: '#EFF4FF',\r\n              strokeWidth: 3\r\n              // event: 'node:showUser'\r\n            },\r\n            // img: {\r\n            //   x: 6,\r\n            //   y: 6,\r\n            //   width: 16,\r\n            //   height: 16,\r\n            //   'xlink:href': 'https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*pwLpRr7QPGwAAAAAAAAAAAAAARQnAQ',\r\n            //   event: 'node:showUser'\r\n            // },\r\n            text: {\r\n              fontSize: 10,\r\n              fill: '#262626'\r\n            }\r\n          }\r\n        },\r\n        true,\r\n      )\r\n\r\n      // 网关节点\r\n      Graph.registerNode(\r\n        'gateway',\r\n        {\r\n          inherit: 'polygon',\r\n          attrs: {\r\n            body: {\r\n              refPoints: '0,10 10,0 20,10 10,20',\r\n              strokeWidth: 2,\r\n              stroke: 'rgb(88, 88, 88)',\r\n              fill: '#EFF4FF'\r\n            },\r\n            label: {\r\n              text: '+',\r\n              fontSize: 40,\r\n              fill: 'rgb(88, 88, 88)',\r\n              refY: 15\r\n            }\r\n          }\r\n        },\r\n        true,\r\n      )\r\n\r\n      // 连线\r\n      Graph.registerEdge(\r\n        'bpmn-edge',\r\n        {\r\n          inherit: 'edge',\r\n          attrs: {\r\n            line: {\r\n              stroke: 'rgb(88, 88, 88)',\r\n              strokeWidth: 2\r\n            }\r\n          },\r\n          label: {\r\n            attrs: {\r\n              label: {\r\n                fill: 'rgb(88, 88, 88)',\r\n                fontSize: 12\r\n                // refY: -10\r\n                // refX: 10\r\n              }\r\n            },\r\n            position: {\r\n              distance: 0.3\r\n            }\r\n          }\r\n        },\r\n        true,\r\n      )\r\n\r\n      // 历史连线\r\n      Graph.registerEdge(\r\n        'his-bpmn-edge',\r\n        {\r\n          inherit: 'edge',\r\n          attrs: {\r\n            line: {\r\n              stroke: '#f00',\r\n              strokeWidth: 2\r\n            }\r\n          },\r\n          label: {\r\n            attrs: {\r\n              label: {\r\n                fill: '#f00',\r\n                fontSize: 12\r\n                // refY: -10\r\n              }\r\n            },\r\n            position: {\r\n              // distance: 15\r\n            }\r\n          }\r\n        },\r\n        true,\r\n      )\r\n\r\n      // 无箭头连线\r\n      Graph.registerEdge(\r\n        'lane-edge',\r\n        {\r\n          inherit: 'edge',\r\n          attrs: {\r\n            targetMarker: '',\r\n            line: {\r\n              stroke: '#A2B1C3',\r\n              strokeWidth: 2,\r\n              targetMarker: null\r\n            }\r\n          },\r\n          label: {\r\n            attrs: {\r\n              label: {\r\n                fill: '#A2B1C3',\r\n                fontSize: 12,\r\n                refY: -10\r\n              }\r\n            }\r\n          }\r\n        },\r\n        true,\r\n      )\r\n    },\r\n    // 查看当前流程\r\n    searchActiveX() {\r\n      this.dialogVisible = true\r\n      const _this = this\r\n      getFlowData({\r\n        id: this.$route.query.processInstanceId\r\n      }).then(res => {\r\n        const { code, data } = res\r\n        if (!code) {\r\n          this.flowData = []\r\n          let w = 1200\r\n          let h = 800\r\n          data.forEach(item => {\r\n            const { vertices, shape, position, width, height, ...obj } = item\r\n            if (position && h < position.y + height) {\r\n              h = Math.round(position.y + height)\r\n            }\r\n            if (position && w < position.x + width) {\r\n              w = Math.round(position.x + width)\r\n            }\r\n            if (shape !== 'bpmn-edge') {\r\n              obj.position = {\r\n                x: Math.floor(position.x + 0.2 * width),\r\n                y: Math.floor(position.y + 0.2 * height)\r\n              }\r\n              obj.width = Math.round(width * 0.6)\r\n              obj.height = Math.round(height * 0.6)\r\n              // 设备文字换行\r\n              if (obj.label && obj.label.length > 8) {\r\n                obj.label = obj.label.substring(0, 8) + '\\n' + obj.label.substring(8)\r\n              }\r\n              // 当前节点\r\n              if (obj.active && shape === 'activity') {\r\n                obj.shape = 'cur-activity'\r\n              }\r\n              this.flowData.push({ shape, ...obj })\r\n            } else {\r\n              vertices.pop()\r\n              vertices.shift()\r\n              if (obj.history) {\r\n                obj.shape = 'his-bpmn-edge'\r\n              }\r\n              this.flowData.push({ shape, vertices, ...obj })\r\n            }\r\n          })\r\n          this.graph && this.graph.dispose()\r\n          // 创建一个 Graph 对象，并为其指定一个页面上的绘图容器\r\n          this.graph = new Graph({\r\n            container: document.getElementById('container'),\r\n            height: h, // 设定画布的高度\r\n            width: w, // 设定画布的宽度\r\n            connecting: {\r\n              router: 'orth'\r\n            },\r\n            scaling: {\r\n              min: 1,\r\n              max: 1.5\r\n            },\r\n            grid: true, // 展示网格背景\r\n            interacting: false\r\n          })\r\n\r\n          this.graph.on('node:click', ({ cell }) => {\r\n            if (cell.shape.indexOf('cur-activity') > -1) {\r\n              const { ename1 } = this.extraInfo\r\n              if (!ename1) return\r\n              // 打开查看人员弹窗\r\n              _this.userDialogVisible = true\r\n              _this.getUsersByRoleList({ ename: ename1 })\r\n            }\r\n            // if (cell.shape.indexOf('activity') === -1) {\r\n            //   return\r\n            // }\r\n            // const { submitter } = this.extraInfo\r\n            // const obj = {\r\n            //   businessId: this.$route.params.id,\r\n            //   processInstanceId: this.$route.query.processInstanceId,\r\n            //   node: cell.id\r\n            // }\r\n            // 打开查看人员弹窗\r\n            // _this.userDialogVisible = true\r\n            // _this.getUserList({ ids: [submitter] })\r\n          })\r\n\r\n          const cells = []\r\n          this.$nextTick(() => {\r\n            this.flowData.forEach((item) => {\r\n              if (item.shape.indexOf('bpmn-edge') > -1) {\r\n                cells.push(this.graph.createEdge(item))\r\n              } else {\r\n                cells.push(this.graph.createNode(item))\r\n              }\r\n            })\r\n\r\n            this.graph.resetCells(cells)\r\n            this.graph.zoomToFit({ padding: 10, maxScale: 1.2 })\r\n          })\r\n        }\r\n      })\r\n    },\r\n    getUsersByRoleList(obj) {\r\n      this.loading = true\r\n      // Tip 此接口是通过角色查询用户的分页接口，但提交人只有一个，所以不用传分页参数\r\n      getUsersByRoleListApi({\r\n        ...obj\r\n      }).then(res => {\r\n        const { code, data } = res\r\n        if (!code) {\r\n          // this.list = data.map(item => {\r\n          //   const { company, office, ...info } = item\r\n          //   return {\r\n          //     ...info,\r\n          //     companyName: company.name,\r\n          //     officeName: office.name\r\n          //   }\r\n          // })\r\n          this.list = data.map(item => {\r\n            const { company, office, ...info } = item\r\n            return {\r\n              ...info,\r\n              companyName: company && company.name || '',\r\n              officeName: office && office.name || ''\r\n            }\r\n          })\r\n        }\r\n        this.loading = false\r\n      }).catch(err => {\r\n        this.loading = false\r\n        console.log('err', err)\r\n      })\r\n    },\r\n    getUserList(obj) {\r\n      this.loading = true\r\n      // Tip 此查看提交人接口是个分页接口，但提交人只有一个，所以不用传分页参数\r\n      getSubmitUserListApi({\r\n        ...obj\r\n      }).then(res => {\r\n        const { code, data: { list }} = res\r\n        if (!code) {\r\n          // this.list = data.map(item => {\r\n          //   const { company, office, ...info } = item\r\n          //   return {\r\n          //     ...info,\r\n          //     companyName: company.name,\r\n          //     officeName: office.name\r\n          //   }\r\n          // })\r\n          this.list = list.map(item => {\r\n            const { company, office, ...info } = item\r\n            return {\r\n              ...info,\r\n              companyName: company && company.name || '',\r\n              officeName: office && office.name || ''\r\n            }\r\n          })\r\n        }\r\n        this.loading = false\r\n      }).catch(err => {\r\n        this.loading = false\r\n        console.log('err', err)\r\n      })\r\n    },\r\n    beforeClose() {\r\n      this.dialogVisible = false\r\n      this.graph.dispose()\r\n      this.graph = null\r\n    },\r\n    userBeforeClose() {\r\n      this.userDialogVisible = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n.container{\r\n  width: 100%;\r\n  min-height: calc(100vh - 90px - 40px);\r\n  .time-line{\r\n    width: 180px;\r\n    margin-right: 20px;\r\n  }\r\n  .dashboard{\r\n    width: calc(100vw - 210px - 200px - 80px);\r\n    .form-wrapper{\r\n      font-size: 14px;\r\n      line-height: 30px;\r\n      .title {\r\n        width: 110px;\r\n        font-size: 12px;\r\n        color: #99a9bf;\r\n      }\r\n      .value{\r\n        color: #606266;\r\n      }\r\n    }\r\n  }\r\n}\r\n.audit-wrapper {\r\n  display: flex;\r\n  flex: 1;\r\n}\r\n.active-img {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin: 10px 0;\r\n}\r\n\r\n.flow-dialog {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  ::v-deep .el-dialog{\r\n    margin: 0 auto;\r\n    .el-dialog__body {\r\n      padding: 0;\r\n    }\r\n  }\r\n\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=27a0e592&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=27a0e592&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"27a0e592\",\n  null\n  \n)\n\nexport default component.exports","import qs from 'qs'\r\nimport $store from '@/store'\r\n\r\n// 处理空属性\r\nexport function deleteEmptyObj(data) {\r\n  for (const i in data) {\r\n    if (data[i] === null || data[i] === undefined || data[i] === '' || data[i] === ' ') {\r\n      delete data[i]\r\n    }\r\n  }\r\n  return data\r\n}\r\n\r\nexport function promiseWrapper(p) {\r\n  return new Promise(resolve => {\r\n    p.then((res = {}) => {\r\n      const { code = 0 } = res\r\n      resolve({\r\n        data: res,\r\n        success: code === 0\r\n      })\r\n    }).catch((e = {}) => {\r\n      resolve({\r\n        data: e,\r\n        success: false\r\n      })\r\n    })\r\n  })\r\n}\r\n\r\nexport function requestWrapper(req) {\r\n  return new Promise(resolve => {\r\n    req.then((res = {}) => {\r\n      resolve({\r\n        ...res,\r\n        success: res.success || res.code === 0\r\n      })\r\n    }).catch((e = {}) => {\r\n      resolve({\r\n        data: e,\r\n        success: false\r\n      })\r\n    })\r\n  })\r\n}\r\n\r\nexport function historyReplaceState(query = {}) {\r\n  window.history.replaceState(query, window.document.title, '?' + qs.stringify(query))\r\n}\r\n\r\nexport function downloadFile(fileName, data) {\r\n  const blob = new Blob([data])\r\n  if ('download' in document.createElement('a')) { // 非IE下载\r\n    const elink = document.createElement('a')\r\n    elink.download = fileName\r\n    elink.style.display = 'none'\r\n    elink.href = URL.createObjectURL(blob)\r\n    document.body.appendChild(elink)\r\n    elink.click()\r\n    URL.revokeObjectURL(elink.href) // 释放URL 对象\r\n    // document.body.removeChild(elink)\r\n  } else { // IE10+下载\r\n    navigator.msSaveBlob(blob, fileName)\r\n  }\r\n}\r\n\r\nexport function isImage(ext = '') {\r\n  const str = 'png,jpg,jpeg,bmp'\r\n  return str.includes(ext.toLowerCase())\r\n}\r\nexport function isVideo(ext = '') {\r\n  const str = 'mp4,avi,flv'\r\n  return str.includes(ext.toLowerCase())\r\n}\r\nexport function isPdf(ext = '') {\r\n  return ext.toLowerCase() === 'pdf'\r\n}\r\n\r\nexport function code2text(value = '', enums = []) {\r\n  // console.log(1, value, enums)\r\n  return enums.find(item => item.value === value).label\r\n}\r\n\r\n// 删除标签\r\nexport function delTagsView(view = {}) {\r\n  $store.dispatch('tagsView/delView', view)\r\n}\r\n"],"sourceRoot":""}