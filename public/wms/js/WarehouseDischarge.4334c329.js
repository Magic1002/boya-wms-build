(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["WarehouseDischarge"],{"32a6":function(e,t,n){var r=n("241e"),i=n("c3a1");n("ce7e")("keys",(function(){return function(e){return i(r(e))}}))},7378:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"i",(function(){return h}));var r=n("bc43");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/warehouseMgt/wmsBillTransfer/pageList",method:"post",data:e})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/warehouseMgt/wmsBillTransfer/add",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/warehouseMgt/wmsBillTransfer/edit",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/warehouseMgt/wmsBillTransfer/delete",method:"post",data:e})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/warehouseMgt/wmsBillTransfer/listItem",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/warehouseMgt/wmsBillTransfer/detail",method:"post",data:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/warehouseMgt/wmsBillTransferDetail/pageList",method:"post",data:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/warehouseMgt/wmsBillTransfer/submit",method:"post",data:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/warehouseMgt/wmsBillTransfer/withdraw",method:"post",data:e})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/warehouseMgt/wmsBillTransfer/audit",method:"post",data:e})}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/warehouseMgt/wmsBillTransfer/isInspect",method:"post",data:e})}},"8aae":function(e,t,n){n("32a6"),e.exports=n("584a").Object.keys},a4bb:function(e,t,n){e.exports=n("8aae")},a8db:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("e265"),i=n.n(r),a=n("a4bb"),o=n.n(a);function l(e,t){if(null==e)return{};var n,r,i={},a=o()(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function u(e,t){if(null==e)return{};var n,r,a=l(e,t);if(i.a){var o=i()(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},ce7e:function(e,t,n){var r=n("63b6"),i=n("584a"),a=n("294c");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],o={};o[e]=t(n),r(r.S+r.F*a((function(){n(1)})),"Object",o)}},dc8f:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"g",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"k",(function(){return c})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"d",(function(){return b}));var r=[{id:1,name:"待检验"},{id:2,name:"检验中"},{id:3,name:"已完成"},{id:6,name:"待更新"},{id:7,name:"档案未上传"}],i={0:"danger",1:"info",2:"warning",3:"success",4:"success",5:"success",6:"danger",7:"danger"},a={0:"草稿",1:"待检验",2:"检验中",3:"已完成",4:"已完成",5:"已完成",6:"待更新",7:"档案未上传"},o={0:"",1:"info",2:"warning",3:"success",4:"success"},l={0:"",1:"待检验",2:"检验中",3:"已完成",4:"已完成"},u={0:"danger",1:"success"},s={0:"不合格",1:"合格"},c=[{id:1,name:"全检"},{id:2,name:"抽检"}],d=[{id:1,name:"待检验"},{id:2,name:"检验中"},{id:3,name:"已完成"}],f={0:"未处理",1:"待完成",2:"已完成"},b={0:"未提交",1:"审核中",2:"未通过",3:"已完成",4:"驳回"}},e08f:function(e,t,n){"use strict";n("8e6e"),n("ac6a"),n("456d"),n("7514");var r=n("bd86");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t["a"]={data:function(){return{formIdent:"",tableData:[],columnList:[],expandList:[],tableColumnSortData:[],labels:{},refreshKey:1}},methods:{initTableHeadMixins:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"word",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"columnSets",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,o=t.map((function(e){return a({isParam:!1},e,{width:"input"!==n||e.width?e.width:i,module:n})})).map((function(t){var n=e[r].find((function(e){return e.prop===t.prop}));return n?a({},t,{},n):a({},t)}));return this.$nextTick((function(){"word"===n&&(e.expandList=o.filter((function(e){return e.extend&&e.show})))})),this.$nextTick((function(){e.refreshKey+=1})),o.filter((function(e){return e.show&&!e.extend}))}}}},e265:function(e,t,n){e.exports=n("ed33")},ed33:function(e,t,n){n("014b"),e.exports=n("584a").Object.getOwnPropertySymbols},fd53:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"clearfix top-filter"},[n("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""}},[n("el-form-item",{staticClass:"fl",attrs:{prop:"billNumber"}},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"调拨单号"},model:{value:e.query.billNumber,callback:function(t){e.$set(e.query,"billNumber",t)},expression:"query.billNumber"}},e._l(e.billTransferPullList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.billNumber,value:e.billNumber}})})),1)],1),n("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),n("el-row",[n("table-com",{ref:"baseTableRef",attrs:{loading:e.loading,selection:!1,"table-column-sort":!0,"form-ident":e.formIdent,"table-data":e.tableData,"column-list":e.columnList,"operation-width":280,"refresh-key":e.refreshKey,"expand-list":e.expandList},on:{refresh:e.searchInit,rowClick:e.handleRowClick},scopedSlots:e._u([{key:"default",fn:function(t){return[[1,5].includes(t.row.status)?[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.handle(t.row,"Submit")}}},[e._v("提交")]),n("el-button",{attrs:{type:"warning"},on:{click:function(n){return e.handleModify(t.row)}}},[e._v("修改")]),n("el-button",{attrs:{type:"danger"},on:{click:function(n){return e.handle(t.row,"Delete")}}},[e._v("删除")])]:e._e(),2===t.row.status?[n("el-button",{attrs:{type:"warning"},on:{click:function(n){return e.handle(t.row,"Withdraw")}}},[e._v("撤回")])]:e._e(),n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.handleDetail(t.row)}}},[e._v("详情")])]}}])})],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("7f7f"),n("ac6a"),n("5df3"),n("a8db")),o=n("bd86"),l=n("2f62"),u=n("1790"),s=n("7378"),c=n("e08f"),d=n("dc8f");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={1:"danger",2:"warning",3:"info",4:"success"},m={name:"WarehouseDischarge",components:{},mixins:[u["a"],c["a"]],data:function(){return{title:this.$route.meta.title,loading:!1,query:{billNumber:""},tableData:[],columnList:[{module:"word",prop:"billNumber",label:"调拨单号",align:"center",minWidth:"150",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"outWarehouseName",label:"移出仓库",align:"center",minWidth:"100",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"inWarehouseName",label:"移入仓库",align:"center",minWidth:"100",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"submitterName",label:"提交人",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"auditorName",label:"审核人",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"date",label:"日期",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"status",prop:"status",label:"状态",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center",formatter:function(e){return d["d"][e-1]},statusFormatter:function(e){return h[e.status]}}],columnSets:[{module:"status",prop:"status",formatter:function(e){return d["d"][e-1]},statusFormatter:function(e){return h[e.status]}}],returnOfGoodsMap:d["d"],dialogForm:{},supplierPullList:[],pullListConfig:[{api:Object(s["g"])(),dataKey:"billTransferPullList",name:"物料组"}],billTransferPullList:[]}},computed:b({},Object(l["c"])("app",{navbarWarehouseCheckedList:"navbarWarehouseCheckedList"})),watch:{navbarWarehouseCheckedList:{handler:function(){this.init()},deep:!0}},mounted:function(){this.getPullList(),this.init()},activated:function(){this.getPullList(),this.init()},methods:{init:function(){var e=this;this.loading=!0;var t=b({page:b({},this.pageInfo)},this.query,{warehouseIds:this.navbarWarehouseCheckedList.map((function(e){return e.id}))});return new Promise((function(n,r){Object(s["h"])(b({},t)).then((function(t){var r=t.code,i=t.data;if(!r){var o=i.formIdent,l=i.formHeadSets,u=i.pageData;e.formIdent=o,e.columnList=e.initTableHeadMixins(l);var s=u.list,c=Object(a["a"])(u,["list"]);e.initPage(c),e.tableData=s}e.loading=!1,n(t)})).catch((function(t){e.loading=!1,r(t)}))}))},getPullList:function(){var e=this,t=this.pullListConfig.map((function(e){return e.api}));Promise.all(t).then((function(t){t.length&&t.forEach((function(t,n){var r=e.pullListConfig[n].dataKey;e[r]=t.code?[]:t.data}))})).catch((function(e){}))},handleRowClick:function(e){var t=e.row,n=e.column;e.cell,e.event;if("操作"===n.label)return!1;this.rightObj=b({},t)},refresh:function(){this.init("clean")},handle:function(e,t){var n=this,r={Submit:{api:s["j"],tip:"该工单即将提交",message:"提交成功"},Delete:{api:s["c"],tip:"该工单即将删除",message:"删除成功"},Withdraw:{api:s["k"],tip:"该工单即将撤回",message:"撤回成功"}};this.$confirm("".concat(r[t]["tip"],"，是否继续？"),"提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",cancelButtonClass:"btn-custom-cancel",type:"warning",lockScroll:!1}).then((function(){r[t]["api"](b({},"Delete"===t&&{id:e.id},{},["Submit","Withdraw"].includes(t)&&{billNumber:e.billNumber})).then((function(e){var i=e.code;i||(n.$notify.success({title:"成功",message:"".concat(r[t]["message"])}),n.init())}))})).catch((function(e){n.$notify.info({title:"消息",message:"操作已取消"})}))},handleAdd:function(){this.$router.push({name:"BillTransferAdd"})},handleModify:function(e){this.$router.push({name:"BillTransferEdit",query:{billNumber:e.billNumber}})},handleDetail:function(e){this.$router.push({name:"BillTransferDetail",query:{billNumber:e.billNumber}})},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()}}},p=m,g=n("2877"),w=Object(g["a"])(p,r,i,!1,null,"799fe8c3",null);t["default"]=w.exports}}]);
//# sourceMappingURL=WarehouseDischarge.4334c329.js.map