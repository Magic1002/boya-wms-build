{"version":3,"sources":["webpack:///./src/views/client/clientManager/index.vue?0bbe","webpack:///./src/apis/modules/client/clientManager.js","webpack:///./src/views/client/clientManager/Drawer.vue?2809","webpack:///src/views/client/clientManager/Drawer.vue","webpack:///./src/views/client/clientManager/Drawer.vue?33a0","webpack:///./src/views/client/clientManager/Drawer.vue","webpack:///src/views/client/clientManager/index.vue","webpack:///./src/views/client/clientManager/index.vue?0df3","webpack:///./src/views/client/clientManager/index.vue","webpack:///./node_modules/core-js/library/modules/es6.object.keys.js","webpack:///./node_modules/core-js/library/fn/object/keys.js","webpack:///./src/components/Upload/FormUploadFile.vue?4353","webpack:///src/components/Upload/FormUploadFile.vue","webpack:///./src/components/Upload/FormUploadFile.vue?25fa","webpack:///./src/components/Upload/FormUploadFile.vue","webpack:///./src/mixins/upload.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/object/keys.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/objectWithoutProperties.js","webpack:///./src/views/client/clientManager/Drawer.vue?02ba","webpack:///./node_modules/core-js/library/modules/_object-sap.js","webpack:///./src/views/client/clientManager/index.vue?c40b","webpack:///./node_modules/@babel/runtime-corejs2/core-js/object/get-own-property-symbols.js","webpack:///./node_modules/core-js/library/fn/object/get-own-property-symbols.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","ref","attrs","fileList","on","handleUploadSuccess","handleUploadFileError","handleUploadFileProgress","handleRemoveFile","scopedSlots","_u","key","fn","proxy","percentage","_e","refName","loading","tableData","columnList","refreshKey","handleRowClick","searchInit","scope","$event","handleDelete","row","_v","handleDownload","pageInfo","current","size","total","$set","init","drawerForm","editType","dialogTitle","model","value","callback","$$v","drawerVisible","expression","staticRenderFns","getListApi","data","request","url","method","addOrModifyApi","deleteListApi","title","beforeClose","initSelect","form","rules","trim","handleConfirm","_s","mixins","props","type","Boolean","default","String","Object","INIT_FORM","version","id","selectInfo","list","visible","radio","watch","handler","immediate","length","$refs","validateField","methods","formName","validate","valid","add","modify","api","params","then","code","message","resetFields","$emit","assign","done","file","$notify","success","error","filter","component","name","components","Drawer","paginationPage","$route","meta","BASE_API","query","computed","mounted","page","Promise","resolve","res","reject","err","column","label","$confirm","confirmButtonText","cancelButtonText","cancelButtonClass","lockScroll","item","window","open","handleAdd","handleModify","resetForm","push","$nextTick","toObject","$keys","it","module","exports","keys","_t","headers","accept","beforeUpload","handleRemove","beforeRemove","limit","handleExceed","handlePreview","showFileList","disabled","handleUploadProgress","handleError","btnIcon","btnContent","uploadFileList","Array","Number","limitSize","errDefaultMsg","uploadDisabled","newVal","map","fileUrl","fileName","isLt","$message","event","setTimeout","msg","upload","clearFiles","fileId","fileType","downloadUrl","suffix","classification","fileInfo","confirmButtonClass","formUploadFilesMixins","FormUploadFile","uploadTip","uploadFileSuccess","removeFileInfo","initUploadFileList","fileIdList","getUploadedFileListCommonApi","ids","catch","getFileIdList","resetFormUploadFilesMixins","downloadUploadFileMixins","process","VUE_APP_BASE_API_LMS","_objectWithoutPropertiesLoose","source","excluded","i","target","sourceKeys","indexOf","_objectWithoutProperties","sourceSymbolKeys","prototype","propertyIsEnumerable","call","$export","core","fails","KEY","exec","exp","S","F","getOwnPropertySymbols"],"mappings":"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","file":"js/ClientManager.68c731db.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('div',{staticClass:\"top-filter\",staticStyle:{\"text-align\":\"right\"}},[_c('div',{staticClass:\"upload-box\"},[_c('form-upload-file',{ref:\"uploadCom\",staticClass:\"filter-item\",attrs:{\"accept\":\"application/zip\",\"url\":\"/wms/file/zip/upload\",\"btn-content\":\"上传\",\"btn-icon\":\"el-icon-upload\",\"limit\":99999,\"upload-file-list\":_vm.fileList,\"show-file-list\":false},on:{\"uploadFileSuccess\":_vm.handleUploadSuccess,\"uploadFileError\":_vm.handleUploadFileError,\"uploadFileProgress\":_vm.handleUploadFileProgress,\"handleRemove\":_vm.handleRemoveFile},scopedSlots:_vm._u([{key:\"tip\",fn:function(){return undefined},proxy:true}])}),(_vm.percentage !== 0)?_c('el-progress',{staticStyle:{\"width\":\"230px\"},attrs:{\"percentage\":_vm.percentage}}):_vm._e()],1)]),_c('el-row',[_c('table-com',{ref:_vm.refName,attrs:{\"loading\":_vm.loading,\"table-data\":_vm.tableData,\"column-list\":_vm.columnList,\"refresh-key\":_vm.refreshKey,\"table-column-sort\":false,\"operation-width\":170},on:{\"rowClick\":_vm.handleRowClick,\"refresh\":_vm.searchInit},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row)}}},[_vm._v(\"删除\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleDownload(scope.row)}}},[_vm._v(\"下载\")])]}}])})],1),_c('pagination',{attrs:{\"page\":_vm.pageInfo.current,\"limit\":_vm.pageInfo.size,\"total\":_vm.total},on:{\"update:page\":function($event){return _vm.$set(_vm.pageInfo, \"current\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.pageInfo, \"size\", $event)},\"pagination\":_vm.init}}),_c('drawer',{attrs:{\"drawer-form\":_vm.drawerForm,\"edit-type\":_vm.editType,\"title\":_vm.dialogTitle},on:{\"submit\":_vm.init},model:{value:(_vm.drawerVisible),callback:function ($$v) {_vm.drawerVisible=$$v},expression:\"drawerVisible\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/apis/request.wms'\r\n\r\n// 主列表\r\nexport function getListApi(data = {}) {\r\n  return request({\r\n    url: '/wms/file/zip/pageList',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 新增 或 编辑\r\nexport function addOrModifyApi(data = {}) {\r\n  return request({\r\n    url: '/wms/file/zip/update',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 删除\r\nexport function deleteListApi(data = {}) {\r\n  return request({\r\n    url: '/wms/file/zip/del',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-drawer',{attrs:{\"center\":true,\"append-to-body\":true,\"close-on-press-escape\":false,\"wrapper-closable\":false,\"title\":_vm.title,\"visible\":_vm.value,\"destroy-on-close\":true,\"before-close\":_vm.beforeClose},on:{\"open\":_vm.initSelect}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"inline\":\"\",\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-scrollbar',{staticClass:\"scroll-drawer\"},[_c('el-form-item',{attrs:{\"label\":\"版本号\",\"prop\":\"version\"}},[_c('el-input',{staticStyle:{\"width\":\"178px\"},attrs:{\"placeholder\":\"请填写\"},model:{value:(_vm.form.version),callback:function ($$v) {_vm.$set(_vm.form, \"version\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.version\"}})],1),(_vm.editType === 'add')?_c('el-form-item',{attrs:{\"label\":\"附件\",\"prop\":\"id\"}},[_c('form-upload-file',{ref:\"uploadCom\",staticClass:\"filter-item\",attrs:{\"accept\":\"application/zip\",\"url\":\"/wms/file/zip/upload\",\"btn-content\":\"上传\",\"btn-icon\":\"el-icon-upload\",\"limit\":9999,\"upload-file-list\":_vm.fileList,\"show-file-list\":true},on:{\"uploadFileSuccess\":_vm.handleUploadSuccess,\"uploadFileError\":_vm.handleUploadFileError,\"handleRemove\":_vm.handleRemoveFile},scopedSlots:_vm._u([{key:\"tip\",fn:function(){return undefined},proxy:true}],null,false,3769323172)})],1):_vm._e()],1),_c('div',{staticClass:\"drawer-footer\"},[_c('el-button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleConfirm('form')}}},[_vm._v(_vm._s(_vm.loading ? '提交中 ...' : '确 定'))]),_c('el-button',{on:{\"click\":_vm.beforeClose}},[_vm._v(\"取 消\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-drawer\r\n    :center=\"true\"\r\n    :append-to-body=\"true\"\r\n    :close-on-press-escape=\"false\"\r\n    :wrapper-closable=\"false\"\r\n    :title=\"title\"\r\n    :visible=\"value\"\r\n    :destroy-on-close=\"true\"\r\n    :before-close=\"beforeClose\"\r\n    @open=\"initSelect\"\r\n  >\r\n    <el-form ref=\"form\" :model=\"form\" inline :rules=\"rules\" label-width=\"120px\">\r\n      <el-scrollbar class=\"scroll-drawer\">\r\n        <el-form-item label=\"版本号\" prop=\"version\">\r\n          <el-input v-model.trim=\"form.version\" placeholder=\"请填写\" style=\"width: 178px;\" />\r\n        </el-form-item>\r\n        <el-form-item v-if=\"editType === 'add'\" label=\"附件\" prop=\"id\">\r\n          <form-upload-file\r\n            ref=\"uploadCom\"\r\n            class=\"filter-item\"\r\n            accept=\"application/zip\"\r\n            url=\"/wms/file/zip/upload\"\r\n            btn-content=\"上传\"\r\n            btn-icon=\"el-icon-upload\"\r\n            :limit=\"9999\"\r\n            :upload-file-list=\"fileList\"\r\n            :show-file-list=\"true\"\r\n            @uploadFileSuccess=\"handleUploadSuccess\"\r\n            @uploadFileError=\"handleUploadFileError\"\r\n            @handleRemove=\"handleRemoveFile\"\r\n          >\r\n            <template v-slot:tip />\r\n          </form-upload-file>\r\n        </el-form-item>\r\n      </el-scrollbar>\r\n      <div class=\"drawer-footer\">\r\n        <el-button :loading=\"loading\" type=\"primary\" @click=\"handleConfirm('form')\">{{ loading ? '提交中 ...' : '确 定' }}</el-button>\r\n        <el-button @click=\"beforeClose\">取 消</el-button>\r\n      </div>\r\n    </el-form>\r\n  </el-drawer>\r\n</template>\r\n\r\n<script>\r\nimport { formUploadFilesMixins } from '@/mixins/upload'\r\nimport { addOrModifyApi } from '@/apis/modules/client/clientManager'\r\n\r\nconst INIT_FORM = () => ({\r\n  version: '', // 版本号\r\n  id: '' // 文件id\r\n})\r\n\r\nexport default {\r\n  mixins: [formUploadFilesMixins],\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    editType: {\r\n      type: String,\r\n      default: 'add'\r\n    },\r\n    drawerForm: {\r\n      type: Object,\r\n      default: () => {\r\n        return { ...INIT_FORM() }\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      form: INIT_FORM(),\r\n      loading: false,\r\n      rules: {\r\n        version: [\r\n          { required: true, message: '请填写版本号', trigger: 'blur' }\r\n        ],\r\n        id: [\r\n          { required: true, message: '请先上传文件', trigger: 'change' }\r\n        ]\r\n      },\r\n      selectInfo: {\r\n        list: [],\r\n        visible: false,\r\n        radio: ''\r\n      },\r\n      fileList: []\r\n    }\r\n  },\r\n  watch: {\r\n    drawerForm: {\r\n      handler: function(value) {\r\n        if (this.editType === 'add') {\r\n          this.form = { ...INIT_FORM() }\r\n        } else {\r\n          this.form = { ...value }\r\n        }\r\n      },\r\n      immediate: true\r\n    },\r\n    fileList: {\r\n      handler: function(value) {\r\n        if (!this.fileList.length) {\r\n          this.form.id = ''\r\n        } else {\r\n          this.form.id = this.fileList[0].id\r\n        }\r\n        this.$refs.form && this.$refs.form.validateField('id')\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  methods: {\r\n    handleConfirm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (!valid) return false\r\n        this.loading = true\r\n        const params = {\r\n          ...this.form,\r\n          ...this.editType === 'add' && { id: this.fileList.length ? this.fileList[0].id : '' }\r\n        }\r\n        const api = {\r\n          add: addOrModifyApi,\r\n          modify: addOrModifyApi\r\n        }[this.editType || 'add']\r\n        api(params).then(res => {\r\n          const { code } = res\r\n          if (!code) {\r\n            this.$message({\r\n              message: `操作成功`,\r\n              type: 'success'\r\n            })\r\n            this.$emit('submit')\r\n            this.beforeClose()\r\n          }\r\n          this.loading = false\r\n        }).catch(err => {\r\n          console.log(err)\r\n          this.loading = false\r\n        })\r\n      })\r\n    },\r\n    initSelect() {\r\n    },\r\n    beforeClose(done) {\r\n      this.$refs.form.resetFields()\r\n      this.$emit('input', false)\r\n      this.form = Object.assign({}, INIT_FORM())\r\n      this.fileList = []\r\n      typeof done === 'function' && done()\r\n    },\r\n    // 附件上传成功\r\n    handleUploadSuccess(file) {\r\n      this.fileList = [file]\r\n      this.$notify.success({\r\n        title: '成功',\r\n        message: '上传成功'\r\n      })\r\n    },\r\n    // 附件上传失败\r\n    handleUploadFileError() {\r\n      this.$notify.error({\r\n        title: '错误',\r\n        message: '上传失败'\r\n      })\r\n    },\r\n    // 移除附件\r\n    handleRemoveFile(file) {\r\n      this.fileList = this.fileList.filter(item => item.fileId !== file.fileId)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n::v-deep:focus {\r\n  outline: 0;\r\n}\r\n::v-deep .el-drawer {\r\n  width: 640px;\r\n}\r\n.drawer-footer{\r\n  text-align: right;\r\n}\r\n.scroll-drawer {\r\n  height: calc(100vh - 150px);\r\n  // overflow: auto;\r\n}\r\n::v-deep .el-scrollbar .el-scrollbar__wrap {\r\n  overflow-x: hidden;\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Drawer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Drawer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Drawer.vue?vue&type=template&id=a6c80904&scoped=true&\"\nimport script from \"./Drawer.vue?vue&type=script&lang=js&\"\nexport * from \"./Drawer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Drawer.vue?vue&type=style&index=0&id=a6c80904&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a6c80904\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"app-container\">\r\n    <div class=\"top-filter\" style=\"text-align: right;\">\r\n      <!-- <el-button\r\n        class=\"filter-item\"\r\n        type=\"primary\"\r\n        icon=\"el-icon-plus\"\r\n        @click=\"handleAdd\"\r\n      >新增客户端</el-button> -->\r\n      <div class=\"upload-box\">\r\n        <form-upload-file\r\n          ref=\"uploadCom\"\r\n          class=\"filter-item\"\r\n          accept=\"application/zip\"\r\n          url=\"/wms/file/zip/upload\"\r\n          btn-content=\"上传\"\r\n          btn-icon=\"el-icon-upload\"\r\n          :limit=\"99999\"\r\n          :upload-file-list=\"fileList\"\r\n          :show-file-list=\"false\"\r\n          @uploadFileSuccess=\"handleUploadSuccess\"\r\n          @uploadFileError=\"handleUploadFileError\"\r\n          @uploadFileProgress=\"handleUploadFileProgress\"\r\n          @handleRemove=\"handleRemoveFile\"\r\n        >\r\n          <template v-slot:tip />\r\n        </form-upload-file>\r\n        <el-progress v-if=\"percentage !== 0\" :percentage=\"percentage\" style=\"width: 230px;\" />\r\n      </div>\r\n    </div>\r\n    <el-row>\r\n      <table-com\r\n        :ref=\"refName\"\r\n        :loading=\"loading\"\r\n        :table-data=\"tableData\"\r\n        :column-list=\"columnList\"\r\n        :refresh-key=\"refreshKey\"\r\n        :table-column-sort=\"false\"\r\n        :operation-width=\"170\"\r\n        @rowClick=\"handleRowClick\"\r\n        @refresh=\"searchInit\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <!-- <el-button type=\"warning\" @click=\"handleModify(scope.row)\">修改</el-button> -->\r\n          <el-button type=\"danger\" @click=\"handleDelete(scope.row)\">删除</el-button>\r\n          <el-button type=\"primary\" @click=\"handleDownload(scope.row)\">下载</el-button>\r\n        </template>\r\n      </table-com>\r\n    </el-row>\r\n    <pagination :page.sync=\"pageInfo.current\" :limit.sync=\"pageInfo.size\" :total=\"total\" @pagination=\"init\" />\r\n    <!-- 新增 -->\r\n    <drawer\r\n      v-model=\"drawerVisible\"\r\n      :drawer-form=\"drawerForm\"\r\n      :edit-type=\"editType\"\r\n      :title=\"dialogTitle\"\r\n      @submit=\"init\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport paginationPage from '@/mixins/paginationPage'\r\nimport { getListApi, deleteListApi } from '@/apis/modules/client/clientManager'\r\nimport Drawer from './Drawer'\r\nimport { formUploadFilesMixins } from '@/mixins/upload'\r\n\r\nexport default {\r\n  name: 'ClientManager',\r\n  components: {\r\n    Drawer\r\n  },\r\n  mixins: [paginationPage, formUploadFilesMixins],\r\n  data() {\r\n    return {\r\n      title: this.$route.meta.title,\r\n      BASE_API: process.env.VUE_APP_BASE_API_WMS,\r\n      query: {\r\n      },\r\n      refName: 'baseTable',\r\n      loading: false,\r\n      refreshKey: 1,\r\n      columnList: [\r\n        {\r\n          module: 'word',\r\n          prop: 'version',\r\n          label: '版本号',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'uploadDate',\r\n          label: '日期',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        }\r\n      ],\r\n      tableData: [],\r\n      drawerForm: {},\r\n      editType: 'add',\r\n      drawerVisible: false,\r\n      fileList: [],\r\n      percentage: 0 // 上传进度百分比\r\n    }\r\n  },\r\n  computed: {\r\n    dialogTitle() {\r\n      if (this.editType === 'add') {\r\n        return `客户端新增`\r\n      } else {\r\n        return `客户端修改`\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.loading = true\r\n      const params = {\r\n        ...this.query,\r\n        page: {\r\n          ...this.pageInfo\r\n        }\r\n      }\r\n      return new Promise((resolve, reject) => {\r\n        getListApi({\r\n          ...params\r\n        }).then(res => {\r\n          const { code, data } = res\r\n          if (!code) {\r\n            const { list, ...pageInfo } = data\r\n            this.initPage(pageInfo)\r\n            this.tableData = list\r\n          }\r\n          this.loading = false\r\n          resolve(res)\r\n        }).catch(err => {\r\n          this.loading = false\r\n          reject(err)\r\n        })\r\n      })\r\n    },\r\n    // 行内点击\r\n    handleRowClick({ row, column, cell, event }) {\r\n      if (column.label === '操作') {\r\n        return false\r\n      }\r\n    },\r\n    // 删除\r\n    handleDelete(item) {\r\n      this.$confirm('此操作将永久删除选中信息, 是否继续?', '提示', {\r\n        confirmButtonText: '确 定',\r\n        cancelButtonText: '取 消',\r\n        type: 'warning',\r\n        cancelButtonClass: 'btn-custom-cancel',\r\n        lockScroll: false\r\n      }).then(() => {\r\n        deleteListApi({\r\n          id: item.id\r\n        }).then(res => {\r\n          const { code } = res\r\n          if (!code) {\r\n            this.$notify.success({\r\n              title: '成功',\r\n              message: '删除成功'\r\n            })\r\n            this.init()\r\n          }\r\n        })\r\n      }).catch((e) => {\r\n        this.$notify.info({\r\n          title: '消息',\r\n          message: '已取消删除'\r\n        })\r\n      })\r\n    },\r\n    // 下载\r\n    handleDownload(item) {\r\n      window.open(`${this.BASE_API}/wms/file/zip/download/${item.id}`)\r\n    },\r\n    // 新增\r\n    handleAdd() {\r\n      this.editType = 'add'\r\n      this.drawerForm = {}\r\n      this.drawerVisible = true\r\n    },\r\n    // 修改\r\n    handleModify(item) {\r\n      this.editType = 'modify'\r\n      this.drawerForm = { ...item }\r\n      this.drawerVisible = true\r\n    },\r\n    // 重置查询表单\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields()\r\n      this.searchInit()\r\n    },\r\n    // 附件上传成功\r\n    handleUploadSuccess(file) {\r\n      this.fileList.push(file)\r\n      this.init()\r\n      this.$notify.success({\r\n        title: '成功',\r\n        message: '上传成功'\r\n      })\r\n      this.percentage = 0\r\n    },\r\n    // 附件上传失败\r\n    handleUploadFileError() {\r\n      this.$notify.error({\r\n        title: '错误',\r\n        message: '上传失败'\r\n      })\r\n      this.percentage = 0\r\n    },\r\n    // 文件上传时的钩子\r\n    handleUploadFileProgress(event, file, fileList) {\r\n      this.$nextTick(() => {\r\n        this.percentage = Math.floor((file.percentage / 100) * 100)\r\n      })\r\n    },\r\n    // 移除附件\r\n    handleRemoveFile(file) {\r\n      this.fileList = this.fileList.filter(item => item.fileId !== file.fileId)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.upload-box {\r\n  display: flex;\r\n  flex-flow: column wrap;\r\n  align-items: flex-end;\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=dda4b1bc&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=dda4b1bc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dda4b1bc\",\n  null\n  \n)\n\nexport default component.exports","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"inline-block\"}},[_vm._t(\"pic\"),_c('el-upload',{ref:\"upload\",attrs:{\"sizi\":\"mini\",\"action\":(\"\" + _vm.BASE_API + _vm.url),\"headers\":_vm.headers,\"accept\":_vm.accept,\"before-upload\":_vm.beforeUpload,\"on-remove\":_vm.handleRemove,\"before-remove\":_vm.beforeRemove,\"multiple\":_vm.limit > 1,\"limit\":_vm.limit,\"on-exceed\":_vm.handleExceed,\"file-list\":_vm.fileList,\"on-preview\":_vm.handlePreview,\"show-file-list\":_vm.showFileList,\"on-success\":_vm.handleUploadSuccess,\"disabled\":_vm.disabled,\"on-progress\":_vm.handleUploadProgress,\"on-error\":_vm.handleError}},[(_vm.btnContent)?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":_vm.btnIcon,\"disabled\":_vm.disabled}},[_vm._v(\"\\n      \"+_vm._s(_vm.btnContent)+\"\\n    \")]):_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":_vm.btnIcon,\"disabled\":_vm.disabled}}),_vm._t(\"tip\")],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div style=\"display: inline-block;\">\r\n    <slot name=\"pic\" />\r\n    <el-upload\r\n      ref=\"upload\"\r\n      sizi=\"mini\"\r\n      :action=\"`${BASE_API}${url}`\"\r\n      :headers=\"headers\"\r\n      :accept=\"accept\"\r\n      :before-upload=\"beforeUpload\"\r\n      :on-remove=\"handleRemove\"\r\n      :before-remove=\"beforeRemove\"\r\n      :multiple=\"limit > 1\"\r\n      :limit=\"limit\"\r\n      :on-exceed=\"handleExceed\"\r\n      :file-list=\"fileList\"\r\n      :on-preview=\"handlePreview\"\r\n      :show-file-list=\"showFileList\"\r\n      :on-success=\"handleUploadSuccess\"\r\n      :disabled=\"disabled\"\r\n      :on-progress=\"handleUploadProgress\"\r\n      :on-error=\"handleError\"\r\n    >\r\n      <el-button v-if=\"btnContent\" type=\"primary\" size=\"mini\" :icon=\"btnIcon\" :disabled=\"disabled\">\r\n        {{ btnContent }}\r\n      </el-button>\r\n      <el-button v-else type=\"primary\" size=\"mini\" :icon=\"btnIcon\" :disabled=\"disabled\" />\r\n      <slot name=\"tip\" />\r\n    </el-upload>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport $store from '@/store'\r\nimport { deleteUploadedFileCommonApi } from '@/apis/modules/common'\r\n\r\nexport default {\r\n  name: 'FormUploadFileComs',\r\n  props: {\r\n    uploadFileList: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      }\r\n    },\r\n    showFileList: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    btnIcon: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    btnContent: {\r\n      type: String,\r\n      default: '点击上传'\r\n    },\r\n    limit: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    url: {\r\n      type: String,\r\n      default: '/wms/file/upload'\r\n    },\r\n    accept: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    limitSize: {\r\n      type: Number,\r\n      default: 99999999999999999999999\r\n    },\r\n    errDefaultMsg: {\r\n      type: String,\r\n      default: '文件上传失败'\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    const token = `${$store.getters.token}`\r\n    return {\r\n      fileList: [],\r\n      // 文件上传\r\n      BASE_API: process.env.VUE_APP_BASE_API_WMS,\r\n      headers: { 'Authorization': token },\r\n      uploadDisabled: false,\r\n      list: []\r\n    }\r\n  },\r\n  watch: {\r\n    uploadFileList: {\r\n      handler(newVal) {\r\n        this.fileList = newVal.map(item => {\r\n          const { fileName, fileUrl, ...info } = item\r\n          return {\r\n            ...info,\r\n            url: fileUrl,\r\n            name: fileName\r\n          }\r\n        })\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  methods: {\r\n    beforeUpload(file) {\r\n      const isLt = file.size <= this.limitSize * 1000\r\n      if (!isLt) {\r\n        this.$message({\r\n          message: `上传大小不能超过 ${this.limitSize}k!`,\r\n          type: 'error'\r\n        })\r\n      }\r\n      if (isLt) {\r\n        this.$emit('openLoading')\r\n      }\r\n      return isLt\r\n    },\r\n    handleUploadProgress(event, file, fileList) {\r\n      this.$emit('uploadFileProgress', event, file, fileList)\r\n    },\r\n    handleError(err, file, fileList) {\r\n      console.log('上传失败', err)\r\n      // 这里可以进行错误处理，如给用户提示或者重试上传等\r\n      setTimeout(() => {\r\n        this.$notify.error({\r\n          title: '错误',\r\n          message: '上传失败'\r\n        })\r\n        this.$emit('closeLoading')\r\n      }, 500)\r\n    },\r\n    handleUploadSuccess(res, file, fileList) {\r\n      this.$emit('closeLoading')\r\n      if (res === '导入成功') {\r\n        this.$emit('uploadFileSuccess')\r\n        return\r\n      }\r\n      const { code, data } = res\r\n      if (code && code === 999) {\r\n        this.$notify.error({\r\n          title: '错误',\r\n          message: res.msg ? res.msg : this.errDefaultMsg\r\n        })\r\n        return\r\n      }\r\n      if (!code) {\r\n        if (!data.id) {\r\n          this.$emit('uploadFileSuccess')\r\n          return\r\n        }\r\n        // Tip 接口返回字段 classification.downloadUrl.fileName.filePath.fileRealName.fileType.fileUrl.id.orderBy.size.suffix\r\n        const { id, fileUrl, fileType, downloadUrl, fileName, suffix } = data\r\n        const fileInfo = {\r\n          id,\r\n          fileId: id,\r\n          fileUrl,\r\n          fileType,\r\n          downloadUrl,\r\n          suffix,\r\n          fileName,\r\n          name: fileName,\r\n          url: fileUrl,\r\n          classification: ''\r\n        }\r\n        this.fileList.push(fileInfo)\r\n        this.$emit('uploadFileSuccess', fileInfo)\r\n      } else {\r\n        this.$refs.upload.clearFiles()\r\n        // 上传失败\r\n        this.$emit('uploadFileError')\r\n      }\r\n    },\r\n    // 删除\r\n    handleRemove(file, fileList) {\r\n      const { ...fileInfo } = file\r\n      if (!fileInfo.id && fileInfo.id !== 0)fileInfo.id = fileInfo.fileId\r\n      // console.log(fileInfo, fileList)\r\n      this.fileList = this.fileList.filter(item => item.id !== fileInfo.id)\r\n      this.$emit('handleRemove', { ...fileInfo })\r\n      // 删除接口\r\n      return new Promise((resolve, reject) => {\r\n        deleteUploadedFileCommonApi({\r\n          id: fileInfo.id\r\n        }).then(res => {\r\n          const { code } = res\r\n          if (code === 0) {\r\n            // this.fileList = this.fileList.filter(item => item.id !== fileInfo.id)\r\n            // this.$emit('handleRemove', { ...fileInfo })\r\n            resolve()\r\n          } else {\r\n            reject()\r\n          }\r\n        }).catch(err => {\r\n          reject(err)\r\n        })\r\n      })\r\n    },\r\n    beforeRemove(file, fileList) {\r\n      return this.$confirm(`确定移除 ${file.name}？`, '提示', {\r\n        confirmButtonText: '确 定',\r\n        cancelButtonText: '取 消',\r\n        cancelButtonClass: 'cancel-button-class',\r\n        confirmButtonClass: 'confirm-button-class',\r\n        type: 'warning',\r\n        lockScroll: false\r\n      })\r\n    },\r\n    handlePreview(file) {\r\n      const fileId = file.id\r\n      window.open(`${process.env.VUE_APP_BASE_API_WMS}/wms/file/download/${fileId}`)\r\n    },\r\n    handleExceed(files, fileList) {\r\n      this.$notify({\r\n        title: '警告',\r\n        message: `当前限制上传附件数量是 ${this.limit} 个文件`,\r\n        type: 'warning'\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='css' scoped>\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormUploadFile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormUploadFile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FormUploadFile.vue?vue&type=template&id=6cedfe06&scoped=true&\"\nimport script from \"./FormUploadFile.vue?vue&type=script&lang=js&\"\nexport * from \"./FormUploadFile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6cedfe06\",\n  null\n  \n)\n\nexport default component.exports","import { getUploadedFileListCommonApi } from '@/apis/modules/common'\r\nimport FormUploadFile from '@/components/Upload/FormUploadFile'\r\n\r\nexport const uploadFilesMixins = {\r\n  data() {\r\n    return {\r\n      uploadFileList: []// 上传完成的文件列表，需要展示的列表\r\n    }\r\n  },\r\n  methods: {\r\n    // 上传成功后  上传组件返回的上传文件信息\r\n    uploadFileSuccess(file) {\r\n      console.log('===================>', file)\r\n      this.uploadFileList.push(file)\r\n    },\r\n    // 已上传的文件列表信息发生变化对上传文件列表进行更改  xxxx\r\n    uploadListChange(files) {\r\n      this.uploadFileList = files\r\n    },\r\n    // 删除文件成功后过滤已成功删除的文件\r\n    uploadFileDelete(file) {\r\n      this.uploadFileList = this.uploadFileList.filter(item => item.id !== file.id)\r\n    },\r\n    // 获取文件列表\r\n    getFileListByIds(fileIds) {\r\n      return new Promise((resolve, reject) => {\r\n        const ids = fileIds.split(',')\r\n        getUploadedFileListCommonApi({\r\n          ids\r\n        }).then(res => {\r\n          const { code, data } = res\r\n          if (!code) {\r\n            console.log(data)\r\n            this.uploadFileList = data\r\n          }\r\n          resolve(res)\r\n        }).catch(err => {\r\n          reject(err)\r\n        })\r\n      })\r\n    },\r\n    // 更新文件密级\r\n    uploadFileChangeLevel(file) {\r\n      this.uploadFileList = this.uploadFileList.map(item => {\r\n        if (item.id === file.id) {\r\n          item = file\r\n        }\r\n        return item\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const formUploadFilesMixins = {\r\n  components: {\r\n    FormUploadFile\r\n  },\r\n  data() {\r\n    return {\r\n      uploadTip: '',\r\n      uploadFileList: [] // 上传完成的文件列表，需要展示的列表\r\n    }\r\n  },\r\n  methods: {\r\n    // 上传成功后  上传组件返回的上传文件信息\r\n    uploadFileSuccess(file) {\r\n      this.uploadFileList.push(file)\r\n      console.log(this.uploadFileList, 'success')\r\n    },\r\n    // 删除成功后的修改文件\r\n    handleRemove(removeFileInfo) {\r\n      const { id } = removeFileInfo\r\n      this.uploadFileList = this.uploadFileList.filter(item => item.id !== id)\r\n    },\r\n    // 反选的时候获取默认的文件列表\r\n    initUploadFileList(fileIdList) {\r\n      if (!fileIdList || fileIdList === 'null') return\r\n      return new Promise((resolve, reject) => {\r\n        getUploadedFileListCommonApi({\r\n          ids: fileIdList\r\n        }).then(res => {\r\n          const { code, data } = res\r\n          if (!code) {\r\n            this.uploadFileList = data\r\n          }\r\n          resolve(res)\r\n        }).catch(err => {\r\n          reject(err)\r\n        })\r\n      })\r\n    },\r\n    // 点击确定的时候获取上传文件的id数组\r\n    getFileIdList() {\r\n      return this.uploadFileList.map(item => item.id)\r\n    },\r\n    // 点击确定的时候重置上传文件的列表\r\n    resetFormUploadFilesMixins() {\r\n      this.uploadFileList = []\r\n      console.log(this.uploadFileList, 'reset')\r\n    },\r\n    // 下载已上传的文件\r\n    downloadUploadFileMixins(fileId) {\r\n      window.open(`${process.env.VUE_APP_BASE_API_LMS}/wms/file/download/${fileId}`)\r\n    }\r\n  }\r\n}\r\n","module.exports = require(\"core-js/library/fn/object/keys\");","import _Object$keys from \"../../core-js/object/keys\";\nexport default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n\n  var sourceKeys = _Object$keys(source);\n\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import _Object$getOwnPropertySymbols from \"../../core-js/object/get-own-property-symbols\";\nimport objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (_Object$getOwnPropertySymbols) {\n    var sourceSymbolKeys = _Object$getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Drawer.vue?vue&type=style&index=0&id=a6c80904&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Drawer.vue?vue&type=style&index=0&id=a6c80904&lang=scss&scoped=true&\"","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=dda4b1bc&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=dda4b1bc&lang=scss&scoped=true&\"","module.exports = require(\"core-js/library/fn/object/get-own-property-symbols\");","require('../../modules/es6.symbol');\nmodule.exports = require('../../modules/_core').Object.getOwnPropertySymbols;\n"],"sourceRoot":""}