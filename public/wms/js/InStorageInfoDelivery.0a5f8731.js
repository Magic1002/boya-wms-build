(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["InStorageInfoDelivery"],{"206c":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-row",{staticClass:"clearfix"},[i("div",{staticClass:"fl"},[i("el-button",{on:{click:e.beforeClose}},[e._v("返回")])],1),i("div",{staticClass:"fr"},[i("el-button",{attrs:{type:"primary"},on:{click:e.handlePrintTemplate}},[e._v("打印预览")])],1)]),i("el-collapse",{attrs:{accordion:""}},[i("el-collapse-item",{attrs:{title:"单据信息",name:"1"}},[i("el-descriptions",{attrs:{column:2}},[i("el-descriptions-item",{attrs:{label:"凭证日期"}},[e._v(e._s(e.form.documentDate||"---"))]),i("el-descriptions-item",{attrs:{label:"记账日期"}},[e._v(e._s(e.form.accountingDate||"---"))]),i("el-descriptions-item",{attrs:{label:"收货工厂"}},[e._v(e._s(e.form.receiptFactoryName||"---"))]),i("el-descriptions-item",{attrs:{label:"单据编号"}},[e._v(e._s(e.form.billNumber||"---"))]),i("el-descriptions-item",{attrs:{label:"收货仓库"}},[e._v(e._s(e.form.receiptWarehouse||"---"))]),i("el-descriptions-item",{attrs:{label:"移动类型"}},[e._v(e._s(e.form.movementType||"---"))]),i("el-descriptions-item",{attrs:{label:"成本中心"}},[e._v(e._s(e.form.costCenterName||"---"))]),i("el-descriptions-item",{attrs:{label:"总账科目"}},[e._v(e._s(e.form.ledgerSubjects||"---"))]),i("el-descriptions-item",{attrs:{label:"供应商"}},[e._v(e._s(e.form.supplierName||"---"))]),i("el-descriptions-item",{attrs:{label:"采购员/电话号"}},[e._v(e._s(e.form.buyerName||"---")+" "+e._s(e.form.buyerTel||"---"))]),i("el-descriptions-item",{attrs:{label:"资产"}},[e._v(e._s(e.form.asset||"---"))]),i("el-descriptions-item",{attrs:{label:"采购订单号"}},[e._v(e._s(e.form.purchaseOrderNumber||"---"))]),i("el-descriptions-item",{attrs:{label:"网络"}},[e._v(e._s(e.form.network||"---"))]),i("el-descriptions-item",{attrs:{label:"订单"}},[e._v(e._s(e.form.orderNumber||"---"))]),i("el-descriptions-item",{attrs:{label:"项目"}},[e._v(e._s(e.form.project||"---"))]),i("el-descriptions-item",{attrs:{label:"合同号/汇总号"}},[e._v(e._s(e.form.contractCode||"---"))])],1)],1)],1),i("div",{staticStyle:{margin:"20px 0"}},[i("el-descriptions",{attrs:{column:4}},[i("el-descriptions-item",{attrs:{label:"单据类型"}},[e._v(e._s(e.pullListMap[e.form.type]))]),i("el-descriptions-item",{attrs:{label:"说明"}},[e._v(e._s(e.form.explanation))]),i("el-descriptions-item",{attrs:{label:"入库项"}},[e._v(e._s(e.form.stockInNumber))]),i("el-descriptions-item",{attrs:{label:"数量"}},[e._v(e._s(e.form.deliveredNumber))])],1)],1),i("el-row",[i("table-com",{ref:"baseTableRef",attrs:{loading:e.loading,index:!0,selection:!1,"table-data":e.tableData,"column-list":e.columnList,"operation-width":120,"table-column-sort":!1},on:{rowClick:e.handleRowClick,refresh:e.searchInit},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",disabled:!e.form.id},on:{click:function(i){return e.handleModify(t.row)}}},[e._v("详细")])]}}])})],1),i("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}}),i("edit-dialog",{attrs:{"dialog-form":e.dialogForm,"edit-type":e.editType,"stock-id":e.form.id},on:{confirm:e.init},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}}),i("print-templates",{attrs:{title:"打印模板","extra-info":e.curRow},model:{value:e.dlgVisible,callback:function(t){e.dlgVisible=t},expression:"dlgVisible"}})],1)},r=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("a8db")),a=i("bd86"),l=i("3d57"),s=i("1790"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{attrs:{center:!0,"append-to-body":!0,"close-on-press-escape":!1,"wrapper-closable":!1,title:e.title,size:720,direction:"btt",visible:e.value,"destroy-on-close":!0,"before-close":e.beforeClose},on:{open:e.initSelect}},[i("el-scrollbar",[i("div",{staticStyle:{margin:"0 10px"}},[i("el-row",[i("el-descriptions",{attrs:{border:!0,direction:"vertical",column:8}},[i("el-descriptions-item",{attrs:{label:"物料编号"}},[e._v(e._s(e.dialogForm.materialCode))]),i("el-descriptions-item",{attrs:{label:"物料名称"}},[e._v(e._s(e.dialogForm.materialName))]),i("el-descriptions-item",{attrs:{label:"规格型号"}},[e._v(e._s(e.dialogForm.materialSpec))]),i("el-descriptions-item",{attrs:{label:"评估类型"}},[e._v(e._s(e.dialogForm.materialAssessType_dictText))]),i("el-descriptions-item",{attrs:{label:"条码数量"}},[e._v(e._s(e.dialogForm.barcodeNumber))]),i("el-descriptions-item",{attrs:{label:"入库数量"}},[e._v(e._s(e.dialogForm.stockInNumber))]),i("el-descriptions-item",{attrs:{label:"计量单位"}},[e._v(e._s(e.dialogForm.unitName))])],1)],1),i("div",{staticStyle:{"margin-top":"20px"}},[i("el-descriptions",{attrs:{column:2}},[i("el-descriptions-item",{attrs:{label:"条码数量"}},[e._v(e._s(e.tableData.length))])],1)],1),i("table-com",{key:e.refreshKey,ref:"baseTableRef",attrs:{loading:e.loading,index:!0,selection:!1,"table-data":e.tableData,"column-list":e.columnList,"table-height-type":520,"show-operate":!1,"expand-list":e.expandList,"table-column-sort":!1},on:{rowClick:e.handleRowClick,refresh:e.searchInit}})],1)]),i("div",{staticClass:"drawer-footer"},[i("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.handleConfirm("form")}}},[e._v(e._s(e.loading?"提交中 ...":"确 定"))]),i("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1),i("info-select",{attrs:{multiple:!1,"extra-info":{}},on:{confirm:e.onSelectConfirm},model:{value:e.selectedInfo.visible,callback:function(t){e.$set(e.selectedInfo,"visible",t)},expression:"selectedInfo.visible"}})],1)},d=[],u=(i("7f7f"),i("c5f6"),i("c212")),m=i("2828");function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var b={code:"",supplierId:"",supplierName:"",contact:"",phone:"",purchaseDate:""},h={name:"InStorageInfoReceiptCom",components:{InfoSelect:u["a"]},mixins:[s["a"]],props:{value:{type:Boolean,default:!1},editType:{type:String,default:"add"},dialogForm:{type:Object,default:function(){return p({},b)}},stockId:{type:[Number,String],default:""}},data:function(){return{title:"详细",refreshKey:(new Date).getTime(),form:b,loading:!1,rules:{},query:{},tableData:[],columnList:[{module:"word",prop:"barCode",label:"条码号",align:"center",width:200,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"number",label:"数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"storageName",label:"入库位置",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"}],expandList:[],dialogVisible:!1,dialogInfo:{},editInfoType:"add",selectedInfo:{list:[],visible:!1,radio:{},rowIndex:null}}},computed:{dialogTitle:function(){return"add"===this.editType?"新增".concat(this.title):"编辑".concat(this.title)}},watch:{dialogForm:{handler:function(e){"add"===this.editType?this.form=p({},b):this.form=p({},e)},immediate:!0}},methods:{init:function(){var e=this;return this.loading=!0,new Promise((function(t,i){Object(m["f"])(p({},e.query,{stockInId:e.stockId,deliveryMaterialId:e.form.id})).then((function(i){var n=i.code,r=i.data;n||(e.tableData=r.map((function(e){return p({},e,{isDel:!1})}))),e.loading=!1,t(i)})).catch((function(t){e.loading=!1,i(t)}))}))},handleConfirm:function(e){this.beforeClose()},handleDelete:function(e,t){var i=this;this.$confirm("此操作将删除选中信息, 是否继续?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning",cancelButtonClass:"btn-custom-cancel",lockScroll:!1}).then((function(){Object(m["a"])({id:t.id,stockInId:i.stockId,deliveryMaterialId:i.form.id}).then((function(n){var r=n.code;r||(i.$notify.success({title:"成功",message:"删除成功"}),i.$set(i.tableData,e,p({},i.tableData[e],{storageId:"",storageName:"",isDel:!t.isDel})))}))})).catch((function(e){i.$notify.info({title:"消息",message:"已取消删除"})}))},handleRestore:function(e,t){var i=this;this.$confirm("此操作将恢复选中信息, 是否继续?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning",cancelButtonClass:"btn-custom-cancel",lockScroll:!1}).then((function(){i.$set(i.tableData,e,p({},i.tableData[e],{isDel:!t.isDel}))})).catch((function(e){i.$notify.info({title:"消息",message:"已取消删除"})}))},onSelectConfirm:function(e){e.length&&this.$set(this.tableData,this.selectedInfo.rowIndex,p({},this.tableData[this.selectedInfo.rowIndex],{storageId:e[0].id,storageName:e[0].name}))},handleAdd:function(){this.editInfoType="add",this.dialogInfo={},this.dialogVisible=!0},handleModify:function(){this.dialogInfo=p({},this.form),this.editInfoType="modify",this.dialogVisible=!0},handleRowClick:function(e){var t=e.row,i=e.rowIndex,n=e.column;e.cell,e.event;if("操作"===n.label)return!1;this.selectedInfo.rowIndex=i,this.rightObj=p({},t)},refresh:function(){this.init()},initSelect:function(){this.init()},beforeClose:function(e){this.$emit("input",!1),this.form=Object.assign({},p({},b)),"function"===typeof e&&e()}}},g=h,v=(i("cf31"),i("2877")),y=Object(v["a"])(g,c,d,!1,null,"601f6df9",null),w=y.exports,I=i("d689"),_=i("a46f"),O=i("42ad");function j(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function k(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?j(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):j(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var x={name:"InStorageInfoReceipt",components:{EditDialog:w,PrintTemplates:I["a"]},mixins:[l["a"],s["a"],O["a"]],data:function(){return{title:this.$route.meta.title,loading:!1,query:{},form:{},tableData:[],columnList:[{module:"word",prop:"materialCode",label:"物料编码",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialSpec",label:"规格型号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialAssessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"barcodeNumber",label:"条码数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"stockInNumber",label:"入库数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],columnSets:[],dialogForm:{},pullListMap:_["d"],pullList:[{code:"1",name:"常规"},{code:"2",name:"战略"}],editType:"add",dialogVisible:!1,params:{},dlgVisible:!1,curRow:{}}},computed:{dialogTitle:function(){return"add"===this.editType?"新增".concat(this.title,"信息"):"编辑".concat(this.title,"信息")}},mounted:function(){this.params=this.$route.params,this.init(),this.initInfo()},methods:{init:function(e){var t=this;this.loading=!0;var i={stockInId:this.params.id,filterStockInNumber:!0,page:k({},this.pageInfo)};return new Promise((function(e,n){Object(m["h"])(k({},i)).then((function(i){var n=i.code,r=i.data;if(!n){var a=r.list,l=Object(o["a"])(r,["list"]);t.initPage(l),t.tableData=a}t.loading=!1,e(i)})).catch((function(e){t.loading=!1,n(e)}))}))},initInfo:function(){var e=this;this.loading=!0;var t={entity:{id:this.params.id}};return new Promise((function(i,n){Object(m["c"])(k({},t)).then((function(t){var n=t.code,r=t.data;n||(e.form=k({},r),e.form.billNumber&&e.setTagsTitleMixins(null,e.form.billNumber)),e.loading=!1,i(t)})).catch((function(t){e.loading=!1,n(t)}))}))},confirmDialog:function(){var e=this;this.loading=!0;var t={entity:k({},this.form),wsmList:this.params.ids.map((function(e){return{deliveryMaterialId:e}}))};Object(m["l"])(t).then((function(t){var i=t.code,n=t.data;i||e.$set(e.form,"id",n),e.loading=!1})).catch((function(t){e.loading=!1}))},handleRowClick:function(e){var t=e.row,i=e.column;e.cell,e.event;if("操作"===i.label)return!1;this.rightObj=k({},t)},refresh:function(){this.init("clean")},handleAdd:function(){this.editType="add",this.dialogForm={},this.dialogVisible=!0},handleModify:function(e){this.dialogForm=k({},e),this.editType="modify",this.dialogVisible=!0},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()},beforeClose:function(){this.$router.go(-1),this.$store.dispatch("tagsView/delView",this.$route)},handlePrintTemplate:function(){var e=this.form,t=e.type,i=e.explanation;this.handlePrint(this.form.id,"",{type:t,explanation:i})}}},S=x,D=Object(v["a"])(S,n,r,!1,null,"67e57c26",null);t["default"]=D.exports},2828:function(e,t,i){"use strict";i.d(t,"d",(function(){return r})),i.d(t,"c",(function(){return o})),i.d(t,"g",(function(){return a})),i.d(t,"i",(function(){return l})),i.d(t,"h",(function(){return s})),i.d(t,"e",(function(){return c})),i.d(t,"f",(function(){return d})),i.d(t,"l",(function(){return u})),i.d(t,"a",(function(){return m})),i.d(t,"m",(function(){return f})),i.d(t,"k",(function(){return p})),i.d(t,"b",(function(){return b})),i.d(t,"j",(function(){return h}));var n=i("bc43");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/detail",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/detail2",method:"post",data:e})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/init",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/deliveryMaterialPageList",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/deliveryMaterialPageList2",method:"post",data:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/barcodePageList",method:"post",data:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/barcodePageListForDetail",method:"post",data:e})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/add",method:"post",data:e})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/delPutInStorage",method:"post",data:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/addPutInStorage",method:"post",data:e})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/save",method:"post",data:e,timeout:12e4})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/del",method:"post",data:e})}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/addPutInStorageByRecommendStorageId",method:"post",data:e})}},a46f:function(e,t,i){"use strict";i.d(t,"c",(function(){return n})),i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return o})),i.d(t,"d",(function(){return a}));var n={0:"danger",1:"warning",2:"warning",3:"warning",4:"success",5:"success",6:"warning"},r={0:"草稿",1:"待检验",2:"检验中",3:"未入库",4:"部分入库",5:"已完成",6:"退库交接单"},o=[{id:3,name:"未入库"},{id:4,name:"部分入库"},{id:5,name:"已完成"}],a={1:"常规",2:"战略"}},cf31:function(e,t,i){"use strict";var n=i("d2b1"),r=i.n(n);r.a},d2b1:function(e,t,i){}}]);
//# sourceMappingURL=InStorageInfoDelivery.0a5f8731.js.map