(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AnalysisMaterialInTransit"],{"32a6":function(e,t,a){var i=a("241e"),n=a("c3a1");a("ce7e")("keys",(function(){return function(e){return n(i(e))}}))},"52cb":function(e,t,a){},"8aae":function(e,t,a){a("32a6"),e.exports=a("584a").Object.keys},"9fe0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"clearfix top-filter"},[a("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""}},[a("el-form-item",{attrs:{prop:"materialCode"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{placeholder:"物料编号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInit(t)}},model:{value:e.query.materialCode,callback:function(t){e.$set(e.query,"materialCode","string"===typeof t?t.trim():t)},expression:"query.materialCode"}})],1),a("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),a("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")])],1)],1),a("el-row",[a("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-setting"},on:{click:e.setTable}},[e._v("设置")]),a("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-setting",loading:e.dialogLoading},on:{click:e.openDialog}},[e._v("自定义统计")]),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-collapse",{staticStyle:{margin:"0 0 20px 0"},attrs:{accordion:""},on:{change:function(t){return e.$refs.chartCom.reset()}},model:{value:e.collapseValue,callback:function(t){e.collapseValue=t},expression:"collapseValue"}},[a("el-collapse-item",{attrs:{title:"图表展示",name:"1"}},[a("chart-com",{ref:"chartCom",staticStyle:{height:"310px"}})],1)],1),a("el-row",[a("table-com",{key:e.baseTableKey,ref:e.refTableName,attrs:{"ref-name":e.refName,"table-height-type":e.collapseValue?220:570,loading:e.loading,index:!0,selection:!1,"table-column-sort":!0,"form-ident":e.formIdent,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!1,"refresh-key":e.refreshKey,"expand-list":e.expandList},on:{rowClick:e.handleRowClick,refresh:e.searchInit}})],1),a("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total,"page-sizes":[50,100,150,500]},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}}),a("edit-dialog",{attrs:{"form-ident":e.formIdent,"table-data":e.dialogTableData,"column-list":e.columnListInput,"expand-list":e.expandList},on:{"update:tableData":function(t){e.dialogTableData=t},"update:table-data":function(t){e.dialogTableData=t},dialogConfirm:e.onDialogConfirm,handleSubmitCustomData:e.handleSubmitCustomData},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}})],1)},n=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),o=(a("a481"),a("a8db")),l=a("bd86"),s=a("e08f"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-row",{staticStyle:{height:"100%"},attrs:{gutter:20}},[a("el-col",{staticStyle:{height:"100%"},attrs:{span:12}},[a("chart-one",{key:e.viewKey,ref:"ChartOne",staticStyle:{height:"100%"}})],1)],1)],1)},u=[],f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("chart-card",{attrs:{title:e.title}},[[a("div",{staticStyle:{height:"100%"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:e.refName,staticStyle:{height:"230px"},attrs:{id:e.refName}})])]],2)},d=[],p=(a("cd1e"),a("9020")),m=a("ebb5"),h={name:"ChartOneCom",components:{ChartCard:p["a"]},mixins:[m["a"]],props:{title:{type:String,default:"在途物资分析"}},data:function(){return{refName:"ChartOne",options:{}}},mounted:function(){this.screenWidth=window.screen.width||document.documentElement.clientWidth,this.screenHeight=window.screen.height||document.documentElement.clientHeight,this.screenWidth&&(1024===this.screenWidth||this.screenWidth<1024)&&(this.zoom=.8),this.resize(),this.init(),this.resize()},methods:{init:function(){var e=this;this.loading=!0,setTimeout((function(){var t=["在途金额","合同金额","到货金额","入库金额","占比"],a=[{name:"在途金额",type:"bar",data:[23.2,25.6,76.7,135.6,162.2,32.6]},{name:"合同金额",type:"bar",data:[76.7,6.4,2,4.9,7,23.2]},{name:"到货金额",type:"bar",data:[76.7,32.6,20,4.9,7,23.2]},{name:"入库金额",type:"bar",yAxisIndex:1,data:[46.7,22.6,50,34.9,67,53.2]},{name:"占比",type:"line",yAxisIndex:1,data:[8,15,23,26,29,32]}],i=["S001","S002","S003","S004","S005","S006"];e.getCompleteOptions(t,a,i)}),1e3)},getCompleteOptions:function(e,t,a){this.options={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:e,left:0},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:[{type:"value",axisLabel:{formatter:"{value}"}},{type:"value",axisLabel:{formatter:"{value}"}}],xAxis:{type:"category",axisLabel:{show:!0,interval:0,formatter:function(e){var t="",a=e.length,i=4,n=Math.ceil(a/i);if(a>i)for(var r=0;r<n;r++){var o="",l=r*i,s=l+i;o=r===n-1?e.substring(l,a):e.substring(l,s)+"\n",t+=o}else t=e;return t}},data:a},series:t};var i=this.$refs[this.refName];this.chart=i&&this.$echarts.init(i,"macarons"),i&&this.chart.setOption(this.options),this.chart&&this.chart.resize(),this.loading=!1}}},b=h,g=a("2877"),y=Object(g["a"])(b,f,d,!1,null,"55dca4fc",null),v=y.exports,x={name:"ChartsCom",components:{ChartOne:v},data:function(){return{viewKey:1}},methods:{reset:function(){this.viewKey++,this.$refs.ChartOne.resize()},handleUploadImg:function(){}}},w=x,C=Object(g["a"])(w,c,u,!1,null,"5d91d4ac",null),O=C.exports,S=a("1790"),k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{center:!0,"append-to-body":!0,"close-on-press-escape":!1,"wrapper-closable":!1,title:e.title,visible:e.value,size:750,"destroy-on-close":!0,direction:"btt","before-close":e.beforeClose},on:{open:e.initSelect}},[a("el-scrollbar",{staticClass:"query-more-scroll-drawer"},[a("el-row",[a("table-com",{ref:e.refName,attrs:{loading:e.loading,index:!0,selection:!1,"table-column-sort":!0,"table-height-type":620,"form-ident":e.formIdent,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!1,"refresh-key":e.refreshKey,"expand-list":e.expandList}})],1)],1),a("div",{staticClass:"drawer-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirmDialog}},[e._v("确 定")]),a("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},T=[],D={name:"CustomEditCom",mixins:[S["a"]],props:{value:{type:Boolean,default:!1},title:{type:String,default:"自定义统计编辑"},formIdent:{type:String,default:""},tableData:{type:Array,default:function(){return[]}},columnList:{type:Array,default:function(){return[]}},expandList:{type:Array,default:function(){return[]}}},data:function(){return{refName:"CustomEditComTable",refreshKey:(new Date).getTime(),form:{},loading:!1,rules:{},query:{}}},methods:{confirmDialog:function(e){this.$emit("dialogConfirm")},initSelect:function(){},beforeClose:function(e){this.tableData=new Array(0),this.$emit("input",!1),"function"===typeof e&&e()}}},j=D,I=(a("c7dd"),Object(g["a"])(j,k,T,!1,null,"e08710de",null)),$=I.exports,_=a("bc43");function L(e){return Object(_["a"])({url:"/statistics/wmsMaterialAnalysis/pageList",method:"post",data:e})}var N=a("c1df"),E=a.n(N),P=a("ed08"),V=a("25ca"),q=a("21a6");function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}E.a.locale("zh-cn");var z={components:{ChartCom:O,EditDialog:$},mixins:[s["a"],S["a"]],data:function(){return{title:this.$route.meta.title,active:"1",refTableName:"baseTableRef",refName:"table",loading:!1,query:{materialCode:""},tableData:[],columnList:[],columnMonth:["january","february","march","april","may","june","july","august","september","october","november","december"],columnSets:[],columnSetsInput:[],columnListInput:[],tableColumnSortData:[],dialogForm:{},supplierPullList:[],editType:"add",dialogVisible:!1,baseTableKey:1,collapseValue:"1",dialogTableData:[],dialogLoading:!1}},computed:{dialogTitle:function(){return"add"===this.editType?"新增".concat(this.title,"信息"):"编辑".concat(this.title,"信息")}},watch:{collapseValue:{handler:function(){var e=this;this.$nextTick((function(){e.baseTableKey++}))}}},mounted:function(){this.columnListInput=this.columnList.map((function(e){return K({},e,{module:"input"})})),this.initQueryTime(),this.init()},methods:{initQueryTime:function(){},init:function(e){var t=this;this.loading=!0;var a=K({},this.query,{page:K({},this.pageInfo)});return new Promise((function(e,i){L(K({},a)).then((function(a){var i=a.code,n=a.data;if(!i){t.baseTableKey++;var r=n.formIdent,l=n.formHeadSets,s=n.pageData;t.formIdent=r,t.columnList=t.initTableHeadMixins(l),t.columnListInput=t.initTableHeadMixins(l,"input","columnSetsInput");var c=s.list,u=Object(o["a"])(s,["list"]);t.initPage(u),t.tableData=c}t.loading=!1,e(a)})).catch((function(e){t.loading=!1,i(e)}))}))},handleRowClick:function(e){var t=e.row,a=e.column;e.cell,e.event;if("操作"===a.label)return!1;this.rightObj=K({},t)},refresh:function(){this.init("clean")},onDialogConfirm:function(){this.tableData=this.dialogTableData,this.dialogVisible=!1},handleSubmitCustomData:function(){},handleExport:Object(P["a"])((function(){var e=this.$refs[this.refTableName].$refs[this.refName];e.$el.querySelector(".el-table__fixed")&&e.$el.removeChild(e.$el.querySelector(".el-table__fixed")),e.$el.querySelector(".el-table__fixed-right")&&e.$el.removeChild(e.$el.querySelector(".el-table__fixed-right"));var t=V["a"].table_to_book(e.$el),a=V["b"](t,{bookType:"xlsx",bookSST:!0,type:"array"});try{var i=(new Date).toLocaleString().replace(/\//g,"").replace(/:/g,"").replace(" ","");Object(q["saveAs"])(new Blob([a],{type:"application/octet-stream"}),"在途物资统计分析_".concat(i,".xlsx")),this.baseTableKey++}catch(n){}return a}),800,!1),setTable:function(){this.$refs[this.refTableName].sortDialogVisible=!0},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()},openDialog:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,e.next=3,this.$nextTick();case 3:setTimeout(Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialogTableData=JSON.parse(JSON.stringify(t.tableData)),t.dialogVisible=!0,e.next=4,t.$nextTick();case 4:t.dialogLoading=!1;case 5:case"end":return e.stop()}}),e)}))),200);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},R=z,M=Object(g["a"])(R,i,n,!1,null,"9f0d7670",null);t["default"]=M.exports},a4bb:function(e,t,a){e.exports=a("8aae")},a8db:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("e265"),n=a.n(i),r=a("a4bb"),o=a.n(r);function l(e,t){if(null==e)return{};var a,i,n={},r=o()(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}function s(e,t){if(null==e)return{};var a,i,r=l(e,t);if(n.a){var o=n()(e);for(i=0;i<o.length;i++)a=o[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}},c7dd:function(e,t,a){"use strict";var i=a("52cb"),n=a.n(i);n.a},ce7e:function(e,t,a){var i=a("63b6"),n=a("584a"),r=a("294c");e.exports=function(e,t){var a=(n.Object||{})[e]||Object[e],o={};o[e]=t(a),i(i.S+i.F*r((function(){a(1)})),"Object",o)}},e265:function(e,t,a){e.exports=a("ed33")},ed33:function(e,t,a){a("014b"),e.exports=a("584a").Object.getOwnPropertySymbols}}]);
//# sourceMappingURL=AnalysisMaterialInTransit.8f44bdea.js.map