(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["WMSBasewmsWarehouse"],{"32a6":function(e,t,r){var a=r("241e"),n=r("c3a1");r("ce7e")("keys",(function(){return function(e){return n(a(e))}}))},"8aae":function(e,t,r){r("32a6"),e.exports=r("584a").Object.keys},"99b0":function(e,t,r){},a4bb:function(e,t,r){e.exports=r("8aae")},a8db:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("e265"),n=r.n(a),i=r("a4bb"),o=r.n(i);function l(e,t){if(null==e)return{};var r,a,n={},i=o()(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}function s(e,t){if(null==e)return{};var r,a,i=l(e,t);if(n.a){var o=n()(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}},ce7e:function(e,t,r){var a=r("63b6"),n=r("584a"),i=r("294c");e.exports=function(e,t){var r=(n.Object||{})[e]||Object[e],o={};o[e]=t(r),a(a.S+a.F*i((function(){r(1)})),"Object",o)}},d1fb:function(e,t,r){"use strict";var a=r("99b0"),n=r.n(a);n.a},e265:function(e,t,r){e.exports=r("ed33")},e902:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"clearfix top-filter"},[r("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""}},[r("el-form-item",{attrs:{prop:"sapName"}},[r("el-select",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"SAP仓库"},model:{value:e.query.sapName,callback:function(t){e.$set(e.query,"sapName",t)},expression:"query.sapName"}},e._l(e.sapWarehousePullList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),r("el-form-item",{attrs:{prop:"name"}},[r("el-select",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"仓库名称"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}},e._l(e.warehousePullList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),r("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),r("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")]),r("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("el-row",[r("table-com",{ref:"baseTableRef",attrs:{loading:e.loading,selection:!1,"table-data":e.tableData,"column-list":e.columnList,"operation-width":180,"table-column-sort":!1},on:{rowClick:e.handleRowClick,refresh:e.searchInit},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"warning",icon:"el-icon-edit"},on:{click:function(r){return e.handleModify(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}}),r("edit-dialog",{attrs:{"dialog-form":e.dialogForm,"edit-type":e.dialogType,title:e.dialogTitle},on:{confirm:function(t){e.init(),e.getSapWarehousePullList()}},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}})],1)},n=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("a8db")),o=r("bd86"),l=r("09db"),s=r("1790"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{attrs:{center:!0,"append-to-body":!0,"close-on-press-escape":!1,"wrapper-closable":!1,title:e.title,size:"50",visible:e.value,"destroy-on-close":!0,"before-close":e.beforeClose},on:{open:e.initSelect}},[r("el-form",{ref:"form",attrs:{model:e.form,inline:"",rules:e.rules,"label-width":"120px"}},[r("el-scrollbar",{staticClass:"scroll-drawer"},[r("el-form-item",{attrs:{label:"SAP仓库",prop:"name"}},[r("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"请输入仓库名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"仓库名称",prop:"warehouseSapId"}},[r("el-select",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.form.warehouseSapId,callback:function(t){e.$set(e.form,"warehouseSapId",t)},expression:"form.warehouseSapId"}},e._l(e.warehouseSapPullList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"地点描述",prop:"placeDescription"}},[r("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"请输入地点描述"},model:{value:e.form.placeDescription,callback:function(t){e.$set(e.form,"placeDescription","string"===typeof t?t.trim():t)},expression:"form.placeDescription"}})],1),r("el-form-item",{attrs:{label:"地理位置",prop:"geographicPosition"}},[r("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"请输入地理位置"},model:{value:e.form.geographicPosition,callback:function(t){e.$set(e.form,"geographicPosition","string"===typeof t?t.trim():t)},expression:"form.geographicPosition"}})],1),r("el-form-item",{attrs:{label:"所属车间",prop:"cascaderValue"}},[r("el-cascader",{staticStyle:{width:"178px"},attrs:{options:e.options,props:{expandTrigger:"hover"}},on:{change:e.handleChange},model:{value:e.form.cascaderValue,callback:function(t){e.$set(e.form,"cascaderValue",t)},expression:"form.cascaderValue"}})],1),r("el-form-item",{attrs:{prop:"type",label:"类型"}},[r("el-radio-group",{staticStyle:{width:"178px"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l([{name:"常规",value:1},{name:"战略",value:2}],(function(t,a){return r("el-radio-button",{key:a,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1)],1),r("div",{staticClass:"drawer-footer"},[r("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.handleConfirm("form")}}},[e._v(e._s(e.loading?"提交中 ...":"确 定"))]),r("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)],1)},u=[];r("7514"),r("28a5");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={name:"",geographicPosition:"",placeDescription:"",cascaderValue:[],warehouseArea:"",type:""},m={props:{value:{type:Boolean,default:!1},title:{type:String,default:""},editType:{type:String,default:"add"},dialogForm:{type:Object,default:function(){return d({},p)}}},data:function(){return{form:p,loading:!1,rules:{name:[{required:!0,message:"请输入SAP仓库",trigger:"blur"}],placeDescription:[{required:!0,message:"请输入地点描述",trigger:"blur"}],geographicPosition:[{required:!0,message:"请输入地理位置",trigger:"blur"}],warehouseSapId:[{required:!0,message:"请选择仓库名称",trigger:"blur"}],cascaderValue:[{required:!0,message:"请选择所属车间",trigger:"change"}],type:[{required:!0,message:"请选择类型",trigger:"change"}]},gradeOpts:[],warehouseSapPullList:[]}},computed:{options:function(){var e=this,t=this.dict["wms_warehouse_area_type"].map((function(e){return e}));return t.forEach((function(t){t.children=e.dict["wms_warehouse_area_name"].filter((function(e){return e.value.split("_")[0]&&t.value===e.value.split("_")[0]}))})),t}},dicts:["wms_warehouse_area_type","wms_warehouse_area_name"],watch:{dialogForm:{handler:function(e){if("add"===this.editType)this.form=d({},p);else{var t=e.warehouseArea?this.options.find((function(t){return t.value===e.warehouseArea.split("_")[0]})):null;this.form=d({},e,{},{cascaderValue:e.warehouseArea?[t.value,e.warehouseArea]:[]})}},immediate:!0}},mounted:function(){this.getwarehousePullList()},methods:{handleConfirm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!1;var r="modify"===t.editType?l["c"]:l["a"];r(d({},t.form,{warehouseArea:t.form.cascaderValue.length&&t.form.cascaderValue[t.form.cascaderValue.length-1]})).then((function(e){var r=e.code;r||(t.$message({message:"".concat(t.title,"成功"),type:"success"}),t.$emit("confirm"),t.beforeClose()),t.loading=!1})).catch((function(e){t.loading=!1}))}))},getwarehousePullList:function(){var e=this;return new Promise((function(t,r){Object(l["f"])({}).then((function(r){var a=r.code,n=r.data;a||(e.warehouseSapPullList=n||[]),t(r)})).catch((function(e){r(e)}))}))},initSelect:function(){},beforeClose:function(e){this.$refs.form.resetFields(),this.$emit("input",!1),this.form=Object.assign({},d({},p)),"function"===typeof e&&e()},handleChange:function(e){}}},h=m,b=(r("d1fb"),r("2877")),g=Object(b["a"])(h,c,u,!1,null,"0012ff40",null),y=g.exports;function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O={components:{EditDialog:y},mixins:[s["a"]],data:function(){return{query:{sapName:"",name:""},dialogForm:{},title:this.$route.meta.title,loading:!1,tableData:[],sapWarehousePullList:[],warehousePullList:[],dialogType:"add",dialogVisible:!1,columnList:[{module:"word",prop:"name",label:"SAP仓库",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"warehouseSapName",label:"仓库名称",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"type",label:"类型",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:function(e){return 1===e.type?"常规":"战略"},headerAlign:"center"},{module:"word",prop:"warehouseArea_dictText",label:"所属车间",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"placeDescription",label:"地点描述",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"geographicPosition",label:"地理位置",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"factoryCodeName",label:"工厂",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"dataSources_dictText",label:"数据来源",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}]}},computed:{dialogTitle:function(){return"add"===this.dialogType?"新增".concat(this.title):"编辑".concat(this.title)}},mounted:function(){this.init(),this.getSapWarehousePullList(),this.getWarehousePullList()},methods:{init:function(){var e=this;return this.loading=!0,new Promise((function(t,r){Object(l["d"])(v({page:v({},e.pageInfo)},e.query)).then((function(r){var a=r.code,n=r.data;if(!a){var o=n.list,l=Object(i["a"])(n,["list"]);e.initPage(l),e.tableData=o}e.loading=!1,t(r)})).catch((function(t){e.loading=!1,r(t)}))}))},handleAdd:function(){this.dialogType="add",this.dialogForm={},this.dialogVisible=!0},getSapWarehousePullList:function(){var e=this;return new Promise((function(t,r){Object(l["h"])({}).then((function(r){var a=r.code,n=r.data;a||(e.sapWarehousePullList=n||[]),t(r)})).catch((function(e){r(e)}))}))},getWarehousePullList:function(){var e=this;return new Promise((function(t,r){Object(l["f"])({}).then((function(r){var a=r.code,n=r.data;a||(e.warehousePullList=n||[]),t(r)})).catch((function(e){r(e)}))}))},handleModify:function(e){this.dialogForm=v({},e),this.dialogType="modify",this.dialogVisible=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该".concat(this.title,", 是否继续?"),"提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",cancelButtonClass:"btn-custom-cancel",type:"warning",lockScroll:!1}).then((function(){e.id&&Object(l["b"])({id:e.id,dataSources:e.dataSources}).then((function(e){var r=e.code;r||(t.$message({message:"删除成功",type:"success"}),t.init(),t.getSapWarehousePullList())}))})).catch((function(){t.$message({message:"已取消删除",type:"info"})}))},handleRowClick:function(e){e.row;var t=e.column;e.cell,e.event;if("操作"===t.label)return!1},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()}}},P=O,x=Object(b["a"])(P,a,n,!1,null,null,null);t["default"]=x.exports},ed33:function(e,t,r){r("014b"),e.exports=r("584a").Object.getOwnPropertySymbols}}]);
//# sourceMappingURL=WMSBasewmsWarehouse.06f46b83.js.map