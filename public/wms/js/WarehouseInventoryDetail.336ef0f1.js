(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["WarehouseInventoryDetail"],{"32a6":function(e,t,n){var r=n("241e"),a=n("c3a1");n("ce7e")("keys",(function(){return function(e){return a(r(e))}}))},"8aae":function(e,t,n){n("32a6"),e.exports=n("584a").Object.keys},a4bb:function(e,t,n){e.exports=n("8aae")},a8db:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("e265"),a=n.n(r),i=n("a4bb"),o=n.n(i);function c(e,t){if(null==e)return{};var n,r,a={},i=o()(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function l(e,t){if(null==e)return{};var n,r,i=c(e,t);if(a.a){var o=a()(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},ce7e:function(e,t,n){var r=n("63b6"),a=n("584a"),i=n("294c");e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],o={};o[e]=t(n),r(r.S+r.F*i((function(){n(1)})),"Object",o)}},e08f:function(e,t,n){"use strict";n("8e6e"),n("ac6a"),n("456d"),n("7514");var r=n("bd86");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t["a"]={data:function(){return{formIdent:"",tableData:[],columnList:[],expandList:[],tableColumnSortData:[],labels:{},refreshKey:1}},methods:{initTableHeadMixins:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"word",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"columnSets",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,o=t.map((function(e){return i({isParam:!1},e,{width:"input"!==n||e.width?e.width:a,module:n})})).map((function(t){var n=e[r].find((function(e){return e.prop===t.prop}));return n?i({},t,{},n):i({},t)}));return this.$nextTick((function(){"word"===n&&(e.expandList=o.filter((function(e){return e.extend&&e.show})))})),this.$nextTick((function(){e.refreshKey+=1})),o.filter((function(e){return e.show&&!e.extend}))}}}},e265:function(e,t,n){e.exports=n("ed33")},ed33:function(e,t,n){n("014b"),e.exports=n("584a").Object.getOwnPropertySymbols},f349:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"queryForm",attrs:{model:e.query,inline:""}},[n("el-form-item",{staticClass:"fr"},[n("el-button",{on:{click:e.beforeClose}},[e._v("返回")])],1)],1),n("el-descriptions",{attrs:{column:5}},[n("el-descriptions-item",{attrs:{label:"物料编号"}},[e._v(e._s(e.materialInfo.code))]),n("el-descriptions-item",{attrs:{label:"物料名称"}},[e._v(e._s(e.materialInfo.name))]),n("el-descriptions-item",{attrs:{label:"物料组"}},[e._v(e._s(e.materialInfo.materialGroupCode))]),n("el-descriptions-item",{attrs:{label:"评估类型"}},[e._v(e._s(e.materialInfo.assessType_dictText))])],1),n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"详细信息",name:"info"}},["info"===e.activeName?n("info",{attrs:{"material-id":e.materialId}}):e._e()],1),n("el-tab-pane",{attrs:{label:"历史记录",name:"record"}},["record"===e.activeName?n("record",{attrs:{"material-id":e.materialId}}):e._e()],1)],1)],1)},a=[],i=(n("c5f6"),n("72ba")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("table-com",{ref:"baseTableRef",attrs:{loading:e.loading,selection:!1,"table-column-sort":!0,"form-ident":e.formIdent,"table-data":e.tableData,"column-list":e.columnList,"refresh-key":e.refreshKey,"expand-list":e.expandList,"cell-style":e.handleCellStyle,"show-operate":!1,"operation-width":120},on:{rowClick:e.handleRowClick,refresh:e.searchInit},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",disabled:0===t.row.isCanSplit},nativeOn:{click:function(n){return n.preventDefault(),e.handleDevanning(t.$index,t.row)}}},[e._v("拆箱")])]}}])})],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}}),n("package-to-s-k-u",{attrs:{title:"供应商条码","is-show-print-btn":!1,"extra-info":{columnList:e.columnList1||[],tableData:e.dialogInfo1.subBarCodeList||[]}},model:{value:e.skuVisible,callback:function(t){e.skuVisible=t},expression:"skuVisible"}}),n("devanning-dialog",{attrs:{"extra-info":e.devanningForm},on:{confirm:e.init},model:{value:e.devanningvisible,callback:function(t){e.devanningvisible=t},expression:"devanningvisible"}})],1)},c=[],l=(n("8e6e"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),s=n("a8db"),u=n("bd86"),d=n("2f62"),f=n("1790"),b=n("e08f"),p=n("a2c6"),m=n("c650"),h=n("fa7d");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(u["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O={components:{DevanningDialog:m["a"],PackageToSKU:p["a"]},mixins:[f["a"],b["a"]],props:{materialId:{type:[Number,String],default:""}},data:function(){var e=this;return{loading:!1,devanningvisible:!1,devanningForm:{},columnSets:[{module:"input",prop:"remarks",label:"备注",align:"center",width:150,minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",handleChange:function(t){return e.saveRemarks(t)}},{module:"link",type:function(e){return Array.isArray(e.subBarCodeList)&&e.subBarCodeList.length?"primary":""},prop:"barcodeNumber",underline:!1,minWidth:200,label:"条码号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",handleClick:function(t){t.subBarCodeList&&t.subBarCodeList.length&&(e.skuVisible=!0,e.dialogInfo1=t)}}],columnList1:[],skuVisible:!1,dialogInfo1:{}}},computed:g({},Object(d["c"])("app",{navbarWarehouseCheckedList:"navbarWarehouseCheckedList"})),watch:{navbarWarehouseCheckedList:{handler:function(){this.init()},deep:!0}},mounted:function(){this.init()},activated:function(){},methods:{init:function(){var e=this;if(this.materialId)return this.loading=!0,new Promise((function(t,n){Object(i["e"])({page:g({},e.pageInfo),materialId:e.materialId,warehouseIds:e.navbarWarehouseCheckedList.map((function(e){return e.id}))}).then((function(n){var r=n.code,a=n.data;if(!r){var i=a.formIdent,o=a.formHeadSets,c=a.pageData;e.formIdent=i,e.columnList=e.initTableHeadMixins(o),e.columnList1=o||[];var l=c.list,u=Object(s["a"])(c,["list"]);e.initPage(u),e.tableData=l}e.loading=!1,t(n)})).catch((function(t){e.loading=!1,n(t)}))}))},saveRemarks:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=3,Object(h["c"])(Object(i["b"])(g({},t)));case 3:if(n=e.sent,n.success){e.next=6;break}return e.abrupt("return");case 6:this.$message({message:"保存成功",type:"success"});case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDevanning:function(e,t){this.devanningvisible=!0,this.devanningForm=g({},t)},handleCellStyle:function(e){var t=e.row,n=(e.rowIndex,{backgroundColor:t.earlyWarningInfo?"#F56C6C":""});return n},handleRowClick:function(e){e.row;var t=e.column;e.cell,e.event;if("操作"===t.label)return!1}}},y=O,w=n("2877"),I=Object(w["a"])(y,o,c,!1,null,null,null),j=I.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.handleExport}},[e._v("导出")])],1),n("el-row",[n("table-com",{ref:"baseTableRef",attrs:{loading:e.loading,selection:!1,"table-column-sort":!0,"form-ident":e.formIdent,"table-data":e.tableData,"column-list":e.columnList,"operation-width":183,"refresh-key":e.refreshKey,"expand-list":e.expandList,"show-operate":!1},on:{rowClick:e.handleRowClick,refresh:e.searchInit}})],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1)},x=[];n("6762"),n("2fdb");function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Object(u["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L={mixins:[f["a"],b["a"]],props:{materialId:{type:[Number,String],default:""}},data:function(){var e=this;return{loading:!1,columnSets:[{module:"link",prop:"billNumber",label:"单号",align:"center",minWidth:200,fixed:!1,sortable:!1,resizable:!0,formatter:null,disabled:function(e){return!e.stockInOrOutId},headerAlign:"center",handleClick:function(t,n){var r=["1","3"].includes(t.moveType),a=["2","4"].includes(t.moveType);r&&e.$router.push({name:"InStorageInfoDelivery",params:{orderId:t.id,id:t.stockInOrOutId}}),a&&e.$router.push({name:"OutBoundDelivery",params:{billNumber:t.billNumber}})}}]}},computed:P({},Object(d["c"])("app",{navbarWarehouseCheckedList:"navbarWarehouseCheckedList"})),watch:{navbarWarehouseCheckedList:{handler:function(){this.init()},deep:!0}},mounted:function(){this.init()},activated:function(){},methods:{init:function(){var e=this;if(this.materialId)return this.loading=!0,new Promise((function(t,n){Object(i["f"])({page:P({},e.pageInfo),materialId:e.materialId,warehouseIds:e.navbarWarehouseCheckedList.map((function(e){return e.id}))}).then((function(n){var r=n.code,a=n.data;if(!r){var i=a.formIdent,o=a.formHeadSets,c=a.pageData;e.formIdent=i,e.columnList=e.initTableHeadMixins(o);var l=c.list,u=Object(s["a"])(c,["list"]);e.initPage(u),e.tableData=l}e.loading=!1,t(n)})).catch((function(t){e.loading=!1,n(t)}))}))},handleRowClick:function(e){e.row;var t=e.column;e.cell,e.event;if("操作"===t.label)return!1},download:function(e,t){var n=t,r=new Blob([e.data],{type:"application/vnd.ms-excel"}),a=window.URL.createObjectURL(r);if(window.navigator.msSaveBlob)try{window.navigator.msSaveBlob(r,n)}catch(o){}else{var i=document.createElement("a");i.style.display="none",i.href=a,i.setAttribute("download",n),document.body.appendChild(i),i.click()}URL.revokeObjectURL(a)},handleExport:function(){var e=this,t={materialId:this.materialId,warehouseIds:this.navbarWarehouseCheckedList.map((function(e){return e.id}))};this.$confirm("是否导出历史记录?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning",cancelButtonClass:"btn-custom-cancel",lockScroll:!1}).then((function(){Object(i["l"])(t).then((function(t){e.download(t,"历史记录.xlsx")})).catch((function(t){e.$notify.error({title:"错误",message:"导出错误，请重试"})}))})).catch((function(e){}))}}},D=L,S=Object(w["a"])(D,k,x,!1,null,null,null),_=S.exports,$={name:"WarehouseInventoryDetail",components:{Info:j,Record:_},props:{materialId:{type:[Number,String],default:""}},data:function(){return{query:{},activeName:"info",materialInfo:{}}},mounted:function(){this.init()},methods:{init:function(){var e=this;if(this.materialId)return new Promise((function(t,n){Object(i["d"])({id:e.materialId}).then((function(n){var r=n.code,a=n.data;r||(e.materialInfo=a),t(n)})).catch((function(e){n(e)}))}))},beforeClose:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({name:"WarehouseInventory"})}}},W=$,R=Object(w["a"])(W,r,a,!1,null,null,null);t["default"]=R.exports}}]);
//# sourceMappingURL=WarehouseInventoryDetail.336ef0f1.js.map