(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["BillTransferAdd"],{"6c98":function(e,t,r){"use strict";var n=r("8bb2"),a=r.n(n);a.a},"72ba":function(e,t,r){"use strict";r.d(t,"g",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return s})),r.d(t,"c",(function(){return u})),r.d(t,"n",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"j",(function(){return f})),r.d(t,"k",(function(){return m})),r.d(t,"i",(function(){return p})),r.d(t,"h",(function(){return b})),r.d(t,"a",(function(){return h})),r.d(t,"l",(function(){return g})),r.d(t,"m",(function(){return y}));var n=r("bc43"),a=r("ee8a");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsInventoryBook/pageList",method:"post",data:e,timeout:12e4})}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/basic/wmsMaterial/detail",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsInventoryBookDetail/pageList",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsInventoryBookHistory/pageList",method:"post",data:e})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsInventoryBookDetail/listBarCode",method:"post",data:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsInventoryBookDetail/split4StockOut",method:"post",data:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsInventoryBookDetail/edit",method:"post",data:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])({url:"/warehouseMgt/wmsInventoryBook/groupExport",method:"post",data:e})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsInventoryBook/groupList",method:"post",data:e})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsInventoryBook/selectBillReservedByMaterialId",method:"post",data:e})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsInventoryBook/selectOrderByMaterialId",method:"post",data:e})}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])({url:"/warehouseMgt/wmsInventoryBook/export",method:"post",data:e})}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])({url:"/warehouseMgt/wmsInventoryBookHistory/export",method:"post",data:e})}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsInventoryBookDetail/queryInventoryNumByMaterialCode",method:"post",data:e})}},7378:function(e,t,r){"use strict";r.d(t,"h",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return l})),r.d(t,"g",(function(){return s})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return c})),r.d(t,"j",(function(){return d})),r.d(t,"k",(function(){return f})),r.d(t,"b",(function(){return m})),r.d(t,"i",(function(){return p}));var n=r("bc43");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsBillTransfer/pageList",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsBillTransfer/add",method:"post",data:e})}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsBillTransfer/edit",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsBillTransfer/delete",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsBillTransfer/listItem",method:"post",data:e})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsBillTransfer/detail",method:"post",data:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsBillTransferDetail/pageList",method:"post",data:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsBillTransfer/submit",method:"post",data:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsBillTransfer/withdraw",method:"post",data:e})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsBillTransfer/audit",method:"post",data:e})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/warehouseMgt/wmsBillTransfer/isInspect",method:"post",data:e})}},8438:function(e,t,r){"use strict";var n=r("b0d6"),a=r.n(n);a.a},"8bb2":function(e,t,r){},b0d6:function(e,t,r){},ec26:function(e,t,r){"use strict";const n="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var a={randomUUID:n};let o;const i=new Uint8Array(16);function l(){if(!o&&(o="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(i)}const s=[];for(let d=0;d<256;++d)s.push((d+256).toString(16).slice(1));function u(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}function c(e,t,r){if(a.randomUUID&&!t&&!e)return a.randomUUID();e=e||{};const n=e.random||(e.rng||l)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return u(n)}t["a"]=c},ec7c:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("audit-wrapper",{attrs:{"extra-info":e.extraInfo}},[r("el-form",{ref:"form",attrs:{model:e.form,inline:"",rules:e.rules}},[r("el-row",[r("el-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[r("el-form-item",{attrs:{prop:"billNumber",label:"调拨单号："}},[r("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"调拨单号",clearable:""},model:{value:e.form.billNumber,callback:function(t){e.$set(e.form,"billNumber",t)},expression:"form.billNumber"}})],1)],1),r("el-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[r("el-form-item",{attrs:{label:"移出仓库",prop:"outWarehouseId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"请选择",disabled:["audit","detail"].includes(e.pageType)},on:{change:e.handleSelectChange},model:{value:e.form.outWarehouseId,callback:function(t){e.$set(e.form,"outWarehouseId",t)},expression:"form.outWarehouseId"}},e._l(e.warehousePullList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[r("el-form-item",{attrs:{prop:"inWarehouseId",label:"目标仓库："}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"仓库名称",disabled:["audit","detail"].includes(e.pageType)},on:{change:e.targetWarehouseChange},model:{value:e.form.inWarehouseId,callback:function(t){e.$set(e.form,"inWarehouseId",t)},expression:"form.inWarehouseId"}},e._l(e.targetWarehousePullList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),r("el-row",[["audit","detail"].includes(e.pageType)?e._e():r("el-col",{staticStyle:{"margin-bottom":"15px"},attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[r("el-button",{attrs:{disabled:!e.form.outWarehouseId,type:"primary"},on:{click:e.handleAddMaterial}},[e._v("添加物料")])],1)],1),r("el-row",[r("el-col",{staticStyle:{"margin-bottom":"15px"},attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[r("table-com",{ref:"baseTableRef",staticStyle:{width:"100%"},attrs:{loading:!1,selection:!1,"table-data":e.form.detailList,"column-list":e.columnList,"operation-width":120,"table-column-sort":!1,"table-height-type":660,"table-height-minus":5,"show-operate":!["audit","detail"].includes(e.pageType)},on:{rowClick:e.handleRowClick,refresh:e.searchInit},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.handleDelete(t.$index)}}},[e._v("删除")])]}}])})],1)],1),r("el-row",["audit"===e.pageType?r("el-col",{staticStyle:{"margin-bottom":"15px"},attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[r("el-form-item",{staticClass:"approval-opinion",attrs:{prop:"message",label:"审批意见："}},[r("el-input",{attrs:{type:"textarea",placeholder:"请填写审批意见",rows:5},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}})],1)],1):e._e()],1)],1),r("div",{staticClass:"btn-context"},["audit"===e.pageType?[r("el-button",{attrs:{type:"primary",loading:e.buttonLoading},on:{click:function(t){return e.onAudit(1)}}},[e._v("通 过")]),r("el-button",{attrs:{type:"danger",loading:e.buttonLoading},on:{click:function(t){return e.onAudit(0)}}},[e._v("驳 回")]),r("el-button",{attrs:{type:"primary",loading:e.buttonLoading},on:{click:function(t){return e.onAudit(2)}}},[e._v("不 通 过")])]:e._e(),"add"===e.pageType?[r("el-button",{attrs:{type:"primary",loading:e.buttonLoading},on:{click:function(t){return e.onSave("form")}}},[e._v("保 存")])]:e._e(),"edit"===e.pageType?[r("el-button",{attrs:{type:"primary",loading:e.buttonLoading},on:{click:function(t){return e.onSave("form")}}},[e._v("保 存")])]:e._e(),r("el-button",{attrs:{loading:e.buttonLoading},on:{click:e.goBack}},[e._v("取消")])],2),r("material-dialog",{attrs:{multiple:"","extra-info":Object.assign({},{warehouseId:e.form.outWarehouseId,forBusiness:"billTransfer"},"add"!==e.pageType&&{transferBillNumber:e.$route.query.billNumber}),selection:e.ids},on:{confirm:e.onSelectedMaterial},model:{value:e.materialVisible,callback:function(t){e.materialVisible=t},expression:"materialVisible"}})],1)},a=[],o=(r("8e6e"),r("456d"),r("6762"),r("96cf"),r("3b8d")),i=(r("ac6a"),r("5df3"),r("7f7f"),r("a481"),r("bd86")),l=r("2f62"),s=r("09db"),u=r("7378"),c=r("1790"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,top:"5vh",visible:e.value,"show-close":!0,width:"1000px","lock-scroll":!1,"destroy-on-close":!0,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{open:e.initSelect}},[r("el-scrollbar",{staticClass:"scroll-dialog"},[r("el-form",{ref:"filterItem",staticClass:"top-filter clearfix",attrs:{model:e.query,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{placeholder:"物料编码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInit(t)}},model:{value:e.query.code,callback:function(t){e.$set(e.query,"code","string"===typeof t?t.trim():t)},expression:"query.code"}})],1),r("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),r("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")])],1),r("el-row",[r("table-com",{ref:e.refName,attrs:{"table-height-type":490,loading:e.loading,index:!0,"index-fixed":!1,selection:!0,multiple:e.multiple,"selection-fixed":!1,"table-column-sort":!1,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!1,"operate-fixed":!1,"table-selection":e.tableSelection},on:{selectionChange:e.selectionChange}})],1),r("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.confirmDialog}},[e._v("确 定")]),r("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},f=[],m=r("75fc"),p=(r("2fdb"),r("a8db")),b=(r("c5f6"),r("ec26")),h=r("72ba");function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v={name:"MaterialSelect",mixins:[c["a"]],props:{value:{required:!0,type:Boolean},title:{type:String,default:"物料选择"},multiple:{type:Boolean,default:!0},selection:{type:Array,default:function(){return[]}},max:{type:Number,default:0},ids:{type:Array,default:function(){return[]}},extraInfo:{type:Object,default:function(){}}},dicts:[],data:function(){return{loading:!1,refName:"modelSelectMaterialSelect",tableData:[],columnList:[{module:"word",prop:"materialCode",label:"物料编码",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialAssessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"batchNo",label:"批次号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"barcodeNumber",label:"条码号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"num",label:"数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"amount",label:"金额",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"currency",label:"币种",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"currentPosition",label:"存放位置",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"inWarehouseDate",label:"入库日期",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"inWarehouseDays",label:"在库时长(天)",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center",formatter:null}],columnSets:[],tableSelection:[],deptSelectedInfo:{list:[],visible:!1,radio:""},query:{code:""}}},methods:{confirmDialog:function(){this.$emit("confirm",this.tableSelection),this.beforeClose()},init:function(){var e=this,t=y({},this.query,{},this.extraInfo,{page:y({},this.pageInfo)});return new Promise((function(r,n){Object(h["e"])(y({},t)).then((function(t){var n=t.code,a=t.data;if(!n){var o=a.pageData,i=o.list,l=Object(p["a"])(o,["list"]);e.initPage(l),e.tableData=i.map((function(e){return y({uuid:Object(b["a"])(),deliveryNumber:e.orderNum},e)})),e.tableSelection=e.tableData.filter((function(t){return e.selection.includes(t.id)}))}e.loading=!1,r(t)})).catch((function(t){e.loading=!1,n(t)}))}))},initSelect:function(){this.init()},selectionChange:function(e){this.tableSelection=Object(m["a"])(e)},handleUpdateTableSelected:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},handleDefault:function(){this.tableSelection=new Array(0)},beforeClose:function(e){this.$emit("input",!1),this.handleDefault(),"function"===typeof e&&e()},onDeptSelectConfirm:function(e){e.length&&(this.query.usedOffice=e[0].name)},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()}}},w=v,O=(r("8438"),r("2877")),x=Object(O["a"])(w,d,f,!1,null,"21a62322",null),I=x.exports,j=r("ef4d"),k=r("fa7d");function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=function(){return{billNumber:"自动生成",outWarehouseId:"",inWarehouseId:"",message:"",detailList:[]}},B={components:{MaterialDialog:I,AuditWrapper:j["a"]},mixins:[c["a"]],props:{},data:function(){return{columnList:[{module:"word",prop:"materialCode",label:"物料编号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialAssessType_dictText",label:"评估类型",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"batchNo",label:"批次号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"barcodeNumber",label:"条码号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"num",label:"数量",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"currentPosition",label:"存放位置",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],pullListConfig:[{api:Object(s["h"])(),dataKey:"targetWarehousePullList",name:"目标仓库"}],targetWarehousePullList:[],form:W(),rules:{billNumber:[{required:!0,message:"请输入调拨单号",trigger:"blur"}],inWarehouseId:[{required:!0,message:"请选择目标仓库",trigger:"change"}],outWarehouseId:[{required:!0,message:"请选择移出仓库",trigger:"change"}],message:[{required:!0,message:"请填写审批意见",trigger:"blur"}]},materialVisible:!1,buttonLoading:!1,extraInfo:null,warehousePullList:[]}},computed:L({},Object(l["c"])("app",{token:"token",userInfo:"userInfo"}),{ids:function(){return this.form.detailList.map((function(e){return e.id}))},pageType:function(){return"auditHistory"===this.$route.query.type?"detail":this.$route.name.replace("BillTransfer","").toLowerCase()||"add"}}),watch:{},mounted:function(){this.getPullList(),this.getWarehousePullList(),"add"!==this.pageType&&this.getDetail()},methods:{onSave:function(e){var t=this,r={add:u["a"],edit:u["d"]},n=r[this.pageType];this.$refs[e].validate((function(e){if(!e)return!1;t.form.detailList.length?t.form.outWarehouseId!==t.form.inWarehouseId?(t.buttonLoading=!0,n(L({},t.form,{},"add"===t.pageType&&{outWarehouseId:t.form.outWarehouseId})).then((function(e){var r=e.code;r||(t.$message({message:"操作成功",type:"success"}),t.goBack()),t.buttonLoading=!1})).catch((function(e){t.buttonLoading=!1}))):t.$message({message:"移出仓库和移入仓库不可相同",type:"warning"}):t.$message({message:"至少新增一条物料",type:"warning"})}))},handleAddMaterial:function(){this.materialVisible=!0},onSelectedMaterial:function(e){e.length&&(this.form.detailList=e.map((function(e){var t=e.id,r=e.materialCode,n=e.materialName,a=e.materialAssessType,o=e.materialAssessType_dictText,i=e.batchNo,l=e.barcodeNumber,s=e.num,u=e.currentPosition,c=e.materialId,d=e.unitMeasureId,f=e.unitName,m=e.storageId,p=e.snNo,b=e.orderId;return{id:t,materialCode:r,materialName:n,materialAssessType:a,materialAssessType_dictText:o,batchNo:i,barcodeNumber:l,num:s,currentPosition:u,materialId:c,unitMeasureId:d,unitName:f,storageId:m,snNo:p,orderId:b}})))},getPullList:function(){var e=this,t=this.pullListConfig.map((function(e){return e.api}));Promise.all(t).then((function(t){t.length&&t.forEach((function(t,r){var n=e.pullListConfig[r].dataKey;e[n]=t.code?[]:t.data}))})).catch((function(e){}))},handleDelete:function(e){this.form.detailList.splice(e,1)},getDetail:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(k["c"])(Object(u["e"])({billNumber:this.$route.query.billNumber}));case 2:if(t=e.sent,t.success){e.next=5;break}return e.abrupt("return");case 5:this.form=t.data,this.extraInfo=t.data;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleRowClick:function(e){e.row;var t=e.column;e.cell,e.event;if("操作"===t.label)return!1},goBack:function(){var e=Object.assign({},this.$route);this.$store.dispatch("tagsView/delView",e),this.$refs.form.resetFields(),this.form=W();var t=["add","edit","detail"];t.includes(this.pageType)?this.$router.push({name:"WarehouseDischarge"}):this.$router.go(-1)},onAudit:function(e){var t=this,r={1:"该工单即将审批通过，是否继续？",0:"该工单即将驳回, 是否继续?",2:"该工单即将不通过, 是否继续?"}[e];this.$refs.form.validate(function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(a){var o,i,l,s,c,d,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(k["b"])(t.$confirm(r,"提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning",cancelButtonClass:"btn-custom-cancel",lockScroll:!1}));case 4:if(o=n.sent,o.success){n.next=7;break}return n.abrupt("return");case 7:return t.buttonLoading=!0,i=t.$route.params.id,l=t.$route.query,s=l.billNumber,c=l.taskId,d=l.processInstanceId,n.next=12,Object(k["c"])(Object(u["b"])({businessId:i,billNumber:s,taskId:c,processInstanceId:d,approval:e,message:t.form.message}));case 12:if(f=n.sent,t.buttonLoading=!1,f.success){n.next=16;break}return n.abrupt("return");case 16:t.$message({message:"操作成功",type:"success"}),t.goBack();case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},getWarehousePullList:function(){var e=this;return new Promise((function(t,r){Object(s["h"])().then((function(r){var n=r.code,a=r.data;n||(e.warehousePullList=a||[]),t(r)})).catch((function(e){r(e)}))}))},targetWarehouseChange:function(e){e&&this.form.outWarehouseId&&e===this.form.outWarehouseId&&(this.$message({message:"移出仓库和移入仓库不可相同，请重新选择",type:"warning"}),this.form.inWarehouseId="")},handleSelectChange:function(e){this.form.detailList=[]},getIsInspectStatus:function(){var e=this;Object(u["i"])().then((function(t){var r=t.code,n=t.data;r||(e.form.inspect=n)})).catch((function(e){}))},inspectChange:function(){}}},S=B,A=(r("6c98"),Object(O["a"])(S,n,a,!1,null,"f19095b2",null));t["default"]=A.exports},ee8a:function(e,t,r){"use strict";r("6b54");var n=r("bc3a"),a=r.n(n),o=r("5c96"),i=r("4360"),l=r("5f87"),s={baseURL:"https://192.168.1.7:9005/api/wms",withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"}},u=a.a.create(s),c=!1;u.interceptors.request.use((function(e){return i["a"].getters.token&&(e["responseType"]="blob",e.headers["Authorization"]="".concat(i["a"].getters.token)),e}),(function(e){Promise.reject(e)})),u.interceptors.response.use((function(e){return e&&e.data&&e.data.code&&999===e.data.code&&o["Notification"].error({message:e.data.msg,duration:5e3}),e}),(function(e){var t=0;try{t=e.response.status}catch(r){if(-1!==e.toString().indexOf("Error: timeout"))return o["Notification"].error({title:"网络请求超时",duration:5e3}),Promise.reject(e)}return 401===t||403===t?(c||(c=!0,o["Notification"].error({title:"登录信息已过期或者没有访问权限",duration:5e3}),setTimeout((function(){c=!1}),5e3)),i["a"].dispatch("resetToken").then((function(){setTimeout((function(){window.location.href=Object(l["b"])()}),3e3)})),Promise.reject(e)):(o["Notification"].error({title:e,duration:5e3}),Promise.reject(e))})),t["a"]=u}}]);
//# sourceMappingURL=BillTransferAdd.4ccd0fec.js.map