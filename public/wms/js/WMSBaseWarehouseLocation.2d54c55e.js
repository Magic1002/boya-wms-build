(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["WMSBaseWarehouseLocation"],{"123a":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",{staticStyle:{"text-align":"right"}},[n("el-button",{staticStyle:{display:"inline-block","margin-right":"15px"},attrs:{type:"success",icon:"el-icon-download"},on:{click:e.downloadTemplate}},[e._v("下载模板")]),n("el-upload",{ref:"upload",staticStyle:{display:"inline-block",position:"relative"},attrs:{sizi:"mini",action:e.BASE_API+"/basic/wmsWarehouseStorageLocation/importData",headers:e.headers,accept:".xls,.xlsx","file-list":e.fileList,"on-success":e.handleUploadSuccess,"on-error":e.handleUploadError,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"show-file-list":!1,"on-progress":e.handleUploadProgress}},[n("el-button",{attrs:{disabled:!e.isEnabled,size:"mini",icon:"el-icon-upload",type:"primary"}},[e._v("库位导入")]),0!==e.percentage?n("el-progress",{staticStyle:{width:"230px",position:"absolute",left:"-125px",bottom:"-20px"},attrs:{percentage:e.percentage}}):e._e()],1)],1),n("drag-screen",{attrs:{"extra-minus-height":40,"left-weight":5},scopedSlots:e._u([{key:"left",fn:function(){return[n("div",[n("el-row",{staticClass:"connection-line"},[n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoadingMixins,expression:"treeLoadingMixins"}],ref:e.treeRefName,attrs:{data:e.treeDataMixins,indent:0,props:e.defaultPropsMixins,"highlight-current":"","check-strictly":!0,"node-key":"id",lazy:!1,"expand-on-click-node":!1,"default-expanded-keys":e.defaultExpandKeysMixins,"current-node-key":e.defaultCheckedNodeMixins},on:{"node-expand":e.handleNodeExpand,"node-collapse":e.handleNodeCollapse,"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,o=t.data;return n("span",{staticClass:"custom-tree-node"},[e._v("\n              "+e._s(e._f("setNodeName")(o.name,i))+"\n            ")])}}])})],1)],1)]},proxy:!0},{key:"right",fn:function(){return[n("right",{ref:"rightView",attrs:{node:e.nodeInfo,"node-level":e.nodeLevel},on:{refreshTree:e.handleRefreshTree,setPrevNode:e.setPrevNode}})]},proxy:!0}])})],1)},o=[],r=(n("8e6e"),n("ac6a"),n("456d"),n("7f7f"),n("bd86")),a=n("4360"),l=n("e7ac"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.nodeLevel?[n("el-row",[n("span",[e._v("当前位置 ： "+e._s(e.node.currentPosition||"---"))]),e.nodeLevel<=2?[n("el-divider",{attrs:{direction:"vertical"}}),n("span",[e._v("绑定库位数 ： "+e._s(1===e.nodeLevel?e.warehouseDetailInfo.bindLabelCount:e.form.bindLabelCount))])]:e._e()],2)]:e._e(),n("el-row",[e.nodeLevel&&5!==e.nodeLevel?n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("添加子节点")]):e._e(),e.form.isEdit&&e.nodeLevel&&1!==e.nodeLevel?n("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-edit"},on:{click:e.handleModify}},[e._v("修改")]):e._e(),e.form.isEdit&&e.nodeLevel&&1!==e.nodeLevel?n("el-button",{staticClass:"filter-item",attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.handleDelete}},[e._v("删除")]):e._e()],1),n("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[e.node.id&&0!==e.node.level?n("el-row",[n("el-descriptions",{staticClass:"el-description-sty",attrs:{column:2,border:"",direction:"vertical"}},[n("el-descriptions-item",{attrs:{label:"名称"}},[e._v(e._s(e.form.name||"---"))]),n("el-descriptions-item",{attrs:{label:"SAP仓库"}},[e._v(e._s(e.form.sapName||"---"))]),n("el-descriptions-item",{attrs:{label:"油墨标签"}},[e._v(e._s(e.form.labelId||"---"))]),n("el-descriptions-item",{attrs:{label:"备注"}},[e._v(e._s(e.form.remarks||"---"))])],1)],1):n("el-empty",{attrs:{description:"请选择库位节点"}})],1),n("edit-dialog",{attrs:{"dialog-form":e.dialogForm,"edit-type":e.editType,title:e.dialogTitle,"extra-info":{nodeLevel:e.nodeLevel,warehouseId:e.node.warehouseId,node:e.node}},on:{submit:e.handleSubmit},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}})],2)},c=[],d=(n("96cf"),n("3b8d")),u=(n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-drawer",{attrs:{center:!0,"append-to-body":!0,"close-on-press-escape":!1,"wrapper-closable":!1,title:e.title,size:"50",visible:e.value,"destroy-on-close":!0,"before-close":e.beforeClose},on:{open:e.initSelect}},[n("el-form",{ref:"form",attrs:{model:e.form,inline:"",rules:e.rules,"label-width":"120px"}},[n("el-scrollbar",{staticClass:"scroll-drawer"},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"请输入",maxlength:"add"===e.editType?e.addNameLength:e.modifyNameLength,"show-word-limit":""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"SAP仓库",prop:"warehouseSapId"}},[n("el-select",{staticStyle:{width:"178px"},attrs:{disabled:[4,5].includes(e.extraInfo.nodeLevel),filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.form.warehouseSapId,callback:function(t){e.$set(e.form,"warehouseSapId",t)},expression:"form.warehouseSapId"}},e._l(e.sapWarehousePullList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"油墨标签",prop:"labelId"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{disabled:"",placeholder:"请选择"},model:{value:e.form.labelId,callback:function(t){e.$set(e.form,"labelId","string"===typeof t?t.trim():t)},expression:"form.labelId"}}),e.form.labelId?n("el-button",{staticStyle:{"margin-left":"5px","padding-left":"0","padding-right":"0",width:"30px"},attrs:{type:"success",icon:"el-icon-minus"},on:{click:e.handleDeleteBind}}):n("el-button",{staticStyle:{"margin-left":"5px","padding-left":"0","padding-right":"0",width:"30px"},attrs:{type:"success",disabled:!e.form.warehouseSapId,icon:"el-icon-plus"},on:{click:function(t){e.selectedInfo.visible=!0}}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[n("el-input",{staticStyle:{width:"178px"},attrs:{rows:5,"show-word-limit":"",placeholder:"请输入"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks","string"===typeof t?t.trim():t)},expression:"form.remarks"}})],1)],1)],1)],1),n("div",{staticClass:"drawer-footer"},[n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.handleConfirm("form")}}},[e._v(e._s(e.loading?"提交中 ...":"确 定"))]),n("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1),n("warehouse-label",{attrs:{multiple:!1,"extra-info":{forBusiness:"warehouseLocation"}},on:{confirm:e.labelConfirm},model:{value:e.selectedInfo.visible,callback:function(t){e.$set(e.selectedInfo,"visible",t)},expression:"selectedInfo.visible"}})],1)}),f=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,top:"5vh",visible:e.value,"show-close":!0,width:"920px","lock-scroll":!1,"destroy-on-close":!0,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{open:e.initSelect}},[n("el-scrollbar",{staticClass:"scroll-dialog"},[n("div",[n("div",{staticClass:"clearfix top-filter"},[n("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{prop:"labelId"}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"标签ID查询"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInit(t)}},model:{value:e.query.labelId,callback:function(t){e.$set(e.query,"labelId","string"===typeof t?t.trim():t)},expression:"query.labelId"}})],1),n("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.init}},[e._v("搜索")]),n("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")])],1)],1)]),n("el-row",[n("table-com",{ref:e.refName,attrs:{"table-height-type":480,loading:e.loading,index:!1,"index-fixed":!1,selection:!0,multiple:e.multiple,"selection-fixed":!1,"table-column-sort":!1,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!1,"operate-fixed":!1,"table-selection":e.tableSelection},on:{selectionChange:e.selectionChange}})],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.confirmDialog}},[e._v("确 定")]),n("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},h=[],m=n("75fc"),b=(n("6762"),n("2fdb"),n("a8db")),g=n("1790"),y=n("4abb"),v=n("8a2a"),w=n("e08f");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={name:"WarehouseLabelSelect",mixins:[g["a"],w["a"]],props:{value:{required:!0,type:Boolean},title:{type:String,default:"油墨标签选择"},multiple:{type:Boolean,default:!0},selection:{type:Array,default:function(){return[]}},max:{type:Number,default:0},extraInfo:{type:Object,default:function(){}}},dicts:[],data:function(){return{loading:!1,refName:"modelSelectWarehouseLabelSelect",query:{labelId:""},columnSets:[{prop:"batteryPowerStr",vHtml:!0,formatter:function(e){return'<span style="color: '.concat(v["progressMap"][e.batteryPower].color,'">').concat(e.batteryPowerStr,"</span>")}},{prop:"connectionStatus",vHtml:!0,formatter:function(e){var t={"离线":"#f56c6c","在线":"#67c23a"};return'<span style="color: '.concat(t[e.connectionStatus],'">').concat(e.connectionStatus,"</span>")}}],tableSelection:[],deptSelectedInfo:{list:[],visible:!1,radio:""}}},methods:{confirmDialog:function(){this.$emit("confirm",this.tableSelection),this.beforeClose()},init:function(){var e=this,t=x({},this.query,{},this.extraInfo,{page:x({},this.pageInfo)});return new Promise((function(n,i){Object(y["d"])(x({},t)).then((function(t){var i=t.code,o=t.data;if(!i){var r=o.formIdent,a=o.formHeadSets,l=o.pageData;e.formIdent=r,e.columnList=e.initTableHeadMixins(a);var s=l.list,c=Object(b["a"])(l,["list"]);e.initPage(c),e.tableData=s,e.tableSelection=e.tableData.filter((function(t){return e.selection.includes(t.id)}))}e.loading=!1,n(t)})).catch((function(t){e.loading=!1,i(t)}))}))},initSelect:function(){this.init()},selectionChange:function(e){this.tableSelection=Object(m["a"])(e)},handleUpdateTableSelected:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},handleDefault:function(){this.tableSelection=new Array(0)},beforeClose:function(e){this.$emit("input",!1),this.handleDefault(),"function"===typeof e&&e()},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()}}},I=S,P=(n("27f9"),n("2877")),j=Object(P["a"])(I,p,h,!1,null,"cd60ff74",null),L=j.exports,_=n("e60a");function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C={name:"",warehouseSapId:"",remarks:"",label:"",labelId:""},N={name:"CustomerInfoDialogComs",components:{WarehouseLabel:L},props:{value:{type:Boolean,default:!1},title:{type:String,default:""},editType:{type:String,default:"add"},dialogForm:{type:Object,default:function(){return E({},C)}},extraInfo:{type:Object,default:function(){}}},data:function(){return{form:C,loading:!1,rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],warehouseSapId:[{required:!0,message:"请选择SAP仓库",trigger:"change"}]},selectedInfo:{list:[],visible:!1,radio:""},sapWarehousePullList:[]}},computed:{addNameLength:function(){var e=this.extraInfo.node.level,t={0:null,1:null,2:3,3:4,4:null};return t[e]},modifyNameLength:function(){var e=this.extraInfo.node.level,t={0:null,1:null,2:null,3:3,4:4};return t[e]}},watch:{dialogForm:{handler:function(e){"add"===this.editType?this.form=E({},C,{},e):this.form=E({},e)},immediate:!0}},mounted:function(){},methods:{handleConfirm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0;var n={add:_["a"],modify:_["e"]}[t.editType],i=t.form,o=i.name,r=i.warehouseSapId,a=i.remarks,l=i.labelId,s={add:{name:o,warehouseSapId:r,remarks:a,labelId:l,warehouseId:t.extraInfo.node.warehouseId||t.extraInfo.node.id,parentId:t.extraInfo.node.storageId||null},modify:E({},t.form)}[t.editType];n(s).then((function(e){var n=e.code;n||(t.$message({message:"".concat(t.title,"成功"),type:"success"}),t.$emit("submit"),t.beforeClose()),t.loading=!1})).catch((function(e){t.loading=!1}))}))},labelConfirm:function(e){e.length&&(this.form.label=e[0].id,this.form.labelId=e[0].labelId)},handleDeleteBind:function(){this.form.label="",this.form.labelId=""},getSapWarehousePullList:function(){var e=this;return new Promise((function(t,n){Object(_["f"])({warehouseId:e.extraInfo.warehouseId}).then((function(n){var i=n.code,o=n.data;i||(e.sapWarehousePullList=o||[]),t(n)})).catch((function(e){n(e)}))}))},initSelect:function(){this.getSapWarehousePullList()},beforeClose:function(e){this.$refs.form.resetFields(),this.$emit("input",!1),this.form=Object.assign({},E({},C)),"function"===typeof e&&e()}}},$=N,D=(n("af9a"),Object(P["a"])($,u,f,!1,null,"e22af524",null)),T=D.exports;function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(){return{name:"",warehouseSapId:"",label:"",labelId:"",remarks:"",isEdit:!1}},U={name:"EmosBomSbomRight",components:{EditDialog:T},props:{node:{type:Object,default:function(){}},nodeLevel:{type:[String,Number],default:""}},data:function(){return{title:this.$route.meta.title,loading:!1,form:A({},F()),dialogVisible:!1,dialogForm:{},editType:"add",selectedInfo:{list:[],visible:!1,radio:""},sapWarehousePullList:[],warehouseDetailInfo:{}}},computed:{dialogTitle:function(){return"add"===this.editType?"新增".concat(this.title):"编辑".concat(this.title)}},watch:{node:{handler:function(e){1===this.nodeLevel&&this.getWarehouseDetail(),this.nodeLevel>1&&this.getStorageLocationDetail()}},immediate:!0,deep:!0},mounted:function(){},methods:{getStorageLocationDetail:function(){var e=this;return this.node.storageId?new Promise((function(t,n){var i={id:e.node.storageId};e.loading=!0,Object(_["h"])(i).then((function(n){var i=n.code,o=n.data;i||(e.form=A({},o)),e.loading=!1,t(n)})).catch((function(t){e.loading=!1,n(t)}))})):Promise.reject()},getWarehouseDetail:function(){var e=this,t={id:Math.abs(this.node.id)};return new Promise((function(n,i){Object(_["i"])(t).then((function(t){var i=t.code,o=t.data;i||(e.warehouseDetailInfo=A({},o)),n(t)})).catch((function(e){i(e)}))}))},getSapWarehousePullList:function(){var e=this,t={warehouseId:this.node.warehouseId};return new Promise((function(n,i){Object(_["f"])(t).then((function(t){var i=t.code,o=t.data;i||(e.sapWarehousePullList=o||[]),n(t)})).catch((function(e){i(e)}))}))},handleSubmit:function(){var e=this;1===this.nodeLevel?this.$emit("refreshTree"):this.getStorageLocationDetail().then((function(t){e.$emit("refreshTree")})).catch((function(e){}))},handleDelete:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.node.storageId){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("当前树节点对象storageId不存在")));case 2:this.$confirm("此操作将永久删除该".concat(this.title,", 是否继续?"),"提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",cancelButtonClass:"btn-custom-cancel",type:"warning",lockScroll:!1}).then((function(){Object(_["d"])({id:t.node.storageId}).then((function(e){var n=e.code;n||(t.$message({message:"删除成功",type:"success"}),t.form=A({},F()),t.$emit("setPrevNode"))}))})).catch((function(){t.$message({message:"已取消删除",type:"info"})}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleAdd:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.editType="add",this.dialogForm={warehouseSapId:this.node.warehouseSapId||""},this.dialogVisible=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleModify:function(){this.dialogForm=A({},this.form),this.editType="modify",this.dialogVisible=!0}}},B=U,R=Object(P["a"])(B,s,c,!1,null,null,null),W=R.exports,z=n("9a2e"),K=n("b1d1");function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H={name:"WMSBaseWarehouseLocation",components:{DragScreen:l["a"],Right:W},filters:{setNodeName:function(e,t){var n={1:"库",2:"区",3:"架",4:"层",5:"位"};return"".concat(e," ").concat(n[t.level])}},mixins:[z["a"],K["a"]],data:function(){var e="".concat(a["a"].getters.token);return{nodeInfo:{},nodeLevel:null,percentage:0,headers:{Authorization:e},fileList:[],BASE_API:"https://192.168.1.7:9005/api/wms",isEnabled:!0}},mounted:function(){this.initTreeMixins()},methods:{initTreeMixins:function(){var e=this;return new Promise((function(t,n){Object(_["g"])().then((function(n){var i=n.code,o=n.data;i||(e.treeDataMixins=o),t(n)})).catch((function(e){n(e)}))}))},handleNodeClick:function(e,t,n){this.nodeLevel=t.level,this.nodeInfo=q({},e)},handleUploadSuccess:function(e,t,n){this.isEnabled=!0;var i=e.code,o=e.data,r=e.msg;if(i&&999===i)return this.$notify.error({title:"错误",message:r||"文件上传失败"}),void(this.percentage=0);i||(this.fileList=[q({},o,{fileId:o.id,name:o.fileName,url:o.fileUrl})],this.percentage=0,this.$notify.success({title:"成功",message:"导入成功"}),this.initTreeMixins())},handleUploadError:function(e,t,n){this.isEnabled=!0,this.percentage=0},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},handleRemove:function(e,t){this.fileList=[]},downloadTemplate:function(){window.open("".concat("https://192.168.1.7:9005/api/wms","/basic/wmsWarehouseStorageLocation/downloadImportTemplate"))},handleUploadProgress:function(e,t,n){var i=this;this.isEnabled=!1,this.$nextTick((function(){i.percentage=Math.floor(t.percentage/100*100)}))}}},J=H,Q=(n("ac56"),Object(P["a"])(J,i,o,!1,null,"340cc46d",null));t["default"]=Q.exports},"27f9":function(e,t,n){"use strict";var i=n("ba94"),o=n.n(i);o.a},4390:function(e,t,n){},"56b7":function(e,t,n){},"9a2e":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n("28a5");var i=n("cddf"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"inline-block"}},[e._t("pic"),n("el-upload",{ref:"upload",attrs:{sizi:"mini",action:""+e.BASE_API+e.url,headers:e.headers,accept:e.accept,"before-upload":e.beforeUpload,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:e.limit>1,limit:e.limit,"on-exceed":e.handleExceed,"file-list":e.fileList,"on-preview":e.handlePreview,"show-file-list":e.showFileList,"on-success":e.handleUploadSuccess,disabled:e.disabled,"on-progress":e.handleUploadProgress,"on-error":e.handleError}},[e.btnContent?n("el-button",{attrs:{type:"primary",size:"mini",icon:e.btnIcon,disabled:e.disabled}},[e._v("\n      "+e._s(e.btnContent)+"\n    ")]):n("el-button",{attrs:{type:"primary",size:"mini",icon:e.btnIcon,disabled:e.disabled}}),e._t("tip")],2)],2)},r=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("7f7f"),n("bd86")),l=n("a8db"),s=(n("c5f6"),n("4360"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={name:"FormUploadFileComs",props:{uploadFileList:{type:Array,default:function(){return[]}},showFileList:{type:Boolean,default:!0},btnIcon:{type:String,default:""},btnContent:{type:String,default:"点击上传"},limit:{type:Number,default:1},url:{type:String,default:"/wms/file/upload"},accept:{type:String,default:""},limitSize:{type:Number,default:1e23},errDefaultMsg:{type:String,default:"文件上传失败"},disabled:{type:Boolean,default:!1}},data:function(){var e="".concat(s["a"].getters.token);return{fileList:[],BASE_API:"https://192.168.1.7:9005/api/wms",headers:{Authorization:e},uploadDisabled:!1,list:[]}},watch:{uploadFileList:{handler:function(e){this.fileList=e.map((function(e){var t=e.fileName,n=e.fileUrl,i=Object(l["a"])(e,["fileName","fileUrl"]);return d({},i,{url:n,name:t})}))},immediate:!0}},methods:{beforeUpload:function(e){var t=e.size<=1e3*this.limitSize;return t||this.$message({message:"上传大小不能超过 ".concat(this.limitSize,"k!"),type:"error"}),t&&this.$emit("openLoading"),t},handleUploadProgress:function(e,t,n){this.$emit("uploadFileProgress",e,t,n)},handleError:function(e,t,n){var i=this;setTimeout((function(){i.$notify.error({title:"错误",message:"上传失败"}),i.$emit("closeLoading")}),500)},handleUploadSuccess:function(e,t,n){if(this.$emit("closeLoading"),"导入成功"!==e){var i=e.code,o=e.data;if(i&&999===i)this.$notify.error({title:"错误",message:e.msg?e.msg:this.errDefaultMsg});else if(i)this.$refs.upload.clearFiles(),this.$emit("uploadFileError");else{if(!o.id)return void this.$emit("uploadFileSuccess");var r=o.id,a=o.fileUrl,l=o.fileType,s=o.downloadUrl,c=o.fileName,d=o.suffix,u={id:r,fileId:r,fileUrl:a,fileType:l,downloadUrl:s,suffix:d,fileName:c,name:c,url:a,classification:""};this.fileList.push(u),this.$emit("uploadFileSuccess",u)}}else this.$emit("uploadFileSuccess")},handleRemove:function(e,t){var n=Object.assign({},e);return n.id||0===n.id||(n.id=n.fileId),this.fileList=this.fileList.filter((function(e){return e.id!==n.id})),this.$emit("handleRemove",d({},n)),new Promise((function(e,t){Object(i["b"])({id:n.id}).then((function(n){var i=n.code;0===i?e():t()})).catch((function(e){t(e)}))}))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",cancelButtonClass:"cancel-button-class",confirmButtonClass:"confirm-button-class",type:"warning",lockScroll:!1})},handlePreview:function(e){var t=e.id;window.open("".concat("https://192.168.1.7:9005/api/wms","/wms/file/download/").concat(t))},handleExceed:function(e,t){this.$notify({title:"警告",message:"当前限制上传附件数量是 ".concat(this.limit," 个文件"),type:"warning"})}}},f=u,p=n("2877"),h=Object(p["a"])(f,o,r,!1,null,"6cedfe06",null),m=h.exports,b={components:{FormUploadFile:m},data:function(){return{uploadTip:"",uploadFileList:[]}},methods:{uploadFileSuccess:function(e){this.uploadFileList.push(e)},handleRemove:function(e){var t=e.id;this.uploadFileList=this.uploadFileList.filter((function(e){return e.id!==t}))},initUploadFileList:function(e){var t=this;if(e&&"null"!==e)return new Promise((function(n,o){Object(i["g"])({ids:e}).then((function(e){var i=e.code,o=e.data;i||(t.uploadFileList=o),n(e)})).catch((function(e){o(e)}))}))},getFileIdList:function(){return this.uploadFileList.map((function(e){return e.id}))},resetFormUploadFilesMixins:function(){this.uploadFileList=[]},downloadUploadFileMixins:function(e){window.open("".concat(Object({NODE_ENV:"production",VUE_APP_BASE_API:"https://192.168.1.7:9005/api/system",VUE_APP_BASE_API_ACTIVITI:"https://192.168.1.7:9005/api/flowable",VUE_APP_BASE_API_WMS:"https://192.168.1.7:9005/api/wms",VUE_APP_BASE_PUBLIC_PATH:"/wms",BASE_URL:"/wms/"}).VUE_APP_BASE_API_LMS,"/wms/file/download/").concat(e))}}}},ac56:function(e,t,n){"use strict";var i=n("4390"),o=n.n(i);o.a},af9a:function(e,t,n){"use strict";var i=n("56b7"),o=n.n(i);o.a},b1d1:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("6762"),n("2fdb"),n("ac6a");var i=n("75fc"),o={data:function(){return{treeRefName:"tree",defaultPropsMixins:{children:"children",label:"name",isLeaf:function(e){return!e.hasleaf}},treeLoadingMixins:!1,treeQueryFocus:!1,treeQueryMixins:"",treeDataMixins:[],defaultCheckedNodeMixins:"",defaultExpandKeysMixins:[]}},methods:{getCurrentTreeStatus:function(){this.defaultCheckedNodeMixins=this.$refs[this.treeRefName].getCurrentKey()},handleRefreshTree:function(){var e=this;this.defaultCheckedNodeMixins=this.$refs[this.treeRefName].getCurrentKey();var t=this.nodeInfo;this.initTreeMixins().then((function(){e.setCurrentNode(t)}))},handleNodeExpand:function(e){var t=!1;this.defaultExpandKeysMixins.some((function(n){if(n===e.id)return t=!0,!0})),t||this.defaultExpandKeysMixins.push(e.id)},collapseAllNodes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].id),Array.isArray(e[n].children)&&(t=[].concat(Object(i["a"])(t),Object(i["a"])(this.collapseAllNodes(e[n].children))));return t},handleNodeCollapse:function(e,t,n){var i=this;this.defaultExpandKeysMixins.forEach((function(t,n){t===e.id&&(i.defaultExpandKeysMixins.splice(n,1),e.children&&Array.isArray(e.children)&&i.defaultExpandKeysMixins.forEach((function(t){var n=i.collapseAllNodes(e.children).includes(t);n&&(i.defaultExpandKeysMixins=i.defaultExpandKeysMixins.filter((function(e){return e!==t})))})))}))},resetCurrentNode:function(){var e=this;this.nodeInfo={},this.initTreeMixins().then((function(){e.$nextTick((function(){e.$refs[e.treeRefName].setCurrentKey()}))}))},setCurrentNode:function(e){var t=this;this.$nextTick((function(){t.$refs[t.treeRefName].setCurrentKey(),t.$nextTick((function(){t.$refs[t.treeRefName].setCurrentKey(e.id);var n=t.$refs[t.treeRefName].getNode(e.id);t.handleNodeClick(n.data,n)}))}))},setPrevNode:function(){var e=this,t=this.$refs[this.treeRefName].getNode(this.nodeInfo.id);if(t&&t.parent){var n=t.parent.data;this.defaultCheckedNodeMixins=n.id,this.initTreeMixins().then((function(){e.setCurrentNode(n)}))}}}}},ba94:function(e,t,n){}}]);
//# sourceMappingURL=WMSBaseWarehouseLocation.2d54c55e.js.map