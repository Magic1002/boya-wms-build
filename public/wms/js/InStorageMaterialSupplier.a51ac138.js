(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["InStorageMaterialSupplier"],{"037c":function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return o}));var i=n("bc43");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/basic/wmsMaterial/pageList",method:"post",data:e})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/basic/wmsMaterial/add",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/basic/wmsMaterial/edit",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/basic/wmsMaterial/delete",method:"post",data:e})}},"162a":function(e,t,n){"use strict";var i=n("a91b"),r=n.n(i);r.a},"32a6":function(e,t,n){var i=n("241e"),r=n("c3a1");n("ce7e")("keys",(function(){return function(e){return r(i(e))}}))},3904:function(e,t,n){"use strict";var i=n("75bf"),r=n.n(i);r.a},"72d8":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"clearfix top-filter"},[n("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{prop:"materialId"}},[[n("div",{staticClass:"selected-wrapper"},[n("el-input",{staticStyle:{width:"143px"},attrs:{disabled:"",placeholder:"请选择物料"},model:{value:e.query.materialCode,callback:function(t){e.$set(e.query,"materialCode","string"===typeof t?t.trim():t)},expression:"query.materialCode"}}),n("el-button",{staticStyle:{"margin-left":"5px","padding-left":"0","padding-right":"0",width:"30px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.visible=!0}}})],1)]],2),n("el-button",{staticClass:"filter-item",attrs:{disabled:!e.query.materialId,type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),n("el-button",{staticClass:"filter-item",attrs:{disabled:!e.query.materialId,type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")])],1)],1),n("el-row",[n("table-com",{ref:"baseTableRef",attrs:{loading:e.loading,selection:!1,"table-data":e.tableData,"column-list":e.columnList,"operation-width":180,"show-operate":!1,"table-column-sort":!1,"show-empty-text-slot":!0},on:{rowClick:e.handleRowClick,refresh:e.searchInit},scopedSlots:e._u([{key:"empty-slot",fn:function(){return[n("span",{staticClass:"my-empty-text"},[e._v("暂无数据")])]},proxy:!0},{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"warning",icon:"el-icon-edit"},on:{click:function(n){return e.handleModify(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}}),n("base-material",{attrs:{multiple:!1,"extra-info":Object.assign({},e.query.materialId&&{materialIdList:[e.query.materialId]})},on:{confirm:e.handleChooseMaterial},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}})],1)},r=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("7f7f"),n("a8db")),l=n("bd86"),o=n("bc43");function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/basic/supplier/supplierMaterialPageList",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/basic/supplier/delete",method:"post",data:e})}var u=n("1790"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,top:"5vh",visible:e.value,"show-close":!0,width:"1000px","lock-scroll":!1,"destroy-on-close":!0,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{open:e.initSelect}},[n("el-scrollbar",{staticClass:"scroll-dialog"},[n("div",{staticClass:"main-box"},[n("el-form",{ref:"filterItem",staticClass:"top-filter clearfix",attrs:{model:e.query,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{prop:"materialCodeOrName"}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{placeholder:"物料编码或名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInit(t)}},model:{value:e.query.materialCodeOrName,callback:function(t){e.$set(e.query,"materialCodeOrName","string"===typeof t?t.trim():t)},expression:"query.materialCodeOrName"}})],1),n("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),n("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")])],1),n("el-row",[n("table-com",e._b({ref:e.refName,attrs:{"row-key":e.rowKey,"table-height-type":490,loading:e.loading,index:!0,"index-fixed":!1,selection:!0,multiple:e.multiple,"selection-fixed":!1,"table-column-sort":!1,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!1,"operate-fixed":!1,"table-selection":e.tableSelection,selectable:e.selectable},on:{selectionChange:e.selectionChange,sortChange:e.sortChange,dynamicRow:e.getDynamicRow}},"table-com",e.$attrs,!1))],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1)]),n("div",{attrs:{slot:"footer"},slot:"footer"},[e.multiple?n("el-row",{staticStyle:{"text-align":"left"}},[n("el-button",{attrs:{type:"primary",disabled:!e.tableSelection.length},on:{click:e.handleSelectUp}},[e._v("向上选中")]),n("el-button",{attrs:{type:"primary",disabled:!e.tableSelection.length},on:{click:e.handleCancelUp}},[e._v("向上取消")]),n("el-button",{attrs:{type:"primary",disabled:!e.tableSelection.length},on:{click:e.handleSelectDown}},[e._v("向下选中")]),n("el-button",{attrs:{type:"primary",disabled:!e.tableSelection.length},on:{click:e.handleCancelDown}},[e._v("向下取消")])],1):e._e(),n("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")]),n("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},f=[],b=(n("20d6"),n("75fc")),p=(n("6762"),n("2fdb"),n("c5f6"),n("037c"));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={name:"MaterialSelect",mixins:[u["a"]],props:{value:{required:!0,type:Boolean},title:{type:String,default:"物料选择"},multiple:{type:Boolean,default:!0},selection:{type:Array,default:function(){return[]}},max:{type:Number,default:0},ids:{type:Array,default:function(){return[]}},extraInfo:{type:Object,default:function(){}}},dicts:[],data:function(){return{loading:!1,refName:"modelSelectMaterialSelect",query:{materialCodeOrName:""},tableData:[],columnList:[{module:"word",prop:"code",label:"物料编号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"name",label:"物料名称",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"spec",label:"规格型号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"assessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"description",label:"物料描述",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitMeasureName",label:"计量单位",align:"center",minWidth:175,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"type_dictText",label:"物料类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"minOutboundUnitName",label:"最小单位SKU",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"isExpirationDate",label:"是否有保质期",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center",formatter:function(e){return 0===e.isExpirationDate?"否":"是"}},{module:"word",prop:"materialGroupCode",label:"物料组编号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"materialGroupDescription",label:"物料组描述",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"dataSources_dictText",label:"数据来源",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"}],columnSets:[],tableSelection:[],deptSelectedInfo:{list:[],visible:!1,radio:""},rowObj:{},rowKey:"id"}},methods:{init:function(){var e=this,t=h({},this.query,{},this.extraInfo,{page:h({},this.pageInfo)});return new Promise((function(n,i){Object(p["d"])(h({},t)).then((function(t){var i=t.code,r=t.data;if(!i){var l=r.list,o=Object(a["a"])(r,["list"]);e.initPage(o),e.tableData=l.map((function(e){return h({deliveryNumber:0},e)}));try{var c=e.tableSelection.map((function(t){return t[e.rowKey]})),s=e.tableData.filter((function(e){return c.includes(e.id)}));e.rowObj=s.length?s[s.length-1]:{};var u=e.rowKey;e.tableData.forEach((function(t){function n(e){var t=e[u];return c.some((function(e){return e===t}))}n(t)&&e.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(t,!0)}))}))}catch(d){}}e.loading=!1,n(t)})).catch((function(t){e.loading=!1,i(t)}))}))},sortChange:function(e){e.column,e.prop,e.order},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()},initSelect:function(){this.searchInit()},selectionChange:function(e){this.tableSelection=Object(b["a"])(e)},getDynamicRow:function(e){this.rowObj=e},handleSelectUp:function(){var e=this,t=this.tableSelection.map((function(t){return t[e.rowKey]})),n=this.tableData.filter((function(e){return t.includes(e.id)})),i=-1,r=[];Object.keys(this.rowObj).length&&(i=t.includes(this.rowObj.id)?this.tableData.findIndex((function(t){return t.id===e.rowObj.id})):this.tableData.findIndex((function(e){return e.id===n[n.length-1].id}))),this.tableData.forEach((function(t,n,a){-1!==i&&(n<i&&(r=[].concat(Object(b["a"])(r),[t])),e.rowObj=a[i])})),this.$nextTick((function(){r.forEach((function(n){!t.includes(n.id)&&e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(n,!0)}))}))},handleCancelUp:function(){var e=this,t=this.tableSelection.map((function(t){return t[e.rowKey]})),n=this.tableData.filter((function(e){return t.includes(e.id)})),i=-1,r=[];Object.keys(this.rowObj).length&&(i=t.includes(this.rowObj.id)?this.tableData.findIndex((function(t){return t.id===e.rowObj.id})):this.tableData.findIndex((function(e){return e.id===n[n.length-1].id}))),this.tableData.forEach((function(t,n,a){-1!==i&&(n<i&&(r=[].concat(Object(b["a"])(r),[t])),e.rowObj=a[i])})),this.$nextTick((function(){r.forEach((function(n){t.includes(n.id)&&e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(n,!1)}))}))},handleSelectDown:function(){var e=this,t=this.tableSelection.map((function(t){return t[e.rowKey]})),n=this.tableData.filter((function(e){return t.includes(e.id)})),i=-1,r=[];Object.keys(this.rowObj).length&&(i=t.includes(this.rowObj.id)?this.tableData.findIndex((function(t){return t.id===e.rowObj.id})):this.tableData.findIndex((function(e){return e.id===n[n.length-1].id}))),this.tableData.forEach((function(t,n,a){-1!==i&&(n>i&&(r=[].concat(Object(b["a"])(r),[t])),e.rowObj=a[i])})),this.$nextTick((function(){r.forEach((function(n){!t.includes(n.id)&&e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(n,!0)}))}))},handleCancelDown:function(){var e=this,t=this.tableSelection.map((function(t){return t[e.rowKey]})),n=this.tableData.filter((function(e){return t.includes(e.id)})),i=-1,r=[];Object.keys(this.rowObj).length&&(i=t.includes(this.rowObj.id)?this.tableData.findIndex((function(t){return t.id===e.rowObj.id})):this.tableData.findIndex((function(e){return e.id===n[n.length-1].id}))),this.tableData.forEach((function(t,n,a){-1!==i&&(n>i&&(r=[].concat(Object(b["a"])(r),[t])),e.rowObj=a[i])})),this.$nextTick((function(){r.forEach((function(n){t.includes(n.id)&&e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(n,!1)}))}))},beforeClose:function(e){this.$emit("input",!1),"function"===typeof e&&e(),this.tableSelection=new Array(0),this.$refs["filterItem"].resetFields()},handleConfirm:function(){this.$emit("confirm",this.tableSelection),this.beforeClose()},onDeptSelectConfirm:function(e){e.length&&(this.query.usedOffice=e[0].name)},selectable:function(e,t){return!this.selection.includes(e.id)}}},y=g,w=(n("3904"),n("2877")),O=Object(w["a"])(y,d,f,!1,null,"2e830b37",null),v=O.exports;function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C={components:{BaseMaterial:v},dicts:[],mixins:[u["a"]],data:function(){return{query:{materialId:"",materialCode:"",materialName:""},dialogForm:{},title:this.$route.meta.title,loading:!1,tableData:[],dialogType:"add",dialogVisible:!1,columnList:[{module:"word",prop:"supplierName",label:"供应商名称",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"supplierCode",label:"供应商编号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialCount",label:"历史数量",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"contractCount",label:"合同数",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"orderCount",label:"订单数",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"lastOrderTime",label:"最终签订订单时间",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],visible:!1}},computed:{dialogTitle:function(){return"add"===this.dialogType?"新增".concat(this.title):"编辑".concat(this.title)}},watch:{$route:{handler:function(e){e.params},immediate:!0}},mounted:function(){},activated:function(){},methods:{init:function(){var e=this;return this.loading=!0,new Promise((function(t,n){c({page:j({},e.pageInfo),materialId:e.query.materialId}).then((function(n){var i=n.code,r=n.data;if(!i){var l=r.list,o=Object(a["a"])(r,["list"]);e.initPage(o),e.tableData=l}e.loading=!1,t(n)})).catch((function(t){e.loading=!1,n(t)}))}))},handleAdd:function(){this.dialogType="add",this.dialogForm={},this.dialogVisible=!0},handleModify:function(e){this.dialogForm=j({},e),this.dialogType="modify",this.dialogVisible=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该".concat(this.title,", 是否继续?"),"提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",cancelButtonClass:"btn-custom-cancel",type:"warning",lockScroll:!1}).then((function(){e.id&&s({id:e.id,dataSources:e.dataSources}).then((function(e){var n=e.code;n||(t.$message({message:"删除成功",type:"success"}),t.init())}))})).catch((function(){t.$message({message:"已取消删除",type:"info"})}))},handleRowClick:function(e){e.row;var t=e.column;e.cell,e.event;if("操作"===t.label)return!1},resetForm:function(e){this.$refs[e].resetFields(),this.query.materialId="",this.query.materialName="",this.query.materialCode="",this.tableData=new Array(0)},handleChooseMaterial:function(e){e.length&&(this.query.materialId=e[0].id,this.query.materialName=e[0].name,this.query.materialCode=e[0].code)}}},S=C,D=(n("162a"),Object(w["a"])(S,i,r,!1,null,"6a63cb6e",null));t["default"]=D.exports},"75bf":function(e,t,n){},"8aae":function(e,t,n){n("32a6"),e.exports=n("584a").Object.keys},a4bb:function(e,t,n){e.exports=n("8aae")},a8db:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("e265"),r=n.n(i),a=n("a4bb"),l=n.n(a);function o(e,t){if(null==e)return{};var n,i,r={},a=l()(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function c(e,t){if(null==e)return{};var n,i,a=o(e,t);if(r.a){var l=r()(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},a91b:function(e,t,n){},ce7e:function(e,t,n){var i=n("63b6"),r=n("584a"),a=n("294c");e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],l={};l[e]=t(n),i(i.S+i.F*a((function(){n(1)})),"Object",l)}},e265:function(e,t,n){e.exports=n("ed33")},ed33:function(e,t,n){n("014b"),e.exports=n("584a").Object.getOwnPropertySymbols}}]);
//# sourceMappingURL=InStorageMaterialSupplier.a51ac138.js.map