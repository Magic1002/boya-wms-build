(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["WMSBaseUnit"],{"32a6":function(e,t,n){var i=n("241e"),r=n("c3a1");n("ce7e")("keys",(function(){return function(e){return r(i(e))}}))},"4ad6":function(e,t,n){"use strict";var i=n("7507"),r=n.n(i);r.a},"5ab1":function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return c}));var i=n("bc43");function r(e){return Object(i["a"])({url:"/basic/unit/pageList",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/basic/unit/listItem",method:"post",data:e})}function a(e){return Object(i["a"])({url:"/basic/unit/add",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/basic/unit/edit",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/basic/unit/delete",method:"post",data:e})}},7507:function(e,t,n){},"8aae":function(e,t,n){n("32a6"),e.exports=n("584a").Object.keys},a4bb:function(e,t,n){e.exports=n("8aae")},a7b9:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"clearfix top-filter"},[n("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""}},[n("el-form-item",{attrs:{prop:"unitName"}},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"单位名称"},model:{value:e.query.unitName,callback:function(t){e.$set(e.query,"unitName",t)},expression:"query.unitName"}},e._l(e.unitPullList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),n("el-form-item",{attrs:{prop:"type"}},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"单位类型"},model:{value:e.query.type,callback:function(t){e.$set(e.query,"type",t)},expression:"query.type"}},e._l(e.dict["wms_unit_type"],(function(e){return n("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),n("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")]),n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),n("el-row",[n("table-com",{ref:"baseTableRef",attrs:{loading:e.loading,selection:!1,"table-data":e.tableData,"column-list":e.columnList,"operation-width":180,"table-column-sort":!1},on:{rowClick:e.handleRowClick,refresh:e.searchInit},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"warning",icon:"el-icon-edit"},on:{click:function(n){return e.handleModify(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}}),n("edit-dialog",{attrs:{"dialog-form":e.dialogForm,"edit-type":e.dialogType,title:e.dialogTitle},on:{submit:e.init},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}})],1)},r=[],o=(n("8e6e"),n("ac6a"),n("456d"),n("a8db")),a=n("bd86"),l=n("5ab1"),c=n("1790"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-drawer",{attrs:{center:!0,"append-to-body":!0,"close-on-press-escape":!1,"wrapper-closable":!1,title:e.title,size:"50",visible:e.value,"destroy-on-close":!0,"before-close":e.beforeClose},on:{open:e.initSelect}},[n("el-form",{ref:"form",attrs:{model:e.form,inline:"",rules:e.rules,"label-width":"120px"}},[n("el-scrollbar",{staticClass:"scroll-drawer"},[n("el-form-item",{attrs:{label:"单位名称",prop:"name"}},[n("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"请输入单位名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"单位类型",prop:"type"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"请选择单位类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.dict["wms_unit_type"],(function(e){return n("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1)],1),n("div",{staticClass:"drawer-footer"},[n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.handleConfirm("form")}}},[e._v(e._s(e.loading?"提交中 ...":"确 定"))]),n("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)],1)},u=[],d=n("6bbd");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={name:"",type:""},m={name:"CustomerInfoDialogComs",mixins:[d["a"]],dicts:["wms_unit_type"],props:{value:{type:Boolean,default:!1},title:{type:String,default:""},editType:{type:String,default:"add"},dialogForm:{type:Object,default:function(){return p({},b)}}},data:function(){return{form:b,loading:!1,rules:{name:[{required:!0,message:"请输入单位名称",trigger:"blur"}],type:[{required:!0,message:"请输入单位类型",trigger:"blur"}]},gradeOpts:[]}},watch:{dialogForm:{handler:function(e){"add"===this.editType?this.form=p({},b):this.form=p({},e)},immediate:!0}},methods:{handleConfirm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!1,"add"===t.editType?Object(l["a"])(p({},t.form)).then((function(e){var n=e.code;n||(t.$message({message:"".concat(t.title,"成功"),type:"success"}),t.$emit("submit"),t.beforeClose()),t.loading=!1})).catch((function(e){t.loading=!1})):Object(l["c"])(p({},t.form)).then((function(e){var n=e.code;n||(t.$message({message:"".concat(t.title,"成功"),type:"success"}),t.$emit("submit"),t.beforeClose()),t.loading=!1})).catch((function(e){t.loading=!1}))}))},initSelect:function(){},beforeClose:function(e){this.$refs.form.resetFields(),this.$emit("input",!1),this.form=Object.assign({},p({},b)),"function"===typeof e&&e()}}},g=m,y=(n("4ad6"),n("2877")),h=Object(y["a"])(g,s,u,!1,null,"62864552",null),O=h.exports;function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={components:{EditDialog:O},mixins:[c["a"]],dicts:["wms_unit_type"],data:function(){return{query:{unitName:"",type:""},dialogForm:{},title:this.$route.meta.title,loading:!1,tableData:[],unitPullList:[],dialogType:"add",dialogVisible:!1,columnList:[{module:"word",prop:"name",label:"单位名称",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"type_dictText",label:"单位类型",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"dataSources_dictText",label:"数据来源",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}]}},computed:{dialogTitle:function(){return"add"===this.dialogType?"新增".concat(this.title):"编辑".concat(this.title)}},mounted:function(){this.init(),this.getunitPullList()},methods:{resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()},init:function(){var e=this;return this.loading=!0,new Promise((function(t,n){Object(l["d"])(w({page:w({},e.pageInfo)},e.query)).then((function(n){var i=n.code,r=n.data;if(!i){var a=r.list,l=Object(o["a"])(r,["list"]);e.initPage(l),e.tableData=a}e.loading=!1,t(n)})).catch((function(t){e.loading=!1,n(t)}))}))},handleAdd:function(){this.dialogType="add",this.dialogForm={},this.dialogVisible=!0},getunitPullList:function(){var e=this;return new Promise((function(t,n){Object(l["e"])({}).then((function(n){var i=n.code,r=n.data;i||(e.unitPullList=r||[]),t(n)})).catch((function(e){n(e)}))}))},handleModify:function(e){this.dialogForm=w({},e),this.dialogType="modufy",this.dialogVisible=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该".concat(this.title,", 是否继续?"),"提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",cancelButtonClass:"btn-custom-cancel",type:"warning",lockScroll:!1}).then((function(){e.id&&Object(l["b"])({id:e.id,dataSources:e.dataSources}).then((function(e){var n=e.code;n||(t.$message({message:"删除成功",type:"success"}),t.init())}))})).catch((function(){t.$message({message:"已取消删除",type:"info"})}))},handleRowClick:function(e){e.row;var t=e.column;e.cell,e.event;if("操作"===t.label)return!1}}},x=j,k=Object(y["a"])(x,i,r,!1,null,null,null);t["default"]=k.exports},a8db:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("e265"),r=n.n(i),o=n("a4bb"),a=n.n(o);function l(e,t){if(null==e)return{};var n,i,r={},o=a()(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function c(e,t){if(null==e)return{};var n,i,o=l(e,t);if(r.a){var a=r()(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},ce7e:function(e,t,n){var i=n("63b6"),r=n("584a"),o=n("294c");e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*o((function(){n(1)})),"Object",a)}},e265:function(e,t,n){e.exports=n("ed33")},ed33:function(e,t,n){n("014b"),e.exports=n("584a").Object.getOwnPropertySymbols}}]);
//# sourceMappingURL=WMSBaseUnit.b3bcd59b.js.map