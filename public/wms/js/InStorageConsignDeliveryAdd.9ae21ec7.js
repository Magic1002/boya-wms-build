(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["InStorageConsignDeliveryAdd"],{"037c":function(e,t,r){"use strict";r.d(t,"d",(function(){return a})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return l}));var n=r("bc43");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/basic/wmsMaterial/pageList",method:"post",data:e})}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/basic/wmsMaterial/add",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/basic/wmsMaterial/edit",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/basic/wmsMaterial/delete",method:"post",data:e})}},"32a6":function(e,t,r){var n=r("241e"),a=r("c3a1");r("ce7e")("keys",(function(){return function(e){return a(n(e))}}))},"5ea3":function(e,t,r){"use strict";r.d(t,"r",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"z",(function(){return o})),r.d(t,"k",(function(){return l})),r.d(t,"s",(function(){return c})),r.d(t,"o",(function(){return s})),r.d(t,"q",(function(){return u})),r.d(t,"b",(function(){return d})),r.d(t,"l",(function(){return f})),r.d(t,"j",(function(){return m})),r.d(t,"n",(function(){return p})),r.d(t,"i",(function(){return b})),r.d(t,"m",(function(){return h})),r.d(t,"a",(function(){return v})),r.d(t,"d",(function(){return g})),r.d(t,"w",(function(){return y})),r.d(t,"y",(function(){return w})),r.d(t,"p",(function(){return O})),r.d(t,"t",(function(){return x})),r.d(t,"x",(function(){return j})),r.d(t,"v",(function(){return D})),r.d(t,"h",(function(){return k})),r.d(t,"u",(function(){return S})),r.d(t,"g",(function(){return C})),r.d(t,"f",(function(){return N})),r.d(t,"e",(function(){return $}));var n=r("bc43");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/pageList",method:"post",data:e})}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/save",method:"post",data:e,timeout:6e5})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/edit",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/delete",method:"post",data:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/detail",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/pageList",method:"post",data:e})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/pageListJS",method:"post",data:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/add",method:"post",data:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/edit",method:"post",data:e})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/del",method:"post",data:e})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/dmdPageList",method:"post",data:e})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/clear",method:"post",data:e})}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/detail",method:"post",data:e})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/generateBarcodeList",method:"post",data:e})}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/addMaterialDetailCheck",method:"post",data:e})}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/addMaterialDetail",method:"post",timeout:6e4,data:e})}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/commit",method:"post",data:e})}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsContract/allList",method:"post",data:e})}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/WmsOrder/selectOrderById",method:"post",data:e})}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/bindOrder",method:"post",data:e})}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/print",method:"post",data:e,timeout:6e5})}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/barcodePrint",method:"post",data:e})}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/materialPrint",method:"post",data:e,timeout:6e5})}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/allPrint",method:"post",data:e,timeout:18e4})}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/allGenerateMaterialBarcode",method:"post",data:e})}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/deliveryUpdate/addMaterialPageList",method:"post",data:e})}},7689:function(e,t,r){},"8aae":function(e,t,r){r("32a6"),e.exports=r("584a").Object.keys},a4bb:function(e,t,r){e.exports=r("8aae")},a535:function(e,t,r){},a8db:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("e265"),a=r.n(n),i=r("a4bb"),o=r.n(i);function l(e,t){if(null==e)return{};var r,n,a={},i=o()(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function c(e,t){if(null==e)return{};var r,n,i=l(e,t);if(a.a){var o=a()(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}},b75c:function(e,t,r){"use strict";var n=r("a535"),a=r.n(n);a.a},c791:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[r("el-row",{staticClass:"clearfix"},[r("div",{staticClass:"fl"},[r("el-button",{on:{click:e.handleGoBack}},[e._v("返 回")])],1),r("div",{staticClass:"fr"},[r("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.handleNextStep}},[e._v("下一步")])],1)]),r("transition",{attrs:{name:"el-zoom-in-top"}},[r("el-row",[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px","label-position":"left"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"合同号",prop:"contractNo"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请填写合同号",disabled:""},model:{value:e.form.contractNo,callback:function(t){e.$set(e.form,"contractNo","string"===typeof t?t.trim():t)},expression:"form.contractNo"}})],1)],1),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"订单号",prop:"orderNo"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请填写订单号",disabled:""},model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo","string"===typeof t?t.trim():t)},expression:"form.orderNo"}})],1)],1),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"供应商",prop:"supplierName"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请填写供应商",disabled:""},model:{value:e.form.supplierName,callback:function(t){e.$set(e.form,"supplierName","string"===typeof t?t.trim():t)},expression:"form.supplierName"}})],1)],1),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"用料单位",prop:"materialsUnit"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请填写用料单位"},model:{value:e.form.materialsUnit,callback:function(t){e.$set(e.form,"materialsUnit","string"===typeof t?t.trim():t)},expression:"form.materialsUnit"}})],1)],1),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"凭证日期",prop:"deliveryDate"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择凭证日期",clearable:!1,editable:!1},model:{value:e.form.deliveryDate,callback:function(t){e.$set(e.form,"deliveryDate",t)},expression:"form.deliveryDate"}})],1)],1),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"是否检验",prop:"inspect"}},[r("el-radio-group",{staticClass:"my-inspect-sty",staticStyle:{width:"178px"},attrs:{disabled:6===e.form.status},model:{value:e.form.inspect,callback:function(t){e.$set(e.form,"inspect",t)},expression:"form.inspect"}},[r("el-radio-button",{attrs:{label:!0}},[e._v("是")]),r("el-radio-button",{attrs:{label:!1}},[e._v("否")])],1)],1)],1),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[r("el-input",{attrs:{type:"textarea",rows:1,placeholder:"请填写备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1)],1)],1)],1),r("el-divider",{attrs:{"content-position":"left"}},[e._v("交接单信息")]),r("el-row",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.visible=!0}}},[e._v("新增物料")])],1),r("el-row",[r("table-com",{ref:e.refTableName,attrs:{"ref-name":"tableRef","table-height-type":450,selection:!1,"selection-fixed":!1,index:!0,"table-column-sort":!1,"table-data":e.tableData,"column-list":e.columnList,"operation-width":170,"show-operate":!0,"cell-style":e.handleCellStyle},on:{rowClick:e.handleRowClick},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger"},on:{click:function(r){return e.handleDelete(t.row,t.index)}}},[e._v("删除")])]}}])})],1),r("base-material",{attrs:{"extra-info":{materialIdList:e.tableData.map((function(e){return e.materialId}))}},on:{confirm:e.handleChooseMaterial},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}})],1)},a=[],i=(r("8e6e"),r("456d"),r("ac6a"),r("7f7f"),r("bd86")),o=r("2ef0"),l=r.n(o),c=r("1790"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,top:"5vh",visible:e.value,"show-close":!0,width:"1000px","lock-scroll":!1,"destroy-on-close":!0,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{open:e.initSelect}},[r("el-scrollbar",{staticClass:"scroll-dialog"},[r("div",{staticClass:"main-box"},[r("el-form",{ref:"filterItem",staticClass:"top-filter clearfix",attrs:{model:e.query,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{prop:"materialCodeOrName"}},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{placeholder:"物料编码或名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInit(t)}},model:{value:e.query.materialCodeOrName,callback:function(t){e.$set(e.query,"materialCodeOrName","string"===typeof t?t.trim():t)},expression:"query.materialCodeOrName"}})],1),r("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),r("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")])],1),r("el-row",[r("table-com",e._b({ref:e.refName,attrs:{"row-key":e.rowKey,"table-height-type":490,loading:e.loading,index:!0,"index-fixed":!1,selection:!0,multiple:e.multiple,"selection-fixed":!1,"table-column-sort":!1,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!1,"operate-fixed":!1,"table-selection":e.tableSelection,selectable:e.selectable},on:{selectionChange:e.selectionChange,sortChange:e.sortChange,dynamicRow:e.getDynamicRow}},"table-com",e.$attrs,!1))],1),r("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1)]),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-row",{staticStyle:{"text-align":"left"}},[r("el-button",{attrs:{type:"primary",disabled:!e.tableSelection.length},on:{click:e.handleSelectUp}},[e._v("向上选中")]),r("el-button",{attrs:{type:"primary",disabled:!e.tableSelection.length},on:{click:e.handleCancelUp}},[e._v("向上取消")]),r("el-button",{attrs:{type:"primary",disabled:!e.tableSelection.length},on:{click:e.handleSelectDown}},[e._v("向下选中")]),r("el-button",{attrs:{type:"primary",disabled:!e.tableSelection.length},on:{click:e.handleCancelDown}},[e._v("向下取消")])],1),r("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")]),r("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},u=[],d=(r("20d6"),r("75fc")),f=(r("6762"),r("2fdb"),r("a8db")),m=(r("c5f6"),r("037c"));function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={name:"MaterialSelect",mixins:[c["a"]],props:{value:{required:!0,type:Boolean},title:{type:String,default:"物料选择"},multiple:{type:Boolean,default:!0},selection:{type:Array,default:function(){return[]}},max:{type:Number,default:0},ids:{type:Array,default:function(){return[]}},extraInfo:{type:Object,default:function(){}}},dicts:[],data:function(){return{loading:!1,refName:"modelSelectMaterialSelect",query:{materialCodeOrName:""},tableData:[],columnList:[{module:"word",prop:"code",label:"物料编号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"name",label:"物料名称",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"spec",label:"规格型号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"assessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"description",label:"物料描述",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitMeasureName",label:"计量单位",align:"center",minWidth:175,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"type_dictText",label:"物料类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"minOutboundUnitName",label:"最小单位SKU",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"isExpirationDate",label:"是否有保质期",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center",formatter:function(e){return 0===e.isExpirationDate?"否":"是"}},{module:"word",prop:"materialGroupCode",label:"物料组编号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"materialGroupDescription",label:"物料组描述",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"dataSources_dictText",label:"数据来源",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"}],columnSets:[],tableSelection:[],deptSelectedInfo:{list:[],visible:!1,radio:""},rowObj:{},rowKey:"id"}},methods:{init:function(){var e=this,t=b({},this.query,{},this.extraInfo,{page:b({},this.pageInfo)});return new Promise((function(r,n){Object(m["d"])(b({},t)).then((function(t){var n=t.code,a=t.data;if(!n){var i=a.list,o=Object(f["a"])(a,["list"]);e.initPage(o),e.tableData=i;try{var l=e.tableSelection.map((function(t){return t[e.rowKey]})),c=e.tableData.filter((function(e){return l.includes(e.id)}));e.rowObj=c.length?c[c.length-1]:{};var s=e.rowKey;e.tableData.forEach((function(t){function r(e){var t=e[s];return l.some((function(e){return e===t}))}r(t)&&e.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(t,!0)}))}))}catch(u){}}e.loading=!1,r(t)})).catch((function(t){e.loading=!1,n(t)}))}))},sortChange:function(e){e.column,e.prop,e.order},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()},initSelect:function(){this.searchInit()},selectionChange:function(e){this.tableSelection=Object(d["a"])(e)},getDynamicRow:function(e){this.rowObj=e},handleSelectUp:function(){var e=this,t=this.tableSelection.map((function(t){return t[e.rowKey]})),r=this.tableData.filter((function(e){return t.includes(e.id)})),n=-1,a=[];Object.keys(this.rowObj).length&&(n=t.includes(this.rowObj.id)?this.tableData.findIndex((function(t){return t.id===e.rowObj.id})):this.tableData.findIndex((function(e){return e.id===r[r.length-1].id}))),this.tableData.forEach((function(t,r,i){-1!==n&&(r<n&&(a=[].concat(Object(d["a"])(a),[t])),e.rowObj=i[n])})),this.$nextTick((function(){a.forEach((function(r){!t.includes(r.id)&&e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(r,!0)}))}))},handleCancelUp:function(){var e=this,t=this.tableSelection.map((function(t){return t[e.rowKey]})),r=this.tableData.filter((function(e){return t.includes(e.id)})),n=-1,a=[];Object.keys(this.rowObj).length&&(n=t.includes(this.rowObj.id)?this.tableData.findIndex((function(t){return t.id===e.rowObj.id})):this.tableData.findIndex((function(e){return e.id===r[r.length-1].id}))),this.tableData.forEach((function(t,r,i){-1!==n&&(r<n&&(a=[].concat(Object(d["a"])(a),[t])),e.rowObj=i[n])})),this.$nextTick((function(){a.forEach((function(r){t.includes(r.id)&&e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(r,!1)}))}))},handleSelectDown:function(){var e=this,t=this.tableSelection.map((function(t){return t[e.rowKey]})),r=this.tableData.filter((function(e){return t.includes(e.id)})),n=-1,a=[];Object.keys(this.rowObj).length&&(n=t.includes(this.rowObj.id)?this.tableData.findIndex((function(t){return t.id===e.rowObj.id})):this.tableData.findIndex((function(e){return e.id===r[r.length-1].id}))),this.tableData.forEach((function(t,r,i){-1!==n&&(r>n&&(a=[].concat(Object(d["a"])(a),[t])),e.rowObj=i[n])})),this.$nextTick((function(){a.forEach((function(r){!t.includes(r.id)&&e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(r,!0)}))}))},handleCancelDown:function(){var e=this,t=this.tableSelection.map((function(t){return t[e.rowKey]})),r=this.tableData.filter((function(e){return t.includes(e.id)})),n=-1,a=[];Object.keys(this.rowObj).length&&(n=t.includes(this.rowObj.id)?this.tableData.findIndex((function(t){return t.id===e.rowObj.id})):this.tableData.findIndex((function(e){return e.id===r[r.length-1].id}))),this.tableData.forEach((function(t,r,i){-1!==n&&(r>n&&(a=[].concat(Object(d["a"])(a),[t])),e.rowObj=i[n])})),this.$nextTick((function(){a.forEach((function(r){t.includes(r.id)&&e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(r,!1)}))}))},beforeClose:function(e){this.$emit("input",!1),"function"===typeof e&&e(),this.tableSelection=new Array(0),this.$refs["filterItem"].resetFields()},handleConfirm:function(){this.$emit("confirm",this.tableSelection),this.beforeClose()},onDeptSelectConfirm:function(e){e.length&&(this.query.usedOffice=e[0].name)},selectable:function(e,t){return!this.selection.includes(e.id)}}},v=h,g=(r("b75c"),r("2877")),y=Object(g["a"])(v,s,u,!1,null,"dd968342",null),w=y.exports,O=r("5ea3"),x=r("c1df"),j=r.n(x);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}j.a.locale("zh-cn");var S=function(){return{no:"",contractNo:"",orderNo:"",supplierName:"",materialsUnit:"",deliveryDate:"",inspect:!0,orderType:"",remarks:"",status:null}},C={name:"InStorageConsignDeliveryAdd",components:{BaseMaterial:w},mixins:[c["a"]],data:function(){return{loading:!1,query:{},tableData:[],refTableName:"baseTableRef",columnList:[{module:"word",minWidth:null,label:"物料编码",sortable:!1,align:"center",headAlign:"center",resizable:!0,fixed:!1,prop:"materialCode"},{module:"word",minWidth:null,label:"物料名称",sortable:!1,align:"center",headAlign:"center",resizable:!0,fixed:!1,prop:"materialName"},{module:"word",minWidth:null,label:"规格型号",sortable:!1,align:"center",headAlign:"center",resizable:!0,fixed:!1,prop:"materialSpec"},{module:"word",minWidth:null,label:"评估类型",sortable:!1,align:"center",headAlign:"center",resizable:!0,fixed:!1,prop:"materialAssessType_dictText"},{module:"word",minWidth:null,label:"计量单位",sortable:!1,align:"center",headAlign:"center",resizable:!0,fixed:!1,prop:"unitMeasureName"},{module:"number",minWidth:160,label:"本次到货数量",sortable:!1,align:"center",headAlign:"center",setMin:function(e){return 0},resizable:!0,fixed:!1,prop:"deliveryNumber",handleChange:l.a.throttle((function(e){}),1e3),setPrecision:function(e){return 3},showOverflowTooltip:!1},{module:"number",minWidth:160,label:"单价",sortable:!1,align:"center",headAlign:"center",setMin:function(e){return 0},resizable:!0,fixed:!1,prop:"price",handleChange:l.a.throttle((function(e){}),1e3),setPrecision:function(e){return 2},showOverflowTooltip:!1}],params:{id:"",view:"add"},form:S(),rules:{deliveryDate:[{required:!0,message:"此项必填",trigger:"blur"}],inspect:[{required:!0,message:"此项必填",trigger:"blur"}]},currentRow:null,visible:!1,enabled:!0}},computed:{},watch:{},mounted:function(){this.params=this.$route.params,this.initBaseInfo()},methods:{initBaseInfo:function(){var e=this;this.loading=!0;var t={orderId:this.params.orderId};return new Promise((function(r,n){Object(O["s"])(t).then((function(t){var n=t.code,a=t.data;n||(e.form=k({},a),e.form.deliveryDate=a.deliveryDate||j()().format("YYYY-MM-DD")),e.loading=!1,r(t)})).catch((function(t){e.loading=!1,n(t)}))}))},handleNextStep:function(){var e=this;this.$refs["form"].validate((function(t){if(t)if(e.tableData.length)if(e.tableData.some((function(e){return 0===e.deliveryNumber})))e.$notify.error({title:"错误",message:"本次添加的物料到货数量有存在为0的情况，请调整"});else if(e.tableData.some((function(e){return 0===e.price})))e.$notify.error({title:"错误",message:"本次添加的物料有单价存在为0的情况，请调整"});else{var r={saveType:1,entity:{orderId:e.params.orderId,type:e.form.orderType,contractNo:e.form.contractNo,deliveryDate:e.form.deliveryDate,inspect:e.form.inspect,remarks:e.form.remarks},dmList:e.tableData.map((function(e){return{materialId:e.materialId,deliveryNumber:e.deliveryNumber,price:e.price}}))};Object(O["c"])(r).then((function(t){var r=t.code,n=t.data;r||(e.$set(e.form,"id",n),e.$store.dispatch("tagsView/delView",e.$route),e.$router.push({name:"InStorageConsignDeliveryModify",params:{view:"modify",orderId:e.params.orderId,id:e.form.id,type:e.form.orderType,routeName:e.$route.name}}))})).catch((function(e){}))}else e.$notify.warning({title:"警告",message:"请选择物料"})}))},handleDelete:function(e,t){var r=this;this.$confirm("此操作将永久删除选中信息, 是否继续?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning",cancelButtonClass:"btn-custom-cancel",lockScroll:!1}).then((function(){r.tableData.splice(t,1),r.$message({message:"删除成功",type:"success"})})).catch((function(){r.$notify.info({title:"消息",message:"已取消删除"})}))},handleRowClick:function(e){var t=e.row,r=e.column;e.cell,e.event;if(this.currentRow=t,"操作"===r.label)return!1},handleChooseMaterial:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=t.map((function(e){return k({},e,{materialCode:e.code,materialName:e.name,materialSpec:e.spec,materialAssessType_dictText:e.assessType_dictText,unitMeasureName:e.unitMeasureName,deliveryNumber:0,price:0,materialId:e.id})}));r.forEach((function(t){e.tableData.push(t)}))},handleGoBack:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({name:this.params.routeName,params:this.$route.query.extraInfo||{}})},handleCellStyle:function(e){var t=e.row,r={backgroundColor:t===this.currentRow?"#409EFF":""};return r}}},N=C,$=(r("f8a6"),Object(g["a"])(N,n,a,!1,null,"3666b20d",null));t["default"]=$.exports},ce7e:function(e,t,r){var n=r("63b6"),a=r("584a"),i=r("294c");e.exports=function(e,t){var r=(a.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*i((function(){r(1)})),"Object",o)}},e265:function(e,t,r){e.exports=r("ed33")},ed33:function(e,t,r){r("014b"),e.exports=r("584a").Object.getOwnPropertySymbols},f8a6:function(e,t,r){"use strict";var n=r("7689"),a=r.n(n);a.a}}]);
//# sourceMappingURL=InStorageConsignDeliveryAdd.9ae21ec7.js.map