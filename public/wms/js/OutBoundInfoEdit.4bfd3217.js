(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["OutBoundInfoEdit"],{1892:function(e,t,r){},3575:function(e,t,r){},"3d57":function(e,t,r){"use strict";t["a"]={data:function(){return{}},methods:{setTagsTitleMixins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e||this.$route.meta.title,i=Object.assign({},this.$route);t&&(r="".concat(r,"（").concat(t,"）"));var n=Object.assign({},i,{title:r});this.$store.dispatch("tagsView/updateVisitedView",n)},closeTagsMixins:function(){var e=Object.assign({},this.$route);this.$store.dispatch("tagsView/delView",e)},closeTagsBackMixins:function(){var e=Object.assign({},this.$route);this.$store.dispatch("tagsView/delView",e),this.$router.go(-1)}}}},"8e30":function(e,t,r){"use strict";var i=r("3575"),n=r.n(i);n.a},ba60:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"e",(function(){return o})),r.d(t,"g",(function(){return a})),r.d(t,"f",(function(){return l})),r.d(t,"k",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"h",(function(){return u})),r.d(t,"j",(function(){return d})),r.d(t,"i",(function(){return m}));var i=r("bc43");function n(e){return Object(i["a"])({url:"/outWarehouse/wmsStockOutDetail/detail",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/outWarehouse/wmsStockOut/add",method:"post",data:e})}function a(e){return Object(i["a"])({url:"/outWarehouse/wmsStockOut/edit",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/outWarehouse/wmsStockOut/detail",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/outWarehouse/wmsStockOutDetail/saveMaterialDetailInventory",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/outWarehouse/wmsStockOut/pageList",method:"post",data:e})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/outWarehouse/wmsStockOut/print",method:"post",data:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/outWarehouse/wmsStockOut/scanQROutWarehouse",method:"post",data:e,timeout:12e4})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/outWarehouse/wmsStockOut/saveStockOutMaterials",method:"post",data:e})}},c2f0:function(e,t,r){"use strict";var i=r("1892"),n=r.n(i);n.a},de0f:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-row",{staticClass:"clearfix"},[r("div",{staticClass:"fl"},[r("el-button",{on:{click:e.beforeClose}},[e._v("返回")])],1),r("div",{staticClass:"fr"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSave("form")}}},[e._v("保 存")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handlePrintTemplate}},[e._v("打印预览")])],1)]),r("el-row",[r("el-collapse",{attrs:{accordion:""}},[r("el-collapse-item",{attrs:{title:"单据信息"}},[r("el-descriptions",{attrs:{column:2}},[r("el-descriptions-item",{attrs:{label:"凭证日期"}},[e._v(e._s(e.form.documentDate||"---"))]),r("el-descriptions-item",{attrs:{label:"记账日期"}},[e._v(e._s(e.form.accountingDate||"---"))]),r("el-descriptions-item",{attrs:{label:"出货工厂"}},[e._v(e._s(e.form.shipmentFactoryName||"---"))]),r("el-descriptions-item",{attrs:{label:"单据编号"}},[e._v(e._s(e.form.billNumber||"---"))]),r("el-descriptions-item",{attrs:{label:"出货仓库"}},[e._v(e._s(e.form.shipmentWarehouseName||"---"))]),r("el-descriptions-item",{attrs:{label:"移动类型"}},[e._v(e._s(e.form.movementType||"---"))]),r("el-descriptions-item",{attrs:{label:"成本中心"}},[e._v(e._s(e.form.costCenterName||"---"))]),r("el-descriptions-item",{attrs:{label:"总账科目"}},[e._v(e._s(e.form.ledgerSubjects||"---"))]),r("el-descriptions-item",{attrs:{label:"资产"}},[e._v(e._s(e.form.asset||"---"))]),r("el-descriptions-item",{attrs:{label:"收货工厂"}},[e._v(e._s(e.form.receiptFactoryName||"---"))]),r("el-descriptions-item",{attrs:{label:"订单"}},[e._v(e._s(e.form.orderNumber||"---"))]),r("el-descriptions-item",{attrs:{label:"收货仓库"}},[e._v(e._s(e.form.receiptWarehouseName||"---"))]),r("el-descriptions-item",{attrs:{label:"项目"}},[e._v(e._s(e.form.project||"---"))]),r("el-descriptions-item",{attrs:{label:e.form.billType_dictText||"---"}},[e._v(e._s(e.form.affiliatedBillNumber||"---"))]),r("el-descriptions-item",{attrs:{label:"网络"}},[e._v(e._s(e.form.network||"---"))]),r("el-descriptions-item",{attrs:{label:"客户号"}},[e._v(e._s(e.form.custumerCode||"---"))]),r("el-descriptions-item",{attrs:{label:"转储单"}},[e._v(e._s(e.form.transferOrderNumber||"---"))])],1)],1)],1)],1),r("el-form",{ref:"form",staticClass:"clearfix",attrs:{model:e.form,rules:e.rules,inline:"","label-width":"80px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{prop:"type",label:"单据类型"}},[r("el-select",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"单据类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l([{value:1,label:"常规"},{value:2,label:"战略"}],(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{prop:"explanation",label:"说明"}},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{placeholder:"请填写说明"},model:{value:e.form.explanation,callback:function(t){e.$set(e.form,"explanation","string"===typeof t?t.trim():t)},expression:"form.explanation"}})],1),r("el-form-item",{staticClass:"fr",attrs:{prop:"stockOutNum",label:"数量"}},[r("span",[e._v(e._s(e.form.stockOutNum))])]),r("el-form-item",{staticClass:"fr",attrs:{prop:"stockOutItems",label:"出库项"}},[r("span",[e._v(e._s(e.form.stockOutItems))])])],1),r("el-row",[r("table-com",{ref:"baseTableRef",attrs:{loading:e.loading,index:!0,selection:!1,"table-data":e.form.detailList,"column-list":e.columnList,"operation-width":120,"table-column-sort":!1},on:{rowClick:e.handleRowClick,refresh:e.getDetail},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",disabled:!e.form.id},on:{click:function(r){return e.handleDetail(t.row)}}},[e._v("详细")])]}}])})],1),r("edit-dialog",{attrs:{"dialog-form":e.dialogForm,"edit-type":e.editType},on:{confirm:e.getDetail},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}})],1)},n=[],o=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),a=(r("96cf"),r("3b8d")),l=r("3d57"),s=r("1790"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{attrs:{center:!0,"append-to-body":!0,"close-on-press-escape":!1,"wrapper-closable":!1,title:e.title,size:"70%",direction:"btt",visible:e.value,"destroy-on-close":!0,"before-close":e.beforeClose},on:{open:e.initSelect}},[r("el-scrollbar",{staticClass:"query-more-scroll-drawer"},[r("div",{staticStyle:{"margin-bottom":"15px"}},[r("el-descriptions",{attrs:{border:"",direction:"vertical",column:3}},[r("el-descriptions-item",{attrs:{label:"物料编号"}},[e._v(e._s(e.form.materialCode))]),r("el-descriptions-item",{attrs:{label:"物料名称"}},[e._v(e._s(e.form.materialName))]),r("el-descriptions-item",{attrs:{label:"规格型号"}},[e._v(e._s(e.form.materialSpec))])],1)],1),r("div",{staticStyle:{"margin-bottom":"15px",overflow:"hidden"}},[r("el-button",{staticClass:"fl",attrs:{type:"primary"},on:{click:e.addBarcode}},[e._v("新增条码")])],1),r("div",{staticStyle:{"margin-bottom":"15px"}},[r("el-descriptions",[r("el-descriptions-item",{attrs:{label:"条码数量"}},[e._v(e._s(e.form.inventoryList?e.form.inventoryList.length:0))])],1)],1),r("table-com",{key:e.refreshKey,ref:"baseTableRef",attrs:{index:!0,selection:!1,"table-data":e.form.inventoryList||[],"column-list":e.columnList,"table-height-type":310,"operation-width":130,"show-operate":"","expand-list":e.expandList,"table-column-sort":!1},on:{rowClick:e.handleRowClick,refresh:e.init},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger"},on:{click:function(r){return e.form.inventoryList.splice(t.$index,1)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"drawer-footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("form")}}},[e._v("确 定")]),r("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1),r("material-barcode",{attrs:{selection:e.form.inventoryList?e.form.inventoryList.map((function(e){return e.id})):[],"extra-info":{materialId:e.form.materialId,warehouseId:e.form.warehouseId},"show-operate":!0},on:{confirm:e.onSelectedBarcode,syncBarcode:e.syncBarcode},model:{value:e.barcodeVisible,callback:function(t){e.barcodeVisible=t},expression:"barcodeVisible"}})],1)},u=[],d=r("1f49"),m=r("ba60");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(){return{materialCode:"",materialName:"",materialSpec:"",inventoryList:[]}},h={name:"InStorageInfoReceiptCom",components:{MaterialBarcode:d["a"]},mixins:[s["a"]],props:{value:{type:Boolean,default:!1},editType:{type:String,default:""},dialogForm:{type:Object,default:function(){return b({},p())}}},data:function(){return{title:"详细",refreshKey:(new Date).getTime(),form:p(),rules:{},columnList:[{module:"word",prop:"barcodeNumber",label:"条码号",align:"center",width:200,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"num",label:"数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"currentPosition",label:"位置",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"inWarehouseDate",label:"入库日期",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"inWarehouseDays",label:"在库时长(天)",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],expandList:[],barcodeVisible:!1}},watch:{dialogForm:{handler:function(e){"add"===this.editType?this.form=b({},p()):this.form=b({},e)}}},methods:{init:function(){var e=this;return new Promise((function(t,r){Object(m["b"])({id:e.form.id}).then((function(r){var i=r.code,n=r.data;i||(e.form=n),t(r)})).catch((function(e){r(e)}))}))},handleConfirm:function(){var e=this;Object(m["k"])(b({},this.form)).then((function(t){var r=t.code;r||(e.$emit("confirm"),e.beforeClose())})).catch((function(e){}))},handleRowClick:function(e){e.row,e.rowIndex;var t=e.column;e.cell,e.event;if("操作"===t.label)return!1},initSelect:function(){this.init()},beforeClose:function(e){this.$emit("input",!1),this.form=Object.assign({},b({},p())),"function"===typeof e&&e()},addBarcode:function(){this.barcodeVisible=!0},onSelectedBarcode:function(e){e.length?this.form.inventoryList=e.map((function(e){return{id:e.id,batchNo:e.batchNo,barcodeNumber:e.barcodeNumber,num:e.num,unitMeasureId:e.unitMeasureId,unitName:e.unitName,storageId:e.storageId,currentPosition:e.currentPosition,inWarehouseDate:e.inWarehouseDate,inWarehouseDays:e.inWarehouseDays}})):this.form.inventoryList=[]},syncBarcode:function(e){this.form.inventoryList=this.form.inventoryList.filter((function(t){return t.id!==e.id}))}}},v=h,g=(r("8e30"),r("2877")),y=Object(g["a"])(v,c,u,!1,null,"2df8a867",null),w=y.exports,O=r("fa7d");function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=function(){return{documentDate:"",accountingDate:"",receiptFactoryName:"",billNumber:"",receiptWarehouse:"",movementType:"",costCenterName:"",ledgerSubjects:"",supplierName:"",buyerName:"",buyerTel:"",asset:"",purchaseOrderNumber:"",network:"",orderNumber:"",project:"",contractCode:"",type:"",explanation:"",detailList:[]}},k={name:"OutBoundInfoEdit",components:{EditDialog:w},mixins:[l["a"],s["a"]],data:function(){return{title:this.$route.meta.title,loading:!1,form:x(),tableData:[],columnList:[{module:"word",prop:"materialCode",label:"物料编码",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialSpec",label:"规格型号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialAssessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"num",label:"数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],rules:{type:[{required:!0,message:"请选择单据类型",trigger:"change"}]},dialogForm:{},editType:"",dialogVisible:!1}},computed:{routeQuery:function(){var e=this.$route.query,t=e.billNumber,r=e.billType;return{billNumber:t,billType:r}},routeParams:function(){var e=this.$route.params.billNumber;return{billNumber:e}}},mounted:function(){this.getDetail()},methods:{getDetail:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["c"])(Object(m["f"])({billNumber:this.routeParams.billNumber}));case 2:if(t=e.sent,t.success){e.next=5;break}return e.abrupt("return");case 5:this.form=t.data;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSave:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}return i=j({},t.form),e.next=4,Object(O["c"])(Object(m["g"])(i));case 4:if(n=e.sent,n.success){e.next=7;break}return e.abrupt("return");case 7:t.$message({message:"操作成功",type:"success"}),t.getDetail(),e.next=13;break;case 11:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},beforeClose:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({name:"OutBoundInfoDetail",params:{billNumber:this.routeQuery.billNumber,billType:this.routeQuery.billType}})},handleRowClick:function(e){e.row;var t=e.column;e.cell,e.event;if("操作"===t.label)return!1},handleDetail:function(e){this.editType="detail",this.dialogForm=j({},e),this.dialogVisible=!0},handlePrintTemplate:function(){var e=this;return new Promise((function(t,r){Object(m["h"])({billNumber:e.form.billNumber}).then((function(e){var r=e.code,i=e.data;r||window.open("https://192.168.1.7:9005/api/wms"+i),t(e)})).catch((function(e){r(e)}))}))}}},N=k,C=(r("c2f0"),Object(g["a"])(N,i,n,!1,null,"f1e23890",null));t["default"]=C.exports}}]);
//# sourceMappingURL=OutBoundInfoEdit.4bfd3217.js.map