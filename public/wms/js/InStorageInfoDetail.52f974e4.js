(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["InStorageInfoDetail"],{e08f:function(e,t,r){"use strict";r("8e6e"),r("ac6a"),r("456d"),r("7514");var n=r("bd86");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t["a"]={data:function(){return{formIdent:"",tableData:[],columnList:[],expandList:[],tableColumnSortData:[],labels:{},refreshKey:1}},methods:{initTableHeadMixins:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"word",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"columnSets",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,o=t.map((function(e){return i({isParam:!1},e,{width:"input"!==r||e.width?e.width:a,module:r})})).map((function(t){var r=e[n].find((function(e){return e.prop===t.prop}));return r?i({},t,{},r):i({},t)}));return this.$nextTick((function(){"word"===r&&(e.expandList=o.filter((function(e){return e.extend&&e.show})))})),this.$nextTick((function(){e.refreshKey+=1})),o.filter((function(e){return e.show&&!e.extend}))}}}},ee64:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-descriptions",{attrs:{title:"交接单详情"},scopedSlots:e._u([{key:"extra",fn:function(){return[r("el-button",{attrs:{type:"primary",disabled:!([3,4].includes(e.baseInfo.status)&&e.baseInfo.canStockInMatarialCount>0)},on:{click:e.handleInWarehouse}},[e._v("入库")])]},proxy:!0}])}),r("el-row",[r("el-descriptions",{attrs:{border:!1,column:4}},[r("el-descriptions-item",{attrs:{label:"单据类型"}},[r("el-tag",{directives:[{name:"show",rawName:"v-show",value:e.baseInfo.type_dictText,expression:"baseInfo.type_dictText"}],attrs:{type:e.typeMap[e.baseInfo.type]}},[e._v(e._s(e.baseInfo.type_dictText))])],1),r("el-descriptions-item",{attrs:{label:"合同号"}},[e._v(e._s(e.baseInfo.contractNo))]),r("el-descriptions-item",{attrs:{label:"采购订单号"}},[e._v(e._s(e.baseInfo.orderNo))]),r("el-descriptions-item",{attrs:{label:"供应商"}},[e._v(e._s(e.baseInfo.supplierName))]),r("el-descriptions-item",{attrs:{label:"单号"}},[e._v(e._s("5"!==e.baseInfo.type?e.baseInfo.no:e.baseInfo.inspectNo))]),r("el-descriptions-item",{attrs:{label:"日期"}},[e._v(e._s(e.baseInfo.deliveryDate))])],1)],1),r("material-list"),r("el-descriptions",{attrs:{title:"已入库信息"}}),r("div",{staticClass:"clearfix top-filter"},[r("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""}},[r("el-form-item",{staticClass:"fl",attrs:{prop:"billNumber"}},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{clearable:"",placeholder:"单号"},model:{value:e.query.billNumber,callback:function(t){e.$set(e.query,"billNumber","string"===typeof t?t.trim():t)},expression:"query.billNumber"}})],1),r("el-form-item",{staticClass:"fl",attrs:{prop:"source"}},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{clearable:"",placeholder:"来源"},model:{value:e.query.source,callback:function(t){e.$set(e.query,"source","string"===typeof t?t.trim():t)},expression:"query.source"}})],1),r("el-form-item",{staticClass:"fl",attrs:{prop:"storekeeper"}},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{clearable:"",placeholder:"库管员"},model:{value:e.query.storekeeper,callback:function(t){e.$set(e.query,"storekeeper","string"===typeof t?t.trim():t)},expression:"query.storekeeper"}})],1),r("el-form-item",{staticClass:"fl",attrs:{prop:"date"}},[r("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"时间"},model:{value:e.query.date,callback:function(t){e.$set(e.query,"date",t)},expression:"query.date"}})],1),r("el-button",{staticClass:"fl filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),r("el-button",{staticClass:"fl filter-item",attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")])],1)],1),r("el-row",[r("table-com",{ref:"baseTableRef",attrs:{"ref-name":"baseTableRef","table-height-type":"fullscreenTab","has-top-query":"",loading:e.loading,index:!0,selection:!1,"table-data":e.tableData,"column-list":e.columnList,"operation-width":220,"table-column-sort":!1},on:{rowClick:e.handleRowClick,refresh:e.searchInit},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.handleModify(t.row)}}},[e._v("详情")]),r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.handlePrintTemplate(t.row)}}},[e._v("打印")]),r("el-button",{attrs:{type:"danger"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}}),r("print-templates",{attrs:{title:"打印模板","extra-info":e.curRow},model:{value:e.dlgVisible,callback:function(t){e.dlgVisible=t},expression:"dlgVisible"}})],1)},a=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("a8db")),o=r("bd86"),l=(r("c5f6"),r("c1df")),s=r.n(l),c=r("1790"),u=r("3d57"),d=r("bc43");function f(e){return Object(d["a"])({url:"/enterWarehouse/wmsStockIn/pageList",method:"post",data:e})}function p(e){return Object(d["a"])({url:"/enterWarehouse/wmsStockIn/del",method:"post",data:e})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(d["a"])({url:"/enterWarehouse/wmsStockIn/edit",method:"post",data:e})}var b=r("ffee"),h=r("42ad"),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",[r("table-com",{ref:e.refTableName,attrs:{"ref-name":e.refTableName,"table-height-type":"half",loading:e.loading,index:!0,"table-column-sort":!0,"form-ident":e.formIdent,"table-data":e.tableData,"column-list":e.columnList,"operation-width":270,"expand-list":e.expandList,"refresh-key":e.refreshKey,"show-operate":!1},on:{rowClick:e.handleRowClick,refresh:e.searchInit}})],1),r("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1)},y=[],w=r("e08f");function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I={mixins:[c["a"],w["a"]],data:function(){return{refTableName:"deliveryOrderTableRef",loading:!1,tableData:[],columnList:[{module:"word",prop:"materialCode",label:"物料编码",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialSpec",label:"规格型号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialAssessType_dictText",label:"评估类型",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"deliveryNumber",label:"本次到货数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialTotalPrice",label:"物料总价",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"stockInNumber",label:"已入库数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"statusStr",label:"状态",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"}],columnSets:[]}},mounted:function(){this.init()},methods:{init:function(){var e=this;this.loading=!0;var t={page:O({},this.pageInfo),deliveryReceiptId:this.$route.params.id};return new Promise((function(r,n){Object(b["c"])(O({},t)).then((function(t){var n=t.code,a=t.data;if(!n){var o=a.list,l=Object(i["a"])(a,["list"]);e.initPage(l),e.tableData=o}e.loading=!1,r(t)})).catch((function(t){e.loading=!1,n(t)}))}))},handleRowClick:function(e){e.row;var t=e.column;e.cell,e.event;if("操作"===t.label)return!1}}},x=I,j=r("2877"),k=Object(j["a"])(x,g,y,!1,null,"158d7887",null),D=k.exports,P=r("d689");function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}s.a.locale("zh-cn");var _={name:"InStorageInfoDelivery",components:{MaterialList:D,PrintTemplates:P["a"]},mixins:[u["a"],c["a"],h["a"]],props:{orderId:{type:[Number,String],default:""}},data:function(){var e=this;return{title:this.$route.meta.title,loading:!1,query:{billNumber:"",source:"",storekeeper:"",date:""},tableData:[],columnList:[{module:"word",prop:"billNumber",label:"入库单号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"date",prop:"documentDate",label:"凭证日期",align:"center",minWidth:150,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",clearable:!0,disabled:!1,handleChange:function(t){return e.stockInEdit(t)},pickerOptions:function(t){return{disabledDate:function(t){return t.getTime()<new Date(e.startDate).getTime()||t.getTime()>new Date(e.endDate).getTime()}}}},{module:"date",prop:"accountingDate",label:"记账日期",align:"center",minWidth:150,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",handleChange:function(t){return e.stockInEdit(t)},clearable:!0,pickerOptions:function(t){return{disabledDate:function(t){return t.getTime()<new Date(e.startDate).getTime()||t.getTime()>new Date(e.endDate).getTime()}}}},{module:"word",prop:"source",label:"来源（供应商或生产单位）",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"storekeeper",label:"库管员",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"printTimes",label:"打印次数",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"createDate",label:"入库日期",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"input",prop:"explanation",label:"备注",align:"center",minWidth:150,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",clearable:!0,handleChange:function(t){return e.stockInEdit(t)}}],columnSets:[],dialogForm:{},supplierPullList:[],editType:"add",dialogVisible:!1,params:{},baseInfo:{},typeMap:{1:"success",2:"primary",3:"warning",4:"info"},dlgVisible:!1,curRow:{}}},computed:{dialogTitle:function(){return"add"===this.editType?"新增".concat(this.title,"信息"):"编辑".concat(this.title,"信息")},startDate:function(){return s()().startOf("month").format("YYYY-MM-DD HH:mm:ss")},endDate:function(){return s()().endOf("month").format("YYYY-MM-DD HH:mm:ss")}},mounted:function(){this.params=this.$route.params,this.init(),this.initInfo()},methods:{init:function(e){var t=this;this.loading=!0;var r=T({},this.query,e?{deliveryReceiptId:this.params.id}:{deliveryReceiptId:this.params.id,page:T({},this.pageInfo)});return new Promise((function(e,n){f(T({},r)).then((function(r){var n=r.code,a=r.data;if(!n){var o=a.list,l=Object(i["a"])(a,["list"]);t.initPage(l),t.tableData=o}t.loading=!1,e(r)})).catch((function(e){t.loading=!1,n(e)}))}))},initInfo:function(){var e=this;return new Promise((function(t,r){Object(b["b"])({deliveryReceiptId:e.orderId}).then((function(r){var n=r.code,a=r.data;n||(e.baseInfo=a,e.baseInfo.orderNo&&e.setTagsTitleMixins(null,e.baseInfo.orderNo)),t(r)})).catch((function(e){r(e)}))}))},handleRowClick:function(e){var t=e.row,r=e.column;e.cell,e.event;if("操作"===r.label)return!1;this.rightObj=T({},t)},refresh:function(){this.init("clean")},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除选中信息, 是否继续?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning",cancelButtonClass:"btn-custom-cancel",lockScroll:!1}).then((function(){p({entity:{id:e.id}}).then((function(e){var r=e.code;r||(t.$notify.success({title:"成功",message:"删除成功"}),t.init())}))})).catch((function(e){t.$notify.info({title:"消息",message:"已取消删除"})}))},handleAdd:function(){this.editType="add",this.dialogForm={},this.dialogVisible=!0},handleModify:function(e){this.$router.push({name:"InStorageInfoDelivery",params:{orderId:this.orderId,id:e.id}})},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()},stockInEdit:function(e){var t=this,r=e.accountingDate,n=e.documentDate,a=e.explanation,i=e.id,o={entity:{id:i,accountingDate:r,documentDate:n,explanation:a}};return new Promise((function(e,r){m(o).then((function(r){var n=r.code;n||t.init(),e(r)})).catch((function(e){r(e)}))}))},handlePrintTemplate:function(e){this.handlePrint(e.id)},handleInWarehouse:function(e){this.$router.push({name:"InStorageInfoAdd",params:{id:this.orderId}})}}},C=_,W=Object(j["a"])(C,n,a,!1,null,"6ed8a4b4",null);t["default"]=W.exports},ffee:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return l})),r.d(t,"a",(function(){return s}));var n=r("bc43");function a(e){return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/deliveryReceiptDetail",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/deliveryMaterialPageList",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/materialAndBarcodeWithoutStorageId",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/saveBarcodeStoragePositionWithoutStorageId",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/addPutInStorage",method:"post",data:e})}}}]);
//# sourceMappingURL=InStorageInfoDetail.52f974e4.js.map