(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["OutBoundMaterialRequisition"],{"170e":function(e,t,i){},"32a6":function(e,t,i){var n=i("241e"),r=i("c3a1");i("ce7e")("keys",(function(){return function(e){return r(n(e))}}))},"38aa":function(e,t,i){"use strict";var n=i("170e"),r=i.n(n);r.a},"597b":function(e,t,i){"use strict";var n=i("6836"),r=i.n(n);r.a},"5a53":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.uploadLoading,expression:"uploadLoading"}],staticClass:"app-container",attrs:{"element-loading-text":"上传中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("div",{staticClass:"top-filter clearfix",staticStyle:{"margin-bottom":"10px"}},[i("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{prop:"billNumber"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"领料单单号"},model:{value:e.query.billNumber,callback:function(t){e.$set(e.query,"billNumber",t)},expression:"query.billNumber"}})],1),i("el-form-item",{attrs:{prop:"status"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"状态"},model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}},e._l([{name:"未处理",id:1},{name:"待完成",id:2},{name:"已完成",id:3}],(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{prop:"createDate"}},[i("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"创建日期"},model:{value:e.query.createDate,callback:function(t){e.$set(e.query,"createDate",t)},expression:"query.createDate"}})],1),i("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),i("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")]),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["wms:outWarehouse-wmsBillMaterialRequisition:add"],expression:"['wms:outWarehouse-wmsBillMaterialRequisition:add']"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),i("el-row",[i("table-com",{ref:"baseTableRef",attrs:{loading:e.loading,selection:!1,"table-column-sort":!0,"form-ident":e.formIdent,"table-data":e.tableData,"column-list":e.columnList,"operation-width":230,"refresh-key":e.refreshKey,"expand-list":e.expandList},on:{rowClick:e.handleRowClick,sortChange:e.handleSortChange,refresh:e.searchInit},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.handleDetail(t.row)}}},[e._v("详细")]),i("el-button",{attrs:{type:"warning",disabled:3===t.row.status},on:{click:function(i){return e.handleSplit(t.row)}}},[e._v("拆分")]),i("el-button",{attrs:{type:"warning",disabled:3===t.row.status},on:{click:function(i){return e.handleOneKeySplit(t.row)}}},[e._v("一键拆分")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(i){return e.handlePrint(t.row)}}},[e._v("打印")])]}}])})],1),i("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}}),i("edit-dialog",{attrs:{"dialog-form":e.dialogForm,"dialog-type":e.dialogType,title:e.dialogTitle},on:{submit:e.init},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}}),i("onekey-split-dialog",{attrs:{"extra-info":{billNumber:e.curLLOrderNo},title:"一建拆分"},on:{submit:e.oneKeySplitConfirm},model:{value:e.splitDialog,callback:function(t){e.splitDialog=t},expression:"splitDialog"}})],1)},r=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("a8db")),a=i("bd86"),l=i("6fe3"),s=i("9a2e"),u=i("1790"),c=i("e08f"),d=i("333d"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{attrs:{center:!0,"append-to-body":!0,"close-on-press-escape":!1,"wrapper-closable":!1,title:e.title,size:"50",visible:e.value,"destroy-on-close":!0,"before-close":e.beforeClose},on:{open:e.initSelect}},[i("el-form",{ref:"form",attrs:{model:e.form,inline:"",rules:e.rules,"label-width":"120px"}},[i("el-scrollbar",{staticClass:"scroll-drawer"},[i("el-form-item",{attrs:{label:"交接单号",prop:"billNumber"}},[i("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.billNumber,callback:function(t){e.$set(e.form,"billNumber","string"===typeof t?t.trim():t)},expression:"form.billNumber"}})],1),i("el-form-item",{attrs:{label:"日期",prop:"date"}},[i("el-date-picker",{staticStyle:{width:"178px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),i("el-form-item",{attrs:{label:"合同号/WBS号",prop:"contractWbsNumber"}},[i("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.contractWbsNumber,callback:function(t){e.$set(e.form,"contractWbsNumber","string"===typeof t?t.trim():t)},expression:"form.contractWbsNumber"}})],1)],1),i("div",{staticClass:"drawer-footer"},[i("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.handleConfirm("form")}}},[e._v(e._s(e.loading?"提交中 ...":"确 定"))]),i("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)],1)},m=[],p=(i("7f7f"),i("09db"));function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function b(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var g=function(){return{billNumber:"",date:"",contractWbsNumber:""}},v=[{label:"物料编号",prop:"materialCode"},{label:"物料名称",prop:"materialName"},{label:"规格型号",prop:"materialSpec"},{label:"评估类型",prop:"assessType_dictText"},{label:"计量单位",prop:"unitName"}],y={name:"CustomerInfoDialogComs",components:{},props:{value:{type:Boolean,default:!1},title:{type:String,default:""},dialogType:{type:String,default:"add"},dialogForm:{type:Object,default:function(){return b({},g())}}},data:function(){return{form:g(),loading:!1,selectInfo:{list:[],visible:!1,radio:""},formThead:v,rules:{billNumber:[{required:!0,message:"请输入交接单号",trigger:"blur"}],warehouseId:[{required:!0,message:"请选择仓库",trigger:"change"}],date:[{required:!0,message:"请选择日期",trigger:"change"}]},gradeOpts:[],warehousePullList:[]}},watch:{dialogForm:{handler:function(e){"add"===this.dialogType?this.form=b({},g(),{date:this.getCurrentDate()}):this.form=b({},e)},immediate:!0}},methods:{initSelect:function(){},handleConfirm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var i={add:l["g"],modify:l["m"]}[t.dialogType||"add"];t.loading=!0,i(b({},t.form)).then((function(e){var i=e.code;i||(t.$message({message:"操作成功",type:"success"}),t.$emit("submit"),t.beforeClose()),t.loading=!1})).catch((function(e){t.loading=!1}))}))},getCurrentDate:function(){var e=new Date,t={y:e.getFullYear(),m:e.getMonth()+1<10?"0".concat(e.getMonth()+1):e.getMonth()+1,d:e.getDate()<10?"0".concat(e.getDate()):e.getDate()};return"".concat(t.y,"-").concat(t.m,"-").concat(t.d)},handleDel:function(e){var t=e.id;this.form.detailList=this.form.detailList.filter((function(e){return e.id!==t}))},onSelectConfirm:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length&&t.forEach((function(t){e.form.detailList.push(b({},t,{materialId:t.id,materialCode:t.code,materialName:t.name,materialSpec:t.spec,unitName:t.unitMeasureName,needNum:0}))}))},openMaterialDlg:function(){this.selectInfo.visible=!0},beforeClose:function(e){this.$emit("input",!1),"function"===typeof e&&e(),this.$refs.form.resetFields(),this.form=Object.assign({},b({},g()))},getWarehousePullList:function(){var e=this;return new Promise((function(t,i){Object(p["h"])().then((function(i){var n=i.code,r=i.data;n||(e.warehousePullList=r||[]),t(i)})).catch((function(e){i(e)}))}))}}},w=y,O=(i("597b"),i("2877")),j=Object(O["a"])(w,f,m,!1,null,"f3cdf0fc",null),S=j.exports,P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.title,top:"5vh",visible:e.value,"show-close":!0,width:"920px","lock-scroll":!1,"destroy-on-close":!0,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{open:e.initSelect}},[i("div",{staticClass:"clearfix top-filter"},[i("el-form",{ref:"form",attrs:{model:e.form,inline:"",rules:e.rules}},[i("el-form-item",{attrs:{prop:"needDate",label:"需求日期："}},[i("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{align:"center",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.form.needDate,callback:function(t){e.$set(e.form,"needDate",t)},expression:"form.needDate"}})],1)],1)],1),i("el-row",[i("table-com",{ref:"baseTableRef",attrs:{loading:e.loading,"table-height-type":490,selection:!1,"row-key":"id","table-column-sort":!1,"table-data":e.form.detailList,"column-list":e.columnList,"operation-width":120,"show-operate":!1,"refresh-key":e.refreshKey},on:{rowClick:e.handleRowClick,refresh:e.searchInit}})],1),i("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}}),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.confirmDialog}},[e._v("确 定")]),i("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},D=[],x=(i("c5f6"),i("2ef0")),L=i.n(x),N=i("6bbd");function k(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function C(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?k(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var B=function(){return{needDate:"",detailList:[]}},M={name:"MaterialSelect",components:{},mixins:[u["a"],N["a"]],props:{value:{required:!0,type:Boolean},title:{type:String,default:"仓库"},multiple:{type:Boolean,default:!0},selection:{type:Array,default:function(){return[]}},max:{type:Number,default:0},ids:{type:Array,default:function(){return[]}},extraInfo:{type:Object,default:function(){}}},dicts:[],data:function(){return{loading:!1,refName:"modelSelectMaterialSelect",form:B(),rules:{needDate:[{required:!0,message:"请选择需求日期",trigger:"blur"}]},columnList:[{module:"word",prop:"warehouseSapName",label:"SAP仓库",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialCode",label:"物料编码",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialAssessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"inventoryNum",label:"库存数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"number",prop:"needNum",label:"需求数量",align:"center",minWidth:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",isShow:function(e){return!0},getDisplay:function(e){return""},disabled:function(e){return!1},setMin:function(e){return 0},setMax:function(e){return e.needMaxNum},setPrecision:function(e){return 3},handleChange:L.a.throttle((function(e){}),1e3),showOverflowTooltip:!1},{module:"word",prop:"needDate",label:"需求日期",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialGroupCode",label:"物料组",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialGroupDesc",label:"物料组描述",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],refreshKey:1}},methods:{initSelect:function(){this.form.needDate=this.getCurrentDate(),this.searchInit()},init:function(){var e=this,t=C({},this.query,{requisitionNumber:this.extraInfo.billNumber,page:C({},this.pageInfo)});return this.loading=!0,new Promise((function(i,n){Object(l["n"])(C({},t)).then((function(t){var n=t.code,r=t.data;if(!n){var a=r.list,l=Object(o["a"])(r,["list"]);e.initPage(l),e.form.detailList=a.map((function(e){var t=e.needNum-e.splitNum;return C({},e,{needNum:t>e.inventoryNum?e.inventoryNum:t,needMaxNum:t>e.inventoryNum?e.inventoryNum:t})}))}e.loading=!1,i(t)})).catch((function(t){e.loading=!1,n(t)}))}))},getCurrentDate:function(){var e=new Date,t={y:e.getFullYear(),m:e.getMonth()+1<10?"0".concat(e.getMonth()+1):e.getMonth()+1,d:e.getDate()<10?"0".concat(e.getDate()):e.getDate()};return"".concat(t.y,"-").concat(t.m,"-").concat(t.d)},handleRowClick:function(e){e.row;var t=e.column;e.cell,e.event;if("操作"===t.label)return!1},confirmDialog:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.$emit("submit",C({},e.form)),e.beforeClose()}))},handleUpdateTableSelected:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},beforeClose:function(e){this.$refs.form.resetFields(),this.$emit("input",!1),this.form=B(),"function"===typeof e&&e()},onDeptSelectConfirm:function(e){e.length&&(this.form.usedOffice=e[0].name)}}},q=M,_=(i("38aa"),Object(O["a"])(q,P,D,!1,null,"4a35e6fe",null)),$=_.exports,I=i("dc8f"),W=i("2f62");function F(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function R(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?F(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):F(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var A={components:{Pagination:d["a"],EditDialog:S,OnekeySplitDialog:$},mixins:[u["a"],c["a"],s["a"]],data:function(){return{query:{billNumber:"",status:"",createDate:""},dialogForm:{},title:this.$route.meta.title,loading:!1,tableData:[],custumerPullList:[],dialogType:"add",dialogVisible:!1,columnSets:[{module:"status",prop:"status",formatter:function(e){return I["j"][e-1]},statusFormatter:function(e){var t={1:"info",2:"primary",3:"warning"};return e.status?t[e.status]:""}},{prop:"date",sortable:"custom"}],uploadLoading:!1,splitDialog:!1,curLLOrderNo:"",orderBy:""}},computed:R({dialogTitle:function(){return"add"===this.dialogType?"新增".concat(this.title):"编辑".concat(this.title)}},Object(W["c"])("app",{navbarWarehouseCheckedList:"navbarWarehouseCheckedList"})),watch:{navbarWarehouseCheckedList:{handler:function(){this.init()},deep:!0}},mounted:function(){this.init(),this.getcustumerPullList()},methods:{init:function(){var e=this;return this.loading=!0,new Promise((function(t,i){Object(l["q"])(R({},e.orderBy&&{orderBy:e.orderBy},{page:R({},e.pageInfo)},e.query,{warehouseIds:e.navbarWarehouseCheckedList.map((function(e){return e.id}))})).then((function(i){var n=i.code,r=i.data;if(!n){var a=r.formIdent,l=r.formHeadSets,s=r.pageData;e.formIdent=a,e.columnList=e.initTableHeadMixins(l);var u=s.list,c=Object(o["a"])(s,["list"]);e.initPage(c),e.tableData=u}e.loading=!1,t(i)})).catch((function(t){e.loading=!1,i(t)}))}))},handleAdd:function(){this.dialogType="add",this.dialogForm={},this.dialogVisible=!0},getcustumerPullList:function(){var e=this;return new Promise((function(t,i){Object(l["r"])({}).then((function(i){var n=i.code,r=i.data;n||(e.custumerPullList=r||[]),t(i)})).catch((function(e){i(e)}))}))},handleModify:function(e){this.getDetail(e),this.dialogType="modify",this.dialogVisible=!0},getDetail:function(e){var t=this;return new Promise((function(i,n){Object(l["k"])({billNumber:e.billNumber}).then((function(e){var n=e.code,r=e.data;n||(t.dialogForm=r||{},t.dialogVisible=!0,i(e))})).catch((function(e){n(e)}))}))},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该".concat(this.title,", 是否继续?"),"提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",cancelButtonClass:"btn-custom-cancel",type:"warning",lockScroll:!1}).then((function(){e.id&&Object(l["h"])({id:e.id,dataSources:e.dataSources}).then((function(e){var i=e.code;i||(t.$message({message:"删除成功",type:"success"}),t.init())}))})).catch((function(){t.$message({message:"已取消删除",type:"info"})}))},handleDetail:function(e){this.$router.push({name:"OutBoundMaterialRequisitionDetail",params:{billNumber:e.billNumber}})},handleSplit:function(e){this.$router.push({name:"OutBoundMaterialRequisitionSplit",params:{billNumber:e.billNumber}})},handleOneKeySplit:function(e){this.splitDialog=!0,this.curLLOrderNo=e.billNumber},oneKeySplitConfirm:function(e){var t=this;return new Promise((function(i,n){Object(l["t"])(R({},e,{requisitionNumber:t.curLLOrderNo})).then((function(e){var n=e.code;n||(t.$message({message:"拆分成功",type:"success"}),t.init()),i(e)})).catch((function(e){n(e)}))}))},handlePrint:function(e){var t=e.billNumber,i={billNumber:t};return new Promise((function(e,t){Object(l["v"])(R({},i)).then((function(t){var i=t.code,n=t.data;i||window.open("https://192.168.1.7:9005/api/wms"+n),e(t)})).catch((function(e){t(e)}))}))},handleRowClick:function(e){e.row;var t=e.column;e.cell,e.event;if("操作"===t.label)return!1},handleOpenUploadLoading:function(){this.uploadLoading=!0},handleCloseUploadLoading:function(){this.uploadLoading=!1},handleUploadSuccess:function(){this.init(),this.$notify.success({title:"成功",message:"上传成功"})},resetForm:function(e){this.orderBy="",this.refreshKey++,this.$refs[e].resetFields(),this.searchInit()},downloadTemplate:function(){window.open("".concat("https://192.168.1.7:9005/api/wms","/outWarehouse/wmsBillMaterialRequisition/downloadImportTemplate"))},handleSortChange:function(e){e.column;var t=e.prop,i=e.order;if("date"===t){var n={descending:"desc",ascending:"asc"};this.orderBy=i?"".concat(t," ").concat(n[i]):"",this.orderBy&&this.init()}}}},E=A,T=Object(O["a"])(E,n,r,!1,null,null,null);t["default"]=T.exports},6836:function(e,t,i){},"6fe3":function(e,t,i){"use strict";i.d(t,"q",(function(){return r})),i.d(t,"r",(function(){return o})),i.d(t,"g",(function(){return a})),i.d(t,"m",(function(){return l})),i.d(t,"h",(function(){return s})),i.d(t,"c",(function(){return u})),i.d(t,"k",(function(){return c})),i.d(t,"v",(function(){return d})),i.d(t,"t",(function(){return f})),i.d(t,"n",(function(){return m})),i.d(t,"o",(function(){return p})),i.d(t,"i",(function(){return h})),i.d(t,"d",(function(){return b})),i.d(t,"l",(function(){return g})),i.d(t,"a",(function(){return v})),i.d(t,"w",(function(){return y})),i.d(t,"b",(function(){return w})),i.d(t,"p",(function(){return O})),i.d(t,"e",(function(){return j})),i.d(t,"x",(function(){return S})),i.d(t,"u",(function(){return P})),i.d(t,"s",(function(){return D})),i.d(t,"f",(function(){return x})),i.d(t,"j",(function(){return L}));var n=i("bc43");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisition/pageList",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisition/listItem",method:"post",data:e})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisition/add",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisition/edit",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisition/delete",method:"post",data:e})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionDetail/batchDelete",method:"post",data:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisition/detail",method:"post",data:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisition/print",method:"post",data:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionSub/oneKeySplit",method:"post",data:e})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionDetail/pageList",method:"post",data:e})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionDetail/pageList",method:"post",data:e})}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisition/detail",method:"post",data:e})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionDetail/delete",method:"post",data:e})}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionDetail/edit",method:"post",data:e})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionSub/add",method:"post",data:e})}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/basic/wmsMaterial/getListByCode",method:"post",data:e})}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionDetail/batchAdd",method:"post",data:e})}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionSub/pageList",method:"post",data:e})}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionSub/delete",method:"post",data:e})}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionSub/submit",method:"post",data:e})}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionSub/print",method:"post",data:e})}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionSub/listItem",method:"post",data:e})}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionSub/edit",method:"post",data:e})}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillMaterialRequisitionSub/detail",method:"post",data:e})}},"8aae":function(e,t,i){i("32a6"),e.exports=i("584a").Object.keys},"9a2e":function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));i("28a5");var n=i("cddf"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{display:"inline-block"}},[e._t("pic"),i("el-upload",{ref:"upload",attrs:{sizi:"mini",action:""+e.BASE_API+e.url,headers:e.headers,accept:e.accept,"before-upload":e.beforeUpload,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:e.limit>1,limit:e.limit,"on-exceed":e.handleExceed,"file-list":e.fileList,"on-preview":e.handlePreview,"show-file-list":e.showFileList,"on-success":e.handleUploadSuccess,disabled:e.disabled,"on-progress":e.handleUploadProgress,"on-error":e.handleError}},[e.btnContent?i("el-button",{attrs:{type:"primary",size:"mini",icon:e.btnIcon,disabled:e.disabled}},[e._v("\n      "+e._s(e.btnContent)+"\n    ")]):i("el-button",{attrs:{type:"primary",size:"mini",icon:e.btnIcon,disabled:e.disabled}}),e._t("tip")],2)],2)},o=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("7f7f"),i("bd86")),l=i("a8db"),s=(i("c5f6"),i("4360"));function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var d={name:"FormUploadFileComs",props:{uploadFileList:{type:Array,default:function(){return[]}},showFileList:{type:Boolean,default:!0},btnIcon:{type:String,default:""},btnContent:{type:String,default:"点击上传"},limit:{type:Number,default:1},url:{type:String,default:"/wms/file/upload"},accept:{type:String,default:""},limitSize:{type:Number,default:1e23},errDefaultMsg:{type:String,default:"文件上传失败"},disabled:{type:Boolean,default:!1}},data:function(){var e="".concat(s["a"].getters.token);return{fileList:[],BASE_API:"https://192.168.1.7:9005/api/wms",headers:{Authorization:e},uploadDisabled:!1,list:[]}},watch:{uploadFileList:{handler:function(e){this.fileList=e.map((function(e){var t=e.fileName,i=e.fileUrl,n=Object(l["a"])(e,["fileName","fileUrl"]);return c({},n,{url:i,name:t})}))},immediate:!0}},methods:{beforeUpload:function(e){var t=e.size<=1e3*this.limitSize;return t||this.$message({message:"上传大小不能超过 ".concat(this.limitSize,"k!"),type:"error"}),t&&this.$emit("openLoading"),t},handleUploadProgress:function(e,t,i){this.$emit("uploadFileProgress",e,t,i)},handleError:function(e,t,i){var n=this;setTimeout((function(){n.$notify.error({title:"错误",message:"上传失败"}),n.$emit("closeLoading")}),500)},handleUploadSuccess:function(e,t,i){if(this.$emit("closeLoading"),"导入成功"!==e){var n=e.code,r=e.data;if(n&&999===n)this.$notify.error({title:"错误",message:e.msg?e.msg:this.errDefaultMsg});else if(n)this.$refs.upload.clearFiles(),this.$emit("uploadFileError");else{if(!r.id)return void this.$emit("uploadFileSuccess");var o=r.id,a=r.fileUrl,l=r.fileType,s=r.downloadUrl,u=r.fileName,c=r.suffix,d={id:o,fileId:o,fileUrl:a,fileType:l,downloadUrl:s,suffix:c,fileName:u,name:u,url:a,classification:""};this.fileList.push(d),this.$emit("uploadFileSuccess",d)}}else this.$emit("uploadFileSuccess")},handleRemove:function(e,t){var i=Object.assign({},e);return i.id||0===i.id||(i.id=i.fileId),this.fileList=this.fileList.filter((function(e){return e.id!==i.id})),this.$emit("handleRemove",c({},i)),new Promise((function(e,t){Object(n["b"])({id:i.id}).then((function(i){var n=i.code;0===n?e():t()})).catch((function(e){t(e)}))}))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",cancelButtonClass:"cancel-button-class",confirmButtonClass:"confirm-button-class",type:"warning",lockScroll:!1})},handlePreview:function(e){var t=e.id;window.open("".concat("https://192.168.1.7:9005/api/wms","/wms/file/download/").concat(t))},handleExceed:function(e,t){this.$notify({title:"警告",message:"当前限制上传附件数量是 ".concat(this.limit," 个文件"),type:"warning"})}}},f=d,m=i("2877"),p=Object(m["a"])(f,r,o,!1,null,"6cedfe06",null),h=p.exports,b={components:{FormUploadFile:h},data:function(){return{uploadTip:"",uploadFileList:[]}},methods:{uploadFileSuccess:function(e){this.uploadFileList.push(e)},handleRemove:function(e){var t=e.id;this.uploadFileList=this.uploadFileList.filter((function(e){return e.id!==t}))},initUploadFileList:function(e){var t=this;if(e&&"null"!==e)return new Promise((function(i,r){Object(n["g"])({ids:e}).then((function(e){var n=e.code,r=e.data;n||(t.uploadFileList=r),i(e)})).catch((function(e){r(e)}))}))},getFileIdList:function(){return this.uploadFileList.map((function(e){return e.id}))},resetFormUploadFilesMixins:function(){this.uploadFileList=[]},downloadUploadFileMixins:function(e){window.open("".concat(Object({NODE_ENV:"production",VUE_APP_BASE_API:"https://192.168.1.7:9005/api/system",VUE_APP_BASE_API_ACTIVITI:"https://192.168.1.7:9005/api/flowable",VUE_APP_BASE_API_WMS:"https://192.168.1.7:9005/api/wms",VUE_APP_BASE_PUBLIC_PATH:"/wms",BASE_URL:"/wms/"}).VUE_APP_BASE_API_LMS,"/wms/file/download/").concat(e))}}}},a4bb:function(e,t,i){e.exports=i("8aae")},a8db:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("e265"),r=i.n(n),o=i("a4bb"),a=i.n(o);function l(e,t){if(null==e)return{};var i,n,r={},o=a()(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}function s(e,t){if(null==e)return{};var i,n,o=l(e,t);if(r.a){var a=r()(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}},ce7e:function(e,t,i){var n=i("63b6"),r=i("584a"),o=i("294c");e.exports=function(e,t){var i=(r.Object||{})[e]||Object[e],a={};a[e]=t(i),n(n.S+n.F*o((function(){i(1)})),"Object",a)}},dc8f:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"g",(function(){return r})),i.d(t,"e",(function(){return o})),i.d(t,"h",(function(){return a})),i.d(t,"f",(function(){return l})),i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return u})),i.d(t,"k",(function(){return c})),i.d(t,"i",(function(){return d})),i.d(t,"j",(function(){return f})),i.d(t,"d",(function(){return m}));var n=[{id:1,name:"待检验"},{id:2,name:"检验中"},{id:3,name:"已完成"},{id:6,name:"待更新"},{id:7,name:"档案未上传"}],r={0:"danger",1:"info",2:"warning",3:"success",4:"success",5:"success",6:"danger",7:"danger"},o={0:"草稿",1:"待检验",2:"检验中",3:"已完成",4:"已完成",5:"已完成",6:"待更新",7:"档案未上传"},a={0:"",1:"info",2:"warning",3:"success",4:"success"},l={0:"",1:"待检验",2:"检验中",3:"已完成",4:"已完成"},s={0:"danger",1:"success"},u={0:"不合格",1:"合格"},c=[{id:1,name:"全检"},{id:2,name:"抽检"}],d=[{id:1,name:"待检验"},{id:2,name:"检验中"},{id:3,name:"已完成"}],f={0:"未处理",1:"待完成",2:"已完成"},m={0:"未提交",1:"审核中",2:"未通过",3:"已完成",4:"驳回"}},e08f:function(e,t,i){"use strict";i("8e6e"),i("ac6a"),i("456d"),i("7514");var n=i("bd86");function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t["a"]={data:function(){return{formIdent:"",tableData:[],columnList:[],expandList:[],tableColumnSortData:[],labels:{},refreshKey:1}},methods:{initTableHeadMixins:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"word",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"columnSets",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,a=t.map((function(e){return o({isParam:!1},e,{width:"input"!==i||e.width?e.width:r,module:i})})).map((function(t){var i=e[n].find((function(e){return e.prop===t.prop}));return i?o({},t,{},i):o({},t)}));return this.$nextTick((function(){"word"===i&&(e.expandList=a.filter((function(e){return e.extend&&e.show})))})),this.$nextTick((function(){e.refreshKey+=1})),a.filter((function(e){return e.show&&!e.extend}))}}}},e265:function(e,t,i){e.exports=i("ed33")},ed33:function(e,t,i){i("014b"),e.exports=i("584a").Object.getOwnPropertySymbols}}]);
//# sourceMappingURL=OutBoundMaterialRequisition.35363fb1.js.map