(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["InStorageInfoAdd"],{2828:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"l",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"m",(function(){return b})),n.d(t,"k",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"j",(function(){return h}));var r=n("bc43");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/detail",method:"post",data:e})}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/detail2",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/init",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/deliveryMaterialPageList",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/deliveryMaterialPageList2",method:"post",data:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/barcodePageList",method:"post",data:e})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/barcodePageListForDetail",method:"post",data:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/add",method:"post",data:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/delPutInStorage",method:"post",data:e})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/addPutInStorage",method:"post",data:e})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/save",method:"post",data:e,timeout:12e4})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/del",method:"post",data:e})}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/addPutInStorageByRecommendStorageId",method:"post",data:e})}},"32a6":function(e,t,n){var r=n("241e"),a=n("c3a1");n("ce7e")("keys",(function(){return function(e){return a(r(e))}}))},"3d57":function(e,t,n){"use strict";t["a"]={data:function(){return{}},methods:{setTagsTitleMixins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e||this.$route.meta.title,r=Object.assign({},this.$route);t&&(n="".concat(n,"（").concat(t,"）"));var a=Object.assign({},r,{title:n});this.$store.dispatch("tagsView/updateVisitedView",a)},closeTagsMixins:function(){var e=Object.assign({},this.$route);this.$store.dispatch("tagsView/delView",e)},closeTagsBackMixins:function(){var e=Object.assign({},this.$route);this.$store.dispatch("tagsView/delView",e),this.$router.go(-1)}}}},"806a":function(e,t,n){"use strict";var r=n("dbe2"),a=n.n(r);a.a},"8aae":function(e,t,n){n("32a6"),e.exports=n("584a").Object.keys},a4bb:function(e,t,n){e.exports=n("8aae")},a8db:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("e265"),a=n.n(r),i=n("a4bb"),o=n.n(i);function l(e,t){if(null==e)return{};var n,r,a={},i=o()(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function s(e,t){if(null==e)return{};var n,r,i=l(e,t);if(a.a){var o=a()(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},bd53:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{staticClass:"clearfix"},[n("div",{staticClass:"fl"},[n("el-button",{on:{click:e.handleGoBack}},[e._v("返回")])],1),n("div",{staticClass:"fr"},[n("el-button",{attrs:{type:"primary",disabled:!e.tableSelection.length},on:{click:function(t){return e.handleNextStep("form")}}},[e._v("下一步")])],1)]),n("el-row",[n("el-collapse",{attrs:{accordion:""},model:{value:e.collapseValue,callback:function(t){e.collapseValue=t},expression:"collapseValue"}},[n("el-collapse-item",{attrs:{title:"单据信息",name:"1"}},[n("el-descriptions",{attrs:{column:2}},[n("el-descriptions-item",{attrs:{label:"凭证日期"}},[e._v(e._s(e.baseInfo.documentDate||"---"))]),n("el-descriptions-item",{attrs:{label:"记账日期"}},[e._v(e._s(e.baseInfo.accountingDate||"---"))]),n("el-descriptions-item",{attrs:{label:"收货工厂"}},[e._v(e._s(e.baseInfo.receiptFactoryName||"---"))]),n("el-descriptions-item",{attrs:{label:"单据编号"}},[e._v(e._s(e.baseInfo.billNumber||"---"))]),n("el-descriptions-item",{attrs:{label:"收货仓库"}},[e._v(e._s(e.baseInfo.receiptWarehouse||"---"))]),n("el-descriptions-item",{attrs:{label:"移动类型"}},[e._v(e._s(e.baseInfo.movementType||"---"))]),n("el-descriptions-item",{attrs:{label:"成本中心"}},[e._v(e._s(e.baseInfo.costCenterName||"---"))]),n("el-descriptions-item",{attrs:{label:"总科账目"}},[e._v(e._s(e.baseInfo.ledgerSubjects||"---"))]),n("el-descriptions-item",{attrs:{label:"供应商"}},[e._v(e._s(e.baseInfo.supplierName||"---"))]),n("el-descriptions-item",{attrs:{label:"采购员/电话号"}},[e._v(e._s(e.baseInfo.buyerName||"---")+" "+e._s(e.baseInfo.buyerTel||"---"))]),n("el-descriptions-item",{attrs:{label:"资产"}},[e._v(e._s(e.baseInfo.asset||"---"))]),n("el-descriptions-item",{attrs:{label:"采购订单号"}},[e._v(e._s(e.baseInfo.purchaseOrderNumber||"---"))]),n("el-descriptions-item",{attrs:{label:"网络"}},[e._v(e._s(e.baseInfo.network||"---"))]),n("el-descriptions-item",{attrs:{label:"订单"}},[e._v(e._s(e.baseInfo.orderNumber||"---"))]),n("el-descriptions-item",{attrs:{label:"项目"}},[e._v(e._s(e.baseInfo.project||"---"))]),n("el-descriptions-item",{attrs:{label:"合同号/汇总号"}},[e._v(e._s(e.baseInfo.contractCode||"---"))])],1)],1)],1)],1),n("el-form",{ref:"form",attrs:{model:e.form,inline:"",rules:e.rules},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{prop:"type",label:"单据类型"}},[n("el-radio-group",{staticStyle:{width:"178px"},attrs:{disabled:!e.baseInfo.isStrategic},on:{input:function(t){1===e.form.type&&(e.form.isShowMoney="")}},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l([{name:"常规",value:1},{name:"战略",value:2}],(function(t,r){return n("el-radio-button",{key:r,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1),2===e.form.type?n("el-form-item",{attrs:{prop:"isShowMoney",label:"显示金额"}},[n("el-radio-group",{staticStyle:{width:"178px"},model:{value:e.form.isShowMoney,callback:function(t){e.$set(e.form,"isShowMoney",t)},expression:"form.isShowMoney"}},e._l([{name:"是",value:!0},{name:"否",value:!1}],(function(t,r){return n("el-radio-button",{key:r,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1):e._e(),n("el-form-item",{attrs:{prop:"explanation",label:"说明"}},[n("el-input",{staticStyle:{width:"178px"},attrs:{clearable:"",placeholder:"请填写说明"},model:{value:e.form.explanation,callback:function(t){e.$set(e.form,"explanation","string"===typeof t?t.trim():t)},expression:"form.explanation"}})],1)],1),n("el-form",{ref:"filterItem",staticClass:"top-filter",attrs:{model:e.query,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{prop:"materialText"}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{clearable:"",placeholder:"物料编码或名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInit(t)}},model:{value:e.query.materialText,callback:function(t){e.$set(e.query,"materialText","string"===typeof t?t.trim():t)},expression:"query.materialText"}})],1),n("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),n("el-button",{attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")]),e.isCheckAll?e._e():n("el-button",{attrs:{type:"warning",plain:""},on:{click:e.checkAll}},[e._v("跨页全选")]),e.isCheckAll?n("el-button",{attrs:{type:"warning",plain:""},on:{click:e.reverseSelection}},[e._v("跨页反选")]):e._e()],1),n("el-row",[n("table-com",{key:e.baseTableKey,ref:e.refName,class:{baseTable:e.tableData.length},attrs:{"table-height-type":e.collapseValue?300:525,loading:e.loading,index:!0,selection:!0,"row-key":e.rowKey,"table-data":e.tableData,"column-list":e.columnList,"operation-width":120,"table-column-sort":!1,"show-operate":!1,selectable:e.selectable,"table-selection":e.tableSelection},on:{selectionChange:e.selectionChange,rowClick:e.handleRowClick,refresh:e.searchInit}})],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1)},a=[],i=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("75fc")),o=(n("ac6a"),n("a8db")),l=n("bd86"),s=(n("c5f6"),n("3d57")),c=n("1790"),u=n("ffee"),d=n("2828"),f=n("ed08");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={name:"",mixins:[s["a"],c["a"]],props:{deliveryReceiptId:{type:[Number,String],default:""}},data:function(){return{collapseValue:"1",baseInfo:{},form:{type:"",isShowMoney:"",explanation:""},rules:{type:[{required:!0,message:"请选择单据类型",trigger:"blur"}],isShowMoney:[{required:!0,message:"请选择显示金额",trigger:"change"}]},title:this.$route.meta.title,loading:!1,query:{materialText:""},tableData:[],columnList:[{module:"word",prop:"materialCode",label:"物料编码",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",minWidth:"200",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialSpec",label:"规格型号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialAssessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"deliveredNumber",label:"实收数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unreceivedNumber",label:"未入库数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],columnSets:[],supplierPullList:[],rowKey:"id",tableSelection:[],typeMap:{1:"success",2:"primary",3:"warning",4:"info"},refName:"baseTableRef",baseTableKey:1,isCheckAll:!1}},computed:{dialogTitle:function(){return"add"===this.editType?"新增".concat(this.title,"信息"):"编辑".concat(this.title,"信息")}},watch:{collapseValue:{handler:function(){var e=this;this.$nextTick((function(){e.baseTableKey++}))}}},mounted:function(){this.initInfo(),this.init()},methods:{initInfo:function(){var e=this,t={deliveryReceiptId:this.deliveryReceiptId};return new Promise((function(n,r){Object(d["g"])(p({},t)).then((function(t){var r=t.code,a=t.data;r||(e.baseInfo=p({},a),!e.baseInfo.isStrategic&&(e.form.type=1)),n(t)})).catch((function(e){r(e)}))}))},init:function(e){var t=this;this.loading=!0;var n=p({},this.query,e?{deliveryReceiptId:this.deliveryReceiptId}:{deliveryReceiptId:this.deliveryReceiptId,page:p({},this.pageInfo)});return new Promise((function(e,r){Object(u["c"])(p({},n)).then((function(n){var r=n.code,a=n.data;if(!r){var i=a.list,l=Object(o["a"])(a,["list"]);t.initPage(l),t.tableData=i;var s=t.rowKey,c=t.tableSelection.map((function(e){return e[s]}));t.tableData.forEach((function(e){function n(e){var t=e[s];return c.some((function(e){return e===t}))}n(e)&&t.$nextTick((function(){t.$refs[t.refName].$refs.multipleTable.toggleRowSelection(e,!0)}))}))}t.loading=!1,e(n)})).catch((function(e){t.loading=!1,r(e)}))}))},handleRowClick:function(e){var t=e.row,n=e.column;e.cell,e.event;if("操作"===n.label)return!1;this.rightObj=p({},t)},refresh:function(){this.init("clean")},handleNextStep:Object(f["a"])((function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var n={entity:p({},t.baseInfo,{},t.form),wsmList:t.tableSelection.map((function(e){return{deliveryMaterialId:e.id}})),allSelectedFlag:t.isCheckAll};Object(d["l"])(n).then((function(e){var n=e.code;n||(t.$store.dispatch("tagsView/delView",t.$route),t.$router.push({name:"InStorageInfoReceipt",params:{id:t.baseInfo.id},query:{id:t.deliveryReceiptId}}))})).catch((function(e){}))}))}),800,!1),selectionChange:function(e){this.tableSelection=Object(i["a"])(e)},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()},checkAll:function(){var e=this;this.isCheckAll=!0;var t=p({},this.query,{deliveryReceiptId:this.deliveryReceiptId,page:{current:1,size:1e4}});return new Promise((function(n,r){Object(u["c"])(p({},t)).then((function(t){var r=t.code,a=t.data;if(!r){var i=a.list;if(i&&Array.isArray(i)&&i.length){if(e.tableSelection=i.filter((function(e){return e.unreceivedNumber&&[3,0].includes(e.status)})),!e.tableSelection.length)return e.isCheckAll=!1,void e.$notify.warning({title:"警告",message:"暂不支持跨页全选"});var o=e.rowKey,l=e.tableSelection.map((function(e){return e[o]})),s=[];e.tableData.forEach((function(t){function n(e){var t=e[o];return l.some((function(e){return e===t}))}n(t)&&(s.push(t),e.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(t,!0)})))})),e.tableSelection.forEach((function(t){var n=s.map((function(e){return e[o]}));n.includes(t[o])||e.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(t,!0)}))}))}}n(t)})).catch((function(e){r(e)}))}))},reverseSelection:function(){var e=this;this.isCheckAll=!1,this.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.clearSelection(),e.tableSelection=[]}))},handleGoBack:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({name:"InStorageInfo"})},handleReturnAndDelete:function(){var e=this;return new Promise((function(t,n){Object(d["b"])({entity:{id:e.baseInfo.id}}).then((function(n){var r=n.code;r||e.$nextTick((function(){e.$store.dispatch("tagsView/delView",e.$route),e.$router.push({name:"InStorageInfo"})})),e.loading=!1,t(n)})).catch((function(t){e.loading=!1,n(t)}))}))},selectable:function(e,t){return e.unreceivedNumber&&[3,0].includes(e.status)},doLayout:function(){var e=this;this.$nextTick((function(){e.$refs[e.refName]&&e.$refs[e.refName].doLayout()}))}}},h=m,v=(n("806a"),n("2877")),g=Object(v["a"])(h,r,a,!1,null,"c321b330",null);t["default"]=g.exports},ce7e:function(e,t,n){var r=n("63b6"),a=n("584a"),i=n("294c");e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],o={};o[e]=t(n),r(r.S+r.F*i((function(){n(1)})),"Object",o)}},dbe2:function(e,t,n){},e265:function(e,t,n){e.exports=n("ed33")},ed33:function(e,t,n){n("014b"),e.exports=n("584a").Object.getOwnPropertySymbols},ffee:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return s}));var r=n("bc43");function a(e){return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/deliveryReceiptDetail",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/deliveryMaterialPageList",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/materialAndBarcodeWithoutStorageId",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/saveBarcodeStoragePositionWithoutStorageId",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/addPutInStorage",method:"post",data:e})}}}]);
//# sourceMappingURL=InStorageInfoAdd.289b6a47.js.map