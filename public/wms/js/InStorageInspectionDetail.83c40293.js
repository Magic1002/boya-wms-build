(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["InStorageInspectionDetail"],{2391:function(e,t,n){"use strict";n.d(t,"l",(function(){return r})),n.d(t,"w",(function(){return o})),n.d(t,"h",(function(){return a})),n.d(t,"g",(function(){return s})),n.d(t,"u",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"t",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"p",(function(){return f})),n.d(t,"x",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"r",(function(){return b})),n.d(t,"k",(function(){return h})),n.d(t,"v",(function(){return g})),n.d(t,"o",(function(){return y})),n.d(t,"a",(function(){return v})),n.d(t,"q",(function(){return I})),n.d(t,"i",(function(){return j})),n.d(t,"n",(function(){return w})),n.d(t,"m",(function(){return O})),n.d(t,"s",(function(){return N})),n.d(t,"c",(function(){return x})),n.d(t,"e",(function(){return k})),n.d(t,"b",(function(){return _}));var i=n("bc43");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/deliveryReceiptPageList",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/finish",method:"post",data:e})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/deliveryMaterialPageList",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/deliveryMaterialItemList",method:"post",data:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/finish",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/inspectPageList",method:"post",data:e})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/save",method:"post",data:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/detail",method:"post",data:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/modifyInspectNo",method:"post",data:e})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/editFile",method:"post",data:e})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/fileList",method:"post",data:e})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/saveInspectResult",method:"post",data:e})}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/selectInspectResultByDeliveryMaterialId",method:"post",data:e})}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/submitInspectResult",method:"post",data:e})}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/inspectReject",method:"post",data:e})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/barcodePrint",method:"post",data:e})}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/packageCodeSamplingList",method:"post",data:e})}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/genUnqualifiedBarcodeList",method:"post",data:e})}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/unqualifiedBarcodeScan",method:"post",data:e})}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/queryUnqualifiedBarcodeList",method:"post",data:e})}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/saveUnqualifiedBarcodeList",method:"post",data:e})}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/deleteUnqualifiedBarcode",method:"post",data:e})}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/editUnqualifiedBarcodeReason",method:"post",data:e})}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/wmsInspect/deleteFile",method:"post",data:e})}},"32a6":function(e,t,n){var i=n("241e"),r=n("c3a1");n("ce7e")("keys",(function(){return function(e){return r(i(e))}}))},"338a":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"clearfix top-filter"},[n("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""}},[n("el-form-item",{attrs:{prop:"materialText"}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{placeholder:"物料编号或名称查询"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInit(t)}},model:{value:e.query.materialText,callback:function(t){e.$set(e.query,"materialText","string"===typeof t?t.trim():t)},expression:"query.materialText"}})],1),n("el-form-item",{attrs:{prop:"status"}},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"状态查询"},model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}},e._l(e.statusPullMap,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),n("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")]),n("el-button",{staticClass:"filter-item",attrs:{type:"primary",disabled:!e.baseInfo.isCanSubmit},on:{click:e.handleOrderSubmit}},[e._v("提交")]),n("el-button",{staticClass:"filter-item fr",staticStyle:{"margin-left":"10px !important"},attrs:{type:"danger",disabled:!e.baseInfo.processFlag},on:{click:e.handleReject}},[e._v("驳回")]),n("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.handleInspect}},[e._v("开始检验")]),n("el-button",{staticClass:"filter-item fr",on:{click:e.handleGoBack}},[e._v("返回")])],1)],1),n("el-descriptions",{attrs:{column:3,"label-style":{fontWeight:900},"content-style":{paddingRight:"10px",alignItems:"center"}}},[n("el-descriptions-item",{attrs:{label:"检验单号"}},[e._v("\n      "+e._s(e.baseInfo.inspectNo||"---")+"\n      "),e.baseInfo.inspectNo?n("el-link",{staticStyle:{"margin-left":"15px"},attrs:{icon:"el-icon-edit",underline:!1,type:"warning"},on:{click:e.modifyInspectNo}},[e._v("修改")]):e._e()],1),n("el-descriptions-item",{attrs:{label:"创建时间"}},[e._v(e._s(e.baseInfo.createDate||"---"))]),n("el-descriptions-item",{attrs:{label:"接收人"}},[e._v(e._s(e.baseInfo.recipientName||"---"))])],1),n("el-row",[n("table-com",{ref:"baseTableRef",attrs:{loading:e.loading,index:!0,selection:!1,"table-data":e.tableData,"column-list":e.columnList,"operation-width":120,"table-column-sort":!1,"show-operate":!1},on:{rowClick:e.handleRowClick,refresh:e.searchInit},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",disabled:t.row.status>=3},on:{click:function(n){return e.handleSubmit(t.row)}}},[e._v("完成")])]}}])})],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}}),n("edit-dialog",{attrs:{"dialog-form":e.dialogForm,"edit-type":e.editType},on:{confirm:e.init},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}}),n("el-dialog",{attrs:{title:"修改检验单号",visible:e.modifyInspectNoVisible,width:"30%","before-close":e.modifyInspectNoCancle,"lock-scroll":!1,"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.modifyInspectNoVisible=t}}},[n("el-form",{ref:"modifyInspectNoForm",attrs:{model:e.modifyInspectNoForm,rules:e.modifyInspectNoRules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"检验单号",prop:"inspectNo"}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:e.modifyInspectNoForm.inspectNo,callback:function(t){e.$set(e.modifyInspectNoForm,"inspectNo",t)},expression:"modifyInspectNoForm.inspectNo"}})],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{loading:e.modifyInspectNoLoading,type:"primary"},on:{click:function(t){return e.modifyInspectNoConfirm("modifyInspectNoForm")}}},[e._v(e._s(e.modifyInspectNoLoading?"提交中":"确 定"))]),n("el-button",{on:{click:e.modifyInspectNoCancle}},[e._v("取 消")])],1)],1),n("el-dialog",{attrs:{title:"驳回",visible:e.rejectVisible,width:"30%","before-close":e.rejectCancle,"lock-scroll":!1,"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.rejectVisible=t},open:e.rejectDlgOpen}},[n("el-form",{ref:"rejectForm",attrs:{model:e.rejectForm,rules:e.rejectRules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"原因",prop:"rejectReason"}},[n("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.rejectForm.rejectReason,callback:function(t){e.$set(e.rejectForm,"rejectReason",t)},expression:"rejectForm.rejectReason"}})],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.rejectSave("rejectForm")}}},[e._v("确 定")]),n("el-button",{on:{click:e.rejectCancle}},[e._v("取 消")])],1)],1)],1)},r=[],o=(n("8e6e"),n("ac6a"),n("456d"),n("a8db")),a=n("bd86"),s=n("1790"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-drawer",{attrs:{center:!0,"append-to-body":!0,"close-on-press-escape":!1,"wrapper-closable":!1,title:e.title,size:"70%",direction:"btt",visible:e.value,"destroy-on-close":!0,"before-close":e.beforeClose},on:{open:e.initSelect}},[n("el-scrollbar",[n("div",{staticStyle:{margin:"0 10px"}},[n("divider",[e._v("物资检验")]),n("el-row",[n("el-descriptions",{attrs:{border:!0,direction:"vertical",column:7}},[n("el-descriptions-item",{attrs:{label:"物料编号"}},[e._v(e._s(e.dialogForm.materialCode))]),n("el-descriptions-item",{attrs:{label:"物料名称"}},[e._v(e._s(e.dialogForm.materialName))]),n("el-descriptions-item",{attrs:{label:"规格型号"}},[e._v(e._s(e.dialogForm.materialSpec))]),n("el-descriptions-item",{attrs:{label:"评估类型"}},[e._v(e._s(e.dialogForm.materialAssessType_dictText))]),n("el-descriptions-item",{attrs:{label:"数量"}},[e._v(e._s(e.dialogForm.deliveryNumber))]),n("el-descriptions-item",{attrs:{label:"计量单位"}},[e._v(e._s(e.dialogForm.unitName))]),n("el-descriptions-item",{attrs:{label:"状态"}},[n("el-tag",{attrs:{type:e.statusMap[e.dialogForm.status],"disable-transitions":""}},[e._v("\n              "+e._s(e.statusChartMap[e.dialogForm.status])+"\n            ")])],1)],1)],1),n("el-row",[n("table-com",{key:e.refreshKey,ref:"baseTableRef",attrs:{"row-key":"uuid",loading:e.loading,index:!0,selection:!1,"table-data":e.tableData,"column-list":e.columnList,"table-height-type":450,"operation-width":100,"expand-list":e.expandList,"table-column-sort":!1},on:{rowClick:e.handleRowClick,refresh:e.searchInit},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.handleSubmit(t.row)}}},[e._v("保存")])]}}])})],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1)])],1)},l=[],u=(n("7f7f"),n("ec26")),d=n("2391"),f=n("dc8f");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={code:"",supplierId:"",supplierName:"",contact:"",phone:"",purchaseDate:""},h={name:"InStorageConsignCom",components:{},mixins:[s["a"]],props:{value:{type:Boolean,default:!1},editType:{type:String,default:"add"},dialogForm:{type:Object,default:function(){return m({},b)}}},data:function(){return{title:"检验",refreshKey:(new Date).getTime(),form:b,loading:!1,rules:{},query:{},tableData:[],columnList:[{module:"word",prop:"barCode",label:"条码号",align:"center",width:120,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"select",prop:"inspectType",label:"检验类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",placeholder:"检验类型",optionLabel:"name",optionValue:"id",setDisabled:function(e){return!1},getOptions:function(e){return f["k"]}},{module:"number",prop:"inspectNumberInput",label:"检验数量",align:"center",minWidth:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",disabled:function(e){return 1===e.inspectType},setMin:function(e){return 0},setPrecision:function(e){return 3}},{module:"number",prop:"qualifiedNumber",label:"合格数量",align:"center",minWidth:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",setMin:function(e){return 0},setMax:function(e){return e.inspectNumberInput-e.unqualifiedNumber},setPrecision:function(e){return 3}},{module:"number",prop:"compromiseNumber",label:"让步接收数量",align:"center",minWidth:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",setMin:function(e){return 0},setMax:function(e){return e.inspectNumberInput},setPrecision:function(e){return 3}},{module:"number",prop:"unqualifiedNumber",label:"不合格数量",align:"center",minWidth:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",setMin:function(e){return 0},setMax:function(e){return e.inspectNumberInput-e.qualifiedNumber},setPrecision:function(e){return 3}},{module:"input",prop:"remarks",label:"备注",align:"center",minWidth:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],expandList:[],dialogVisible:!1,dialogInfo:{},editInfoType:"add",statusChartMap:f["e"],statusMap:f["g"],typePullMap:f["k"]}},computed:{dialogTitle:function(){return"add"===this.editType?"新增".concat(this.title):"编辑".concat(this.title)}},watch:{dialogForm:{handler:function(e){"add"===this.editType?this.form=m({},b):this.form=m({},e)},immediate:!0}},methods:{init:function(e){var t=this;return this.loading=!0,new Promise((function(n,i){t.loading=!0;var r=m({},t.query,e?{deliveryMaterialId:t.form.id}:{deliveryMaterialId:t.form.id,page:m({},t.pageInfo)});Object(d["f"])(r).then((function(e){var i=e.code,r=e.data;if(!i){var a=r.list,s=Object(o["a"])(r,["list"]);t.initPage(s),t.tableData=a.map((function(e){return m({},e,{inspectNumberInput:0!==e.id&&e.id?e.inspectNumber:e.number,uuid:Object(u["a"])()})}))}t.loading=!1,n(e)})).catch((function(e){t.loading=!1,i(e)}))}))},handleConfirm:function(e){var t=this;this.$refs[e].validate((function(e){if(t.loading=!0,!e)return!1;t.$emit("submit",t.form),t.beforeClose(),t.loading=!1}))},handleSubmit:function(e){var t=this,n=e.inspectNumberInput,i=e.compromiseNumber+e.qualifiedNumber+e.unqualifiedNumber;n<i?this.$notify.info({title:"消息",message:"合格数量、不合格数量、让步接收数量相加不能超过检验数量"}):(0===e.qualifiedNumber&&0===e.unqualifiedNumber||""===e.qualifiedNumber&&""===e.unqualifiedNumber)&&e.compromiseNumber!==e.inspectNumberInput?this.$notify.info({title:"消息",message:"合格数量和不合格数量同时为零不能保存"}):""!==e.qualifiedNumber&&""!==e.unqualifiedNumber&&""!==e.compromiseNumber?this.$confirm("确定保存此条信息, 是否继续?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",cancelButtonClass:"btn-custom-cancel",type:"warning",lockScroll:!1}).then((function(){Object(d["t"])(m({},e,{inspectNumber:e.inspectNumberInput})).then((function(e){var n=e.code;n||(t.$message({message:"操作成功",type:"success"}),t.init())}))})).catch((function(){t.$message({message:"已取消操作",type:"info"})})):this.$notify.info({title:"消息",message:"合格数量、不合格数量、让步接收数量不能为空"})},onSelectConfirm:function(e){e.length&&(this.form.supplierId=e[0].id,this.form.supplierName=e[0].name)},handleAdd:function(){this.editInfoType="add",this.dialogInfo={},this.dialogVisible=!0},handleModify:function(){this.dialogInfo=m({},this.form),this.editInfoType="modify",this.dialogVisible=!0},handleRowClick:function(e){var t=e.row,n=e.column;e.cell,e.event;if("操作"===n.label)return!1;this.rightObj=m({},t)},refresh:function(){this.init()},initSelect:function(){this.init()},beforeClose:function(e){this.$emit("input",!1),this.form=Object.assign({},m({},b)),"function"===typeof e&&e()}}},g=h,y=(n("b3e6"),n("2877")),v=Object(y["a"])(g,c,l,!1,null,"2ecc5cd1",null),I=v.exports;function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O={components:{EditDialog:I},mixins:[s["a"]],data:function(){return{title:this.$route.meta.title,loading:!1,query:{materialText:"",status:""},tableData:[],columnList:[{module:"word",prop:"materialCode",label:"物料编号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",minWidth:"200",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialSpec",label:"规格型号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialAssessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"deliveryNumber",label:"数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"applicant",label:"申请人",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"status",prop:"status",label:"状态",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center",formatter:function(e){return f["e"][e]},statusFormatter:function(e){return f["g"][e.status]}}],statusChartMap:f["e"],statusMap:f["g"],columnSets:[],dialogForm:{},supplierPullList:[],editType:"add",dialogVisible:!1,statusPullMap:f["i"],baseInfo:{},modifyInspectNoVisible:!1,modifyInspectNoLoading:!1,modifyInspectNoForm:{inspectNo:""},modifyInspectNoRules:{inspectNo:[{required:!0,message:"请填写检验单号",trigger:"blur"}]},rejectVisible:!1,rejectRules:{rejectReason:[{required:!0,message:"请填写驳回原因",trigger:"blur"}]},rejectForm:{rejectReason:""}}},computed:{dialogTitle:function(){return"add"===this.editType?"新增".concat(this.title,"信息"):"编辑".concat(this.title,"信息")}},mounted:function(){this.init(),this.getInspectNoDetail()},methods:{init:function(e){var t=this;this.loading=!0;var n=w({},this.query,e?{deliveryReceiptId:this.$route.params.id}:{deliveryReceiptId:this.$route.params.id,page:w({},this.pageInfo)});return new Promise((function(e,i){Object(d["h"])(w({},n)).then((function(n){var i=n.code,r=n.data;if(!i){var a=r.list,s=Object(o["a"])(r,["list"]);t.initPage(s),t.tableData=a}t.loading=!1,e(n)})).catch((function(e){t.loading=!1,i(e)}))}))},getInspectNoDetail:function(){var e=this;return new Promise((function(t,n){Object(d["j"])({id:e.$route.params.id}).then((function(n){var i=n.code,r=n.data;i||(e.baseInfo=r),t(n)})).catch((function(e){n(e)}))}))},handleGoBack:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({name:"InStorageInspection"})},handleInspect:function(){this.$router.push({name:"InStorageInspectionStart",params:{id:this.$route.params.id}})},handleReject:function(){this.rejectVisible=!0},rejectDlgOpen:function(){this.rejectForm.rejectReason=""},handleOrderSubmit:function(){var e=this;this.$confirm("确认检验完成, 是否继续?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",cancelButtonClass:"btn-custom-cancel",type:"warning",lockScroll:!1}).then((function(){Object(d["v"])({deliveryReceiptId:e.$route.params.id}).then((function(t){var n=t.code;n||(e.$notify.success({title:"成功",message:"提交成功"}),e.handleGoBack())})).catch((function(e){}))})).catch((function(){e.$notify.info({title:"消息",message:"已取消操作"})}))},modifyInspectNo:function(){this.modifyInspectNoForm.inspectNo=this.baseInfo.inspectNo,this.modifyInspectNoVisible=!0},modifyInspectNoConfirm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.modifyInspectNoLoading=!0,Object(d["p"])(w({id:t.$route.params.id},t.modifyInspectNoForm)).then((function(e){var n=e.code;n?t.modifyInspectNoLoading=!1:(t.$notify.success({title:"成功",message:"检验单号修改成功"}),t.getInspectNoDetail(),t.modifyInspectNoLoading=!1,t.modifyInspectNoVisible=!1)})).catch((function(e){t.modifyInspectNoLoading=!1}))}))},modifyInspectNoCancle:function(e){this.$refs.modifyInspectNoForm.resetFields(),this.modifyInspectNoVisible=!1,"function"===typeof e&&e()},handleSubmit:function(e){var t=this;this.$confirm("确认检验完成, 是否继续?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",cancelButtonClass:"btn-custom-cancel",type:"warning",lockScroll:!1}).then((function(){e.id&&Object(d["u"])({id:e.id}).then((function(e){var n=e.code;n||(t.$message({message:"操作成功",type:"success"}),t.init())}))})).catch((function(){t.$message({message:"已取消操作",type:"info"})}))},handleRowClick:function(e){e.row;var t=e.column;e.cell,e.event;if("操作"===t.label)return!1},refresh:function(){this.init("clean")},handleAdd:function(){this.editType="add",this.dialogForm={},this.dialogVisible=!0},handleModify:function(e){this.dialogForm=w({},e),this.editType="modify",this.dialogVisible=!0},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()},rejectCancle:function(){this.rejectVisible=!1},rejectSave:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(d["o"])(w({deliveryReceiptId:t.$route.params.id},t.rejectForm)).then((function(e){var n=e.code;n||(t.getInspectNoDetail(),t.init(),t.rejectVisible=!1,t.$notify.success({title:"成功",message:"驳回成功"}),t.handleGoBack())})).catch((function(e){}))}))}}},N=O,x=Object(y["a"])(N,i,r,!1,null,"70d73e61",null);t["default"]=x.exports},"8aae":function(e,t,n){n("32a6"),e.exports=n("584a").Object.keys},"98d4":function(e,t,n){},a4bb:function(e,t,n){e.exports=n("8aae")},a8db:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("e265"),r=n.n(i),o=n("a4bb"),a=n.n(o);function s(e,t){if(null==e)return{};var n,i,r={},o=a()(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function c(e,t){if(null==e)return{};var n,i,o=s(e,t);if(r.a){var a=r()(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},b3e6:function(e,t,n){"use strict";var i=n("98d4"),r=n.n(i);r.a},ce7e:function(e,t,n){var i=n("63b6"),r=n("584a"),o=n("294c");e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*o((function(){n(1)})),"Object",a)}},dc8f:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"g",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"h",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"k",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"d",(function(){return p}));var i=[{id:1,name:"待检验"},{id:2,name:"检验中"},{id:3,name:"已完成"},{id:6,name:"待更新"},{id:7,name:"档案未上传"}],r={0:"danger",1:"info",2:"warning",3:"success",4:"success",5:"success",6:"danger",7:"danger"},o={0:"草稿",1:"待检验",2:"检验中",3:"已完成",4:"已完成",5:"已完成",6:"待更新",7:"档案未上传"},a={0:"",1:"info",2:"warning",3:"success",4:"success"},s={0:"",1:"待检验",2:"检验中",3:"已完成",4:"已完成"},c={0:"danger",1:"success"},l={0:"不合格",1:"合格"},u=[{id:1,name:"全检"},{id:2,name:"抽检"}],d=[{id:1,name:"待检验"},{id:2,name:"检验中"},{id:3,name:"已完成"}],f={0:"未处理",1:"待完成",2:"已完成"},p={0:"未提交",1:"审核中",2:"未通过",3:"已完成",4:"驳回"}},e265:function(e,t,n){e.exports=n("ed33")},ec26:function(e,t,n){"use strict";const i="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var r={randomUUID:i};let o;const a=new Uint8Array(16);function s(){if(!o&&(o="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(a)}const c=[];for(let d=0;d<256;++d)c.push((d+256).toString(16).slice(1));function l(e,t=0){return(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase()}function u(e,t,n){if(r.randomUUID&&!t&&!e)return r.randomUUID();e=e||{};const i=e.random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return l(i)}t["a"]=u},ed33:function(e,t,n){n("014b"),e.exports=n("584a").Object.getOwnPropertySymbols}}]);
//# sourceMappingURL=InStorageInspectionDetail.83c40293.js.map