{"version":3,"sources":["webpack:///./src/apis/modules/out-bound/outsourcing.js","webpack:///./src/views/out-bound/outsourcing/edit.vue?88c7","webpack:///./src/components/ModalSelect/MaterialForm.vue?882d","webpack:///src/components/ModalSelect/MaterialForm.vue","webpack:///./src/components/ModalSelect/MaterialForm.vue?91b3","webpack:///./src/components/ModalSelect/MaterialForm.vue","webpack:///./src/components/ModalSelect/MaterialForm.vue?c0f2","webpack:///./src/views/out-bound/outsourcing/edit.vue?60d9","webpack:///src/views/out-bound/outsourcing/edit.vue","webpack:///./src/views/out-bound/outsourcing/edit.vue?2509","webpack:///./src/views/out-bound/outsourcing/edit.vue"],"names":["getListApi","data","request","url","method","addApi","editApi","deleteApi","getDetailApi","getOutsourceListApi","submitApi","withdrawApi","auditApi","render","_vm","this","_h","$createElement","_c","_self","attrs","title","value","beforeClose","on","initSelect","staticClass","ref","query","nativeOn","$event","preventDefault","staticStyle","type","indexOf","_k","keyCode","key","searchInit","model","callback","$$v","$set","trim","expression","_v","resetForm","_b","refName","rowKey","loading","multiple","tableData","columnList","tableSelection","selectionChange","sortChange","getDynamicRow","$attrs","pageInfo","current","size","total","init","slot","handleConfirm","staticRenderFns","name","mixins","paginationPage","props","required","Boolean","String","default","selection","Array","max","Number","ids","extraInfo","Object","dicts","materialCodeOrName","columnSets","deptSelectedInfo","list","visible","radio","rowObj","methods","materialIdList","page","Promise","code","uuid","deliveryNumber","i","orderNum","check","row","some","resolve","res","reject","err","$refs","formName","resetFields","handleUpdateTableSelected","$emit","done","onDeptSelectConfirm","length","usedOffice","item","component","form","rules","includes","pageType","destinationVisible","_s","supplierId","supplierName","_e","handleAddMaterial","detailList","expandList","handleRowClick","scopedSlots","_u","fn","scope","handleDelete","$index","buttonLoading","onAudit","onSave","goBack","orderBy","forBusiness","onSelectConfirm","dialogVisible","map","materialId","destinationConfirm","components","MaterialDialog","DestinationSelect","AuditWrapper","contact","tel","deliveryDate","billDate","message","warehouseId","warehousePullList","computed","$route","replace","toLowerCase","mounted","getDetail","column","label","$confirm","confirmButtonText","cancelButtonText","cancelButtonClass","lockScroll","forEach","c","id","materialCode","materialName","materialSpec","spec","unitName","unitMeasureName","num","MetailConfirm","add","edit","validate","valid","bool","Api","$store","dispatch","tempRoute","whiteList","$router","push","1","0","2","getWarehousePullList","handleSelectChange"],"mappings":"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","file":"js/BillOutsourceOutAdd.4ca87c54.js","sourcesContent":["import request from '@/apis/request.wms'\r\n\r\n// 列表\r\nexport function getListApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillOutsourceOut/pageList',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 下拉列表\r\nexport function getPullListItemApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillOutsourceOut/listItem',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 新增\r\nexport function addApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillOutsourceOut/add',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 修改\r\nexport function editApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillOutsourceOut/edit',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 删除\r\nexport function deleteApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillOutsourceOut/delete',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 外协单详情\r\nexport function getDetailApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillOutsourceOut/detail',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 外协单物料列表\r\nexport function getOutsourceListApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillOutsourceOutDetail/pageList',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 提交\r\nexport function submitApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillOutsourceOut/submit',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 撤回\r\nexport function withdrawApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillOutsourceOut/withdraw',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 审核->通过、驳回、未通过\r\nexport function auditApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillOutsourceOut/audit',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=style&index=0&id=16d33f52&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=style&index=0&id=16d33f52&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":_vm.title,\"top\":\"5vh\",\"visible\":_vm.value,\"show-close\":true,\"width\":\"920px\",\"lock-scroll\":false,\"destroy-on-close\":true,\"append-to-body\":true,\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"before-close\":_vm.beforeClose},on:{\"open\":_vm.initSelect}},[_c('el-scrollbar',{staticClass:\"scroll-dialog\"},[_c('el-form',{ref:\"filterItem\",staticClass:\"top-filter clearfix\",attrs:{\"model\":_vm.query,\"inline\":\"\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',{attrs:{\"prop\":\"materialCodeOrName\"}},[_c('el-input',{staticClass:\"filter-item\",staticStyle:{\"width\":\"178px\"},attrs:{\"placeholder\":\"物料编号或名称\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.searchInit($event)}},model:{value:(_vm.query.materialCodeOrName),callback:function ($$v) {_vm.$set(_vm.query, \"materialCodeOrName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"query.materialCodeOrName\"}})],1),_c('el-button',{staticClass:\"filter-item\",attrs:{\"type\":\"success\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.searchInit}},[_vm._v(\"搜索\")]),_c('el-button',{staticClass:\"filter-item\",attrs:{\"type\":\"warning\",\"icon\":\"el-icon-refresh-left\"},on:{\"click\":function($event){return _vm.resetForm('filterItem')}}},[_vm._v(\"重置\")])],1),_c('el-row',[_c('table-com',_vm._b({ref:_vm.refName,attrs:{\"row-key\":_vm.rowKey,\"table-height-type\":490,\"loading\":_vm.loading,\"index\":true,\"index-fixed\":false,\"selection\":true,\"multiple\":_vm.multiple,\"selection-fixed\":false,\"table-column-sort\":false,\"table-data\":_vm.tableData,\"column-list\":_vm.columnList,\"show-operate\":false,\"operate-fixed\":false,\"table-selection\":_vm.tableSelection},on:{\"selectionChange\":_vm.selectionChange,\"sortChange\":_vm.sortChange,\"dynamicRow\":_vm.getDynamicRow}},'table-com',_vm.$attrs,false))],1),_c('pagination',{attrs:{\"page\":_vm.pageInfo.current,\"limit\":_vm.pageInfo.size,\"total\":_vm.total},on:{\"update:page\":function($event){return _vm.$set(_vm.pageInfo, \"current\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.pageInfo, \"size\", $event)},\"pagination\":_vm.init}})],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleConfirm}},[_vm._v(\"确 定\")]),_c('el-button',{on:{\"click\":_vm.beforeClose}},[_vm._v(\"取 消\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-dialog\r\n    :title=\"title\"\r\n    top=\"5vh\"\r\n    :visible=\"value\"\r\n    :show-close=\"true\"\r\n    width=\"920px\"\r\n    :lock-scroll=\"false\"\r\n    :destroy-on-close=\"true\"\r\n    :append-to-body=\"true\"\r\n    :close-on-click-modal=\"false\"\r\n    :close-on-press-escape=\"false\"\r\n    :before-close=\"beforeClose\"\r\n    @open=\"initSelect\"\r\n  >\r\n    <el-scrollbar class=\"scroll-dialog\">\r\n      <el-form ref=\"filterItem\" class=\"top-filter clearfix\" :model=\"query\" inline @submit.native.prevent>\r\n        <el-form-item prop=\"materialCodeOrName\">\r\n          <el-input v-model.trim=\"query.materialCodeOrName\" placeholder=\"物料编号或名称\" class=\"filter-item\" style=\"width: 178px;\" clearable @keyup.enter.native=\"searchInit\" />\r\n        </el-form-item>\r\n        <el-button\r\n          class=\"filter-item\"\r\n          type=\"success\"\r\n          icon=\"el-icon-search\"\r\n          @click=\"searchInit\"\r\n        >搜索</el-button>\r\n        <el-button\r\n          class=\"filter-item\"\r\n          type=\"warning\"\r\n          icon=\"el-icon-refresh-left\"\r\n          @click=\"resetForm('filterItem')\"\r\n        >重置</el-button>\r\n      </el-form>\r\n      <!-- 头部搜索 -->\r\n      <el-row>\r\n        <table-com\r\n          :ref=\"refName\"\r\n          :row-key=\"rowKey\"\r\n          :table-height-type=\"490\"\r\n          :loading=\"loading\"\r\n          :index=\"true\"\r\n          :index-fixed=\"false\"\r\n          :selection=\"true\"\r\n          :multiple=\"multiple\"\r\n          :selection-fixed=\"false\"\r\n          :table-column-sort=\"false\"\r\n          :table-data=\"tableData\"\r\n          :column-list=\"columnList\"\r\n          :show-operate=\"false\"\r\n          :operate-fixed=\"false\"\r\n          v-bind=\"$attrs\"\r\n          :table-selection=\"tableSelection\"\r\n          @selectionChange=\"selectionChange\"\r\n          @sortChange=\"sortChange\"\r\n          @dynamicRow=\"getDynamicRow\"\r\n        />\r\n      </el-row>\r\n      <pagination :page.sync=\"pageInfo.current\" :limit.sync=\"pageInfo.size\" :total=\"total\" @pagination=\"init\" />\r\n    </el-scrollbar>\r\n    <div slot=\"footer\">\r\n      <el-button type=\"primary\" @click=\"handleConfirm\">确 定</el-button>\r\n      <el-button @click=\"beforeClose\">取 消</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { v4 as uuidv4 } from 'uuid'\r\nimport paginationPage from '@/mixins/paginationPage'\r\nimport { getListApi as getListSelectApi } from '@/apis/modules/base/baseMaterialInformation'\r\n\r\nexport default {\r\n  name: 'MaterialSelect',\r\n  mixins: [paginationPage],\r\n  props: {\r\n    value: {\r\n      required: true,\r\n      type: Boolean\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: '物料选择'\r\n    },\r\n    // 是否多选，如果多选，返回id的数组， 如果单选返回 {id, name}\r\n    multiple: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 默认勾选的ids\r\n    selection: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 多选状态下的最大选择数量\r\n    max: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    ids: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    extraInfo: {\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n  },\r\n  dicts: [],\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      refName: 'modelSelectMaterialSelect',\r\n      query: {\r\n        materialCodeOrName: ''\r\n      },\r\n      tableData: [],\r\n      columnList: [\r\n        {\r\n          module: 'word',\r\n          prop: 'code',\r\n          label: '物料编号',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'name',\r\n          label: '物料名称',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'spec',\r\n          label: '规格型号',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'assessType_dictText',\r\n          label: '评估类型',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'description',\r\n          label: '物料描述',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'unitMeasureName',\r\n          label: '计量单位',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'inventoryNum',\r\n          label: '库存数量',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: 'custom',\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'unitPrice',\r\n          label: '单价',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: 'custom',\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'totalPrice',\r\n          label: '总价',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: 'custom',\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'type_dictText',\r\n          label: '物料类型',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'minOutboundUnitName',\r\n          label: '最小单位SKU',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'isExpirationDate',\r\n          label: '是否有保质期',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          headerAlign: 'center',\r\n          formatter: (c) => c.isExpirationDate === 0 ? '否' : '是'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'materialGroupCode',\r\n          label: '物料组编号',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'materialGroupDescription',\r\n          label: '物料组描述',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'dataSources_dictText',\r\n          label: '数据来源',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          headerAlign: 'center'\r\n        }\r\n      ],\r\n      columnSets: [],\r\n      tableSelection: [],\r\n      deptSelectedInfo: {\r\n        list: [],\r\n        visible: false,\r\n        radio: ''\r\n      },\r\n      rowKey: 'id',\r\n      rowObj: {}\r\n    }\r\n  },\r\n  methods: {\r\n    init(sortInfo) {\r\n      const params = {\r\n        ...this.query,\r\n        materialIdList: [], // 接口所需，其他地方也涉及到了这个接口，不然会报错\r\n        ...this.extraInfo,\r\n        page: {\r\n          ...this.pageInfo\r\n        },\r\n        ...sortInfo && sortInfo.order && { orderBy: `${sortInfo.prop} ${sortInfo.order === 'ascending' ? 'asc' : 'desc'}` }\r\n      }\r\n      return new Promise((resolve, reject) => {\r\n        getListSelectApi({\r\n          ...params\r\n        }).then(res => {\r\n          const { code, data } = res\r\n          if (!code) {\r\n            const { list, ...pageInfo } = data\r\n            this.initPage(pageInfo)\r\n            this.tableData = list.map(i => {\r\n              return {\r\n                uuid: uuidv4(),\r\n                deliveryNumber: i.orderNum,\r\n                ...i\r\n              }\r\n            })\r\n            const rowKey = this.rowKey\r\n            const ids = this.tableSelection.map(i => i[rowKey])\r\n            this.tableData.forEach(row => {\r\n              function check(row) {\r\n                const id = row[rowKey]\r\n                return ids.some(i => i === id)\r\n              }\r\n              if (check(row)) {\r\n                this.$nextTick(() => {\r\n                  this.$refs[this.refName].$refs.multipleTable.toggleRowSelection(row, true)\r\n                })\r\n              }\r\n            })\r\n          }\r\n          this.loading = false\r\n          resolve(res)\r\n        }).catch(err => {\r\n          this.loading = false\r\n          reject(err)\r\n        })\r\n      })\r\n    },\r\n    // 表格自定义排序\r\n    sortChange({ column, prop, order }) {\r\n      this.init({ prop, order })\r\n    },\r\n    // 重置\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields()\r\n      this.searchInit()\r\n    },\r\n    // 初始化\r\n    initSelect() {\r\n      // 初始化选中项\r\n      this.searchInit()\r\n    },\r\n    // 选项改变\r\n    selectionChange(arr) {\r\n      this.tableSelection = [...arr]\r\n    },\r\n    // 更新列表复选框勾选\r\n    handleUpdateTableSelected(type = '') {\r\n\r\n    },\r\n    // 关闭\r\n    beforeClose(done) {\r\n      this.$emit('input', false)\r\n      typeof done === 'function' && done()\r\n      this.tableSelection = new Array(0)\r\n      this.resetForm('filterItem')\r\n    },\r\n    // 确定\r\n    handleConfirm() {\r\n      this.$emit('confirm', this.tableSelection)\r\n      this.beforeClose()\r\n    },\r\n    // 注意：此方法貌似废弃了\r\n    onDeptSelectConfirm(list) {\r\n      if (list.length) {\r\n        this.query.usedOffice = list[0].name\r\n      }\r\n    },\r\n    getDynamicRow(item) {\r\n      this.rowObj = item\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.scroll-dialog {\r\n  height: 600px;\r\n}\r\n::v-deep .el-scrollbar .el-scrollbar__wrap {\r\n  overflow-x: hidden;\r\n}\r\n ::v-deep .el-dialog__body {\r\n  padding-top: 10px;\r\n  padding-bottom: 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MaterialForm.vue?vue&type=template&id=a64e797a&scoped=true&\"\nimport script from \"./MaterialForm.vue?vue&type=script&lang=js&\"\nexport * from \"./MaterialForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MaterialForm.vue?vue&type=style&index=0&id=a64e797a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a64e797a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialForm.vue?vue&type=style&index=0&id=a64e797a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialForm.vue?vue&type=style&index=0&id=a64e797a&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('audit-wrapper',{attrs:{\"extra-info\":_vm.extraInfo}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"inline\":\"\",\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-row',[_c('el-col',{attrs:{\"xs\":8,\"sm\":8,\"md\":8,\"lg\":8,\"xl\":8}},[_c('el-form-item',{attrs:{\"label\":\"单号：\",\"prop\":\"billNumber\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"系统自动生成\",\"disabled\":\"\"},model:{value:(_vm.form.billNumber),callback:function ($$v) {_vm.$set(_vm.form, \"billNumber\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.billNumber\"}})],1)],1),_c('el-col',{attrs:{\"xs\":8,\"sm\":8,\"md\":8,\"lg\":8,\"xl\":8}},[_c('el-form-item',{attrs:{\"label\":\"去向：\",\"prop\":\"supplierId\"}},[_c('el-link',{attrs:{\"disabled\":['audit', 'detail'].includes(_vm.pageType),\"type\":\"primary\"},on:{\"click\":function($event){_vm.destinationVisible = true}}},[_vm._v(\"\\n            \"+_vm._s(_vm.form.supplierId ? _vm.form.supplierName : \"选择供应商\"))])],1)],1),_c('el-col',{attrs:{\"xs\":8,\"sm\":8,\"md\":8,\"lg\":8,\"xl\":8}},[_c('el-form-item',{attrs:{\"label\":\"联系人：\",\"prop\":\"contact\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请填写\",\"disabled\":['audit', 'detail'].includes(_vm.pageType)},model:{value:(_vm.form.contact),callback:function ($$v) {_vm.$set(_vm.form, \"contact\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.contact\"}})],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"xs\":8,\"sm\":8,\"md\":8,\"lg\":8,\"xl\":8}},[_c('el-form-item',{attrs:{\"label\":\"电话：\",\"prop\":\"tel\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请填写\",\"disabled\":['audit', 'detail'].includes(_vm.pageType)},model:{value:(_vm.form.tel),callback:function ($$v) {_vm.$set(_vm.form, \"tel\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.tel\"}})],1)],1),_c('el-col',{attrs:{\"xs\":8,\"sm\":8,\"md\":8,\"lg\":8,\"xl\":8}},[_c('el-form-item',{attrs:{\"label\":\"订单日期：\",\"prop\":\"billDate\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"订单日期\",\"disabled\":\"\"},model:{value:(_vm.form.billDate),callback:function ($$v) {_vm.$set(_vm.form, \"billDate\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.billDate\"}})],1)],1),_c('el-col',{attrs:{\"xs\":8,\"sm\":8,\"md\":8,\"lg\":8,\"xl\":8}},[_c('el-form-item',{attrs:{\"label\":\"交货日期：\",\"prop\":\"deliveryDate\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"value-format\":\"yyyy-MM-dd\",\"placeholder\":\"请选择交货日期\",\"disabled\":['audit', 'detail'].includes(_vm.pageType)},model:{value:(_vm.form.deliveryDate),callback:function ($$v) {_vm.$set(_vm.form, \"deliveryDate\", $$v)},expression:\"form.deliveryDate\"}})],1)],1)],1),_c('el-row',[(!['audit', 'detail'].includes(_vm.pageType))?_c('el-col',{staticStyle:{\"margin-bottom\":\"15px\"},attrs:{\"xs\":12,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleAddMaterial}},[_vm._v(\"添加物料\")])],1):_vm._e()],1),_c('el-row',[_c('el-col',{staticStyle:{\"margin-bottom\":\"15px\"},attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":24,\"xl\":24}},[_c('table-com',{ref:\"baseTableRef\",attrs:{\"loading\":false,\"index\":true,\"selection\":false,\"table-data\":_vm.form.detailList,\"column-list\":_vm.columnList,\"operation-width\":190,\"expand-list\":_vm.expandList,\"table-column-sort\":false,\"table-height-type\":600,\"show-operate\":!['audit', 'detail'].includes(_vm.pageType)},on:{\"rowClick\":_vm.handleRowClick,\"refresh\":_vm.searchInit},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_c('el-row',[(_vm.pageType === 'audit')?_c('el-col',{staticStyle:{\"margin-bottom\":\"15px\"},attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":24,\"xl\":24}},[_c('el-form-item',{staticClass:\"approval-opinion\",attrs:{\"prop\":\"message\",\"label\":\"审批意见：\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请填写审批意见\",\"rows\":5},model:{value:(_vm.form.message),callback:function ($$v) {_vm.$set(_vm.form, \"message\", $$v)},expression:\"form.message\"}})],1)],1):_vm._e()],1)],1),_c('div',{staticClass:\"btn-context\"},[(_vm.pageType === 'audit')?[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.buttonLoading},on:{\"click\":function($event){return _vm.onAudit(1)}}},[_vm._v(\"通 过\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"loading\":_vm.buttonLoading},on:{\"click\":function($event){return _vm.onAudit(0)}}},[_vm._v(\"驳 回\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.buttonLoading},on:{\"click\":function($event){return _vm.onAudit(2)}}},[_vm._v(\"不 通 过\")])]:_vm._e(),(_vm.pageType === 'add')?[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.buttonLoading},on:{\"click\":function($event){return _vm.onSave('form')}}},[_vm._v(\"保 存\")])]:_vm._e(),(_vm.pageType === 'edit')?[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.buttonLoading},on:{\"click\":function($event){return _vm.onSave('form')}}},[_vm._v(\"保 存\")])]:_vm._e(),_c('el-button',{attrs:{\"loading\":_vm.buttonLoading},on:{\"click\":_vm.goBack}},[_vm._v(\"取消\")])],2),_c('material-dialog',{attrs:{\"extra-info\":{orderBy: 'inventoryNum desc', forBusiness: 'billOutsourceOut', materialIdList: _vm.ids}},on:{\"confirm\":_vm.onSelectConfirm},model:{value:(_vm.dialogVisible),callback:function ($$v) {_vm.dialogVisible=$$v},expression:\"dialogVisible\"}}),_c('destination-select',{attrs:{\"ids\":_vm.form.detailList.map(function (i) { return i.materialId; }),\"extra-info\":{},\"multiple\":false},on:{\"confirm\":_vm.destinationConfirm},model:{value:(_vm.destinationVisible),callback:function ($$v) {_vm.destinationVisible=$$v},expression:\"destinationVisible\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <audit-wrapper :extra-info=\"extraInfo\">\r\n    <el-form ref=\"form\" :model=\"form\" inline :rules=\"rules\" label-width=\"100px\">\r\n      <el-row>\r\n        <el-col :xs=\"8\" :sm=\"8\" :md=\"8\" :lg=\"8\" :xl=\"8\">\r\n          <el-form-item label=\"单号：\" prop=\"billNumber\">\r\n            <el-input\r\n              v-model.trim=\"form.billNumber\"\r\n              placeholder=\"系统自动生成\"\r\n              style=\"width: 100%;\"\r\n              disabled\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :xs=\"8\" :sm=\"8\" :md=\"8\" :lg=\"8\" :xl=\"8\">\r\n          <el-form-item label=\"去向：\" prop=\"supplierId\">\r\n            <el-link\r\n              :disabled=\"['audit', 'detail'].includes(pageType)\"\r\n              type=\"primary\"\r\n              @click=\"destinationVisible = true\"\r\n            >\r\n              {{ form.supplierId ? form.supplierName : \"选择供应商\" }}</el-link>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :xs=\"8\" :sm=\"8\" :md=\"8\" :lg=\"8\" :xl=\"8\">\r\n          <el-form-item label=\"联系人：\" prop=\"contact\">\r\n            <el-input\r\n              v-model.trim=\"form.contact\"\r\n              placeholder=\"请填写\"\r\n              style=\"width: 100%;\"\r\n              :disabled=\"['audit', 'detail'].includes(pageType)\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :xs=\"8\" :sm=\"8\" :md=\"8\" :lg=\"8\" :xl=\"8\">\r\n          <el-form-item label=\"电话：\" prop=\"tel\">\r\n            <el-input\r\n              v-model.trim=\"form.tel\"\r\n              placeholder=\"请填写\"\r\n              style=\"width: 100%;\"\r\n              :disabled=\"['audit', 'detail'].includes(pageType)\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :xs=\"8\" :sm=\"8\" :md=\"8\" :lg=\"8\" :xl=\"8\">\r\n          <el-form-item label=\"订单日期：\" prop=\"billDate\">\r\n            <el-input\r\n              v-model.trim=\"form.billDate\"\r\n              placeholder=\"订单日期\"\r\n              style=\"width: 100%;\"\r\n              disabled\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :xs=\"8\" :sm=\"8\" :md=\"8\" :lg=\"8\" :xl=\"8\">\r\n          <el-form-item label=\"交货日期：\" prop=\"deliveryDate\">\r\n            <el-date-picker\r\n              v-model=\"form.deliveryDate\"\r\n              type=\"date\"\r\n              style=\"width: 100%;\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              placeholder=\"请选择交货日期\"\r\n              :disabled=\"['audit', 'detail'].includes(pageType)\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <!-- <el-row>\r\n        <el-col :xs=\"8\" :sm=\"8\" :md=\"8\" :lg=\"8\" :xl=\"8\">\r\n          <el-form-item label=\"仓库：\" prop=\"warehouseId\">\r\n            <el-select\r\n              v-model=\"form.warehouseId\"\r\n              filterable\r\n              clearable\r\n              placeholder=\"仓库名称\"\r\n              style=\"width: 100%;\"\r\n              :disabled=\"['audit', 'detail'].includes(pageType)\"\r\n              @change=\"handleSelectChange\"\r\n            >\r\n              <el-option\r\n                v-for=\"(item,index) in warehousePullList\"\r\n                :key=\"index\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row> -->\r\n      <el-row>\r\n        <el-col v-if=\"!['audit', 'detail'].includes(pageType)\" :xs=\"12\" :sm=\"12\" :md=\"12\" :lg=\"12\" :xl=\"12\" style=\"margin-bottom: 15px;\">\r\n          <el-button type=\"primary\" @click=\"handleAddMaterial\">添加物料</el-button>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" style=\"margin-bottom: 15px;\">\r\n          <table-com\r\n            ref=\"baseTableRef\"\r\n            :loading=\"false\"\r\n            :index=\"true\"\r\n            :selection=\"false\"\r\n            :table-data=\"form.detailList\"\r\n            :column-list=\"columnList\"\r\n            :operation-width=\"190\"\r\n            :expand-list=\"expandList\"\r\n            :table-column-sort=\"false\"\r\n            :table-height-type=\"600\"\r\n            :show-operate=\"!['audit', 'detail'].includes(pageType)\"\r\n            @rowClick=\"handleRowClick\"\r\n            @refresh=\"searchInit\"\r\n          >\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"danger\" @click=\"handleDelete(scope.$index)\">删除</el-button>\r\n            </template>\r\n          </table-com>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col v-if=\"pageType === 'audit'\" style=\"margin-bottom: 15px;\" :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\">\r\n          <el-form-item prop=\"message\" label=\"审批意见：\" class=\"approval-opinion\">\r\n            <el-input\r\n              v-model=\"form.message\"\r\n              type=\"textarea\"\r\n              placeholder=\"请填写审批意见\"\r\n              :rows=\"5\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n    <div class=\"btn-context\">\r\n      <template v-if=\"pageType === 'audit'\">\r\n        <el-button type=\"primary\" :loading=\"buttonLoading\" @click=\"onAudit(1)\">通 过</el-button>\r\n        <el-button type=\"danger\" :loading=\"buttonLoading\" @click=\"onAudit(0)\">驳 回</el-button>\r\n        <el-button type=\"primary\" :loading=\"buttonLoading\" @click=\"onAudit(2)\">不 通 过</el-button>\r\n      </template>\r\n      <template v-if=\"pageType === 'add'\">\r\n        <el-button type=\"primary\" :loading=\"buttonLoading\" @click=\"onSave('form')\">保 存</el-button>\r\n      </template>\r\n      <template v-if=\"pageType === 'edit'\">\r\n        <el-button type=\"primary\" :loading=\"buttonLoading\" @click=\"onSave('form')\">保 存</el-button>\r\n      </template>\r\n      <el-button :loading=\"buttonLoading\" @click=\"goBack\">取消</el-button>\r\n    </div>\r\n    <!-- 物料选择 -->\r\n    <material-dialog\r\n      v-model=\"dialogVisible\"\r\n      :extra-info=\"{orderBy: 'inventoryNum desc', forBusiness: 'billOutsourceOut', materialIdList: ids}\"\r\n      @confirm=\"onSelectConfirm\"\r\n    />\r\n    <!-- 去向选择  -->\r\n    <destination-select\r\n      v-model=\"destinationVisible\"\r\n      :ids=\"form.detailList.map(i => i.materialId)\"\r\n      :extra-info=\"{}\"\r\n      :multiple=\"false\"\r\n      @confirm=\"destinationConfirm\"\r\n    />\r\n  </audit-wrapper>\r\n</template>\r\n\r\n<script>\r\nimport AuditWrapper from '@/components/AuditWrapper'\r\nimport _ from 'lodash'\r\nimport paginationPage from '@/mixins/paginationPage'\r\nimport MaterialDialog from '@/components/ModalSelect/MaterialForm'\r\nimport DestinationSelect from '@/components/ModalSelect/Supplier'\r\nimport { addApi as addListApi, editApi as updateListApi, getDetailApi, auditApi } from '@/apis/modules/out-bound/outsourcing'\r\nimport { requestWrapper, promiseWrapper } from '@/utils/utils'\r\nimport { getWarehouseSapPullListApi } from '@/apis/modules/base/basewmsWarehouse'\r\nimport { getLocalTime } from '@/filters'\r\n// import { debounceS } from '@/utils'\r\nconst INIT_FORM = () => ({\r\n  billNumber: '',\r\n  supplierId: '', // 供应商id\r\n  supplierName: '', // 供应商名称\r\n  contact: '', // 联系人\r\n  tel: '', // 电话\r\n  deliveryDate: '', // 交货日期\r\n  billDate: getLocalTime(new Date().getTime()), // 订单日期\r\n  message: '', // 审批意见\r\n  detailList: [] // 物料列表\r\n  // warehouseId: '' // 仓库id\r\n})\r\n\r\nexport default {\r\n  components: {\r\n    MaterialDialog,\r\n    DestinationSelect,\r\n    AuditWrapper\r\n  },\r\n  mixins: [paginationPage],\r\n  props: {},\r\n  data() {\r\n    return {\r\n      title: '外协出库',\r\n      destinationVisible: false,\r\n      query: {},\r\n      tableData: [],\r\n      columnList: [\r\n        {\r\n          module: 'word',\r\n          prop: 'materialCode',\r\n          label: '物料编码',\r\n          align: 'center',\r\n          // width: 120,\r\n          // minWidth: 160,\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'materialName',\r\n          label: '物料名称',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'materialSpec',\r\n          label: '规格型号',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'assessType_dictText',\r\n          label: '评估类型',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'unitName',\r\n          label: '计量单位',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'number',\r\n          prop: 'num',\r\n          label: '数量',\r\n          align: 'center',\r\n          minWidth: 160,\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true, // 是否可以通过拖拽改变宽度\r\n          formatter: null,\r\n          headerAlign: 'center',\r\n          setMin: (row) => {\r\n            return 0\r\n          },\r\n          disabled: () => ['audit', 'detail'].includes(this.pageType),\r\n          // setMax: (row) => {\r\n          //   return row.orderNum\r\n          // },\r\n          handleChange: _.throttle((scope) => {\r\n            console.log('执行了组件的修改,', scope)\r\n          }, 1000),\r\n          setPrecision: (row) => {\r\n            return 3\r\n          }\r\n        }\r\n      ],\r\n      expandList: [],\r\n      dialogVisible: false,\r\n      form: INIT_FORM(),\r\n      rules: {\r\n        supplierId: [\r\n          { required: true, message: '请选供应商', trigger: 'change' }\r\n        ],\r\n        contact: [\r\n          { required: true, message: '请填写联系人', trigger: 'blur' }\r\n        ],\r\n        tel: [\r\n          { required: true, message: '请填写电话', trigger: 'blur' }\r\n        ],\r\n        deliveryDate: [\r\n          { required: true, message: '请选择交货日期', trigger: 'change' }\r\n        ],\r\n        billDate: [\r\n          { required: true, message: '请选择订单日期', trigger: 'change' }\r\n        ],\r\n        message: [\r\n          { required: true, message: '请填写审批意见', trigger: 'blur' }\r\n        ],\r\n        warehouseId: [\r\n          { required: true, message: '请选择仓库', trigger: 'change' }\r\n        ]\r\n      },\r\n      buttonLoading: false,\r\n      extraInfo: null,\r\n      warehousePullList: [] // 仓库下拉列表\r\n    }\r\n  },\r\n  computed: {\r\n    pageType() {\r\n      // 如果页面链路走向是 待办弹窗->《已办理业务》，操作列小眼睛跳转到当前单据的详情页\r\n      if (this.$route.query.type === 'auditHistory') return 'detail'\r\n      return this.$route.name.replace('BillOutsourceOut', '').toLowerCase() || 'add'\r\n    },\r\n    ids() {\r\n      return this.form.detailList.map(i => i.materialId)\r\n    }\r\n  },\r\n  mounted() {\r\n    this.pageType !== 'add' && this.getDetail()\r\n    // this.getWarehousePullList()\r\n  },\r\n  methods: {\r\n    // 新增物料接口\r\n    handleAddMaterial() {\r\n      // if (!this.form.warehouseId) {\r\n      //   this.$message({\r\n      //     message: '请先选择仓库',\r\n      //     type: 'warning'\r\n      //   })\r\n      //   return\r\n      // }\r\n      this.dialogVisible = true\r\n    },\r\n    handleRowClick({ row, column, cell, event }) {\r\n      console.log(row)\r\n      if (column.label === '操作') {\r\n        return false\r\n      }\r\n    },\r\n    // 删除\r\n    handleDelete(i) {\r\n      this.$confirm(`此操作将永久删除该物料, 是否继续?`, '提示', {\r\n        confirmButtonText: '确 定',\r\n        cancelButtonText: '取 消',\r\n        cancelButtonClass: 'btn-custom-cancel',\r\n        type: 'warning',\r\n        lockScroll: false\r\n      }).then(() => {\r\n        this.form.detailList.splice(i, 1)\r\n        this.$message({\r\n          message: '操作成功',\r\n          type: 'success'\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          message: '已取消删除',\r\n          type: 'info'\r\n        })\r\n      })\r\n    },\r\n    // 详情\r\n    getDetail() {\r\n      return new Promise((resolve, reject) => {\r\n        getDetailApi({ billNumber: this.$route.query.billNumber })\r\n          .then(res => {\r\n            const { code, data } = res\r\n            if (!code) {\r\n              this.form = data || {}\r\n              this.extraInfo = res.data\r\n              resolve(res)\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.log(err)\r\n            reject(err)\r\n          })\r\n      })\r\n    },\r\n    onSelectConfirm(list) {\r\n      list.length && list.forEach(c => {\r\n        this.form.detailList.push({\r\n          ...c,\r\n          materialId: c.id,\r\n          materialCode: c.code,\r\n          materialName: c.name,\r\n          materialSpec: c.spec,\r\n          unitName: c.unitMeasureName,\r\n          num: 0\r\n        })\r\n      })\r\n    },\r\n    destinationConfirm(list) {\r\n      console.log(list, 'lsit')\r\n      if (list.length) {\r\n        this.form.supplierName = list[0].name\r\n        this.form.supplierId = list[0].id\r\n      }\r\n    },\r\n    MetailConfirm(list) {\r\n      console.log(list, 'lsit')\r\n      if (list.length) {\r\n        this.form.supplierName = list[0].name\r\n        this.form.supplierId = list[0].id\r\n      }\r\n    },\r\n    onSave(formName) {\r\n      const obj = {\r\n        add: addListApi,\r\n        edit: updateListApi\r\n      }\r\n      const Api = obj[this.pageType]\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          if (!this.form.detailList.length) {\r\n            this.$message({\r\n              message: '至少新增一条物料',\r\n              type: 'warning'\r\n            })\r\n            return\r\n          } else {\r\n            const bool = this.form.detailList.some(item => !item.num || item.num <= 0)\r\n            if (bool) {\r\n              this.$message({\r\n                message: '当前添加物料列表数量存在空值或不规范值',\r\n                type: 'warning'\r\n              })\r\n              return\r\n            }\r\n          }\r\n          this.buttonLoading = true\r\n          Api({\r\n            ...this.form\r\n          }).then(res => {\r\n            const { code } = res\r\n            if (!code) {\r\n              this.$message({\r\n                message: `操作成功`,\r\n                type: 'success'\r\n              })\r\n              this.goBack()\r\n            }\r\n            this.buttonLoading = false\r\n          }).catch(err => {\r\n            console.log(err)\r\n            this.buttonLoading = false\r\n          })\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // Tip 回退页面\r\n    goBack() {\r\n      const tempRoute = Object.assign({}, this.$route)\r\n      this.$store.dispatch('tagsView/delView', tempRoute)\r\n      this.$refs.form.resetFields()\r\n      this.form = INIT_FORM()\r\n      const whiteList = ['add', 'edit', 'detail']\r\n      whiteList.includes(this.pageType) ? this.$router.push({ name: 'OutBoundOutsourcing' }) : this.$router.go(-1)\r\n    },\r\n    // Tip 审批->通过 驳回 不通过\r\n    onAudit(auditType) {\r\n      const message = {\r\n        1: '该工单即将审批通过，是否继续？',\r\n        0: '该工单即将驳回, 是否继续?',\r\n        2: '该工单即将不通过, 是否继续?'\r\n      }[auditType]\r\n      this.$refs.form.validate(async valid => {\r\n        if (!valid) return\r\n        const diag = await promiseWrapper(this.$confirm(message, '提示', {\r\n          confirmButtonText: '确 定',\r\n          cancelButtonText: '取 消',\r\n          type: 'warning',\r\n          cancelButtonClass: 'btn-custom-cancel',\r\n          lockScroll: false\r\n        }))\r\n        if (!diag.success) return\r\n        this.buttonLoading = true\r\n        const { id: businessId } = this.$route.params\r\n        const { billNumber, taskId, processInstanceId } = this.$route.query\r\n        const res = await requestWrapper(auditApi({\r\n          businessId, // 业务ID\r\n          billNumber, // 单据编号\r\n          taskId, // 任务ID\r\n          processInstanceId, // 流程实例的ID\r\n          approval: auditType, // 审批标识\r\n          message: this.form.message // 审批意见\r\n        }))\r\n        this.buttonLoading = false\r\n        if (!res.success) return\r\n        this.$message({\r\n          message: '操作成功',\r\n          type: 'success'\r\n        })\r\n        this.goBack()\r\n      })\r\n    },\r\n    // 仓库下拉数据\r\n    getWarehousePullList() {\r\n      return new Promise((resolve, reject) => {\r\n        getWarehouseSapPullListApi().then(res => {\r\n          const { code, data } = res\r\n          if (!code) {\r\n            this.warehousePullList = data || []\r\n          }\r\n          resolve(res)\r\n        }).catch(err => {\r\n          reject(err)\r\n        })\r\n      })\r\n    },\r\n    // 下拉框选中值改变的回调\r\n    handleSelectChange(bindVal) {\r\n      this.form.detailList = []\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.btn-context {\r\n  text-align: right;\r\n}\r\n::v-deep .approval-opinion {\r\n  margin: 0;\r\n  width: 100%;\r\n  .el-form-item__content {\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit.vue?vue&type=template&id=16d33f52&scoped=true&\"\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./edit.vue?vue&type=style&index=0&id=16d33f52&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16d33f52\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}