(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["InStorageDeliveryAdd"],{"037c":function(e,t,r){"use strict";r.d(t,"d",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return l}));var n=r("bc43");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/basic/wmsMaterial/pageList",method:"post",data:e})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/basic/wmsMaterial/add",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/basic/wmsMaterial/edit",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/basic/wmsMaterial/delete",method:"post",data:e})}},"0bfd":function(e,t,r){"use strict";r.d(t,"n",(function(){return a})),r.d(t,"i",(function(){return o})),r.d(t,"b",(function(){return l})),r.d(t,"g",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"o",(function(){return u})),r.d(t,"j",(function(){return d})),r.d(t,"k",(function(){return f})),r.d(t,"a",(function(){return m})),r.d(t,"f",(function(){return b})),r.d(t,"l",(function(){return h})),r.d(t,"p",(function(){return p})),r.d(t,"m",(function(){return g})),r.d(t,"h",(function(){return v})),r.d(t,"q",(function(){return y})),r.d(t,"c",(function(){return w})),r.d(t,"d",(function(){return O}));var n=r("bc43"),i=r("ee8a");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsContract/treeList",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsContract/detail",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsContract/add",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsContract/edit",method:"post",data:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsContract/delete",method:"post",data:e})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/WmsOrder/detail",method:"post",data:e,timeout:1/0})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/WmsOrder/listMaterial",method:"post",data:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/WmsOrder/orderMaterialTabInfo",method:"post",data:e})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/WmsOrder/add",method:"post",data:e})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/WmsOrder/edit",method:"post",data:e})}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/WmsOrder/del",method:"post",data:e})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/WmsOrder/editRemarks",method:"post",data:e})}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/WmsOrder/listDeliveryReceiptHistory",method:"post",data:e})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/enterWarehouse/WmsOrder/export",method:"post",data:e})}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/WmsOrder/print",method:"post",data:e})}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/WmsOrder/allMaterialList",method:"post",data:e})}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/WmsOrder/delOrderMaterial",method:"post",data:e})}},"1fb1":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[r("el-row",{staticClass:"clearfix"},[r("div",{staticClass:"fl"},[r("el-button",{on:{click:e.beforeClose}},[e._v("返 回")])],1),r("div",{staticClass:"fr"},["detail"!==e.params.view?r("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.handleSave}},[e._v(e._s("add"===e.params.view?"下一步":"保存交接单"))]):e._e(),r("el-button",{directives:[{name:"show",rawName:"v-show",value:"detail"===e.params.view,expression:"params.view === 'detail'"}],attrs:{disabled:!([3,4].includes(e.form.status)&&e.form.canStockInMatarialCount>0),type:"primary"},on:{click:e.handleInWarehouse}},[e._v("入库")])],1)]),r("transition",{attrs:{name:"el-zoom-in-top"}},[r("el-row",[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px","label-position":"left",disabled:"detail"===e.params.view}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"合同号",prop:"contractNo"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请填写合同号",disabled:""},model:{value:e.form.contractNo,callback:function(t){e.$set(e.form,"contractNo","string"===typeof t?t.trim():t)},expression:"form.contractNo"}})],1)],1),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"订单号",prop:"orderNo"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请填写订单号",disabled:""},model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo","string"===typeof t?t.trim():t)},expression:"form.orderNo"}})],1)],1),"add"!==e.params.view?r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"交接单号",prop:"no"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"系统自动生成",disabled:""},model:{value:e.form.no,callback:function(t){e.$set(e.form,"no","string"===typeof t?t.trim():t)},expression:"form.no"}})],1)],1):e._e(),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"供应商",prop:"supplierName"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请填写供应商",disabled:""},model:{value:e.form.supplierName,callback:function(t){e.$set(e.form,"supplierName","string"===typeof t?t.trim():t)},expression:"form.supplierName"}})],1)],1),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"用料单位",prop:"materialsUnit"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请填写用料单位",disabled:""},model:{value:e.form.materialsUnit,callback:function(t){e.$set(e.form,"materialsUnit","string"===typeof t?t.trim():t)},expression:"form.materialsUnit"}})],1)],1),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"凭证日期",prop:"deliveryDate"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择凭证日期",clearable:!1,editable:!1},model:{value:e.form.deliveryDate,callback:function(t){e.$set(e.form,"deliveryDate",t)},expression:"form.deliveryDate"}})],1)],1),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"是否检验",prop:"inspect"}},[r("el-radio-group",{staticClass:"my-inspect-sty",staticStyle:{width:"178px"},attrs:{disabled:"modify"===e.params.view&&6===e.form.status},model:{value:e.form.inspect,callback:function(t){e.$set(e.form,"inspect",t)},expression:"form.inspect"}},[r("el-radio-button",{attrs:{label:!0}},[e._v("是")]),r("el-radio-button",{attrs:{label:!1}},[e._v("否")])],1)],1)],1),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[r("el-input",{attrs:{type:"textarea",rows:1,placeholder:"请填写备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1)],1)],1)],1),r("el-divider",{attrs:{"content-position":"left"}},[e._v("交接单信息")]),"detail"!==e.params.view?r("el-row",[["2","3","4"].includes(e.form.orderType)?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAddMaterial(e.form.orderType)}}},[e._v("新增物料")]):e._e(),"1"!==e.form.orderType||"modify"!==e.params.view||e.form.isReverse?e._e():r("el-button",{attrs:{type:"primary",disabled:!e.enabled},on:{click:e.handleAddMaterial1}},[e._v("添加物料")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-setting"},on:{click:e.handleSetTable}},[e._v("设置")])],1):e._e(),r("el-row",[r("div",{staticClass:"clearfix top-filter"},[r("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"物料编码或名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInit(t)}},model:{value:e.query.code,callback:function(t){e.$set(e.query,"code",t)},expression:"query.code"}})],1),r("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:e.init}},[e._v("搜索")]),r("el-button",{attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")]),["detail","add"].includes(e.params.view)?e._e():r("span",{staticStyle:{"text-align":"right"}},[r("el-button",{attrs:{type:"primary"},on:{click:e.handleAllGenerate}},[e._v("全部生成条码")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleAllPrint}},[e._v("全部打印")])],1)],1)],1)]),r("el-row",[r("table-com",{key:e.tableComKey,ref:e.refTableName,staticClass:"base-table",attrs:{"ref-name":"tableRef","table-height-type":450,selection:"add"===e.params.view,"selection-fixed":!1,"table-selection":e.tableSelection,loading:e.tableLoading,index:!0,"table-column-sort":!0,"form-ident":e.formIdent,"table-data":e.tableData,"column-list":e.columnList,"operation-width":170,"expand-list":e.expandList,"show-operate":"add"!==e.params.view,"cell-style":e.handleCellStyle,"refresh-key":e.refreshKey,selectable:e.selectable},on:{rowClick:e.handleRowClick,refresh:e.searchInit,selectionChange:e.selectionChange,dynamicRow:e.getDynamicRow},scopedSlots:e._u([{key:"default",fn:function(t){return["detail"!==e.params.view?r("el-button",{attrs:{type:"primary",disabled:0===t.row.orderType||3===t.row.status},on:{click:function(r){return e.handleGenerateBarcode(t.row)}}},[e._v("生成条码")]):e._e(),"detail"===e.params.view?r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.handleViewBarcode(t.row)}}},[e._v("查看条码")]):e._e(),"detail"===e.params.view||e.form.isReverse?e._e():r("el-button",{attrs:{type:"danger",disabled:0===t.row.orderType||3===t.row.status||6===t.row.status},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),"add"===e.params.view?r("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.paginationStatusChange}}):e._e(),r("generate-barcode",{attrs:{"dialog-form":e.dialogForm,"edit-type":e.editType,"extra-info":{isReverse:e.form.isReverse}},on:{confirm:e.confirmCallBack},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}}),["2","4"].includes(e.form.orderType)?r("order-material",{attrs:{ids:e.tableData.map((function(e){return e.materialId})),"extra-info":{id:Number(e.params.orderId),type:"4"}},on:{confirm:e.onSelectConfirm},model:{value:e.orderSelectInfo.visible,callback:function(t){e.$set(e.orderSelectInfo,"visible",t)},expression:"orderSelectInfo.visible"}}):e._e(),["3"].includes(e.form.orderType)?r("base-material",{attrs:{ids:e.tableData.map((function(e){return e.materialId})),"extra-info":{},"number-control":!1},on:{confirm:e.onSelectConfirm},model:{value:e.selectInfo.visible,callback:function(t){e.$set(e.selectInfo,"visible",t)},expression:"selectInfo.visible"}}):e._e(),r("material-select",{attrs:{"extra-info":{orderId:e.params.orderId,deliveryReceiptId:e.params.id,excludeOrderMaterialIds:e.tableData.map((function(e){return e.orderMaterialId}))}},on:{confirm:e.handleChooseConfirm},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}})],1)},i=[],a=(r("8e6e"),r("456d"),r("7514"),r("a8db")),o=r("75fc"),l=(r("6762"),r("2fdb"),r("96cf"),r("3b8d")),s=(r("7f7f"),r("bd86")),c=(r("20d6"),r("ac6a"),r("5df3"),r("4f7f"),r("2ef0")),u=r.n(c),d=r("1790"),f=r("5164c"),m=r("e08f"),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{attrs:{center:!0,"append-to-body":!0,"close-on-press-escape":!1,"wrapper-closable":!1,title:e.title,size:"75%",direction:"btt",visible:e.value,"destroy-on-close":!0,"before-close":e.beforeClose},on:{open:e.initSelect}},[r("div",{staticStyle:{margin:"0 10px"}},[r("divider",[e._v("交接物料")]),r("el-row",[r("el-descriptions",{attrs:{border:!0,direction:"vertical",column:8}},[r("el-descriptions-item",{attrs:{label:"物料编码"}},[e._v(e._s(e.dialogForm.materialCode))]),r("el-descriptions-item",{attrs:{label:"物料名称"}},[e._v(e._s(e.dialogForm.materialName))]),r("el-descriptions-item",{attrs:{label:"规格型号"}},[e._v(e._s(e.dialogForm.materialSpec))]),r("el-descriptions-item",{attrs:{label:"评估类型"}},[e._v(e._s(e.dialogForm.materialAssessType_dictText))]),r("el-descriptions-item",{attrs:{label:"订单数量"}},[e._v(e._s(e.dialogForm.orderNumber))]),r("el-descriptions-item",{attrs:{label:"计量单位"}},[e._v(e._s(e.dialogForm.unitName))]),r("el-descriptions-item",{attrs:{label:"已到货数量"}},[e._v(e._s(e.dialogForm.deliveredNumber))]),r("el-descriptions-item",{attrs:{label:"本次到货数量"}},[e._v(e._s(e.dialogForm.deliveryNumber))])],1)],1),r("divider",[e._v("条码信息")]),r("el-row",{staticStyle:{margin:"10px 0"}},["detail"===e.$route.params.view||e.extraInfo.isReverse?e._e():[r("el-button",{attrs:{type:"warning"},on:{click:e.handleModify}},[e._v("修改")]),r("el-button",{attrs:{type:"danger"},on:{click:e.handleClean}},[e._v("清除")])],r("el-button",{attrs:{type:"primary",disabled:0===e.tableData.length},on:{click:e.handlePrintAll}},[e._v("打印全部条码")])],2),r("table-com",{key:e.refreshKey,ref:"baseTableRef",attrs:{loading:e.loading,index:!0,selection:!1,"table-data":e.tableData,"column-list":e.columnList,"table-height-type":380,"operation-width":120,"expand-list":e.expandList,"table-column-sort":!1,"show-operate":!0},on:{rowClick:e.handleRowClick,refresh:e.searchInit},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.handlePrint([t.row.id])}}},[e._v("打印条码")])]}}])})],1),r("package-to-s-k-u",{attrs:{title:"供应商条码","extra-info":{columnList:e.columnList1||[],tableData:e.dialogInfo1.subBarCodeList||[]}},on:{print:e.handlePrint},model:{value:e.skuVisible,callback:function(t){e.skuVisible=t},expression:"skuVisible"}}),r("edit-dialog",{attrs:{"dialog-form":e.dialogInfo,"edit-type":e.editInfoType,title:e.dialogTitle,"extra-info":{deliveryMaterialId:e.dialogForm.id}},on:{confirm:e.confirmCallBack},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}})],1)},h=[],p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,top:"5vh",visible:e.value,"show-close":!0,width:"1100px","lock-scroll":!1,"destroy-on-close":!0,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{open:e.initSelect}},[r("el-scrollbar",{staticClass:"scroll-dialog"},[r("div",{staticClass:"main-box"},[r("el-row",[r("el-descriptions",{attrs:{border:!0,direction:"vertical",column:8}},[r("el-descriptions-item",{attrs:{label:"物料编码","content-class-name":"wid80"}},[e._v(e._s(e.info.materialCode))]),r("el-descriptions-item",{attrs:{label:"物料名称"}},[e._v(e._s(e.info.materialName))]),r("el-descriptions-item",{attrs:{label:"规格型号","content-class-name":"minWid100"}},[e._v(e._s(e.info.materialSpec))]),r("el-descriptions-item",{attrs:{"content-class-name":"wid80",label:"评估类型"}},[e._v(e._s(e.info.materialAssessType_dictText))]),r("el-descriptions-item",{attrs:{"content-class-name":"wid80",label:"到货数量"}},[e._v(e._s(e.info.deliveryNumber))]),r("el-descriptions-item",{attrs:{"content-class-name":"wid80",label:"计量单位"}},[e._v(e._s(e.info.unitName))]),r("el-descriptions-item",{attrs:{label:"最小单位SKU","content-class-name":e.form.useMinUnit?"":"wid100"}},[e.form.useMinUnit?[r("el-select",{staticStyle:{width:"170px"},attrs:{filterable:"",clearable:"",placeholder:"请选择最小单位SKU"},on:{change:e.handleInfoMinSkuNameChange},model:{value:e.form.minSkuUnitId,callback:function(t){e.$set(e.form,"minSkuUnitId",t)},expression:"form.minSkuUnitId"}},e._l(e.minSkuUnitPullList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)]:r("span",[e._v(e._s(e.info.minSkuName))])],2),r("el-descriptions-item",{attrs:{label:"SPQ","content-class-name":e.form.useMinUnit?"":"wid80"}},[e.form.useMinUnit?[r("el-input-number",{staticStyle:{width:"110px"},attrs:{min:0,precision:3},model:{value:e.form.materialSpq,callback:function(t){e.$set(e.form,"materialSpq",t)},expression:"form.materialSpq"}})]:r("span",[e._v(e._s(e.info.materialSpq))])],2)],1)],1),r("divider",[e._v("条码信息")]),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,inline:""}},[r("el-form-item",{attrs:{label:"最小单位SKU",prop:"useMinUnit"}},[r("el-radio-group",{staticStyle:{width:"90px"},on:{change:e.handleUseMinUnitChange},model:{value:e.form.useMinUnit,callback:function(t){e.$set(e.form,"useMinUnit",t)},expression:"form.useMinUnit"}},[r("el-radio-button",{attrs:{label:!0}},[e._v("是")]),r("el-radio-button",{attrs:{label:!1}},[e._v("否")])],1)],1),e.form.useMinUnit?e._e():[r("el-form-item",{attrs:{label:"包装单位",prop:"unitId"}},[r("el-select",{staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"请选择包装单位"},on:{change:e.handleUnitChange},model:{value:e.form.unitId,callback:function(t){e.$set(e.form,"unitId",t)},expression:"form.unitId"}},e._l(e.unitList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e.form.unitId?r("el-form-item",{attrs:{prop:"unitNumber"}},[r("span",{staticStyle:{marginRight:"12px"}},[e._v("共")]),r("el-input-number",{staticStyle:{width:"178px"},attrs:{min:1},model:{value:e.form.unitNumber,callback:function(t){e.$set(e.form,"unitNumber",t)},expression:"form.unitNumber"}}),r("span",{staticStyle:{marginLeft:"12px"}},[e._v(e._s(e.form.unitIdShow))])],1):e._e()],r("el-button",{attrs:{type:"primary",disabled:!e.baseValidate1},on:{click:e.handleUpdate}},[e._v("更新")])],2),r("el-row",[r("table-com",{key:e.refreshKey,ref:e.refName,attrs:{"table-height-type":340,loading:e.loading,index:!0,"index-fixed":!0,selection:!1,multiple:e.multiple,"selection-fixed":!1,"table-column-sort":!1,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!0,"operation-width":120,"operate-fixed":"right","table-selection":e.tableSelection},on:{refresh:e.refresh,selectionChange:e.selectionChange},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",disabled:e.numberSum<e.info.deliveryNumber||e.numberSum>e.info.deliveryNumber},on:{click:function(r){return e.handlePrintBarcode(t.row)}}},[e._v("打印条码")])]}}])})],1)],1)]),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",disabled:e.hasDuplicates},on:{click:e.confirmDialog}},[e._v("确 定")]),r("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},g=[],v=(r("c5f6"),r("ec26")),y=r("5ab1"),w=r("5ea3");function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=function(){return{deliveryReceiptId:"",orderMaterialId:"",materialId:"",materialCode:"",materialName:"",materialSpec:"",unitId:"",unitIdShow:"",minSkuName:"",minSkuUnitId:"",materialSpq:"",useMinUnit:!0,spq:"",deliveryNumber:"",unitMeasureId:"",unitName:"",unitNumber:1}},S={name:"MaterialOrderSelect",mixins:[d["a"],f["a"]],props:{value:{required:!0,type:Boolean},title:{type:String,default:"物料选择"},multiple:{type:Boolean,default:!0},selection:{type:Array,default:function(){return[]}},max:{type:Number,default:0},dialogForm:{type:Object,default:function(){return{}}},extraInfo:{type:Object,default:function(){}}},dicts:[],data:function(){var e=this;return{loading:!1,refName:"modelSelectMaterialOrderSelect",info:x({},D()),form:x({},D()),rules:{},tableData:[],columnList:[],columnListBase:[{module:"input",prop:"batchNo",label:"批次号",align:"center",width:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",showOverflowTooltip:!1},{module:"number",prop:"number",label:"数量",align:"center",width:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",setMin:function(e){return 1},disabled:function(t){return e.form.useMinUnit||1===e.tableData.length},setPrecision:function(e){return 3},handleChange:function(t){e.handleNumberChange(t)},showOverflowTooltip:!1},{module:"word",prop:"unitName",label:"计量单位",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"date",prop:"productionDate",label:"生产日期",align:"center",width:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",clearable:!0,isShow:function(e){return e.expirationDate},getDisplay:function(e){return e.productionDate?"":"无"},handleChange:function(t){e.handleCalculateDate(t,"生产日期")},showOverflowTooltip:!1},{module:"word",prop:"barCode",label:"条码号",align:"center",width:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"number",prop:"expirationTime",label:"保质期(天)",align:"center",width:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",setMin:function(){return 1},isShow:function(e){return e.expirationDate},getDisplay:function(e){return e.expirationDate?"":"无"},handleChange:function(t){e.handleCalculateDate(t,"保质期(天)")},showOverflowTooltip:!1},{module:"date",prop:"qualityGuaranteePeriod",label:"到期时间",align:"center",width:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",disabled:!1,isShow:function(e){return e.expirationDate},getDisplay:function(e){return e.expirationDate?"":"无"},showOverflowTooltip:!1,handleChange:function(t){e.handleCalculateDate(t,"到期时间")}},{module:"word",prop:"printNumber",label:"打印次数",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],columnListExtra:[{module:"input",prop:"batchNo",label:"批次号",align:"center",width:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",showOverflowTooltip:!1},{module:"number",prop:"number",label:"数量",align:"center",width:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",setMin:function(e){return 1},disabled:function(t){return e.form.useMinUnit||1===e.tableData.length},setPrecision:function(e){return 3},handleChange:function(t){e.handleNumberChange(t)},showOverflowTooltip:!1},{module:"word",prop:"unitName",label:"计量单位",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"date",prop:"productionDate",label:"生产日期",align:"center",width:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",clearable:!0,isShow:function(e){return e.expirationDate},getDisplay:function(e){return e.productionDate?"":"无"},handleChange:function(t){e.handleCalculateDate(t,"生产日期")},showOverflowTooltip:!1},{module:"word",prop:"barCode",label:"条码号",align:"center",width:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"input",prop:"snNo",label:"序列号",align:"center",width:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",clearable:!0,showOverflowTooltip:!1,handleBlur:function(t){e.hasDuplicates&&e.$notify.warning({title:"警告",message:"序列号存在重复，请重新填写！"})}},{module:"number",prop:"expirationTime",label:"保质期(天)",align:"center",width:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",setMin:function(){return 1},isShow:function(e){return e.expirationDate},getDisplay:function(e){return e.expirationDate?"":"无"},handleChange:function(t){e.handleCalculateDate(t,"保质期(天)")},showOverflowTooltip:!1},{module:"date",prop:"qualityGuaranteePeriod",label:"到期时间",align:"center",width:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",disabled:!0,isShow:function(e){return e.expirationDate},getDisplay:function(e){return e.expirationDate?"":"无"},showOverflowTooltip:!1,handleChange:function(t){e.handleCalculateDate(t,"到期时间")}},{module:"word",prop:"printNumber",label:"打印次数",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],columnSets:[],tableSelection:[],deptSelectedInfo:{list:[],visible:!1,radio:""},unitList:[],minSkuUnitPullList:[],numberSum:0,refreshKey:0}},computed:{isSnNo:function(){var e=this,t=this.minSkuUnitPullList.find((function(t){return t.id===e.form.minSkuUnitId}));return t&&"序列号"===t.name},hasDuplicates:function(){var e=this.tableData.filter((function(e){return e.snNo})).map((function(e){return e.snNo}));return new Set(e).size!==e.length},baseValidate1:function(){var e=!0;return""===this.form.useMinUnit?(e=!1,e):(!1===this.form.useMinUnit?this.form.unitId&&this.form.unitNumber||(e=!1):this.form.minSkuUnitId&&this.form.materialSpq||(e=!1),e)}},watch:{},methods:{initSelect:function(){this.getUnitPullList("2"),this.getUnitPullList("3"),this.init(),this.initList()},init:function(){var e=this,t=x({},this.extraInfo);return new Promise((function(r,n){Object(w["m"])(x({},t)).then((function(t){var n=t.code,i=t.data;if(!n){var a=x({},i,{unitNumber:!i.unitNumber||1,unitId:i.unitId||"",unitIdShow:"",materialSpq:!i.materialSpq||i.materialSpq<=0?1:i.materialSpq});if(e.info=u.a.cloneDeep(a),e.numberSum=e.info.deliveryNumber,e.form=u.a.cloneDeep(a),e.form.useMinUnit)e.form.materialSpq=1;else if(e.form.unitId){var o=e.unitList.find((function(t){return t.id===e.form.unitId}));e.form.unitIdShow=o?o.name:""}else e.form.unitIdShow="";e.resetTableColumn()}e.loading=!1,r(t)})).catch((function(t){e.loading=!1,n(t)}))}))},initList:function(){var e=this;return this.loading=!0,new Promise((function(t,r){Object(w["n"])(x({page:x({},e.pageInfo)},e.extraInfo)).then((function(r){var n=r.code,i=r.data;n||(e.tableData=i.map((function(e){return x({},e,{expirationTime:1})}))),e.loading=!1,t(r)})).catch((function(t){e.loading=!1,r(t)}))}))},getUnitPullList:function(e){var t=this;Object(y["e"])({type:e}).then((function(r){var n=r.code,i=r.data;n||("2"===e&&(t.minSkuUnitPullList=i),"3"===e&&(t.unitList=i))})).catch((function(e){}))},handleInfoMinSkuNameChange:function(){this.form.materialSpq=1,this.resetTableColumn()},handleUseMinUnitChange:function(e){this.form.minSkuUnitId=this.info.minSkuUnitId,this.form.materialSpq=this.info.materialSpq,this.form.unitId="",this.form.unitNumber=1,this.form.unitIdShow="",this.tableData=new Array(0),this.resetTableColumn()},resetTableColumn:function(){this.form.useMinUnit&&this.isSnNo?this.columnList=Object(o["a"])(this.columnListExtra):this.columnList=Object(o["a"])(this.columnListBase)},handleUnitChange:function(e){this.form.unitNumber=1;var t=this.unitList.find((function(t){return t.id===e}));if(t){var r=t.name;this.$set(this.form,"unitIdShow",r)}else this.$set(this.form,"unitIdShow","")},baseValidate:function(){var e=!0;return this.form.useMinUnit?this.form.minSkuUnitId?this.form.materialSpq||(this.$notify.error({title:"错误",message:"请输入SPQ值"}),e=!1):(this.$notify.error({title:"错误",message:"请选择最小单位SKU"}),e=!1):this.form.unitId?this.form.unitNumber||(this.$notify.error({title:"错误",message:"".concat(this.form.unitIdShow,"数为0不能更新")}),e=!1):(this.$notify.error({title:"错误",message:"请先选择包装单位！"}),e=!1),e},handleUpdate:function(){var e=this;if(this.baseValidate()){this.loading=!0;var t=x({},this.extraInfo,{materialId:this.form.materialId,useMinSku:this.form.useMinUnit,deliveryNumber:this.info.deliveryNumber},this.form.useMinUnit&&{perBarcodeNum:this.form.materialSpq},{},!this.form.useMinUnit&&{unitNumber:this.form.unitNumber},{unitId:this.form.useMinUnit?this.form.minSkuUnitId:this.form.unitId});Object(w["a"])(t).then((function(t){var r=t.code,n=t.data;r||(e.tableData=n.map((function(e){return x({},e,{id:Object(v["a"])(),printNumber:0,expirationTime:1})})),e.tableData.forEach((function(t){e.form.useMinUnit&&e.isSnNo&&t.productionDate&&e.handleCalculateDate(t,"生产日期")}))),e.loading=!1})).catch((function(t){e.loading=!1}))}},selectionChange:function(e){this.tableSelection=Object(o["a"])(e)},beforeClose:function(e){this.$emit("input",!1),"function"===typeof e&&e()},confirmDialog:function(){var e=this;if(this.baseValidate())if(this.tableData.length)if(this.numberSum<this.info.deliveryNumber)this.$notify.error({title:"错误",message:"数量总和小于库存量！"});else if(this.numberSum>this.info.deliveryNumber)this.$notify.error({title:"错误",message:"数量总和已超出库存量！"});else{var t=this.tableData.some((function(e){e.id;var t=Object(a["a"])(e,["id"]);return!t.batchNo}));if(t)this.$notify.error({title:"错误",message:"批次号不能为空"});else{var r=this.tableData.some((function(e){e.id;var t=Object(a["a"])(e,["id"]);return t.expirationDate&&!t.qualityGuaranteePeriod}));if(r)this.$notify.error({title:"错误",message:"到期时间不能为空"});else{var n=this.tableData.filter((function(e){return!e.snNo}));if(this.form.useMinUnit&&this.isSnNo){if(1===n.length){var i=this.tableData.findIndex((function(e){return!e.snNo}));return void this.$notify.error({title:"错误",message:"第".concat(i+1,"行序列号为空，请填写序列号")})}if(n.length>1)return void this.$notify.error({title:"错误",message:"序列号存在为空的情况，请调整"});if(this.hasDuplicates)return void this.$notify.warning({title:"警告",message:"序列号存在重复，请重新填写！"})}var o=x({},this.extraInfo,{dmdList:this.tableData.map((function(e){e.id;var t=Object(a["a"])(e,["id"]);return t}))}),l=x({materialId:this.form.materialId,minSkuUnitId:this.form.minSkuUnitId,spq:this.form.materialSpq,useMinSku:this.form.useMinUnit,unitId:this.form.useMinUnit?this.form.minSkuUnitId:this.form.unitId,confirmFlag:!1},o);this.form.useMinUnit?Object(w["d"])({materialId:this.form.materialId,minSkuUnitId:this.form.minSkuUnitId,spq:this.form.materialSpq}).then((function(t){var r=t.code,n=t.data;r||(n?e.confirmEditMaterial(l):e.submitBottomDetailList(l))})):this.submitBottomDetailList(x({},o,{},l))}}}else this.$notify.error({title:"错误",message:"物料列表不能为空"})},confirmEditMaterial:function(e){var t=this;this.$confirm("是否更新SQP、最小单位SKU到基础物料信息中?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",cancelButtonClass:"cancel-button-class",confirmButtonClass:"confirm-button-class",type:"warning",lockScroll:!1}).then((function(){t.submitBottomDetailList(x({},e,{confirmFlag:!0}))})).catch((function(){t.submitBottomDetailList(x({},e))}))},submitBottomDetailList:function(e){var t=this;this.loading=!0,Object(w["w"])(e).then((function(e){var r=e.code;r||(t.$emit("confirm"),t.beforeClose()),t.loading=!1})).catch((function(e){t.loading=!1}))},handlePrintBarcode:function(e){var t=this;e.printNumber++,this.getDataAndPrint(w["h"],{dmdEntity:{deliveryMaterialId:e.deliveryMaterialId||"",materialId:e.materialId||"",batchNo:e.batchNo||"",number:e.number||0,unitMeasureId:e.unitMeasureId||"",qualityGuaranteePeriod:e.qualityGuaranteePeriod||"",barCode:e.barCode||"",snNo:e.snNo||"",barCodeType:e.barCodeType||""}}).then((function(e){t.$emit("confirm")})).catch((function(e){}))},refresh:function(){},handleNumberChange:function(e){var t=this,r=this.tableData.findIndex((function(t){return t.id===e.id})),n=this.tableData[0],i=this.tableData[this.tableData.length-1],a=this.tableData.findIndex((function(e){return e.id===i.id}));this.$nextTick((function(){e.id!==i.id?(t.$set(t.tableData,a,x({},i,{number:t.info.deliveryNumber-t.tableData.reduce((function(e,t){return e+(t.id!==i.id?t.number:0)}),0)})),t.tableData[a].number<1&&(t.$set(t.tableData,a,x({},i,{number:1})),t.$set(t.tableData,r,x({},e,{number:t.info.deliveryNumber-t.tableData.reduce((function(t,r){return t+(r.id!==e.id?r.number:0)}),0)})),t.$message({message:"当前修改数量已达上限",type:"warning"}))):(t.$set(t.tableData,0,x({},n,{number:t.info.deliveryNumber-t.tableData.reduce((function(e,t){return e+(t.id!==n.id?t.number:0)}),0)})),t.tableData[0].number<1&&(t.$set(t.tableData,0,x({},n,{number:1})),t.$set(t.tableData,r,x({},e,{number:t.info.deliveryNumber-t.tableData.reduce((function(t,r){return t+(r.id!==e.id?r.number:0)}),0)})),t.$message({message:"当前修改数量已达上限",type:"warning"}))),t.numberSum=t.tableData.reduce((function(e,t){return e+t.number}),0)}))},handleCalculateDate:function(e,t){var r=function(e){return e.productionDate||e.qualityGuaranteePeriod?1:0},n=r(e);if(0!==n)if(e.productionDate&&e.qualityGuaranteePeriod){if("生产日期"===t||"保质期(天)"===t){var i=new Date(e.productionDate).getTime(),a=24*e.expirationTime*60*60*1e3,o=new Date(i+a),l={y:o.getFullYear(),m:o.getMonth()+1<10?"0".concat(o.getMonth()+1):o.getMonth()+1,d:o.getDate()<10?"0".concat(o.getDate()):o.getDate()};e.qualityGuaranteePeriod="".concat(l.y,"-").concat(l.m,"-").concat(l.d)}else if("到期时间"===t){var s=new Date(e.qualityGuaranteePeriod).getTime(),c=24*e.expirationTime*60*60*1e3,u=new Date(s-c),d={y:u.getFullYear(),m:u.getMonth()+1<10?"0".concat(u.getMonth()+1):u.getMonth()+1,d:u.getDate()<10?"0".concat(u.getDate()):u.getDate()};e.productionDate="".concat(d.y,"-").concat(d.m,"-").concat(d.d)}}else if(e.productionDate){var f=new Date(e.productionDate).getTime(),m=24*e.expirationTime*60*60*1e3,b=new Date(f+m),h={y:b.getFullYear(),m:b.getMonth()+1<10?"0".concat(b.getMonth()+1):b.getMonth()+1,d:b.getDate()<10?"0".concat(b.getDate()):b.getDate()};e.qualityGuaranteePeriod="".concat(h.y,"-").concat(h.m,"-").concat(h.d)}else if(e.qualityGuaranteePeriod){var p=new Date(e.qualityGuaranteePeriod).getTime(),g=24*e.expirationTime*60*60*1e3,v=new Date(p-g),y={y:v.getFullYear(),m:v.getMonth()+1<10?"0".concat(v.getMonth()+1):v.getMonth()+1,d:v.getDate()<10?"0".concat(v.getDate()):v.getDate()};e.productionDate="".concat(y.y,"-").concat(y.m,"-").concat(y.d)}}}},I=S,j=(r("fd9d"),r("2877")),C=Object(j["a"])(I,p,g,!1,null,"d1fbf45c",null),k=C.exports,N=r("a2c6");function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M={name:"InStorageConsignCom",components:{EditDialog:k,PackageToSKU:N["a"]},mixins:[d["a"],f["a"]],props:{value:{type:Boolean,default:!1},editType:{type:String,default:"add"},dialogForm:{type:Object,default:function(){return{}}},extraInfo:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{title:"物料明细及条码",refreshKey:(new Date).getTime(),loading:!1,rules:{},query:{},tableData:[],columnList:[],columnList1:[],columnListBase:[{module:"word",prop:"batchNo",label:"批次号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"number",label:"数量",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"qualityGuaranteePeriod",label:"到期时间",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:function(e){return e.expirationDate?e.qualityGuaranteePeriod:"无"},headerAlign:"center"},{module:"link",type:function(e){return Array.isArray(e.subBarCodeList)&&e.subBarCodeList.length?"primary":""},prop:"barCode",underline:!1,minWidth:150,label:"条码号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",handleClick:function(t){t.subBarCodeList.length&&(e.skuVisible=!0,e.dialogInfo1=t)}},{module:"word",prop:"printNumber",label:"打印次数",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"subBarCodeCount",label:"SKU码个数",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],columnListExtra:[{module:"word",prop:"batchNo",label:"批次号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"number",label:"数量",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"qualityGuaranteePeriod",label:"到期时间",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:function(e){return e.expirationDate?e.qualityGuaranteePeriod:"无"},headerAlign:"center"},{module:"link",type:function(e){return Array.isArray(e.subBarCodeList)&&e.subBarCodeList.length?"primary":""},prop:"barCode",underline:!1,minWidth:150,label:"条码号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",handleClick:function(t){t.subBarCodeList.length&&(e.skuVisible=!0,e.dialogInfo1=t)}},{module:"word",prop:"snNo",label:"序列号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"printNumber",label:"打印次数",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"subBarCodeCount",label:"SKU码个数",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],expandList:[],dialogVisible:!1,skuVisible:!1,dialogInfo:{},dialogInfo1:{},editInfoType:"add"}},computed:{dialogTitle:function(){return"add"===this.editType?"新增".concat(this.title):"编辑".concat(this.title)}},watch:{dialogForm:{handler:function(e){var t=this;this.$nextTick((function(){t.columnList=e.useMinUnit&&"序列号"===e.unitName2?t.columnListExtra:t.columnListBase,t.columnList1=t.columnList.filter((function(e){return"subBarCodeCount"!==e.prop}))}))},immediate:!0}},methods:{init:function(){var e=this;return this.loading=!0,new Promise((function(t,r){Object(w["n"])($({},e.query,{deliveryMaterialId:e.dialogForm.id})).then((function(r){var n=r.code,i=r.data;n||(e.tableData=i),e.loading=!1,t(r)})).catch((function(t){e.loading=!1,r(t)}))}))},confirmCallBack:function(){this.init(),this.$emit("confirm")},handleClean:function(){var e=this;this.$confirm("此操作将永久清除所有物料明细和条码, 是否继续?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning",cancelButtonClass:"btn-custom-cancel",lockScroll:!1}).then((function(){Object(w["i"])({deliveryMaterialId:e.dialogForm.id}).then((function(t){var r=t.code;r||(e.$message({message:"清除成功",type:"success"}),e.init())}))})).catch((function(){e.$notify.info({title:"消息",message:"已取消清除"})}))},handlePrintAll:function(){var e=this.tableData.map((function(e){return e.id}));this.handlePrint(e)},handlePrint:function(e){var t=this,r=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});return new Promise((function(n,i){Object(w["v"])({ids:e}).then((function(e){var i=e.code,a=e.data;i||(t.device&&a.length&&t.$notify.success({title:"成功",message:a.length>30?"打印全部条码比较耗时，请耐心等待":"已开始打印"}),t.device&&a.length&&a.forEach((function(e){return t.print(e)})),t.init().then((function(e){t.dialogInfo1=t.tableData.find((function(e){return e.id===t.dialogInfo1.id}))||{}}))),r.close(),n(e)})).catch((function(e){r.close(),i(e)}))}))},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除选中信息, 是否继续?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning",cancelButtonClass:"btn-custom-cancel",lockScroll:!1}).then((function(){t.tableData=t.tableData.filter((function(t){return t.uuid!==e.uuid}))})).catch((function(){t.$notify.info({title:"消息",message:"已取消删除"})}))},handleAdd:function(){this.editInfoType="add",this.dialogInfo={},this.dialogVisible=!0},handleModify:function(){this.dialogInfo=$({},this.dialogForm),this.editInfoType="modify",this.dialogVisible=!0},handleRowClick:function(e){var t=e.row,r=e.column;e.cell,e.event;if("操作"===r.label)return!1;this.rightObj=$({},t)},refresh:function(){this.init()},initSelect:function(){var e=this;this.$nextTick((function(){e.columnList=e.dialogForm.useMinUnit&&"序列号"===e.dialogForm.unitName2?e.columnListExtra:e.columnListBase,e.columnList1=e.columnList.filter((function(e){return"subBarCodeCount"!==e.prop})),e.init().then((function(t){e.$emit("confirm")}))}))},beforeClose:function(e){this.$emit("input",!1),"function"===typeof e&&e()}}},_=M,A=(r("386bb"),Object(j["a"])(_,b,h,!1,null,"3cfeafdd",null)),T=A.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,top:"5vh",visible:e.value,"show-close":!0,width:"920px","lock-scroll":!1,"destroy-on-close":!0,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{open:e.initSelect}},[r("el-scrollbar",{staticClass:"scroll-dialog"},[r("el-row",[r("table-com",{ref:e.refName,attrs:{"table-height-type":490,loading:e.loading,index:!0,"index-fixed":!0,selection:!0,multiple:e.multiple,"selection-fixed":!1,"table-column-sort":!1,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!1,"operate-fixed":!1,"table-selection":e.tableSelection},on:{selectionChange:e.selectionChange}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.confirmDialog}},[e._v("确 定")]),r("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},U=[],W=r("0bfd");function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B={name:"MaterialOrderSelect",mixins:[d["a"]],props:{value:{required:!0,type:Boolean},title:{type:String,default:"物料选择"},multiple:{type:Boolean,default:!0},selection:{type:Array,default:function(){return[]}},max:{type:Number,default:0},ids:{type:Array,default:function(){return[]}},url:{type:String,default:"/enterWarehouse/WmsOrder/listMaterial"},extraInfo:{type:Object,default:function(){}}},dicts:[],data:function(){return{loading:!1,refName:"modelSelectMaterialOrderSelect",query:{},tableData:[],columnList:[{module:"word",prop:"materialCode",label:"物料编号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialSpec",label:"规格型号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"assessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"orderNum",label:"订单数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"price",label:"单价",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitMaterial",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"number",label:"已到货数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"number",prop:"deliveryNumber",label:"本次到货数量",align:"center",minWidth:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",setMin:function(e){return 0},setMax:function(e){return e.enterNumber},setPrecision:function(e){return 3}}],columnSets:[],tableSelection:[],deptSelectedInfo:{list:[],visible:!1,radio:""}}},methods:{confirmDialog:function(){var e=this.tableSelection.every((function(e){return 0!==e.deliveryNumber}));e?(this.$emit("confirm",this.tableSelection),this.beforeClose()):this.$notify.error({title:"错误",message:"不能勾选本次到货数量为0的物料"})},init:function(){var e=this,t=q({},this.query,{materialIdList:this.ids},this.extraInfo);return new Promise((function(r,n){Object(W["j"])(q({},t)).then((function(t){var n=t.code,i=t.data;n||(e.tableData=i.map((function(e){return q({deliveryNumber:0},e)})),e.tableSelection=e.tableData.filter((function(t){return e.selection.includes(t.id)}))),e.loading=!1,r(t)})).catch((function(t){e.loading=!1,n(t)}))}))},initSelect:function(){this.init()},selectionChange:function(e){this.tableSelection=Object(o["a"])(e)},handleUpdateTableSelected:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},handleDefault:function(){this.tableSelection=new Array(0)},beforeClose:function(e){this.$emit("input",!1),this.handleDefault(),"function"===typeof e&&e()},onDeptSelectConfirm:function(e){e.length&&(this.query.usedOffice=e[0].name)}}},R=B,E=(r("d76d"),Object(j["a"])(R,L,U,!1,null,"e53817c6",null)),F=E.exports,V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,top:"5vh",visible:e.value,"show-close":!0,width:"920px","lock-scroll":!1,"destroy-on-close":!0,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{open:e.initSelect}},[r("el-scrollbar",{staticClass:"scroll-dialog"},[r("div",{staticClass:"clearfix top-filter"},[r("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{staticClass:"fl",attrs:{prop:"materialCodeOrName"}},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"物料编码或名称"},model:{value:e.query.materialCodeOrName,callback:function(t){e.$set(e.query,"materialCodeOrName",t)},expression:"query.materialCodeOrName"}})],1),r("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")])],1)],1),r("el-row",[r("table-com",{ref:e.refName,attrs:{"table-height-type":490,loading:e.loading,index:!0,"index-fixed":!0,selection:!0,multiple:e.multiple,"selection-fixed":!1,"table-column-sort":!1,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!1,"operate-fixed":!1,"table-selection":e.tableSelection},on:{selectionChange:e.selectionChange}})],1),r("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.confirmDialog}},[e._v("确 定")]),r("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},G=[],K=r("037c");function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J={name:"MaterialSelect",mixins:[d["a"]],props:{value:{required:!0,type:Boolean},title:{type:String,default:"物料选择"},multiple:{type:Boolean,default:!0},selection:{type:Array,default:function(){return[]}},max:{type:Number,default:0},ids:{type:Array,default:function(){return[]}},extraInfo:{type:Object,default:function(){}},numberControl:{type:Boolean,default:!0}},dicts:[],data:function(){return{loading:!1,refName:"modelSelectMaterialSelect",query:{materialCodeOrName:""},tableData:[],columnList:[{module:"number",prop:"deliveryNumber",label:"本次到货数量",align:"center",minWidth:160,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",setMin:function(e){return 0},setPrecision:function(e){return 3}},{module:"word",prop:"code",label:"物料编号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"name",label:"物料名称",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"spec",label:"规格型号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"assessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"description",label:"物料描述",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitMeasureName",label:"计量单位",align:"center",minWidth:175,fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"type_dictText",label:"物料类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"minOutboundUnitName",label:"最小单位SKU",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"isExpirationDate",label:"是否有保质期",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center",formatter:function(e){return 0===e.isExpirationDate?"否":"是"}},{module:"word",prop:"materialGroupCode",label:"物料组编号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"materialGroupDescription",label:"物料组描述",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"dataSources_dictText",label:"数据来源",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"}],columnSets:[],tableSelection:[],deptSelectedInfo:{list:[],visible:!1,radio:""}}},methods:{confirmDialog:function(){this.$emit("confirm",this.tableSelection),this.beforeClose()},init:function(){var e=this,t=H({},this.query,{materialIdList:this.ids||[]},this.extraInfo,{page:H({},this.pageInfo)});return new Promise((function(r,n){Object(K["d"])(H({},t)).then((function(t){var n=t.code,i=t.data;if(!n){var o=i.list,l=Object(a["a"])(i,["list"]);e.initPage(l),e.tableData=o.map((function(e){return H({uuid:Object(v["a"])(),deliveryNumber:0},e)})),e.tableSelection=e.tableData.filter((function(t){return e.selection.includes(t.id)}))}e.loading=!1,r(t)})).catch((function(t){e.loading=!1,n(t)}))}))},initSelect:function(){this.init()},selectionChange:function(e){this.tableSelection=Object(o["a"])(e)},handleUpdateTableSelected:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},handleDefault:function(){this.tableSelection=new Array(0)},beforeClose:function(e){this.$emit("input",!1),this.handleDefault(),"function"===typeof e&&e()},onDeptSelectConfirm:function(e){e.length&&(this.query.usedOffice=e[0].name)}}},Q=J,X=(r("c9a9"),Object(j["a"])(Q,V,G,!1,null,"0c3b99ca",null)),Z=X.exports,ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,top:"5vh",visible:e.value,"show-close":!0,width:"1000px","lock-scroll":!1,"destroy-on-close":!0,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{open:e.initSelect}},[r("el-scrollbar",{staticClass:"scroll-dialog"},[r("div",{staticClass:"main-box"},[r("el-form",{ref:"filterItem",staticClass:"top-filter clearfix",attrs:{model:e.query,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{placeholder:"物料编码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInit(t)}},model:{value:e.query.code,callback:function(t){e.$set(e.query,"code","string"===typeof t?t.trim():t)},expression:"query.code"}})],1),r("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),r("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")]),e.isCheckAll?e._e():r("el-button",{staticClass:"filter-item",attrs:{type:"warning",plain:""},on:{click:e.checkAll}},[e._v("跨页全选")]),e.isCheckAll?r("el-button",{staticClass:"filter-item",attrs:{type:"warning",plain:""},on:{click:e.reverseSelection}},[e._v("跨页反选")]):e._e()],1),r("el-row",[r("table-com",e._b({ref:e.refName,attrs:{"row-key":e.rowKey,"table-height-type":490,loading:e.loading,index:!0,"index-fixed":!1,selection:!0,multiple:e.multiple,"selection-fixed":!1,"table-column-sort":!1,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!1,"operate-fixed":!1,"table-selection":e.tableSelection,selectable:e.selectable},on:{selectionChange:e.selectionChange,sortChange:e.sortChange,dynamicRow:e.getDynamicRow}},"table-com",e.$attrs,!1))],1),r("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1)]),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-row",{staticStyle:{"text-align":"left"}},[r("el-button",{attrs:{type:"primary",disabled:!e.rowObj},on:{click:e.handleSelectUp}},[e._v("向上选中")]),r("el-button",{attrs:{type:"primary",disabled:!e.rowObj},on:{click:e.handleCancelUp}},[e._v("向上取消")]),r("el-button",{attrs:{type:"primary",disabled:!e.rowObj},on:{click:e.handleSelectDown}},[e._v("向下选中")]),r("el-button",{attrs:{type:"primary",disabled:!e.rowObj},on:{click:e.handleCancelDown}},[e._v("向下取消")])],1),r("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")]),r("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},te=[];function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ie={name:"MaterialSelect",mixins:[d["a"]],props:{value:{required:!0,type:Boolean},title:{type:String,default:"物料选择"},multiple:{type:Boolean,default:!0},selection:{type:Array,default:function(){return[]}},max:{type:Number,default:0},ids:{type:Array,default:function(){return[]}},extraInfo:{type:Object,default:function(){}}},dicts:[],data:function(){var e=this;return{loading:!1,refName:"modelSelectMaterialSelect",query:{code:""},tableData:[],columnList:[{module:"word",prop:"materialCode",label:"物料编码",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialSpec",label:"规格型号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialAssessType_dictText",label:"评估类型",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"orderNumber",label:"订单数量",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"notArrivedNumber",label:"未到货数量",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"number",prop:"deliveryNumber",label:"本次到货数量",align:"center",minWidth:160,fixed:!1,sortable:!1,resizable:!0,headerAlign:"center",disabled:function(e){return 3===e.status},setMin:function(){return 0},setMax:function(e){return e.orderNumber-e.deliveredNumber},handleChange:u.a.throttle((function(t){e.tableSelection.forEach((function(e){e.id===t.id&&(e.deliveryNumber=t.deliveryNumber)}))}),1e3),setPrecision:function(){return 3}}],columnSets:[],tableSelection:[],deptSelectedInfo:{list:[],visible:!1,radio:""},rowObj:null,rowKey:"id",isCheckAll:!1}},methods:{init:function(){var e=this,t=ne({},this.query,{},this.extraInfo,{page:ne({},this.pageInfo)});return new Promise((function(r,n){Object(w["e"])(ne({},t)).then((function(t){var n=t.code,i=t.data;if(!n){var o=i.list,l=Object(a["a"])(i,["list"]);e.initPage(l),e.tableData=o}e.loading=!1,r(t)})).catch((function(t){e.loading=!1,n(t)}))}))},checkAll:function(){var e=this;this.isCheckAll=!0;var t=ne({},this.query,{},this.extraInfo,{page:{current:1,size:1e4}});return new Promise((function(r,n){Object(w["e"])(ne({},t)).then((function(t){var n=t.code,i=t.data;if(!n){var a=i.list;if(a&&Array.isArray(a)&&a.length){if(e.tableSelection=a.filter((function(t){return!e.selection.includes(t.id)})),!e.tableSelection.length)return e.isCheckAll=!1,void e.$notify.warning({title:"警告",message:"暂不支持跨页全选"});var o=e.rowKey,l=e.tableSelection.map((function(e){return e[o]})),s=[];e.tableData.forEach((function(t){function r(e){var t=e[o];return l.some((function(e){return e===t}))}r(t)&&(s.push(t),e.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(t,!0)})))})),e.tableSelection.forEach((function(t){var r=s.map((function(e){return e[o]}));r.includes(t[o])||e.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(t,!0)}))}))}}r(t)})).catch((function(e){n(e)}))}))},reverseSelection:function(){var e=this;this.isCheckAll=!1,this.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.clearSelection(),e.tableSelection=[]}))},sortChange:function(e){e.column,e.prop,e.order;this.init()},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()},initSelect:function(){this.searchInit()},selectionChange:function(e){this.tableSelection=Object(o["a"])(e)},getDynamicRow:function(e){this.rowObj=e},handleSelectUp:function(){var e=this,t=this.tableData.findIndex((function(t){return t.id===e.rowObj.id}));-1!==t&&this.tableData.forEach((function(r,n){e.$nextTick((function(){n<t&&e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(r,!0)}))}))},handleCancelUp:function(){var e=this,t=this.tableData.findIndex((function(t){return t.id===e.rowObj.id}));-1!==t&&this.tableData.forEach((function(r,n){e.$nextTick((function(){n<t&&e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(r,!1)}))}))},handleSelectDown:function(){var e=this,t=this.tableData.findIndex((function(t){return t.id===e.rowObj.id}));-1!==t&&this.tableData.forEach((function(r,n){e.$nextTick((function(){n>t&&e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(r,!0)}))}))},handleCancelDown:function(){var e=this,t=this.tableData.findIndex((function(t){return t.id===e.rowObj.id}));-1!==t&&this.tableData.forEach((function(r,n){e.$nextTick((function(){n>t&&e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(r,!1)}))}))},beforeClose:function(e){this.$emit("input",!1),this.tableSelection=new Array(0),this.rowObj=null,this.resetForm("filterItem"),"function"===typeof e&&e()},handleConfirm:function(){var e=this,t={dmList:this.tableSelection.map((function(t){return{orderMaterialId:t.orderMaterialId,deliveryReceiptId:e.extraInfo.deliveryReceiptId,materialId:t.materialId,orderNumber:t.orderNumber,deliveryNumber:t.deliveryNumber}}))};return new Promise((function(r,n){Object(w["b"])(ne({},t)).then((function(t){var n=t.code;n||(e.$emit("confirm",e.tableSelection),e.beforeClose()),r(t)})).catch((function(e){n(e)}))}))},onDeptSelectConfirm:function(e){e.length&&(this.query.usedOffice=e[0].name)},selectable:function(e,t){return!this.selection.includes(e.id)}}},ae=ie,oe=(r("6d02"),Object(j["a"])(ae,ee,te,!1,null,"45f7df92",null)),le=oe.exports,se=r("09db"),ce=r("c1df"),ue=r.n(ce);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}ue.a.locale("zh-cn");var me={no:"",contractNo:"",orderNo:"",supplierName:"",materialsUnit:"",deliveryDate:"",inspect:!0,orderType:"",remarks:"",status:null},be={name:"InStorageDeliveryAdd",components:{GenerateBarcode:T,OrderMaterial:F,BaseMaterial:Z,MaterialSelect:le},mixins:[d["a"],f["a"],m["a"]],data:function(){return{title:"交接单",loading:!1,tableLoading:!1,query:{},tableData:[],tableSelection:[],refreshKey:0,tableComKey:0,refTableName:"baseTableRef",columnSets:[],expandList:[],dialogForm:{},editType:"add",dialogVisible:!1,params:{id:"",view:"add"},form:me,rules:{deliveryDate:[{required:!0,message:"此项必填",trigger:"blur"}],inspect:[{required:!0,message:"此项必填",trigger:"blur"}]},orderSelectInfo:{list:[],visible:!1,radio:""},selectInfo:{list:[],visible:!1,radio:""},selected:new Set,selectedRows:[],currentRow:null,visible:!1,enabled:!0}},computed:{},watch:{},mounted:function(){var e=this;this.params=this.$route.params,this.initBaseInfo(),this.columnSets=["add"===this.params.view?{module:"number",prop:"deliveryNumber",label:"本次到货数量",align:"center",minWidth:160,fixed:!1,sortable:!1,resizable:!0,headerAlign:"center",disabled:function(t){return"detail"===e.params.view||3===t.status},setMin:function(e){return 0},setMax:function(t){return"3"===e.form.orderType?1/0:t.orderNumber-t.deliveredNumber},handleChange:u.a.throttle((function(t){if(e.selected.has(t.id)){var r=e.selectedRows.findIndex((function(e){return e.id===t.id}));e.selectedRows[r]=t}}),1e3),setPrecision:function(e){return 3}}:{module:"word",prop:"deliveryNumber",label:"本次到货数量",align:"center",minWidth:160,fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"}],this.listInit()},methods:{initBaseInfo:function(){var e=this;this.loading=!0;var t=fe({},"add"===this.params.view&&{orderId:this.params.orderId},{},"add"!==this.params.view&&{deliveryReceiptId:this.params.id});return new Promise((function(r,n){Object(w["s"])(t).then((function(t){var n=t.code,i=t.data;n||(e.form=fe({},i),e.form.deliveryDate=i.deliveryDate||ue()().format("YYYY-MM-DD")),e.loading=!1,r(t)})).catch((function(t){e.loading=!1,n(t)}))}))},initAutoUpdate:function(){var e=fe({},this.form);return new Promise((function(t,r){Object(w["z"])(e).then((function(e){t(e)})).catch((function(e){r(e)}))}))},handleSave:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var r={saveType:"add"===e.params.view?1:2,entity:{id:"add"===e.params.view?null:e.form.id,orderId:e.params.orderId,type:e.form.orderType,contractNo:e.form.contractNo,deliveryDate:e.form.deliveryDate,inspect:e.form.inspect,remarks:e.form.remarks},dmList:"add"===e.params.view?e.selectedRows.map((function(e){return fe({},e,{id:1===e.orderType?e.id:null,delete:!1})})):e.tableData.map((function(e){return fe({},e,{id:1===e.orderType?e.id:null,delete:!1})}))};r.dmList.length?(e.loading=!0,Object(w["c"])(r).then((function(t){var r=t.code,n=t.data;if(!r)if("add"===e.params.view)e.$set(e.form,"id",n),e.$store.dispatch("tagsView/delView",e.$route),e.$router.push({name:"InStorageDeliveryModify",params:{view:"modify",orderId:e.params.orderId,id:e.form.id,type:e.form.orderType,routeName:e.$route.name}});else if("modify"===e.params.view){e.$store.dispatch("tagsView/delView",e.$route);var i={1:"InStoragePurchaseDelivery",2:"InStorageAssistDelivery",3:"InStorageConsignDelivery",4:"InStorageFinishDelivery"}["".concat(e.form.orderType)];i?e.$router.push({name:i,params:{id:e.params.orderId,type:e.form.orderType}}):e.$router.go(-1)}e.loading=!1})).catch((function(t){e.loading=!1}))):e.$notify.warning({title:"警告",message:"请选择物料"})}}))},handleListEdit:function(e){var t={entity:{id:e.id,deliveryNumber:e.deliveryNumber||0}};return new Promise((function(e,r){Object(w["l"])(t).then((function(t){t.code;e(t)})).catch((function(e){r(e)}))}))},init:function(){this.listInit()},confirmCallBack:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.tableComKey++,e.next=3,this.listInit();case 3:t=this.tableData.findIndex((function(e){return e.id===r.dialogForm.id})),-1!==t&&(this.dialogForm=this.tableData[t]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),listInit:function(){var e=this;this.enabled=!1,this.tableLoading=!0;var t=fe({page:fe({},this.pageInfo,{},"add"!==this.params.view&&{size:1e3})},this.query,{orderId:["modify","detail"].includes(this.params.view)?null:this.params.orderId,deliveryReceiptId:"add"===this.params.view?null:this.params.id});return new Promise((function(r,n){Object(w["o"])(fe({},t,{},"add"===e.params.view&&{ids:Object(o["a"])(e.selected)})).then((function(t){var n=t.code,i=t.data;if(!n){e.enabled=!0;var o=i.formIdent,l=i.formHeadSets,s=i.pageData;e.formIdent=o,e.columnList=e.initTableHeadMixins(l);var c=e.columnList.findIndex((function(e){return!e.prop}));e.columnList.splice(c,1,{module:"word",prop:"",label:"未到货数量",align:"center",headerAlign:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:function(e){return(e.orderNumber-e.deliveredNumber).toFixed(3)}});var u=s.list,d=Object(a["a"])(s,["list"]);e.initPage(d),e.tableData=u.map((function(t){return fe({},t,{},"add"===e.params.view&&{deliveryNumber:e.selected.has(t.id)?e.selectedRows.find((function(e){return e.id===t.id})).deliveryNumber:t.orderNumber-t.deliveredNumber})})),"add"!==e.params.view?e.tableSelection=e.tableData.filter((function(e){return 1===e.orderType})):e.tableSelection=e.tableData.filter((function(e){return e.selected}))}e.tableLoading=!1,r(t)})).catch((function(t){e.tableLoading=!1,n(t)}))}))},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除选中信息, 是否继续?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning",cancelButtonClass:"btn-custom-cancel",lockScroll:!1}).then((function(){e.id&&Object(w["j"])({entity:{id:e.id}}).then((function(e){var r=e.code;r||(t.$message({message:"删除成功",type:"success"}),t.listInit())}))})).catch((function(){t.$notify.info({title:"消息",message:"已取消删除"})}))},handleAddMaterial:function(e){"3"===e?this.selectInfo.visible=!0:this.orderSelectInfo.visible=!0},handleRowClick:function(e){var t=e.row,r=e.column;e.cell,e.event;if(this.currentRow=t,"操作"===r.label)return!1},onSelectConfirm:function(e){var t=this;if(e.length){var r=[];r="3"===this.form.orderType?e.map((function(e){return fe({},e,{deliveryReceiptId:t.form.id,materialId:e.id,orderMaterialId:null,orderNumber:0,deliveryNumber:e.deliveryNumber})})):e.map((function(e){return fe({},e,{deliveryReceiptId:t.form.id,materialId:e.materialId,orderMaterialId:e.id,orderNumber:e.orderNum,deliveryNumber:e.deliveryNumber})})),Object(w["b"])({dmList:r}).then((function(e){var r=e.code;r||(t.$notify.success({title:"成功",message:"交接物料添加成功"}),t.listInit())})).catch((function(e){}))}},handleAdd:function(){this.editType="add",this.dialogForm={},this.dialogVisible=!0},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()},handleAllGenerate:function(){var e=this;return new Promise((function(t,r){Object(w["f"])({deliveryReceiptId:e.params.id}).then((function(t){e.$message({message:"条码已全部生成",type:"success"})})).catch((function(e){}))}))},handleAllPrint:function(){var e=this;this.getDataAndPrint(w["g"],{deliveryReceiptId:this.params.id}).then((function(t){e.listInit()}))},beforeClose:function(){if(this.$store.dispatch("tagsView/delView",this.$route),"InStorageDeliveryModify"!==this.$route.params.routeName){var e="";if("modify"===this.params.view&&"InStorageDeliveryAdd"===this.params.routeName){var t=["InStoragePurchase","InStorageAssist","InStorageConsign","InStorageFinish"];return e=t[this.form.orderType-1],void this.$router.push({name:e})}e=this.params.routeName,e?this.$router.push({name:e,params:this.$route.query.extraInfo||{}}):this.$router.go(-1)}else this.$router.push({name:"InStoragePurchaseDelivery",params:{id:this.$route.params.orderId,type:this.$route.params.type}})},handleBatchPrintBarcode:function(){var e=this.tableSelection.map((function(e){return{id:e.id,deliveryNumber:e.deliveryNumber,number:e.number}}));e.length?this.getDataAndPrint(w["u"],{dmList:e}):this.$message({message:"请勾选物料信息！",type:"warning"})},handlePrintBarcode:function(e){this.getDataAndPrint(w["u"],{dmList:[{id:e.id,deliveryNumber:e.deliveryNumber,number:e.number}]})},handleGenerateBarcode:function(e){var t=this;this.handleListEdit(e).then((function(){t.dialogForm=fe({},e),t.editType="modify",t.dialogVisible=!0})).catch((function(e){}))},handleViewBarcode:function(e){this.dialogForm=fe({},e),this.editType="modify",this.dialogVisible=!0},selectionChange:function(e){var t=this;this.tableSelection=Object(o["a"])(e),this.tableSelection.length?this.tableSelection.forEach((function(e){t.selected.has(e.id)||(t.selected.add(e.id),t.selectedRows.push(e))})):this.tableData.forEach((function(e){t.selected.has(e.id)&&(t.selected.delete(e.id),t.selectedRows=t.selectedRows.filter((function(t){return t.id!==e.id})))}))},paginationStatusChange:function(){this.listInit()},handleCellStyle:function(e){var t=e.row,r={backgroundColor:t.barcodeNumber>0?"#67C23A":""};return r},handleSetTable:function(){this.$refs[this.refTableName].sortDialogVisible=!0},selectable:function(e,t){return"add"!==this.params.view||e.orderNumber-e.deliveredNumber!==0},getWarehousePullList:function(){var e=this;return new Promise((function(t,r){Object(se["h"])().then((function(r){var n=r.code,i=r.data;n||(e.warehousePullList=i),t(r)})).catch((function(e){r(e)}))}))},getDynamicRow:function(e){this.selected.has(e.id)?(this.selected.delete(e.id),this.selectedRows=this.selectedRows.filter((function(t){return t.id!==e.id}))):(this.selected.add(e.id),this.selectedRows.push(e))},handleInWarehouse:function(e){this.$router.push({name:"InStorageInfoAdd",params:{id:this.params.id}})},handleAddMaterial1:function(){this.visible=!0},handleChooseConfirm:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.init()}}},he=be,pe=(r("2366"),Object(j["a"])(he,n,i,!1,null,"5507c8c1",null));t["default"]=pe.exports},2366:function(e,t,r){"use strict";var n=r("2f50"),i=r.n(n);i.a},"2f50":function(e,t,r){},"32a6":function(e,t,r){var n=r("241e"),i=r("c3a1");r("ce7e")("keys",(function(){return function(e){return i(n(e))}}))},"386bb":function(e,t,r){"use strict";var n=r("433b"),i=r.n(n);i.a},"433b":function(e,t,r){},4582:function(e,t,r){},"5164c":function(e,t,r){"use strict";r("ac6a");t["a"]={data:function(){return{device:null,BrowserPrint:window.BrowserPrint,zebraPrinter:null,printType:"barCode",isPrinting:!1}},mounted:function(){this.getDevice()},beforeDestroy:function(){this.zebraPrinter=window.BrowserPrint,this.device=null},methods:{getDevice:function(){var e=this;this.BrowserPrint.getDefaultDevice("printer",(function(t){t&&(e.device=t)}),(function(e){}))},getDataAndPrint:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Promise,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return Promise.reject(new Error("error"));this.isPrinting=!0;var n=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});return new Promise((function(i,a){t(r).then((function(t){var r=t.code,a=t.data;r||a.forEach((function(t){e.print(t)})),n.close(),i(t)})).catch((function(e){n.close(),a(e)}))}))},print:function(e){this.isPrinting=!0;var t=this;this.device&&this.device.send(e,(function(e){t.isPrinting=!1}),(function(e){t.isPrinting=!1}))}}}},"5ab1":function(e,t,r){"use strict";r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return s}));var n=r("bc43");function i(e){return Object(n["a"])({url:"/basic/unit/pageList",method:"post",data:e})}function a(e){return Object(n["a"])({url:"/basic/unit/listItem",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/basic/unit/add",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/basic/unit/edit",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/basic/unit/delete",method:"post",data:e})}},"5ea3":function(e,t,r){"use strict";r.d(t,"r",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"z",(function(){return o})),r.d(t,"k",(function(){return l})),r.d(t,"s",(function(){return s})),r.d(t,"o",(function(){return c})),r.d(t,"q",(function(){return u})),r.d(t,"b",(function(){return d})),r.d(t,"l",(function(){return f})),r.d(t,"j",(function(){return m})),r.d(t,"n",(function(){return b})),r.d(t,"i",(function(){return h})),r.d(t,"m",(function(){return p})),r.d(t,"a",(function(){return g})),r.d(t,"d",(function(){return v})),r.d(t,"w",(function(){return y})),r.d(t,"y",(function(){return w})),r.d(t,"p",(function(){return O})),r.d(t,"t",(function(){return x})),r.d(t,"x",(function(){return D})),r.d(t,"v",(function(){return S})),r.d(t,"h",(function(){return I})),r.d(t,"u",(function(){return j})),r.d(t,"g",(function(){return C})),r.d(t,"f",(function(){return k})),r.d(t,"e",(function(){return N}));var n=r("bc43");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/pageList",method:"post",data:e})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/save",method:"post",data:e,timeout:6e5})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/edit",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/delete",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/detail",method:"post",data:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/pageList",method:"post",data:e})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/pageListJS",method:"post",data:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/add",method:"post",data:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/edit",method:"post",data:e})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/del",method:"post",data:e})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/dmdPageList",method:"post",data:e})}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/clear",method:"post",data:e})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/detail",method:"post",data:e})}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/generateBarcodeList",method:"post",data:e})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/addMaterialDetailCheck",method:"post",data:e})}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/addMaterialDetail",method:"post",timeout:6e4,data:e})}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/commit",method:"post",data:e})}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsContract/allList",method:"post",data:e})}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/WmsOrder/selectOrderById",method:"post",data:e})}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryReceipt/bindOrder",method:"post",data:e})}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/print",method:"post",data:e,timeout:6e5})}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/barcodePrint",method:"post",data:e})}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/materialPrint",method:"post",data:e,timeout:6e5})}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/allPrint",method:"post",data:e,timeout:18e4})}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/allGenerateMaterialBarcode",method:"post",data:e})}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsDeliveryMaterial/deliveryUpdate/addMaterialPageList",method:"post",data:e})}},"6c8d":function(e,t,r){},"6d02":function(e,t,r){"use strict";var n=r("6c8d"),i=r.n(n);i.a},"786a":function(e,t,r){},"825c":function(e,t,r){},"8aae":function(e,t,r){r("32a6"),e.exports=r("584a").Object.keys},a4bb:function(e,t,r){e.exports=r("8aae")},a8db:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("e265"),i=r.n(n),a=r("a4bb"),o=r.n(a);function l(e,t){if(null==e)return{};var r,n,i={},a=o()(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function s(e,t){if(null==e)return{};var r,n,a=l(e,t);if(i.a){var o=i()(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}},c9a9:function(e,t,r){"use strict";var n=r("825c"),i=r.n(n);i.a},ce7e:function(e,t,r){var n=r("63b6"),i=r("584a"),a=r("294c");e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*a((function(){r(1)})),"Object",o)}},d76d:function(e,t,r){"use strict";var n=r("4582"),i=r.n(n);i.a},e08f:function(e,t,r){"use strict";r("8e6e"),r("ac6a"),r("456d"),r("7514");var n=r("bd86");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t["a"]={data:function(){return{formIdent:"",tableData:[],columnList:[],expandList:[],tableColumnSortData:[],labels:{},refreshKey:1}},methods:{initTableHeadMixins:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"word",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"columnSets",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,o=t.map((function(e){return a({isParam:!1},e,{width:"input"!==r||e.width?e.width:i,module:r})})).map((function(t){var r=e[n].find((function(e){return e.prop===t.prop}));return r?a({},t,{},r):a({},t)}));return this.$nextTick((function(){"word"===r&&(e.expandList=o.filter((function(e){return e.extend&&e.show})))})),this.$nextTick((function(){e.refreshKey+=1})),o.filter((function(e){return e.show&&!e.extend}))}}}},e265:function(e,t,r){e.exports=r("ed33")},ec26:function(e,t,r){"use strict";const n="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var i={randomUUID:n};let a;const o=new Uint8Array(16);function l(){if(!a&&(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(o)}const s=[];for(let d=0;d<256;++d)s.push((d+256).toString(16).slice(1));function c(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}function u(e,t,r){if(i.randomUUID&&!t&&!e)return i.randomUUID();e=e||{};const n=e.random||(e.rng||l)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return c(n)}t["a"]=u},ed33:function(e,t,r){r("014b"),e.exports=r("584a").Object.getOwnPropertySymbols},ee8a:function(e,t,r){"use strict";r("6b54");var n=r("bc3a"),i=r.n(n),a=r("5c96"),o=r("4360"),l=r("5f87"),s={baseURL:"https://192.168.1.7:9005/api/wms",withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"}},c=i.a.create(s),u=!1;c.interceptors.request.use((function(e){return o["a"].getters.token&&(e["responseType"]="blob",e.headers["Authorization"]="".concat(o["a"].getters.token)),e}),(function(e){Promise.reject(e)})),c.interceptors.response.use((function(e){return e&&e.data&&e.data.code&&999===e.data.code&&a["Notification"].error({message:e.data.msg,duration:5e3}),e}),(function(e){var t=0;try{t=e.response.status}catch(r){if(-1!==e.toString().indexOf("Error: timeout"))return a["Notification"].error({title:"网络请求超时",duration:5e3}),Promise.reject(e)}return 401===t||403===t?(u||(u=!0,a["Notification"].error({title:"登录信息已过期或者没有访问权限",duration:5e3}),setTimeout((function(){u=!1}),5e3)),o["a"].dispatch("resetToken").then((function(){setTimeout((function(){window.location.href=Object(l["b"])()}),3e3)})),Promise.reject(e)):(a["Notification"].error({title:e,duration:5e3}),Promise.reject(e))})),t["a"]=c},fd9d:function(e,t,r){"use strict";var n=r("786a"),i=r.n(n);i.a}}]);
//# sourceMappingURL=InStorageDeliveryAdd.b1bfd8ed.js.map