{"version":3,"sources":["webpack:///./src/views/out-bound/material-requisition/suborderEdit/index.vue?413c","webpack:///./src/views/out-bound/material-requisition/suborderEdit/index.vue?e113","webpack:///src/views/out-bound/material-requisition/suborderEdit/index.vue","webpack:///./src/views/out-bound/material-requisition/suborderEdit/index.vue?2299","webpack:///./src/views/out-bound/material-requisition/suborderEdit/index.vue","webpack:///./src/apis/modules/out-bound/material-requisition.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","form","rules","staticStyle","pageType","model","value","callback","$$v","$set","expression","loading","detailList","columnList","expandList","on","handleRowClick","searchInit","scopedSlots","_u","key","fn","scope","$event","handleDelete","$index","_v","staticClass","loading1","handleSave","_e","handleGoBack","staticRenderFns","components","mixins","paginationPage","props","data","INIT_FORM","needDate","extraInfo","computed","$route","name","replace","toLowerCase","mounted","getDetail","methods","column","label","$confirm","confirmButtonText","cancelButtonText","cancelButtonClass","type","lockScroll","message","subNumber","query","billNumber","Promise","$refs","formName","validate","valid","isNo0","code","$store","dispatch","tempRoute","$router","go","component","getListApi","request","url","method","getPullListItemApi","getAddApi","getEditApi","getDeleteApi","batchDeleteApi","getDetailApi","printApi","oneKeySplitApi","getList0Api","getList1Api","getDetail1Api","delete1Api","getEdit1Api","addSubOrderApi","queryMaterialApi","batchAddMaterialApi","getList2Api","delete2Api","submit2Api","print2Api","getSubOrderPullList2Api","edit2Api","getDetail2Api"],"mappings":"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","file":"js/OutBoundMaterialRequisitionSubOrderEdit.f304c2fd.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=57f88cee&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=57f88cee&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"inline\":\"\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"需求日期\",\"prop\":\"needDate\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"178px\"},attrs:{\"type\":\"date\",\"value-format\":\"yyyy-MM-dd\",\"placeholder\":\"请选择交货日期\",\"disabled\":_vm.pageType === 'detail'},model:{value:(_vm.form.needDate),callback:function ($$v) {_vm.$set(_vm.form, \"needDate\", $$v)},expression:\"form.needDate\"}})],1)],1),_c('table-com',{ref:\"baseTableRef\",attrs:{\"loading\":_vm.loading,\"index\":true,\"selection\":false,\"table-data\":_vm.form.detailList,\"column-list\":_vm.columnList,\"operation-width\":190,\"expand-list\":_vm.expandList,\"table-column-sort\":false,\"table-height-type\":680,\"show-operate\":false},on:{\"rowClick\":_vm.handleRowClick,\"refresh\":_vm.searchInit},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index)}}},[_vm._v(\"删除\")])]}}])}),_c('div',{staticClass:\"btn-context\"},[(_vm.pageType === 'edit')?[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading1},on:{\"click\":function($event){return _vm.handleSave('form')}}},[_vm._v(\"保 存\")])]:_vm._e(),_c('el-button',{attrs:{\"loading\":_vm.loading1},on:{\"click\":_vm.handleGoBack}},[_vm._v(\"取消\")])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-form ref=\"form\" :model=\"form\" inline :rules=\"rules\">\r\n      <el-form-item label=\"需求日期\" prop=\"needDate\">\r\n        <el-date-picker\r\n          v-model=\"form.needDate\"\r\n          type=\"date\"\r\n          style=\"width: 178px;\"\r\n          value-format=\"yyyy-MM-dd\"\r\n          placeholder=\"请选择交货日期\"\r\n          :disabled=\"pageType === 'detail'\"\r\n        />\r\n      </el-form-item>\r\n    </el-form>\r\n    <table-com\r\n      ref=\"baseTableRef\"\r\n      :loading=\"loading\"\r\n      :index=\"true\"\r\n      :selection=\"false\"\r\n      :table-data=\"form.detailList\"\r\n      :column-list=\"columnList\"\r\n      :operation-width=\"190\"\r\n      :expand-list=\"expandList\"\r\n      :table-column-sort=\"false\"\r\n      :table-height-type=\"680\"\r\n      :show-operate=\"false\"\r\n      @rowClick=\"handleRowClick\"\r\n      @refresh=\"searchInit\"\r\n    >\r\n      <template slot-scope=\"scope\">\r\n        <el-button type=\"danger\" @click=\"handleDelete(scope.$index)\">删除</el-button>\r\n      </template>\r\n    </table-com>\r\n    <div class=\"btn-context\">\r\n      <template v-if=\"pageType === 'edit'\">\r\n        <el-button type=\"primary\" :loading=\"loading1\" @click=\"handleSave('form')\">保 存</el-button>\r\n      </template>\r\n      <el-button :loading=\"loading1\" @click=\"handleGoBack\">取消</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport _ from 'lodash'\r\nimport paginationPage from '@/mixins/paginationPage'\r\nimport { edit2Api, getDetail2Api } from '@/apis/modules/out-bound/material-requisition'\r\n\r\nconst INIT_FORM = () => ({\r\n  needDate: '', // 需求日期\r\n  detailList: [] // 物料列表\r\n})\r\n\r\nexport default {\r\n  components: {\r\n  },\r\n  mixins: [paginationPage],\r\n  props: {},\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      columnList: [\r\n        {\r\n          module: 'word',\r\n          prop: 'materialGroupCode',\r\n          label: '物料组',\r\n          align: 'center',\r\n          // width: 120,\r\n          // minWidth: 160,\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'materialGroupDesc',\r\n          label: '物料组描述',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'materialCode',\r\n          label: '物料编码',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'materialName',\r\n          label: '物料名称',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'assessType_dictText',\r\n          label: '评估类型',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'unitName',\r\n          label: '单位',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        {\r\n          module: 'word',\r\n          prop: 'needDate',\r\n          label: '需求日期',\r\n          align: 'center',\r\n          minWidth: '',\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true,\r\n          formatter: null,\r\n          headerAlign: 'center'\r\n        },\r\n        // {\r\n        //   module: 'word',\r\n        //   prop: 'inventoryNum',\r\n        //   label: '库存数量',\r\n        //   align: 'center',\r\n        //   minWidth: 160,\r\n        //   fixed: false,\r\n        //   sortable: false,\r\n        //   resizable: true, // 是否可以通过拖拽改变宽度\r\n        //   formatter: null,\r\n        //   headerAlign: 'center'\r\n        // },\r\n        {\r\n          module: 'number',\r\n          prop: 'needNum',\r\n          label: '需求数量',\r\n          align: 'center',\r\n          minWidth: 160,\r\n          fixed: false,\r\n          sortable: false,\r\n          resizable: true, // 是否可以通过拖拽改变宽度\r\n          formatter: null,\r\n          headerAlign: 'center',\r\n          setMin: (item) => 0,\r\n          disabled: (item) => this.pageType === 'detail',\r\n          setMax: (item) => item.allowMaxNum,\r\n          handleChange: _.throttle((item) => {\r\n            console.log('执行了组件的修改,', item)\r\n          }, 1000),\r\n          setPrecision: (item) => 3,\r\n          showOverflowTooltip: false\r\n        }\r\n      ],\r\n      expandList: [],\r\n      form: INIT_FORM(),\r\n      rules: {\r\n        needDate: [\r\n          { required: true, message: '请选择需求日期', trigger: 'change' }\r\n        ]\r\n      },\r\n      loading1: false,\r\n      extraInfo: null\r\n    }\r\n  },\r\n  computed: {\r\n    pageType() {\r\n      return this.$route.name.replace('OutBoundMaterialRequisitionSubOrder', '').toLowerCase()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getDetail()\r\n  },\r\n  methods: {\r\n    handleRowClick({ row, column, cell, event }) {\r\n      console.log(row)\r\n      if (column.label === '操作') {\r\n        return false\r\n      }\r\n    },\r\n    handleDelete(i) {\r\n      this.$confirm(`此操作将永久删除该物料, 是否继续?`, '提示', {\r\n        confirmButtonText: '确 定',\r\n        cancelButtonText: '取 消',\r\n        cancelButtonClass: 'btn-custom-cancel',\r\n        type: 'warning',\r\n        lockScroll: false\r\n      }).then(() => {\r\n        this.form.detailList.splice(i, 1)\r\n        this.$message({\r\n          type: 'success',\r\n          message: '操作成功'\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          message: '已取消删除',\r\n          type: 'info'\r\n        })\r\n      })\r\n    },\r\n    // 详情\r\n    getDetail() {\r\n      const params = {\r\n        subNumber: this.$route.query.billNumber\r\n      }\r\n      this.loading = true\r\n      return new Promise((resolve, reject) => {\r\n        getDetail2Api(params)\r\n          .then(res => {\r\n            const { code, data } = res\r\n            if (!code) {\r\n              this.form = data || {}\r\n              this.extraInfo = res.data\r\n              resolve(res)\r\n            }\r\n            this.loading = false\r\n          })\r\n          .catch(err => {\r\n            console.log(err)\r\n            this.loading = false\r\n            reject(err)\r\n          })\r\n      })\r\n    },\r\n    handleSave(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          if (!this.form.detailList.length) {\r\n            this.$message({\r\n              message: '至少新增一条物料',\r\n              type: 'warning'\r\n            })\r\n            return\r\n          }\r\n          const isNo0 = this.form.detailList.some(c => !c.needNum)\r\n          if (isNo0) {\r\n            this.$message({\r\n              message: '需求数量存在为0的情况，请重新编辑！',\r\n              type: 'warning'\r\n            })\r\n            return\r\n          }\r\n          this.loading1 = true\r\n          edit2Api({\r\n            ...this.form\r\n          }).then(res => {\r\n            const { code } = res\r\n            if (!code) {\r\n              this.$message({\r\n                message: `操作成功`,\r\n                type: 'success'\r\n              })\r\n              this.handleGoBack()\r\n            }\r\n            this.loading1 = false\r\n          }).catch(err => {\r\n            console.log(err)\r\n            this.loading1 = false\r\n          })\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // Tip 回退页面\r\n    handleGoBack() {\r\n      const tempRoute = Object.assign({}, this.$route)\r\n      this.$store.dispatch('tagsView/delView', tempRoute)\r\n      this.$router.go(-1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.btn-context {\r\ntext-align: right;\r\n}\r\n::v-deep .approval-opinion {\r\n    margin: 0;\r\n    width: 100%;\r\n    .el-form-item__content {\r\n        width: 100%;\r\n    }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=57f88cee&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=57f88cee&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57f88cee\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/apis/request.wms'\r\n\r\n// 列表\r\nexport function getListApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisition/pageList',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 下拉列表\r\nexport function getPullListItemApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisition/listItem',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 新增\r\nexport function getAddApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisition/add',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 修改\r\nexport function getEditApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisition/edit',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 删除\r\nexport function getDeleteApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisition/delete',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 批量删除\r\nexport function batchDeleteApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionDetail/batchDelete',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 详情\r\nexport function getDetailApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisition/detail',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 打印\r\nexport function printApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisition/print',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 一键拆分\r\nexport function oneKeySplitApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionSub/oneKeySplit',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 一键拆分列表\r\nexport function getList0Api(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionDetail/pageList',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\n// 领料单拆分、领料单详情 相关接口\r\n// 1、当前单据--模块\r\nexport function getList1Api(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionDetail/pageList',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\nexport function getDetail1Api(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisition/detail',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\nexport function delete1Api(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionDetail/delete',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\nexport function getEdit1Api(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionDetail/edit',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\nexport function addSubOrderApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionSub/add',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 根据物料编码查询物料(参数：materialCode)\r\nexport function queryMaterialApi(data = {}) {\r\n  return request({\r\n    url: '/basic/wmsMaterial/getListByCode',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 批量添加领料单物料(参数：[{materialCode 物料编码,reservedNumber 预留单号,materialId 物料id,needNum 需求数量,needDate 需求日期}])\r\nexport function batchAddMaterialApi(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionDetail/batchAdd',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 2、当前单据--模块\r\nexport function getList2Api(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionSub/pageList',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\nexport function delete2Api(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionSub/delete',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\nexport function submit2Api(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionSub/submit',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\nexport function print2Api(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionSub/print',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\nexport function getSubOrderPullList2Api(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionSub/listItem',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 领料单子单修改\r\nexport function edit2Api(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionSub/edit',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 领料单子单详情\r\nexport function getDetail2Api(data = {}) {\r\n  return request({\r\n    url: '/outWarehouse/wmsBillMaterialRequisitionSub/detail',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n"],"sourceRoot":""}