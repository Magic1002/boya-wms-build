(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SetKanban"],{"4a7a":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-scrollbar",{staticClass:"scroll-container"},[r("el-form",{ref:"Form1",attrs:{model:t.form,rules:t.rules,"label-width":"120px","label-position":"right"}},[r("el-form-item",{attrs:{label:"所属区域：",prop:"region"}},[r("el-select",{staticStyle:{width:"178px"},attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{change:function(e){t.getBoardList(),t.getBoardSet()}},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},t._l(t.options1,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),r("el-form-item",{attrs:{label:"是否轮播：",prop:"play"}},[r("el-radio-group",{on:{input:t.playChange},model:{value:t.form.play,callback:function(e){t.$set(t.form,"play",e)},expression:"form.play"}},[r("el-radio",{attrs:{label:!0}},[t._v("看板轮播(多个看板按时间周期轮播)")]),r("el-radio",{attrs:{label:!1}},[t._v("不轮播(只显示单个看板)")])],1)],1),r("el-form-item",{attrs:{label:"选择看板：",prop:"billboardsIds"}},[t.form.play?[r("el-checkbox-group",{model:{value:t.form.billboardsIds,callback:function(e){t.$set(t.form,"billboardsIds",e)},expression:"form.billboardsIds"}},t._l(t.list,(function(e,o){return r("el-checkbox",{key:o,attrs:{border:!0,label:e.id}},[t._v(t._s(e.name))])})),1)]:[r("el-radio-group",{model:{value:t.form.billboardsIds,callback:function(e){t.$set(t.form,"billboardsIds",e)},expression:"form.billboardsIds"}},t._l(t.list,(function(e,o){return r("el-radio",{key:o,attrs:{border:!0,label:e.id}},[t._v(t._s(e.name))])})),1)]],2),t.form.play?r("el-form-item",{attrs:{label:"轮播间隔时长",prop:"time"}},[r("el-select",{staticStyle:{width:"178px"},attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}},t._l(t.options,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e()],1)],1),r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("保 存")]),r("el-button",{on:{click:t.handleCancel}},[t._v("取 消")])],1)],1)},a=[],l=(r("8e6e"),r("456d"),r("ac6a"),r("5df3"),r("bd86")),n=r("75fc"),i=r("bb6d");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){Object(l["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var d=function(){return{region:1,play:!1,billboardsIds:void 0,time:""}},u={data:function(){var t=this;return{form:d(),options1:[{label:"科技园",value:1},{label:"中院",value:2}],options:[{label:"10秒",value:10},{label:"20秒",value:20},{label:"30秒",value:30},{label:"1分钟",value:60},{label:"10钟",value:600}],list:[],rules:{region:[{validator:function(t,e,r){e?r():r(new Error("请选择所属区域"))},trigger:"change"}],billboardsIds:[{validator:function(e,r,o){t.form.play?r.length?o():o(new Error("请至少选择一个看板")):r?o():o(new Error("请选择看板"))},trigger:"change"}],time:[{validator:function(t,e,r){e?r():r(new Error("请选择轮播间隔时长"))},trigger:"change"}]}}},mounted:function(){this.getBoardList(),this.getBoardSet()},methods:{getBoardList:function(){var t=this,e={region:this.form.region};return new Promise((function(r,o){Object(i["c"])(e).then((function(e){var o=e.code,a=e.data;o||(t.list=Object(n["a"])(a)),r(e)})).catch((function(t){o(t)}))}))},getBoardSet:function(){var t=this,e={region:this.form.region};return new Promise((function(r,o){Object(i["d"])(e).then((function(e){var o=e.code,a=e.data;o||(t.form=c({},a),t.form.play?t.$set(t.form,"billboardsIds",a.billboards.map((function(t){return t.id}))):t.$set(t.form,"billboardsIds",a.billboards.map((function(t){return t.id}))[0])),r(e)})).catch((function(t){o(t)}))}))},handleCancel:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({name:"KanbanConfig"})},handleSave:function(){var t=this;Promise.all([this.$refs["Form1"].validate()]).then((function(){var e={set:{id:t.form.id,play:t.form.play,billboardsIds:t.form.play?t.form.billboardsIds.join():t.form.billboardsIds,time:t.form.time}};Object(i["g"])(e).then((function(e){var r=e.code;r||(t.$notify.success({title:"成功",message:"保存成功"}),t.$store.dispatch("tagsView/delView",t.$route),t.$router.push({name:"KanbanConfig"}))})).catch((function(t){}))})).catch((function(){return!1}))},resetForm:function(){this.$refs["Form1"].resetFields()},playChange:function(t){t?(this.form.billboardsIds=[],this.form.time=""):(this.form.billboardsIds="",this.form.time=""),this.$refs.Form1.clearValidate(["billboardsIds","time"])}}},f=u,b=(r("c3ea"),r("2877")),m=Object(b["a"])(f,o,a,!1,null,"6e89ea26",null);e["default"]=m.exports},bb6d:function(t,e,r){"use strict";r.d(e,"c",(function(){return a})),r.d(e,"f",(function(){return l})),r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i})),r.d(e,"g",(function(){return s})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return d}));var o=r("bc43");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/statistics/wmsBillboards/list",method:"post",data:t})}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/statistics/wmsBillboards/save",method:"post",data:t})}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/statistics/wmsBillboards/get",method:"post",data:t})}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/statistics/wmsBillboards/del",method:"post",data:t})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/statistics/wmsBillboards/saveSet",method:"post",data:t})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/statistics/wmsBillboards/getSet",method:"post",data:t})}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/statistics/wmsBillboards/chartList",method:"post",data:t})}},c3ea:function(t,e,r){"use strict";var o=r("f76d"),a=r.n(o);a.a},f76d:function(t,e,r){}}]);
//# sourceMappingURL=SetKanban.528138a2.js.map