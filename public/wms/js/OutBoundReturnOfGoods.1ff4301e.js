(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["OutBoundReturnOfGoods"],{"0d68":function(e,t,n){},"282d":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,top:"5vh",visible:e.value,"show-close":!0,width:"920px","lock-scroll":!1,"destroy-on-close":!0,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{open:e.initSelect}},[n("el-row",[e.isCheckAll?e._e():n("el-button",{attrs:{type:"warning",plain:""},on:{click:e.checkAll}},[e._v("跨页全选")]),e.isCheckAll?n("el-button",{attrs:{type:"warning",plain:""},on:{click:e.reverseSelection}},[e._v("跨页反选")]):e._e()],1),n("el-scrollbar",{staticClass:"scroll-dialog"},[n("el-row",[n("table-com",{ref:e.refName,attrs:{"table-height-type":490,loading:e.loading,index:!1,"index-fixed":!1,selection:!0,multiple:e.multiple,"selection-fixed":!1,"table-column-sort":!1,"row-key":e.rowKey,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!1,"operate-fixed":!1,"table-selection":e.tableSelection},on:{selectionChange:e.selectionChange}})],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1),n("package-to-s-k-u",{attrs:{title:"供应商条码","is-show-print-btn":!1,"extra-info":{columnList:e.columnList1||[],tableData:e.dialogInfo1.subBarCodeList||[]}},model:{value:e.skuVisible,callback:function(t){e.skuVisible=t},expression:"skuVisible"}}),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.confirmDialog}},[e._v("确 定")]),n("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},i=[],o=(n("8e6e"),n("456d"),n("7f7f"),n("75fc")),a=(n("ac6a"),n("6762"),n("2fdb"),n("a8db")),l=n("bd86"),c=(n("c5f6"),n("ec26")),s=n("a2c6"),u=n("1790"),d=n("6bcc"),f=n("6bbd");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={name:"MaterialSelect",components:{PackageToSKU:s["a"]},mixins:[u["a"],f["a"]],props:{value:{required:!0,type:Boolean},title:{type:String,default:"物料选择"},multiple:{type:Boolean,default:!0},selection:{type:Array,default:function(){return[]}},max:{type:Number,default:0},ids:{type:Array,default:function(){return[]}},id:{type:[Number,String],default:""},extraInfo:{type:Object,default:function(){}}},dicts:[],data:function(){var e=this;return{loading:!1,refName:"modelSelectMaterialSelect",rowKey:"barCode",isCheckAll:!1,query:{},columnList:[{module:"word",prop:"materialCode",label:"物料编号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialSpec",label:"规格型号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"assessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"link",type:function(e){return Array.isArray(e.subBarCodeList)&&e.subBarCodeList.length?"primary":""},prop:"barCode",underline:!1,minWidth:150,label:"条码号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",handleClick:function(t){t.subBarCodeList.length&&(e.skuVisible=!0,e.dialogInfo1=t)}},{module:"word",prop:"number",label:"数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"storageNo",label:"当前库位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],columnList1:[{module:"word",prop:"materialCode",label:"物料编号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialSpec",label:"规格型号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"assessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"barCode",label:"条码号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"number",label:"数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"storageNo",label:"当前库位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],tableData:[],columnSets:[],tableSelection:[],deptSelectedInfo:{list:[],visible:!1,radio:""},skuVisible:!1,dialogInfo1:{}}},methods:{confirmDialog:function(){this.tableSelection.length?(this.$emit("confirm",this.tableSelection),this.beforeClose()):this.$message({message:"请选择物料",type:"warning"})},init:function(){var e=this,t=p({},this.query,{page:p({},this.pageInfo)},this.extraInfo);return new Promise((function(n,r){e.loading=!0,Object(d["i"])(p({},t)).then((function(t){var r=t.code,i=t.data;if(!r){var o=i.list,l=Object(a["a"])(i,["list"]);e.initPage(l),e.tableData=o.map((function(e){return p({uuid:Object(c["a"])(),deliveryNumber:e.orderNum},e)})),e.tableSelection=e.tableData.filter((function(t){return e.selection.includes(t.barCode)}))}e.loading=!1,n(t)})).catch((function(t){e.loading=!1,r(t)}))}))},checkAll:function(){var e=this;this.isCheckAll=!0;var t=p({},this.query,{},this.extraInfo,{page:{current:1,size:1e4}});return new Promise((function(n,r){Object(d["i"])(p({},t)).then((function(t){var r=t.code,i=t.data;if(!r){var o=i.list;if(o&&Array.isArray(o)&&o.length){if(e.tableSelection=o,!e.tableSelection.length)return e.isCheckAll=!1,void e.$notify.warning({title:"警告",message:"暂不支持跨页全选"});var a=e.rowKey,l=e.tableSelection.map((function(e){return e[a]})),c=[];e.tableData.forEach((function(t){function n(e){var t=e[a];return l.some((function(e){return e===t}))}n(t)&&(c.push(t),e.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(t,!0)})))})),e.tableSelection.forEach((function(t){var n=c.map((function(e){return e[a]}));n.includes(t[a])||e.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(t,!0)}))}))}}n(t)})).catch((function(e){r(e)}))}))},reverseSelection:function(){var e=this;this.isCheckAll=!1,this.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.clearSelection(),e.tableSelection=[]}))},initSelect:function(){this.init()},selectionChange:function(e){this.tableSelection=Object(o["a"])(e)},handleUpdateTableSelected:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},handleDefault:function(){this.tableSelection=new Array(0)},beforeClose:function(e){this.$emit("input",!1),this.handleDefault(),"function"===typeof e&&e()},onDeptSelectConfirm:function(e){e.length&&(this.query.usedOffice=e[0].name)}}},h=m,g=(n("8306"),n("2877")),y=Object(g["a"])(h,r,i,!1,null,"61a9a88d",null);t["a"]=y.exports},"28c1":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));var r=n("bc43");function i(e){return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/deliveryReceiptPageList",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/print",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/pageList4ReturnMaterials",method:"post",data:e})}},"32a6":function(e,t,n){var r=n("241e"),i=n("c3a1");n("ce7e")("keys",(function(){return function(e){return i(r(e))}}))},3858:function(e,t,n){"use strict";var r=n("4f7b"),i=n.n(r);i.a},"3b56":function(e,t,n){"use strict";var r=n("607f"),i=n.n(r);i.a},"4f7b":function(e,t,n){},"607f":function(e,t,n){},"6bcc":function(e,t,n){"use strict";n.d(t,"i",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return a})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return b})),n.d(t,"b",(function(){return p}));var r=n("bc43");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/enterWarehouse/wmsStockIn/detailPageList4ReturnMaterials",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/outWarehouse/wmsBillReturnMaterials/pageList",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/outWarehouse/wmsBillReturnMaterials/listItem",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/outWarehouse/wmsBillReturnMaterials/add",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/outWarehouse/wmsBillReturnMaterials/edit",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/outWarehouse/wmsBillReturnMaterials/delete",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/outWarehouse/wmsBillReturnMaterials/detail",method:"post",data:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/outWarehouse/wmsBillReturnMaterials/print",method:"post",data:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/outWarehouse/wmsBillReturnMaterials/submit",method:"post",data:e})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/outWarehouse/wmsBillReturnMaterials/withdraw",method:"post",data:e})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/outWarehouse/wmsBillReturnMaterials/audit",method:"post",data:e})}},8306:function(e,t,n){"use strict";var r=n("0d68"),i=n.n(r);i.a},"8aae":function(e,t,n){n("32a6"),e.exports=n("584a").Object.keys},"8c8e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,top:"5vh",visible:e.value,"show-close":!0,width:"920px","lock-scroll":!1,"destroy-on-close":!0,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{open:e.initSelect}},[n("el-scrollbar",{staticClass:"scroll-dialog"},[n("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{prop:"billNumber"}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{placeholder:"入库单号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInit(t)}},model:{value:e.query.billNumber,callback:function(t){e.$set(e.query,"billNumber","string"===typeof t?t.trim():t)},expression:"query.billNumber"}})],1),n("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")])],1),n("el-row",[n("table-com",{ref:e.refName,attrs:{"table-height-type":490,loading:e.loading,index:!1,"index-fixed":!1,selection:!0,multiple:e.multiple,"selection-fixed":!1,"table-column-sort":!1,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!1,"operate-fixed":!1,"table-selection":e.tableSelection},on:{selectionChange:e.selectionChange}})],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.confirmDialog}},[e._v("确 定")]),n("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},i=[],o=(n("8e6e"),n("ac6a"),n("456d"),n("7f7f"),n("75fc")),a=(n("6762"),n("2fdb"),n("a8db")),l=n("bd86"),c=(n("c5f6"),n("ec26")),s=n("1790"),u=n("28c1"),d=n("6bbd");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"MaterialSelect",mixins:[s["a"],d["a"]],props:{value:{required:!0,type:Boolean},title:{type:String,default:"入库单选择"},multiple:{type:Boolean,default:!0},selection:{type:Array,default:function(){return[]}},max:{type:Number,default:0},ids:{type:Array,default:function(){return[]}},extraInfo:{type:Object,default:function(){}}},dicts:[],data:function(){return{loading:!1,refName:"modelSelectMaterialSelect",query:{billNumber:""},tableData:[],columnList:[{module:"word",prop:"billNumber",label:"单号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"source",label:"来源(供应商或生产单位)",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"documentDate",label:"日期",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"storekeeperName",label:"库管员",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],columnSets:[],tableSelection:[],deptSelectedInfo:{list:[],visible:!1,radio:""}}},methods:{confirmDialog:function(){this.tableSelection.length?(this.$emit("confirm",this.tableSelection),this.beforeClose()):this.$message({message:"请选择入库单",type:"warning"})},init:function(){var e=this,t=b({},this.query,{page:b({},this.pageInfo)},this.extraInfo);return new Promise((function(n,r){Object(u["c"])(b({},t)).then((function(t){var r=t.code,i=t.data;if(!r){var o=i.list,l=Object(a["a"])(i,["list"]);e.initPage(l),e.tableData=o.map((function(e){return b({uuid:Object(c["a"])(),deliveryNumber:e.orderNum},e)})),e.tableSelection=e.tableData.filter((function(t){return e.selection.includes(t.id)}))}e.loading=!1,n(t)})).catch((function(t){e.loading=!1,r(t)}))}))},initSelect:function(){this.init()},selectionChange:function(e){this.tableSelection=Object(o["a"])(e)},handleUpdateTableSelected:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},handleDefault:function(){this.tableSelection=new Array(0)},beforeClose:function(e){this.$emit("input",!1),this.handleDefault(),"function"===typeof e&&e()},onDeptSelectConfirm:function(e){e.length&&(this.query.usedOffice=e[0].name)},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()}}},m=p,h=(n("3858"),n("2877")),g=Object(h["a"])(m,r,i,!1,null,"18b772d4",null);t["a"]=g.exports},a4bb:function(e,t,n){e.exports=n("8aae")},a8db:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("e265"),i=n.n(r),o=n("a4bb"),a=n.n(o);function l(e,t){if(null==e)return{};var n,r,i={},o=a()(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function c(e,t){if(null==e)return{};var n,r,o=l(e,t);if(i.a){var a=i()(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},ce7e:function(e,t,n){var r=n("63b6"),i=n("584a"),o=n("294c");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},dc8f:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"g",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"h",(function(){return a})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"k",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"d",(function(){return b}));var r=[{id:1,name:"待检验"},{id:2,name:"检验中"},{id:3,name:"已完成"},{id:6,name:"待更新"},{id:7,name:"档案未上传"}],i={0:"danger",1:"info",2:"warning",3:"success",4:"success",5:"success",6:"danger",7:"danger"},o={0:"草稿",1:"待检验",2:"检验中",3:"已完成",4:"已完成",5:"已完成",6:"待更新",7:"档案未上传"},a={0:"",1:"info",2:"warning",3:"success",4:"success"},l={0:"",1:"待检验",2:"检验中",3:"已完成",4:"已完成"},c={0:"danger",1:"success"},s={0:"不合格",1:"合格"},u=[{id:1,name:"全检"},{id:2,name:"抽检"}],d=[{id:1,name:"待检验"},{id:2,name:"检验中"},{id:3,name:"已完成"}],f={0:"未处理",1:"待完成",2:"已完成"},b={0:"未提交",1:"审核中",2:"未通过",3:"已完成",4:"驳回"}},e08f:function(e,t,n){"use strict";n("8e6e"),n("ac6a"),n("456d"),n("7514");var r=n("bd86");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t["a"]={data:function(){return{formIdent:"",tableData:[],columnList:[],expandList:[],tableColumnSortData:[],labels:{},refreshKey:1}},methods:{initTableHeadMixins:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"word",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"columnSets",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,a=t.map((function(e){return o({isParam:!1},e,{width:"input"!==n||e.width?e.width:i,module:n})})).map((function(t){var n=e[r].find((function(e){return e.prop===t.prop}));return n?o({},t,{},n):o({},t)}));return this.$nextTick((function(){"word"===n&&(e.expandList=a.filter((function(e){return e.extend&&e.show})))})),this.$nextTick((function(){e.refreshKey+=1})),a.filter((function(e){return e.show&&!e.extend}))}}}},e265:function(e,t,n){e.exports=n("ed33")},ec26:function(e,t,n){"use strict";const r="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var i={randomUUID:r};let o;const a=new Uint8Array(16);function l(){if(!o&&(o="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(a)}const c=[];for(let d=0;d<256;++d)c.push((d+256).toString(16).slice(1));function s(e,t=0){return(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase()}function u(e,t,n){if(i.randomUUID&&!t&&!e)return i.randomUUID();e=e||{};const r=e.random||(e.rng||l)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return s(r)}t["a"]=u},ed33:function(e,t,n){n("014b"),e.exports=n("584a").Object.getOwnPropertySymbols},f4a6:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"clearfix top-filter"},[n("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{prop:"billNumber"}},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"退货单号"},model:{value:e.query.billNumber,callback:function(t){e.$set(e.query,"billNumber",t)},expression:"query.billNumber"}},e._l(e.custumerPullList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.billNumber,value:e.billNumber}})})),1)],1),n("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")]),n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),n("el-row",[n("table-com",{ref:"baseTableRef",attrs:{loading:e.loading,selection:!1,"table-column-sort":!0,"form-ident":e.formIdent,"table-data":e.tableData,"column-list":e.columnList,"operation-width":350,"refresh-key":e.refreshKey,"expand-list":e.expandList},on:{refresh:e.searchInit},scopedSlots:e._u([{key:"default",fn:function(t){return[[1,5].includes(t.row.status)?[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.handle(t.row,"Submit")}}},[e._v("提交")]),n("el-button",{attrs:{type:"warning"},on:{click:function(n){return e.handleModify(t.row)}}},[e._v("修改")]),n("el-button",{attrs:{type:"danger"},on:{click:function(n){return e.handle(t.row,"Delete")}}},[e._v("删除")])]:e._e(),2===t.row.status?[n("el-button",{attrs:{type:"warning"},on:{click:function(n){return e.handle(t.row,"Withdraw")}}},[e._v("撤回")])]:e._e(),n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.handleDetail(t.row)}}},[e._v("详情")]),n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.handlePrint(t.row)}}},[e._v("打印")])]}}])})],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}}),n("edit-dialog",{attrs:{"dialog-form":e.dialogForm,"dialog-type":e.dialogType,title:e.dialogTitle},on:{submit:e.init},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}})],1)},i=[],o=(n("8e6e"),n("ac6a"),n("456d"),n("6762"),n("2fdb"),n("7f7f"),n("a8db")),a=n("bd86"),l=n("6bcc"),c=n("1790"),s=n("333d"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-drawer",{attrs:{center:!0,"append-to-body":!0,"close-on-press-escape":!1,"wrapper-closable":!1,title:e.title,size:"40%",visible:e.value,"destroy-on-close":!0,"before-close":e.beforeClose},on:{open:e.initSelect}},[n("el-form",{ref:"form",attrs:{model:e.form,inline:"",rules:e.rules,"label-width":"120px"}},[n("el-scrollbar",{staticClass:"scroll-drawer"},[n("el-form-item",{attrs:{label:"入库单",prop:"stockInNumber"}},[n("el-link",{staticStyle:{width:"178px"},attrs:{disabled:"detail"===e.dialogType,type:"primary"},on:{click:function(t){e.dialogInfo.visible=!0}}},[e._v(e._s(e.form.stockInNumber?e.form.stockInNumber:"请选择"))])],1),n("el-divider",{attrs:{"content-position":"left"}},[n("span",{staticClass:"divider-title"},[e._v("物料")]),"detail"!==e.dialogType?n("el-button",{staticClass:"divider-button",attrs:{disabled:!e.form.stockInNumber,type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){e.selectInfo.visible=!0}}}):e._e()],1),n("el-row",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.detailList,border:""}},[n("el-table-column",{key:"1",attrs:{align:"center",type:"index",label:"序号",width:"80"}}),e._l(e.formThead,(function(e){return n("el-table-column",{key:e.label,attrs:{label:e.label,prop:e.prop,align:"center",formatter:e.formatter}})})),"detail"!==e.dialogType?n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"danger"},on:{click:function(n){return e.form.detailList.splice(t.$index,1)}}},[e._v("删除")])]}}],null,!1,3970603675)}):e._e()],2)],1)],1),n("div",{staticClass:"drawer-footer"},[n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.handleConfirm("form")}}},[e._v(e._s(e.loading?"提交中 ...":"确 定"))]),"detail"!==e.dialogType?n("el-button",{on:{click:e.beforeClose}},[e._v("取 消")]):e._e()],1)],1),n("material-select",{attrs:{multiple:!0,"extra-info":{entity:e.entity},selection:e.form.detailList.map((function(e){return e.id}))},on:{confirm:e.onSelectConfirm},model:{value:e.selectInfo.visible,callback:function(t){e.$set(e.selectInfo,"visible",t)},expression:"selectInfo.visible"}}),n("warehousing-entry",{attrs:{multiple:!1,selection:[e.form.billNumberId]},on:{confirm:e.warehousingConfirm},model:{value:e.dialogInfo.visible,callback:function(t){e.$set(e.dialogInfo,"visible",t)},expression:"dialogInfo.visible"}})],1)},d=[],f=n("282d"),b=n("8c8e");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(){return{stockInNumber:"",billNumberId:"",detailList:[]}},g=[{label:"物料编码",prop:"materialCode"},{label:"物料名称",prop:"materialName"},{label:"规格型号",prop:"materialSpec"},{label:"评估类型",prop:"assessType_dictText"},{label:"条码号",prop:"barcodeNumber"},{label:"数量",prop:"num"},{label:"计量单位",prop:"unitName"}],y={name:"CustomerInfoDialogComs",components:{MaterialSelect:f["a"],WarehousingEntry:b["a"]},props:{value:{type:Boolean,default:!1},title:{type:String,default:""},dialogType:{type:String,default:"add"},dialogForm:{type:Object,default:function(){return m({},h())}}},data:function(){return{form:h(),loading:!1,selectInfo:{list:[],visible:!1,radio:""},dialogInfo:{list:[],visible:!1,radio:""},formThead:g,rules:{stockInNumber:[{required:!0,message:"请选择入库单",trigger:"change"}]},gradeOpts:[]}},computed:{entity:function(){return{id:this.form.billNumberId}}},watch:{dialogForm:{handler:function(e){"add"===this.dialogType?this.form=m({},h()):this.form=m({},e)},immediate:!0}},methods:{handleConfirm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;if(t.form.detailList.length){t.loading=!0;var n={modify:l["d"],add:l["a"]}[t.dialogType||"add"];n(m({},t.form)).then((function(e){var n=e.code;n||(t.$message({message:"操作成功",type:"success"}),t.$emit("submit"),t.beforeClose()),t.loading=!1})).catch((function(e){t.loading=!1}))}else t.$message({message:"请选择物料",type:"warning"})}))},initSelect:function(){},handleDel:function(e){var t=e.id;this.form.detailList=this.form.detailList.filter((function(e){return e.id!==t}))},onSelectConfirm:function(e){e.length&&(e=e.map((function(e){return m({num:e.number,barcodeNumber:e.barCode},e)})),this.form.detailList=e)},warehousingConfirm:function(e){e.length&&(this.form.stockInNumber=e[0].billNumber,this.form.billNumberId=e[0].id)},beforeClose:function(e){this.$refs.form.resetFields(),this.$emit("input",!1),this.form=Object.assign({},m({},h())),"function"===typeof e&&e()}}},v=y,w=(n("3b56"),n("2877")),O=Object(w["a"])(v,u,d,!1,null,"2786f1a7",null),j=O.exports,k=n("e08f"),S=n("dc8f"),x=n("2f62");function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D={components:{Pagination:s["a"],EditDialog:j},mixins:[c["a"],k["a"]],data:function(){return{query:{billNumber:""},dialogForm:{},title:this.$route.meta.title,loading:!1,custumerPullList:[],dialogType:"add",dialogVisible:!1,columnSets:[{module:"status",prop:"status",formatter:function(e){return S["d"][e-1]},statusFormatter:function(e){var t={1:"info",2:"primary",3:"warning",4:"danger",5:"info"};return e.status?t[e.status]:""}}],returnOfGoodsMap:S["d"]}},computed:C({dialogTitle:function(){return"add"===this.dialogType?"新增".concat(this.title):"modify"===this.dialogType?"修改".concat(this.title):"".concat(this.title,"详情")}},Object(x["c"])("app",{navbarWarehouseCheckedList:"navbarWarehouseCheckedList"})),watch:{navbarWarehouseCheckedList:{handler:function(){this.init()},deep:!0}},mounted:function(){this.init(),this.getcustumerPullList()},methods:{init:function(){var e=this;return this.loading=!0,new Promise((function(t,n){Object(l["f"])(C({page:C({},e.pageInfo)},e.query,{warehouseIds:e.navbarWarehouseCheckedList.map((function(e){return e.id}))})).then((function(n){var r=n.code,i=n.data;if(!r){var a=i.formIdent,l=i.formHeadSets,c=i.pageData;e.formIdent=a,e.columnList=e.initTableHeadMixins(l);var s=c.list,u=Object(o["a"])(c,["list"]);e.initPage(u),e.tableData=s}e.loading=!1,t(n)})).catch((function(t){e.loading=!1,n(t)}))}))},handleAdd:function(){this.$router.push({name:"BillReturnMaterialsAdd"})},handleModify:function(e){this.$router.push({name:"BillReturnMaterialsEdit",query:{billNumber:e.billNumber}})},handle:function(e,t){var n=this,r={Submit:{api:l["j"],tip:"该工单即将提交"},Delete:{api:l["c"],tip:"该工单即将删除"},Withdraw:{api:l["k"],tip:"该工单即将撤回"}};this.$confirm("".concat(r[t]["tip"],"，是否继续？"),"提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",cancelButtonClass:"btn-custom-cancel",type:"warning",lockScroll:!1}).then((function(){r[t]["api"](C({},"Delete"===t&&{id:e.id,dataSources:e.dataSources},{},["Submit","Withdraw"].includes(t)&&{billNumber:e.billNumber})).then((function(e){var t=e.code;t||(n.$notify.success({title:"成功",message:"操作成功"}),n.init())}))})).catch((function(e){n.$notify.info({title:"消息",message:"操作已取消"})}))},getcustumerPullList:function(){var e=this;return new Promise((function(t,n){Object(l["g"])({}).then((function(n){var r=n.code,i=n.data;r||(e.custumerPullList=i||[]),t(n)})).catch((function(e){n(e)}))}))},handleDetail:function(e){this.$router.push({name:"BillReturnMaterialsDetail",query:{billNumber:e.billNumber}})},handlePrint:function(e){var t=e.billNumber,n={billNumber:t};return new Promise((function(e,t){Object(l["h"])(C({},n)).then((function(t){var n=t.code,r=t.data;n||window.open("https://192.168.1.7:9005/api/wms"+r),e(t)})).catch((function(e){t(e)}))}))},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()}}},P=D,N=Object(w["a"])(P,r,i,!1,null,null,null);t["default"]=N.exports}}]);
//# sourceMappingURL=OutBoundReturnOfGoods.1ff4301e.js.map