(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["BillReturnMaterialsAdd"],{"0d68":function(e,t,r){},"282d":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,top:"5vh",visible:e.value,"show-close":!0,width:"920px","lock-scroll":!1,"destroy-on-close":!0,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{open:e.initSelect}},[r("el-row",[e.isCheckAll?e._e():r("el-button",{attrs:{type:"warning",plain:""},on:{click:e.checkAll}},[e._v("跨页全选")]),e.isCheckAll?r("el-button",{attrs:{type:"warning",plain:""},on:{click:e.reverseSelection}},[e._v("跨页反选")]):e._e()],1),r("el-scrollbar",{staticClass:"scroll-dialog"},[r("el-row",[r("table-com",{ref:e.refName,attrs:{"table-height-type":490,loading:e.loading,index:!1,"index-fixed":!1,selection:!0,multiple:e.multiple,"selection-fixed":!1,"table-column-sort":!1,"row-key":e.rowKey,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!1,"operate-fixed":!1,"table-selection":e.tableSelection},on:{selectionChange:e.selectionChange}})],1),r("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1),r("package-to-s-k-u",{attrs:{title:"供应商条码","is-show-print-btn":!1,"extra-info":{columnList:e.columnList1||[],tableData:e.dialogInfo1.subBarCodeList||[]}},model:{value:e.skuVisible,callback:function(t){e.skuVisible=t},expression:"skuVisible"}}),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.confirmDialog}},[e._v("确 定")]),r("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},a=[],i=(r("8e6e"),r("456d"),r("7f7f"),r("75fc")),o=(r("ac6a"),r("6762"),r("2fdb"),r("a8db")),l=r("bd86"),s=(r("c5f6"),r("ec26")),c=r("a2c6"),u=r("1790"),d=r("6bcc"),f=r("6bbd");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(l["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={name:"MaterialSelect",components:{PackageToSKU:c["a"]},mixins:[u["a"],f["a"]],props:{value:{required:!0,type:Boolean},title:{type:String,default:"物料选择"},multiple:{type:Boolean,default:!0},selection:{type:Array,default:function(){return[]}},max:{type:Number,default:0},ids:{type:Array,default:function(){return[]}},id:{type:[Number,String],default:""},extraInfo:{type:Object,default:function(){}}},dicts:[],data:function(){var e=this;return{loading:!1,refName:"modelSelectMaterialSelect",rowKey:"barCode",isCheckAll:!1,query:{},columnList:[{module:"word",prop:"materialCode",label:"物料编号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialSpec",label:"规格型号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"assessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"link",type:function(e){return Array.isArray(e.subBarCodeList)&&e.subBarCodeList.length?"primary":""},prop:"barCode",underline:!1,minWidth:150,label:"条码号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",handleClick:function(t){t.subBarCodeList.length&&(e.skuVisible=!0,e.dialogInfo1=t)}},{module:"word",prop:"number",label:"数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"storageNo",label:"当前库位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],columnList1:[{module:"word",prop:"materialCode",label:"物料编号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialSpec",label:"规格型号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"assessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"barCode",label:"条码号",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"number",label:"数量",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"storageNo",label:"当前库位",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],tableData:[],columnSets:[],tableSelection:[],deptSelectedInfo:{list:[],visible:!1,radio:""},skuVisible:!1,dialogInfo1:{}}},methods:{confirmDialog:function(){this.tableSelection.length?(this.$emit("confirm",this.tableSelection),this.beforeClose()):this.$message({message:"请选择物料",type:"warning"})},init:function(){var e=this,t=b({},this.query,{page:b({},this.pageInfo)},this.extraInfo);return new Promise((function(r,n){e.loading=!0,Object(d["i"])(b({},t)).then((function(t){var n=t.code,a=t.data;if(!n){var i=a.list,l=Object(o["a"])(a,["list"]);e.initPage(l),e.tableData=i.map((function(e){return b({uuid:Object(s["a"])(),deliveryNumber:e.orderNum},e)})),e.tableSelection=e.tableData.filter((function(t){return e.selection.includes(t.barCode)}))}e.loading=!1,r(t)})).catch((function(t){e.loading=!1,n(t)}))}))},checkAll:function(){var e=this;this.isCheckAll=!0;var t=b({},this.query,{},this.extraInfo,{page:{current:1,size:1e4}});return new Promise((function(r,n){Object(d["i"])(b({},t)).then((function(t){var n=t.code,a=t.data;if(!n){var i=a.list;if(i&&Array.isArray(i)&&i.length){if(e.tableSelection=i,!e.tableSelection.length)return e.isCheckAll=!1,void e.$notify.warning({title:"警告",message:"暂不支持跨页全选"});var o=e.rowKey,l=e.tableSelection.map((function(e){return e[o]})),s=[];e.tableData.forEach((function(t){function r(e){var t=e[o];return l.some((function(e){return e===t}))}r(t)&&(s.push(t),e.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(t,!0)})))})),e.tableSelection.forEach((function(t){var r=s.map((function(e){return e[o]}));r.includes(t[o])||e.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.toggleRowSelection(t,!0)}))}))}}r(t)})).catch((function(e){n(e)}))}))},reverseSelection:function(){var e=this;this.isCheckAll=!1,this.$nextTick((function(){e.$refs[e.refName].$refs.multipleTable.clearSelection(),e.tableSelection=[]}))},initSelect:function(){this.init()},selectionChange:function(e){this.tableSelection=Object(i["a"])(e)},handleUpdateTableSelected:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},handleDefault:function(){this.tableSelection=new Array(0)},beforeClose:function(e){this.$emit("input",!1),this.handleDefault(),"function"===typeof e&&e()},onDeptSelectConfirm:function(e){e.length&&(this.query.usedOffice=e[0].name)}}},g=p,h=(r("8306"),r("2877")),y=Object(h["a"])(g,n,a,!1,null,"61a9a88d",null);t["a"]=y.exports},"28c1":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o}));var n=r("bc43");function a(e){return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/deliveryReceiptPageList",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/print",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/pageList4ReturnMaterials",method:"post",data:e})}},"2c98":function(e,t,r){},3858:function(e,t,r){"use strict";var n=r("4f7b"),a=r.n(n);a.a},"4f7b":function(e,t,r){},"5c63":function(e,t,r){"use strict";var n=r("2c98"),a=r.n(n);a.a},"6bcc":function(e,t,r){"use strict";r.d(t,"i",(function(){return a})),r.d(t,"f",(function(){return i})),r.d(t,"g",(function(){return o})),r.d(t,"a",(function(){return l})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"h",(function(){return d})),r.d(t,"j",(function(){return f})),r.d(t,"k",(function(){return m})),r.d(t,"b",(function(){return b}));var n=r("bc43");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/enterWarehouse/wmsStockIn/detailPageList4ReturnMaterials",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/outWarehouse/wmsBillReturnMaterials/pageList",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/outWarehouse/wmsBillReturnMaterials/listItem",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/outWarehouse/wmsBillReturnMaterials/add",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/outWarehouse/wmsBillReturnMaterials/edit",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/outWarehouse/wmsBillReturnMaterials/delete",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/outWarehouse/wmsBillReturnMaterials/detail",method:"post",data:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillReturnMaterials/print",method:"post",data:e})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillReturnMaterials/submit",method:"post",data:e})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillReturnMaterials/withdraw",method:"post",data:e})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/outWarehouse/wmsBillReturnMaterials/audit",method:"post",data:e})}},"6f88":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("audit-wrapper",{attrs:{"extra-info":e.extraInfo}},[r("el-form",{ref:"form",attrs:{model:e.form,inline:"",rules:e.rules}},[r("el-row",[r("el-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[r("el-form-item",{attrs:{prop:"stockInNumber",label:"入库单："}},[r("el-link",{staticStyle:{width:"178px"},attrs:{disabled:["audit","detail","edit"].includes(e.pageType),type:"primary"},on:{click:function(t){e.stockInVisible=!0}}},[e._v("\n            "+e._s(e.form.stockInNumber?e.form.stockInNumber:"请选择"))])],1)],1),r("el-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[r("el-form-item",{attrs:{prop:"date",label:"凭证日期："}},[r("el-date-picker",{staticStyle:{width:"178px"},attrs:{disabled:["audit","detail"].includes(e.pageType),type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)],1),["audit","detail"].includes(e.pageType)?e._e():r("el-col",{staticStyle:{"margin-bottom":"15px"},attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[r("el-button",{attrs:{type:"primary",disabled:!e.form.stockInNumber},on:{click:e.handleAddMaterial}},[e._v("添加物料")])],1),r("el-col",{staticStyle:{"margin-bottom":"15px"},attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[r("table-com",{ref:"baseTableRef",staticStyle:{width:"100%"},attrs:{loading:!1,selection:!1,"table-data":e.form.detailList,"column-list":e.columnList,"operation-width":120,"table-column-sort":!1,"show-operate":!["audit","detail"].includes(e.pageType)},on:{rowClick:e.handleRowClick,refresh:e.searchInit},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.handleDelete(t.$index)}}},[e._v("删除")])]}}])})],1),"audit"===e.pageType?r("el-col",{staticStyle:{"margin-bottom":"15px"},attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[r("el-form-item",{staticClass:"approval-opinion",attrs:{prop:"message",label:"审批意见："}},[r("el-input",{attrs:{type:"textarea",placeholder:"请填写审批意见",rows:5},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}})],1)],1):e._e()],1)],1),r("div",{staticClass:"btn-context"},["audit"===e.pageType?[r("el-button",{attrs:{type:"primary",loading:e.buttonLoading},on:{click:function(t){return e.onAudit(1)}}},[e._v("通 过")]),r("el-button",{attrs:{type:"danger",loading:e.buttonLoading},on:{click:function(t){return e.onAudit(0)}}},[e._v("驳 回")]),r("el-button",{attrs:{type:"primary",loading:e.buttonLoading},on:{click:function(t){return e.onAudit(2)}}},[e._v("不 通 过")])]:e._e(),"add"===e.pageType?[r("el-button",{attrs:{type:"primary",loading:e.buttonLoading},on:{click:function(t){return e.onSave("form")}}},[e._v("保 存")])]:e._e(),"edit"===e.pageType?[r("el-button",{attrs:{type:"primary",loading:e.buttonLoading},on:{click:function(t){return e.onSave("form")}}},[e._v("保 存")])]:e._e(),r("el-button",{attrs:{loading:e.buttonLoading},on:{click:e.goBack}},[e._v("取消")])],2),r("warehousing-entry",{attrs:{multiple:!1},on:{confirm:e.warehousingConfirm},model:{value:e.stockInVisible,callback:function(t){e.stockInVisible=t},expression:"stockInVisible"}}),r("material-dialog",{attrs:{selection:e.form.detailList.map((function(e){return e.barcodeNumber})),"extra-info":Object.assign({},{entity:e.entity},"edit"===e.pageType&&{returnMaterialsNumber:e.$route.query.billNumber})},on:{confirm:e.onSelectConfirm},model:{value:e.materialVisible,callback:function(t){e.materialVisible=t},expression:"materialVisible"}}),r("package-to-s-k-u",{attrs:{title:"供应商条码","is-show-print-btn":!1,"extra-info":{columnList:e.columnList1||[],tableData:e.dialogInfo1.subBarCodeList||[]}},model:{value:e.skuVisible,callback:function(t){e.skuVisible=t},expression:"skuVisible"}})],1)},a=[],i=(r("8e6e"),r("456d"),r("6762"),r("96cf"),r("3b8d")),o=(r("ac6a"),r("5df3"),r("7f7f"),r("a481"),r("bd86")),l=r("2f62"),s=r("c1df"),c=r.n(s),u=r("6bcc"),d=r("1790"),f=r("282d"),m=r("ef4d"),b=r("8c8e"),p=r("a2c6"),g=r("fa7d");function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}c.a.locale("zh-cn");var w=function(){return{stockInNumber:"",stockInId:"",date:"",message:"",detailList:[]}},v={components:{MaterialDialog:f["a"],AuditWrapper:m["a"],WarehousingEntry:b["a"],PackageToSKU:p["a"]},mixins:[d["a"]],props:{},data:function(){var e=this;return{stockInVisible:!1,columnList:[{module:"word",prop:"materialCode",label:"物料编号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialSpec",label:"规格型号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialAssessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"link",type:function(e){return Array.isArray(e.subBarCodeList)&&e.subBarCodeList.length?"primary":""},prop:"barcodeNumber",underline:!1,minWidth:150,label:"条码号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center",handleClick:function(t){t.subBarCodeList.length&&(e.skuVisible=!0,e.dialogInfo1=t)}},{module:"word",prop:"num",label:"数量",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],columnList1:[{module:"word",prop:"materialCode",label:"物料编号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialName",label:"物料名称",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialSpec",label:"规格型号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"materialAssessType_dictText",label:"评估类型",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,headerAlign:"center"},{module:"word",prop:"barcodeNumber",label:"条码号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"num",label:"数量",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"unitName",label:"计量单位",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],pullListConfig:[{api:"",dataKey:"",name:""}],form:w(),rules:{stockInNumber:[{required:!0,message:"请输入入库单号",trigger:"change"}],date:[{required:!0,message:"请选择凭证日期",trigger:"change"}],message:[{required:!0,message:"请填写审批意见",trigger:"blur"}]},materialVisible:!1,buttonLoading:!1,extraInfo:null,skuVisible:!1,dialogInfo1:{}}},computed:y({},Object(l["c"])("app",{token:"token",userInfo:"userInfo"}),{ids:function(){return this.form.detailList.map((function(e){return e.id}))},pageType:function(){return"auditHistory"===this.$route.query.type?"detail":this.$route.name.replace("BillReturnMaterials","").toLowerCase()||"add"},entity:function(){return{id:this.form.stockInId}}}),watch:{},mounted:function(){"add"===this.pageType&&(this.form.date=c()(new Date).format("YYYY-MM-DD")),"add"!==this.pageType&&this.getDetail()},methods:{onSave:function(e){var t=this,r={add:u["a"],edit:u["d"]},n=r[this.pageType];this.$refs[e].validate((function(e){if(!e)return!1;t.form.detailList.length?(t.buttonLoading=!0,n(y({},t.form)).then((function(e){var r=e.code;r||(t.$message({message:"操作成功",type:"success"}),t.goBack()),t.buttonLoading=!1})).catch((function(e){t.buttonLoading=!1}))):t.$message({message:"至少新增一条物料",type:"warning"})}))},handleAddMaterial:function(){this.materialVisible=!0},onSelectedMaterial:function(e){e.length&&(this.form.detailList=e.map((function(e){var t=e.id,r=e.materialCode,n=e.materialName,a=e.materialAssessType,i=e.materialAssessType_dictText,o=e.batchNo,l=e.barcodeNumber,s=e.num,c=e.currentPosition,u=e.materialId,d=e.unitMeasureId,f=e.unitName,m=e.storageId;return{id:t,materialCode:r,materialName:n,materialAssessType:a,materialAssessType_dictText:i,batchNo:o,barcodeNumber:l,num:s,currentPosition:c,materialId:u,unitMeasureId:d,unitName:f,storageId:m}})))},getPullList:function(){var e=this,t=this.pullListConfig.map((function(e){return e.api}));Promise.all(t).then((function(t){t.length&&t.forEach((function(t,r){var n=e.pullListConfig[r].dataKey;e[n]=t.code?[]:t.data}))})).catch((function(e){}))},handleDelete:function(e){this.form.detailList.splice(e,1)},getDetail:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(g["c"])(Object(u["e"])({billNumber:this.$route.query.billNumber}));case 2:if(t=e.sent,t.success){e.next=5;break}return e.abrupt("return");case 5:this.form=t.data,this.extraInfo=t.data;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleRowClick:function(e){e.row;var t=e.column;e.cell,e.event;if("操作"===t.label)return!1},onSelectConfirm:function(e){e.length&&(e=e.map((function(e){return y({num:e.number,barcodeNumber:e.barCode},e)})),this.form.detailList=e)},warehousingConfirm:function(e){e.length&&(this.form.detailList=[],this.form.stockInNumber=e[0].billNumber,this.form.stockInId=e[0].id)},goBack:function(){var e=Object.assign({},this.$route);this.$store.dispatch("tagsView/delView",e),this.$refs.form.resetFields(),this.form=w();var t=["add","edit","detail"];t.includes(this.pageType)?this.$router.push({name:"OutBoundReturnOfGoods"}):this.$router.go(-1)},onAudit:function(e){var t=this,r={1:"该工单即将审批通过，是否继续？",0:"该工单即将驳回, 是否继续?",2:"该工单即将不通过, 是否继续?"}[e];this.$refs.form.validate(function(){var n=Object(i["a"])(regeneratorRuntime.mark((function n(a){var i,o,l,s,c,d,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(g["b"])(t.$confirm(r,"提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning",cancelButtonClass:"btn-custom-cancel",lockScroll:!1}));case 4:if(i=n.sent,i.success){n.next=7;break}return n.abrupt("return");case 7:return t.buttonLoading=!0,o=t.$route.params.id,l=t.$route.query,s=l.billNumber,c=l.taskId,d=l.processInstanceId,n.next=12,Object(g["c"])(Object(u["b"])({businessId:o,billNumber:s,taskId:c,processInstanceId:d,approval:e,message:t.form.message}));case 12:if(f=n.sent,t.buttonLoading=!1,f.success){n.next=16;break}return n.abrupt("return");case 16:t.$message({message:"操作成功",type:"success"}),t.goBack();case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}}},x=v,k=(r("5c63"),r("2877")),O=Object(k["a"])(x,n,a,!1,null,"3ee2de00",null);t["default"]=O.exports},8306:function(e,t,r){"use strict";var n=r("0d68"),a=r.n(n);a.a},"8c8e":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,top:"5vh",visible:e.value,"show-close":!0,width:"920px","lock-scroll":!1,"destroy-on-close":!0,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{open:e.initSelect}},[r("el-scrollbar",{staticClass:"scroll-dialog"},[r("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{prop:"billNumber"}},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{placeholder:"入库单号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInit(t)}},model:{value:e.query.billNumber,callback:function(t){e.$set(e.query,"billNumber","string"===typeof t?t.trim():t)},expression:"query.billNumber"}})],1),r("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchInit}},[e._v("搜索")])],1),r("el-row",[r("table-com",{ref:e.refName,attrs:{"table-height-type":490,loading:e.loading,index:!1,"index-fixed":!1,selection:!0,multiple:e.multiple,"selection-fixed":!1,"table-column-sort":!1,"table-data":e.tableData,"column-list":e.columnList,"show-operate":!1,"operate-fixed":!1,"table-selection":e.tableSelection},on:{selectionChange:e.selectionChange}})],1),r("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.confirmDialog}},[e._v("确 定")]),r("el-button",{on:{click:e.beforeClose}},[e._v("取 消")])],1)],1)},a=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("7f7f"),r("75fc")),o=(r("6762"),r("2fdb"),r("a8db")),l=r("bd86"),s=(r("c5f6"),r("ec26")),c=r("1790"),u=r("28c1"),d=r("6bbd");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(l["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b={name:"MaterialSelect",mixins:[c["a"],d["a"]],props:{value:{required:!0,type:Boolean},title:{type:String,default:"入库单选择"},multiple:{type:Boolean,default:!0},selection:{type:Array,default:function(){return[]}},max:{type:Number,default:0},ids:{type:Array,default:function(){return[]}},extraInfo:{type:Object,default:function(){}}},dicts:[],data:function(){return{loading:!1,refName:"modelSelectMaterialSelect",query:{billNumber:""},tableData:[],columnList:[{module:"word",prop:"billNumber",label:"单号",align:"center",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"source",label:"来源(供应商或生产单位)",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"documentDate",label:"日期",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"storekeeperName",label:"库管员",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}],columnSets:[],tableSelection:[],deptSelectedInfo:{list:[],visible:!1,radio:""}}},methods:{confirmDialog:function(){this.tableSelection.length?(this.$emit("confirm",this.tableSelection),this.beforeClose()):this.$message({message:"请选择入库单",type:"warning"})},init:function(){var e=this,t=m({},this.query,{page:m({},this.pageInfo)},this.extraInfo);return new Promise((function(r,n){Object(u["c"])(m({},t)).then((function(t){var n=t.code,a=t.data;if(!n){var i=a.list,l=Object(o["a"])(a,["list"]);e.initPage(l),e.tableData=i.map((function(e){return m({uuid:Object(s["a"])(),deliveryNumber:e.orderNum},e)})),e.tableSelection=e.tableData.filter((function(t){return e.selection.includes(t.id)}))}e.loading=!1,r(t)})).catch((function(t){e.loading=!1,n(t)}))}))},initSelect:function(){this.init()},selectionChange:function(e){this.tableSelection=Object(i["a"])(e)},handleUpdateTableSelected:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},handleDefault:function(){this.tableSelection=new Array(0)},beforeClose:function(e){this.$emit("input",!1),this.handleDefault(),"function"===typeof e&&e()},onDeptSelectConfirm:function(e){e.length&&(this.query.usedOffice=e[0].name)},resetForm:function(e){this.$refs[e].resetFields(),this.searchInit()}}},p=b,g=(r("3858"),r("2877")),h=Object(g["a"])(p,n,a,!1,null,"18b772d4",null);t["a"]=h.exports},ec26:function(e,t,r){"use strict";const n="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var a={randomUUID:n};let i;const o=new Uint8Array(16);function l(){if(!i&&(i="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(o)}const s=[];for(let d=0;d<256;++d)s.push((d+256).toString(16).slice(1));function c(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}function u(e,t,r){if(a.randomUUID&&!t&&!e)return a.randomUUID();e=e||{};const n=e.random||(e.rng||l)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return c(n)}t["a"]=u}}]);
//# sourceMappingURL=BillReturnMaterialsAdd.dfc96188.js.map