(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DashboardMessage"],{2167:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"clearfix top-filter"},[n("el-form",{ref:"filterItem",attrs:{model:e.query,inline:""}},[n("el-form-item",{attrs:{prop:"isRead"}},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{placeholder:"消息状态搜索"},model:{value:e.query.isRead,callback:function(t){e.$set(e.query,"isRead",t)},expression:"query.isRead"}},e._l(e.readTypeOpts,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{prop:"type"}},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"178px"},attrs:{filterable:"",clearable:"",placeholder:"消息类型"},model:{value:e.query.type,callback:function(t){e.$set(e.query,"type",t)},expression:"query.type"}},e._l(e.dict["wms_msg_remind_type"],(function(e){return n("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.init}},[e._v("搜索")]),n("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("filterItem")}}},[e._v("重置")])],1)],1),n("el-row",[n("table-com",{ref:"baseTableRef",attrs:{"refresh-key":e.refreshKey,loading:e.loading,index:!0,"index-fixed":!1,selection:!1,multiple:!1,"selection-fixed":!1,"table-column-sort":!1,"table-data":e.tableData,"column-list":e.columnList,"show-operate":e.showOperate,"operate-fixed":!1,"table-selection":e.tableSelection,"operation-width":100},on:{selectionChange:e.selectionChange,refresh:e.searchInit},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isRead?[t.row.link?n("el-link",{attrs:{type:"info"},on:{click:function(n){return e.hanleViewLink(t.row)}}},[e._v("查看")]):n("el-link",{attrs:{type:"info"}},[e._v("已读")])]:n("el-link",{attrs:{type:"danger"},on:{click:function(n){return e.handleMarkRead(t.row)}}},[e._v("未读")])]}}])})],1),n("pagination",{attrs:{page:e.pageInfo.current,limit:e.pageInfo.size,total:e.total},on:{"update:page":function(t){return e.$set(e.pageInfo,"current",t)},"update:limit":function(t){return e.$set(e.pageInfo,"size",t)},pagination:e.init}})],1)},a=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("75fc")),o=(n("b54a"),n("a8db")),l=n("bd86"),s=n("1790"),c=n("333d"),u=n("bc43");function f(e){return Object(u["a"])({url:"/wms/task/msgRemind/pageList",method:"post",data:e})}function d(e){return Object(u["a"])({url:"/wms/task/msgRemind/readMsg",method:"post",data:e})}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={name:"MesDashboardMessage",components:{Pagination:c["a"]},mixins:[s["a"]],dicts:["wms_msg_remind_type"],data:function(){return{query:{type:"",isRead:""},readTypeOpts:[{value:0,label:"未读"},{value:1,label:"已读"}],refreshKey:1,showOperate:!0,loading:!1,tableData:[],tableSelection:[],columnList:[{module:"word",prop:"title",label:"标题",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"content",label:"内容",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"dataSources",label:"来源",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:function(e){var t={0:"WMS",1:"SAP"};return t[e.dataSources]},headerAlign:"center"},{module:"word",prop:"fromUserName",label:"发送人",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"remidTime",label:"发送日期",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"},{module:"word",prop:"toUserName",label:"接收人",align:"center",minWidth:"",fixed:!1,sortable:!1,resizable:!0,formatter:null,headerAlign:"center"}]}},computed:{},mounted:function(){this.init()},methods:{init:function(){var e=this;return this.loading=!0,new Promise((function(t,n){f(b({page:b({},e.pageInfo)},e.query)).then((function(n){var r=n.code,a=n.data;if(!r){var i=a.list,l=Object(o["a"])(a,["list"]);e.initPage(l),e.tableData=i.map((function(e){var t=e.type,n=Object(o["a"])(e,["type"]),r="";return 0===t?r="回款计划提醒":1===t&&(r="拜访提醒"),b({type_show:r},n)}))}e.loading=!1,t(n)})).catch((function(t){e.loading=!1,n(t)}))}))},handleMarkRead:function(e){var t=this;d({id:e.id}).then((function(n){var r=n.code;r||(t.$notify({title:"".concat(e.title," 标记已读！"),type:"success"}),t.init(),t.hanleViewLink(e))}))},hanleViewLink:function(e){if(e.link){var t=e.param&&e.paramMap||{serviceId:e.serviceId};this.$router.push({name:e.link,params:Object.assign({},t,{pageSource:"message"}),query:e.query?e.queryMap:{}})}},resetForm:function(e){this.$refs[e].resetFields(),this.init()},selectionChange:function(e){this.tableSelection=Object(i["a"])(e)}}},h=m,g=n("2877"),y=Object(g["a"])(h,r,a,!1,null,"2a656b7f",null);t["default"]=y.exports},"32a6":function(e,t,n){var r=n("241e"),a=n("c3a1");n("ce7e")("keys",(function(){return function(e){return a(r(e))}}))},"8aae":function(e,t,n){n("32a6"),e.exports=n("584a").Object.keys},a4bb:function(e,t,n){e.exports=n("8aae")},a8db:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("e265"),a=n.n(r),i=n("a4bb"),o=n.n(i);function l(e,t){if(null==e)return{};var n,r,a={},i=o()(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function s(e,t){if(null==e)return{};var n,r,i=l(e,t);if(a.a){var o=a()(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},ce7e:function(e,t,n){var r=n("63b6"),a=n("584a"),i=n("294c");e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],o={};o[e]=t(n),r(r.S+r.F*i((function(){n(1)})),"Object",o)}},e265:function(e,t,n){e.exports=n("ed33")},ed33:function(e,t,n){n("014b"),e.exports=n("584a").Object.getOwnPropertySymbols}}]);
//# sourceMappingURL=DashboardMessage.ba568e48.js.map